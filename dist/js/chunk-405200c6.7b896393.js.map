{"version":3,"sources":["webpack:///./src/components/modals/ChangeAvatarModal.vue?958a","webpack:///src/components/modals/ChangeAvatarModal.vue","webpack:///./src/components/modals/ChangeAvatarModal.vue?d552","webpack:///./src/components/modals/ChangeAvatarModal.vue","webpack:///./src/components/pages/Settings.vue?8c2a","webpack:///src/components/pages/Settings.vue","webpack:///./src/components/pages/Settings.vue?8935","webpack:///./src/components/pages/Settings.vue","webpack:///./src/components/pages/Settings.vue?78dd","webpack:///./src/components/modals/ChangeAvatarModal.vue?172c"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","active","staticClass","on","$event","$emit","_v","_s","title","$t","ref","attrs","onFileSelected","_e","isLoading","formData","onConfirmClicked","staticRenderFns","name","mixins","components","FileUpload","ModalFooter","props","data","computed","methods","watch","$refs","uploadAvatarField","reset","component","organisation","organisationLogoPath","showAvatarModal","saveSettings","model","value","form","callback","$$v","$set","expression","button","loading","save","error","errors","modals","avatar","saveAvatar","uploadAvatarFile","hideAvatarModal","ChangeAvatarModal","ComboboxBoolean","TextField","organisationLogoKey","Date","getUTCDate","hours_by_day","original_file_name","chat_token_slack","mounted","Object","assign","toISOString","saveOrganisation","uploadOrganisationLogo","use_original_file_name","metaInfo"],"mappings":"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","file":"js/chunk-405200c6.7b896393.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\r\n  'modal': true,\r\n  'is-active': _vm.active\r\n}},[_c('div',{staticClass:\"modal-background\",on:{\"click\":function($event){return _vm.$emit('cancel')}}}),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"box content\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]),_c('p',[_vm._v(\" \"+_vm._s(_vm.$t(\"main.csv.select_file\"))+\" \")]),_c('file-upload',{ref:\"uploadAvatarField\",attrs:{\"label\":_vm.$t('main.csv.upload_file'),\"accept\":\".png,.jpg,.jpeg\"},on:{\"fileselected\":_vm.onFileSelected}}),(_vm.isError)?_c('p',{staticClass:\"error\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"profile.avatar.error_upload\"))+\" \")]):_vm._e(),_c('modal-footer',{attrs:{\"error-text\":_vm.$t('productions.metadata.error'),\"is-loading\":_vm.isLoading,\"is-disabled\":!_vm.formData},on:{\"confirm\":_vm.onConfirmClicked,\"cancel\":function($event){return _vm.$emit('cancel')}}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div :class=\"{\r\n  'modal': true,\r\n  'is-active': active\r\n}\">\r\n  <div class=\"modal-background\" @click=\"$emit('cancel')\" ></div>\r\n\r\n  <div class=\"modal-content\">\r\n\r\n    <div class=\"box content\">\r\n      <h1 class=\"title\">\r\n        {{ title }}\r\n      </h1>\r\n\r\n      <p>\r\n        {{ $t(\"main.csv.select_file\") }}\r\n      </p>\r\n\r\n      <file-upload\r\n        ref=\"uploadAvatarField\"\r\n        :label=\"$t('main.csv.upload_file')\"\r\n        @fileselected=\"onFileSelected\"\r\n        accept=\".png,.jpg,.jpeg\"\r\n      />\r\n\r\n      <p class=\"error\" v-if=\"isError\">\r\n        {{ $t(\"profile.avatar.error_upload\") }}\r\n      </p>\r\n\r\n      <modal-footer\r\n        :error-text=\"$t('productions.metadata.error')\"\r\n        :is-loading=\"isLoading\"\r\n        :is-disabled=\"!formData\"\r\n        @confirm=\"onConfirmClicked\"\r\n        @cancel=\"$emit('cancel')\"\r\n      />\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { modalMixin } from './base_modal'\r\nimport FileUpload from '../widgets/FileUpload.vue'\r\nimport ModalFooter from './ModalFooter.vue'\r\n\r\nexport default {\r\n  name: 'change-avatar-modal',\r\n  mixins: [modalMixin],\r\n\r\n  components: {\r\n    FileUpload,\r\n    ModalFooter\r\n  },\r\n\r\n  props: [\r\n    'active',\r\n    'cancelRoute',\r\n    'isLoading',\r\n    'isError',\r\n    'title'\r\n  ],\r\n\r\n  data () {\r\n    return {\r\n      formData: null\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n    ])\r\n  },\r\n\r\n  methods: {\r\n\r\n    ...mapActions([\r\n    ]),\r\n\r\n    onFileSelected (formData) {\r\n      this.formData = formData\r\n      this.$emit('fileselected', formData)\r\n    },\r\n\r\n    onConfirmClicked () {\r\n      this.$emit('confirm', this.formData)\r\n    }\r\n  },\r\n  watch: {\r\n    active () {\r\n      this.formData = null\r\n      this.$refs.uploadAvatarField.reset()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.modal-content .box p.text {\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.error {\r\n  margin-top: 1em;\r\n}\r\n\r\n.description {\r\n  margin-bottom: 1em;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangeAvatarModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangeAvatarModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChangeAvatarModal.vue?vue&type=template&id=0203a630&scoped=true&\"\nimport script from \"./ChangeAvatarModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ChangeAvatarModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChangeAvatarModal.vue?vue&type=style&index=0&id=0203a630&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0203a630\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings page\"},[_c('div',{staticClass:\"settings-content\"},[_c('div',{staticClass:\"settings-body\"},[_c('h2',[_vm._v(\" \"+_vm._s(_vm.$t('settings.title'))+\" \")]),_c('p',[_c('strong',[_vm._v(\" \"+_vm._s(_vm.$t('settings.logo'))+\" \")])]),(_vm.organisation.has_avatar)?_c('div',{staticClass:\"logo-wrapper\"},[_c('img',{attrs:{\"src\":_vm.organisationLogoPath}})]):_c('p',{staticClass:\"no-logo\"},[_vm._v(\" \"+_vm._s(_vm.$t('settings.no_logo'))+\" \")]),_c('p',[_c('button',{staticClass:\"button set-logo-button\",on:{\"click\":_vm.showAvatarModal}},[_vm._v(\" \"+_vm._s(_vm.$t('settings.set_logo'))+\" \")])]),_c('text-field',{staticClass:\"mt2\",attrs:{\"label\":_vm.$t('settings.fields.name')},on:{\"enter\":function($event){return _vm.saveSettings()}},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('text-field',{attrs:{\"label\":_vm.$t('settings.fields.hours_by_day'),\"type\":\"number\"},on:{\"enter\":function($event){return _vm.saveSettings()}},model:{value:(_vm.form.hours_by_day),callback:function ($$v) {_vm.$set(_vm.form, \"hours_by_day\", $$v)},expression:\"form.hours_by_day\"}}),_c('combobox-boolean',{attrs:{\"label\":_vm.$t('settings.fields.use_original_name')},on:{\"enter\":function($event){return _vm.saveSettings()}},model:{value:(_vm.form.use_original_file_name),callback:function ($$v) {_vm.$set(_vm.form, \"use_original_file_name\", $$v)},expression:\"form.use_original_file_name\"}}),_c('h2',[_vm._v(\" \"+_vm._s(_vm.$t('settings.integrations'))+\" \")]),_c('text-field',{attrs:{\"label\":_vm.$t('settings.fields.slack_token')},on:{\"enter\":function($event){return _vm.saveSettings()}},model:{value:(_vm.form.chat_token_slack),callback:function ($$v) {_vm.$set(_vm.form, \"chat_token_slack\", $$v)},expression:\"form.chat_token_slack\"}}),_c('button',{class:{\n          button: true,\n          'save-button': true,\n          'is-medium': true,\n          'is-loading': _vm.loading.save\n        },on:{\"click\":function($event){return _vm.saveSettings()}}},[_vm._v(\" \"+_vm._s(_vm.$t('settings.save.button'))+\" \")]),_c('p',{class:{\n          error: true,\n          'is-hidden': !_vm.errors.save\n        }},[_vm._v(\" \"+_vm._s(_vm.$t('settings.save.error'))+\" \")])],1)]),_c('change-avatar-modal',{attrs:{\"active\":_vm.modals.avatar,\"is-loading\":_vm.loading.saveAvatar,\"is-error\":_vm.errors.saveAvatar,\"title\":_vm.$t('settings.change_logo')},on:{\"confirm\":_vm.uploadAvatarFile,\"cancel\":_vm.hideAvatarModal}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"settings page\">\r\n    <div class=\"settings-content\">\r\n\r\n      <div class=\"settings-body\">\r\n        <h2>\r\n          {{ $t('settings.title') }}\r\n        </h2>\r\n        <p>\r\n        <strong>\r\n          {{ $t('settings.logo') }}\r\n        </strong>\r\n        </p>\r\n        <div class=\"logo-wrapper\" v-if=\"organisation.has_avatar\">\r\n          <img :src=\"organisationLogoPath\" />\r\n        </div>\r\n        <p class=\"no-logo\" v-else>\r\n          {{ $t('settings.no_logo') }}\r\n        </p>\r\n        <p>\r\n          <button class=\"button set-logo-button\" @click=\"showAvatarModal\">\r\n            {{ $t('settings.set_logo') }}\r\n          </button>\r\n        </p>\r\n        <text-field\r\n          class=\"mt2\"\r\n          :label=\"$t('settings.fields.name')\"\r\n          @enter=\"saveSettings()\"\r\n          v-model=\"form.name\"\r\n        />\r\n        <text-field\r\n          :label=\"$t('settings.fields.hours_by_day')\"\r\n          type=\"number\"\r\n          @enter=\"saveSettings()\"\r\n          v-model=\"form.hours_by_day\"\r\n        />\r\n        <combobox-boolean\r\n          :label=\"$t('settings.fields.use_original_name')\"\r\n          @enter=\"saveSettings()\"\r\n          v-model=\"form.use_original_file_name\"\r\n        />\r\n        <h2>\r\n          {{ $t('settings.integrations') }}\r\n        </h2>\r\n        <text-field\r\n          :label=\"$t('settings.fields.slack_token')\"\r\n          @enter=\"saveSettings()\"\r\n          v-model=\"form.chat_token_slack\"\r\n        />\r\n\r\n        <button\r\n          :class=\"{\r\n            button: true,\r\n            'save-button': true,\r\n            'is-medium': true,\r\n            'is-loading': loading.save\r\n          }\"\r\n          @click=\"saveSettings()\"\r\n        >\r\n          {{ $t('settings.save.button') }}\r\n        </button>\r\n        <p\r\n          :class=\"{\r\n            error: true,\r\n            'is-hidden': !errors.save\r\n          }\"\r\n        >\r\n          {{ $t('settings.save.error') }}\r\n        </p>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <change-avatar-modal\r\n      :active=\"modals.avatar\"\r\n      :is-loading=\"loading.saveAvatar\"\r\n      :is-error=\"errors.saveAvatar\"\r\n      :title=\"$t('settings.change_logo')\"\r\n      @confirm=\"uploadAvatarFile\"\r\n      @cancel=\"hideAvatarModal\"\r\n    />\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nimport ChangeAvatarModal from '../modals/ChangeAvatarModal'\r\nimport ComboboxBoolean from '../widgets/ComboboxBoolean'\r\nimport TextField from '../widgets/TextField'\r\n\r\nexport default {\r\n  name: 'settings',\r\n\r\n  components: {\r\n    ChangeAvatarModal,\r\n    ComboboxBoolean,\r\n    TextField\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      organisationLogoKey: new Date().getUTCDate(),\r\n      organisationLogoPath: '',\r\n      form: {\r\n        name: '',\r\n        hours_by_day: 0,\r\n        original_file_name: 'false',\r\n        chat_token_slack: ''\r\n      },\r\n      errors: {\r\n        save: false,\r\n        saveAvatar: false\r\n      },\r\n      loading: {\r\n        save: false,\r\n        saveAvatar: false\r\n      },\r\n      modals: {\r\n        avatar: false\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.form = Object.assign(this.form, this.organisation)\r\n    this.organisationLogoKey = 'key' + new Date().toISOString()\r\n    this.organisationLogoPath = '/api/pictures/thumbnails/organisations/' +\r\n                                `${this.organisation.id}.png`\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      'organisation'\r\n    ])\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      'changeAvatar',\r\n      'uploadOrganisationLogo',\r\n      'saveOrganisation'\r\n    ]),\r\n\r\n    hideAvatarModal () {\r\n      this.modals.avatar = false\r\n    },\r\n\r\n    saveSettings () {\r\n      this.loading.save = true\r\n      this.errors.save = false\r\n      this.saveOrganisation(this.form)\r\n        .then(() => {\r\n          this.loading.save = false\r\n          this.errors.save = false\r\n        })\r\n        .catch((err) => {\r\n          console.error(err)\r\n          this.loading.save = false\r\n          this.errors.save = true\r\n        })\r\n    },\r\n\r\n    uploadAvatarFile (formData) {\r\n      this.loading.saveAvatar = true\r\n      this.errors.saveAvatar = false\r\n      this.uploadOrganisationLogo(formData)\r\n        .then(() => {\r\n          setTimeout(() => {\r\n            this.loading.saveAvatar = false\r\n            this.modals.avatar = false\r\n            this.organisationLogoPath =\r\n              '/api/pictures/thumbnails/organisations/' +\r\n              `${this.organisation.id}.png?t=` + new Date().toISOString()\r\n          }, 500)\r\n        })\r\n        .catch((err) => {\r\n          console.error(err)\r\n          this.loading.saveAvatar = false\r\n          this.errors.saveAvatar = true\r\n        })\r\n    },\r\n\r\n    showAvatarModal () {\r\n      this.modals.avatar = true\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    organisation () {\r\n      this.form = {\r\n        name: this.organisation.name,\r\n        hours_by_day: this.organisation.hours_by_day,\r\n        use_original_file_name:\r\n          this.organisation.use_original_file_name ? 'true' : 'false',\r\n        chat_token_slack: this.organisation.chat_token_slack\r\n      }\r\n    }\r\n  },\r\n\r\n  metaInfo () {\r\n    return {\r\n      title: `${this.$t('settings.title')} - Kitsu`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dark {\r\n  .settings {\r\n    background: #36393F;\r\n    color: $white-grey;\r\n  }\r\n\r\n  .settings-content {\r\n    background: $dark-grey-lighter;\r\n    color: $white-grey;\r\n  }\r\n\r\n  .set-logo-button {\r\n    background-color: $grey;\r\n    color: $dark-grey\r\n  }\r\n}\r\n\r\nstrong {\r\n  text-transform: uppercase;\r\n}\r\n\r\n.settings {\r\n  background: $white-grey;\r\n  height: 100vh;\r\n}\r\n\r\n.settings-content {\r\n  background: white;\r\n  max-width: 500px;\r\n  margin: auto;\r\n  margin-top: 2em;\r\n  margin-bottom: 2em;\r\n  box-shadow: rgba(0,0,0,0.15) 0px 1px 4px 2px;\r\n  border-radius: 1em;\r\n}\r\n\r\n.settings-body {\r\n  padding: 2em;\r\n}\r\n\r\ninput, select, span.select {\r\n  width: 100%;\r\n}\r\n\r\nh2 {\r\n  border-bottom: 1px solid #DDD;\r\n  font-size: 1.5em;\r\n  margin-top: 2em;\r\n  margin-bottom: 1em;\r\n}\r\n\r\nh2:first-child {\r\n  margin-top: 0em;\r\n}\r\n\r\n.save-button {\r\n  background: $green;\r\n  border-radius: 2em;\r\n  border-color: $green;\r\n  color: white;\r\n  width: 100%;\r\n}\r\n\r\n.save-button:hover {\r\n  background: $light-green;\r\n  border-color: $light-green;\r\n}\r\n\r\n.logo-wrapper {\r\n  padding: 0;\r\n\r\n  img {\r\n    width: 100px;\r\n  }\r\n}\r\n\r\n.no-logo {\r\n  margin-bottom: 1em;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=dfddd19e&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=dfddd19e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dfddd19e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=dfddd19e&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangeAvatarModal.vue?vue&type=style&index=0&id=0203a630&lang=scss&scoped=true&\""],"sourceRoot":""}