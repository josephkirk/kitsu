(function(e){function t(t){for(var i,n,r=t[0],c=t[1],l=t[2],d=0,u=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&u.push(a[n][0]),a[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);p&&p(t);while(u.length)u.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,n=1;n<s.length;n++){var r=s[n];0!==a[r]&&(i=!1)}i&&(o.splice(t--,1),e=c(c.s=s[0]))}return e}var i={},n={app:0},a={app:0},o=[];function r(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-159a993a":"8590992a","chunk-199f9e08":"bb410591","chunk-1ce5f58f":"8c1c654e","chunk-1e3739e4":"553963e9","chunk-1e746b6e":"5992d523","chunk-1f21b49d":"75deff69","chunk-24f48247":"a0416648","chunk-252889e4":"8d522edf","chunk-277136e8":"88a6b9bd","chunk-28fe89dc":"24ec0725","chunk-2d0c7360":"68ce5d2e","chunk-2d0dacb1":"0d90b3db","chunk-2d21082e":"a1b46f26","chunk-33595ba2":"25326578","chunk-3ac1d238":"24f20fbf","chunk-405200c6":"03a532fc","chunk-4557dc8a":"45444977","chunk-458f2823":"c469a541","chunk-57e668be":"a3735e95","chunk-5ffd6bb0":"fdf4fdbf","chunk-6e2b0e55":"c99963b9","chunk-73eac616":"742d65b1","chunk-75a7536b":"142dc584","chunk-825718d2":"324ae3c9","chunk-83efa44c":"2f07bf5d","chunk-a7a54222":"7d6a5831","chunk-b318697c":"d0084d04","chunk-c57c15e6":"69ec6286","chunk-cd99eafc":"521edbe1"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-159a993a":1,"chunk-199f9e08":1,"chunk-1ce5f58f":1,"chunk-1e3739e4":1,"chunk-1e746b6e":1,"chunk-1f21b49d":1,"chunk-24f48247":1,"chunk-252889e4":1,"chunk-277136e8":1,"chunk-28fe89dc":1,"chunk-33595ba2":1,"chunk-3ac1d238":1,"chunk-405200c6":1,"chunk-4557dc8a":1,"chunk-458f2823":1,"chunk-57e668be":1,"chunk-5ffd6bb0":1,"chunk-6e2b0e55":1,"chunk-73eac616":1,"chunk-75a7536b":1,"chunk-825718d2":1,"chunk-83efa44c":1,"chunk-a7a54222":1,"chunk-b318697c":1,"chunk-c57c15e6":1,"chunk-cd99eafc":1};n[e]?t.push(n[e]):0!==n[e]&&s[e]&&t.push(n[e]=new Promise((function(t,s){for(var i="css/"+({}[e]||e)+"."+{"chunk-159a993a":"81f6e40d","chunk-199f9e08":"75296c49","chunk-1ce5f58f":"4bfb6971","chunk-1e3739e4":"4fa7f363","chunk-1e746b6e":"c16680c8","chunk-1f21b49d":"333bd60d","chunk-24f48247":"b30dd7bc","chunk-252889e4":"418965ed","chunk-277136e8":"2117ccd1","chunk-28fe89dc":"65879d56","chunk-2d0c7360":"31d6cfe0","chunk-2d0dacb1":"31d6cfe0","chunk-2d21082e":"31d6cfe0","chunk-33595ba2":"62ccf175","chunk-3ac1d238":"89908b05","chunk-405200c6":"088b8866","chunk-4557dc8a":"45156d1b","chunk-458f2823":"372f750a","chunk-57e668be":"554eb141","chunk-5ffd6bb0":"ca5b71f7","chunk-6e2b0e55":"c85e2819","chunk-73eac616":"863c8fa5","chunk-75a7536b":"3e027208","chunk-825718d2":"89b9016e","chunk-83efa44c":"d32440e7","chunk-a7a54222":"fe9d010d","chunk-b318697c":"f4832122","chunk-c57c15e6":"da7be857","chunk-cd99eafc":"ba2a9e12"}[e]+".css",a=c.p+i,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var l=o[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===i||d===a))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===i||d===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete n[e],p.parentNode.removeChild(p),s(o)},p.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){n[e]=0})));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise((function(t,s){i=a[e]=[t,s]}));t.push(i[2]=o);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=r(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(p);var s=a[e];if(0!==s){if(s){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",u.name="ChunkLoadError",u.type=i,u.request=n,s[1](u)}a[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(s,i,function(t){return e[t]}.bind(null,i));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0073":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"person-name"},[e._v(" "+e._s(e.person.first_name+" "+e.person.last_name)+" ")])},n=[],a=s("5530"),o=s("2f62"),r={name:"person-name",props:{person:{type:Object,required:!0}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])({},Object(o["b"])([]))},c=r,l=(s("ea46"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"51084c62",null);t["a"]=d.exports},"0185":function(e,t,s){},"021e":function(e,t,s){"use strict";s("071d")},"0263":function(e,t,s){"use strict";var i,n=s("ade3"),a=s("5530"),o=s("2909"),r=(s("99af"),s("b0c0"),s("4d90"),s("d3b7"),s("25f0"),s("159b"),s("07ac"),s("fb6a"),s("b64b"),s("d81d"),s("caad"),s("3ca3"),s("ddb0"),s("7db0"),s("a4d3"),s("e01a"),s("4de4"),s("b680"),s("a15b"),s("2532"),s("c740"),s("a434"),s("ba4c")),c=s.n(r),l=s("c1df"),d=s.n(l),u=s("ce6b"),p=s("edbf"),m={getShot:function(e,t){return p["a"].getModel("shots",e)},getShots:function(e,t,s){var i="/api/data/shots/with-tasks";e&&(i+="?project_id=".concat(e.id)),t&&(i+="&episode_id=".concat(t.id)),p["a"].get(i,s)},getSequence:function(e){return p["a"].getModel("sequences",e)},getSequences:function(e,t,s){var i="/api/data/projects/".concat(e.id,"/sequences");t&&(i="/api/data/episodes/".concat(t.id,"/sequences")),p["a"].get(i,s)},getEpisode:function(e){return p["a"].getModel("episodes",e)},getEpisodes:function(e){var t="/api/data/projects/".concat(e.id,"/episodes");return p["a"].pget(t)},getShotType:function(e){p["a"].get("/api/data/shot-type",e)},newShot:function(e){var t={name:e.name,description:e.description,sequence_id:e.sequence_id};return p["a"].ppost("/api/data/projects/".concat(e.project_id,"/shots"),t)},newSequence:function(e){var t={name:e.name,episode_id:e.episode_id},s="/api/data/projects/".concat(e.project_id,"/sequences");return p["a"].ppost(s,t)},newEpisode:function(e){var t={name:e.name},s="/api/data/projects/".concat(e.project_id,"/episodes");return p["a"].ppost(s,t)},updateShot:function(e){var t={name:e.name,parent_id:e.sequence_id,description:e.description,nb_frames:parseInt(e.nb_frames),data:e.data};void 0===e.frameOut&&void 0===e.frameIn&&void 0===e.fps||Object.assign(t.data,{frame_in:e.frameIn,frame_out:e.frameOut,fps:e.fps});var s="/api/data/entities/".concat(e.id);return p["a"].pput(s,t)},updateSequence:function(e){var t={name:e.name,description:e.description};return p["a"].pput("/api/data/entities/".concat(e.id),t)},updateEpisode:function(e){var t={name:e.name,description:e.description};return p["a"].pput("/api/data/entities/".concat(e.id),t)},deleteShot:function(e){return e.canceled?p["a"].pdel("/api/data/shots/".concat(e.id,"?force=true")):p["a"].pdel("/api/data/shots/".concat(e.id))},deleteSequence:function(e){return p["a"].pdel("/api/data/sequences/".concat(e.id,"?force=true"))},deleteEpisode:function(e){return p["a"].pdel("/api/data/episodes/".concat(e.id,"?force=true"))},restoreShot:function(e,t){var s={canceled:!1};return p["a"].pput("/api/data/entities/".concat(e.id),s)},postCsv:function(e,t,s){var i="/api/import/csv/projects/".concat(e.id,"/shots");return s&&(i+="?update=true"),p["a"].ppost(i,t)},getEpisodeStats:function(e){return p["a"].pget("/api/data/projects/".concat(e,"/episodes/stats"))},getEpisodeRetakeStats:function(e){var t="/api/data/projects/".concat(e,"/episodes/retake-stats");return p["a"].pget(t)},loadShotHistory:function(e){return p["a"].pget("/api/data/shots/".concat(e,"/versions"))}},h=s("fa53"),f=s("52ad"),_=s("ef8b"),v=s("de26"),g=s("2229"),y=s("6185"),b=s("66e7"),k=s("09d3"),w=s("bcd2"),C=s("3657"),S=s("2017"),T=s("ca76"),x=s("9fb0"),E="average",P="count",O="total",A={shots:[],shotIndex:[]},j={getTask:function(e){return h["a"].state.taskMap[e]},getTaskStatus:function(e){return h["a"].state.taskStatusMap[e]},getTaskType:function(e){return _["a"].state.taskTypeMap[e]},getPerson:function(e){return f["a"].state.personMap[e]},getShotName:function(e){var t="".concat(e.sequence_name," / ").concat(e.name);return e.episode_name&&(t="".concat(e.episode_name," / ").concat(t)),t},dateDigit:function(e){return e.toString().padStart(2,"0")},populateTask:function(e,t){e.name=j.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=j.getTaskStatus(e.task_status_id).short_name;var s=j.getShotName(t);return Object.assign(e,{project_id:t.production_id,entity_name:s,entity_type_name:"Shot",sequence_name:t.sequence_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},setListStats:function(e,t){var s=0,i=0,n=0;t.forEach((function(e){s+=e.timeSpent,i+=e.estimation,n+=e.nb_frames})),Object.assign(e,{displayedShotsLength:t.length,displayedShotsTimeSpent:s,displayedShotsEstimation:i,displayedShotsFrames:n})},sortValidationColumns:function(e,t,s){var i=Object(o["a"])(e);return Object(g["p"])(i,s)},getPeriod:function(e,t){var s,i=j.getTaskEndDate(e,t);return"day"===t?s=d()(i,"YYYY-MM").format("YYYY-MM"):"month"===t?s=d()(i,"YYYY").format("YYYY"):"week"===t&&(s=d()(i,"YYYY-MM-DD").format("GGGG")),s},getDateFromParameters:function(e){var t=e.detailLevel,s=e.year,i=e.week,n=e.month,a=e.day;return"day"===t?"".concat(s,"-").concat(j.dateDigit(n),"-").concat(j.dateDigit(a)):"month"===t?"".concat(s,"-").concat(j.dateDigit(n)):"week"===t?"".concat(s,"-").concat(i):"".concat(s)},getTaskEndDate:function(e,t){var s;return"day"===t?s=d()(e.end_date,"YYYY-MM-DD").format("YYYY-MM-DD"):"month"===t?s=d()(e.end_date,"YYYY-MM").format("YYYY-MM"):"week"===t&&(s=d()(e.end_date,"YYYY-MM-DD").format("GGGG-W")),s},initQuota:function(e,t,s,i){e[t]||(e[t]={});var n=e[t];return n[s]||(n[s]=0),n[E]||(n[E]={}),n[E][i]||(n[E][i]=0),n[P]||(n[P]={}),n[P][i]||(n[P][i]=0),n[O]||(n[O]={}),n[O][i]||(n[O][i]=0),n},buildResult:function(e,t){var s=t.shotSearch,i=t.production,n=t.sorting,a=t.taskStatusMap,o=t.taskTypeMap,r=t.persons,c=t.taskMap,l=Object.values(o),d=Object.values(a),u=s,p=Object(T["e"])(u)||[],m=Object(T["d"])({entryIndex:A.shotIndex,assetTypes:[],taskTypes:l,taskStatuses:d,descriptors:i.descriptors,persons:r,query:u}),h=Object(S["j"])(A.shotIndex,p)||A.shots;h=Object(T["a"])(h,m,c),h=Object(g["l"])(h,n,a,o,c),A.result=h;var f=h.slice(0,v["a"]),_=f.length,k=e.nbValidationColumns;j.setListStats(e,h),Object.assign(e,{displayedShots:f,shotFilledColumns:Object(b["c"])(f),shotSearchText:s,shotSelectionGrid:Object(y["b"])(_,k)})},sortStatColumns:function(e,t){var s={};e.all&&Object.keys(e.all).forEach((function(t){"all"===t||e.all[t].name||(s[t]=!0)}));var i=Object.keys(s);return Object(g["p"])(i,t)}},D={shotMap:{},sequences:[],episodes:[],shotSearchText:"",shotSearchQueries:[],sequenceSearchQueries:[],sequenceSearchText:"",sequenceStats:{},episodeSearchText:"",episodeRetakeStats:{},episodeStats:{},shotSorting:[],currentEpisode:null,episodeValidationColumns:[],isFps:!1,isFrames:!1,isFrameIn:!1,isFrameOut:!1,isShotDescription:!1,isShotEstimation:!1,isShotTime:!1,displayedShots:[],displayedShotsLength:0,displayedShotsTimeSpent:0,displayedShotsEstimation:0,displayedShotsFrames:0,displayedSequences:[],displayedSequencesLength:0,displayedEpisodes:[],displayedEpisodesLength:0,sequenceIndex:{},shotFilledColumns:{},sequenceMap:{},episodeMap:{},shotCreated:"",shotSelectionGrid:{},sequenceSelectionGrid:{},isShotsLoading:!1,isShotsLoadingError:!1,shotsCsvFormData:null,shotListScrollPosition:0,sequenceListScrollPosition:0,episodeListScrollPosition:0,searchSequenceFilters:[],shotValidationColumns:[]},M=Object(a["a"])({},D),I={sequences:function(e){return e.sequences},sequenceMap:function(e){return e.sequenceMap},sequenceStats:function(e){return e.sequenceStats},episodes:function(e){return e.episodes},episodeMap:function(e){return e.episodeMap},episodeRetakeStats:function(e){return e.episodeRetakeStats},episodeStats:function(e){return e.episodeStats},shotValidationColumns:function(e){return e.shotValidationColumns},currentEpisode:function(e){return e.currentEpisode},shotSearchQueries:function(e){return e.shotSearchQueries},sequenceSearchQueries:function(e){return e.sequenceSearchQueries},shotMap:function(e){return e.shotMap},shotSorting:function(e){return e.shotSorting},isFps:function(e){return e.isFps},isFrames:function(e){return e.isFrames},isFrameIn:function(e){return e.isFrameIn},isFrameOut:function(e){return e.isFrameOut},isShotDescription:function(e){return e.isShotDescription},isShotEstimation:function(e){return e.isShotEstimation},isShotTime:function(e){return e.isShotTime},shotSearchText:function(e){return e.shotSearchText},sequenceSearchText:function(e){return e.sequenceSearchText},episodeSearchText:function(e){return e.episodeSearchText},shotSelectionGrid:function(e){return e.shotSelectionGrid},sequenceSelectionGrid:function(e){return e.sequenceSelectionGrid},displayedShots:function(e){return e.displayedShots},displayedShotsLength:function(e){return e.displayedShotsLength},displayedShotsTimeSpent:function(e){return e.displayedShotsTimeSpent},displayedShotsEstimation:function(e){return e.displayedShotsEstimation},displayedShotsFrames:function(e){return e.displayedShotsFrames},displayedSequences:function(e){return e.displayedSequences},displayedSequencesLength:function(e){return e.displayedSequencesLength},displayedEpisodes:function(e){return e.displayedEpisodes},displayedEpisodesLength:function(e){return e.displayedEpisodesLength},shotFilledColumns:function(e){return e.shotFilledColumns},displayedShotsBySequence:function(e){return Object(b["d"])(e.displayedShots,"sequence_name")},isShotsLoading:function(e){return e.isShotsLoading},isShotsLoadingError:function(e){return e.isShotsLoadingError},shotCreated:function(e){return e.shotCreated},shotsCsvFormData:function(e){return e.shotsCsvFormData},shotListScrollPosition:function(e){return e.shotListScrollPosition},sequenceListScrollPosition:function(e){return e.sequenceListScrollPosition},episodeListScrollPosition:function(e){return e.episodeListScrollPosition},episodeValidationColumns:function(e){return e.episodeValidationColumns},shotsByEpisode:function(e){for(var t=[],s=[],i=null,n=0,a=Object.values(e.shotMap);n<a.length;n++){var o=a[n];i&&o.sequence_name!==i.sequence_name&&(t.push(s.slice(0)),s=[]),s.push(o),i=o}return t.push(s),t},searchSequenceFilters:function(e){return e.searchSequenceFilters},getSequenceOptions:function(e){return e.sequences.map((function(e){return{label:e.name,value:e.id}}))},getEpisodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))},isSingleEpisode:function(e){return e.episodes.length<2},episodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))}},$={getPending:function(e){e.commit;var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(e,s){var i=[];A.shots.forEach((function(e){var s=!1;e.tasks.forEach((function(e){var i=h["a"].state.taskMap[e];if(!s)if(t){if(i.last_comment_date){var n=d()(i.last_comment_date),a=d()().subtract(1,"days");s="wfa"===i.task_status_short_name&&n.isAfter(a)}}else s="wfa"===i.task_status_short_name})),s&&i.push(e)})),e(i)}))},clearEpisodes:function(e){var t=e.commit;t(x["Q"])},loadEpisodes:function(e){var t=e.commit,s=(e.state,e.rootGetters),i=s.currentProduction,n=s.route.params.episode_id;return m.getEpisodes(i).then((function(e){return t(x["kc"],{episodes:e,routeEpisodeId:n}),Promise.resolve(e)}))},loadShots:function(e,t){var s=e.commit,i=(e.dispatch,e.state),n=e.rootGetters,a=n.currentProduction,o=n.userFilters,r=n.taskTypeMap,c=n.taskMap,l=n.personMap,d=n.isTVShow,u=d?n.currentEpisode:null;if(u&&["all","main"].includes(u.id)){if(u=i.episodes.length>0?i.episodes[0]:null,u.project_id!==a.id)return;s(x["ne"],u.id)}return d&&!u&&0===i.episodes.length?t():(d&&!u&&(u=i.episodes.length>0?i.episodes[0]:null,s(x["ne"],u.id)),!d&&u&&s(x["ne"],null),i.isShotsLoading?t():(s(x["Nc"]),void m.getSequences(a,u,(function(e,i){e?s(x["Mc"]):m.getShots(a,u,(function(e,n){e?s(x["Mc"]):(s(x["Ic"],i),s(x["Lc"],{production:a,shots:n,userFilters:o,taskTypeMap:r,taskMap:c,personMap:l})),t&&t(e)}))}))))},loadEpisode:function(e,t){var s=e.commit,i=e.state;return m.getEpisode(t).then((function(e){i.episodeMap[e.id]?s(x["Xe"],e):s(x["d"],e)})).catch(console.error)},loadSequence:function(e,t){var s=e.commit,i=e.state;return m.getSequence(t).then((function(e){i.sequenceMap[e.id]?s(x["cf"],e):s(x["p"],e)})).catch(console.error)},loadShot:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=n.shotMap[t];if(!a||!a.lock){var o=n.personMap,r=n.currentProduction,c=n.taskMap,l=n.taskTypeMap;return m.getShot(t).then((function(e){i.shotMap[e.id]?s(x["df"],e):s(x["q"],{shot:e,taskTypeMap:l,taskMap:c,personMap:o,production:r})})).catch((function(e){return console.error(e)}))}},newShot:function(e,t){var s=e.commit,i=e.dispatch;e.rootGetters;return m.newShot(t).then((function(e){s(x["qd"],e);var t=M.shotValidationColumns,n=t.map((function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"shots"})}));return Promise.all(n).then((function(){return Promise.resolve(e)})).catch(console.error)}))},newSequence:function(e,t){var s=e.commit;e.state;return m.newSequence(t).then((function(e){return s(x["pd"],e),Promise.resolve(e)}))},newEpisode:function(e,t){var s=e.commit;e.state;return m.newEpisode(t).then((function(e){return s(x["od"],e),Promise.resolve(e)}))},editShot:function(e,t){var s=e.commit;e.state;return s(x["dd"],t),s(x["Jb"],t),m.updateShot(t).then((function(e){return setTimeout((function(){s(x["Ue"],e)}),2e3),Promise.resolve(e)}))},editEpisode:function(e,t){var s=e.commit;e.state;return m.updateEpisode(t).then((function(e){return s(x["Ab"],e),Promise.resolve(e)}))},editSequence:function(e,t){var s=e.commit;e.state;return m.updateSequence(t).then((function(e){return s(x["Ib"],e),Promise.resolve(e)}))},deleteShot:function(e,t){var s=e.commit,i=e.state;return m.deleteShot(t).then((function(){var e=i.shotMap[t.id];return e&&e.tasks.length>0&&!e.canceled?s(x["u"],e):s(x["Wd"],t),Promise.resolve()}))},deleteEpisode:function(e,t){var s=e.commit;e.state;return m.deleteEpisode(t).then((function(){return s(x["Od"],t),Promise.resolve(t)}))},deleteSequence:function(e,t){var s=e.commit;e.state;return m.deleteSequence(t).then((function(){return s(x["Ud"],t),Promise.resolve(t)}))},restoreShot:function(e,t){var s=e.commit;e.state;return m.restoreShot(t).then((function(e){return s(x["de"],e),Promise.resolve(e)}))},uploadShotFile:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=n.currentProduction;return m.postCsv(a,i.shotsCsvFormData,t).then((function(){return s(x["Wb"]),Promise.resolve()}))},displayMoreShots:function(e){var t=e.commit,s=e.rootGetters;t(x["vb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},displayMoreSequences:function(e){var t=e.commit;t(x["ub"])},displayMoreEpisodes:function(e){var t=e.commit;t(x["tb"])},setShotSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskStatusMap,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction,c=i.people;s(x["He"],{shotSearch:t,persons:c,taskStatusMap:n,taskMap:o,taskTypeMap:a,production:r})},saveShotSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=M.shotSearchQueries.find((function(e){return e.name===t})),o=i.currentProduction;a?e():u["a"].createFilter("shot",t,t,o.id,null,(function(t,i){s(x["he"],{searchQuery:i,production:o}),t?n(t):e(i)}))}))},removeShotSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=i.currentProduction;return u["a"].removeFilter(t).then((function(){return s(x["Xd"],{searchQuery:t,production:n}),Promise.resolve()}))},saveSequenceSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=M.sequenceSearchQueries.find((function(e){return e.name===t})),o=i.currentProduction;a?e():u["a"].createFilter("sequence",t,t,o.id,null,(function(t,i){s(x["ge"],{searchQuery:i,production:o}),t?n(t):e(i)}))}))},removeSequenceSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=i.currentProduction;return u["a"].removeFilter(t).then((function(){return s(x["Vd"],{searchQuery:t,production:n}),Promise.resolve()}))},initSequences:function(e){e.commit;var t=e.dispatch,s=e.state,i=e.rootState;e.rootGetters;return new Promise((function(e,n){var a=i.route.params.production_id;t("setLastProductionScreen","sequences"),0===s.sequences.length||s.sequences[0].production_id!==a?(t("computeSequenceStats"),e()):e()}))},setSequenceSearch:function(e,t){var s=e.commit,i=e.rootGetters;s(x["Fe"],{sequenceSearch:t,production:i.currentProduction})},setSequenceListScrollPosition:function(e,t){var s=e.commit;s(x["Ee"],t)},computeSequenceStats:function(e){var t=e.commit,s=e.rootGetters,i=s.taskStatusMap,n=s.taskMap;t(x["X"],{taskStatusMap:i,taskMap:n})},setCurrentEpisode:function(e,t){var s=e.commit,i=e.rootGetters;s(x["ne"],t);var n=i.currentProduction.id;s(x["be"],{productionId:n,episodeId:t})},initEpisodes:function(e){e.commit;var t=e.dispatch,s=e.state,i=e.rootState,n=e.rootGetters,a=i.route.params.production_id,o=n.isTVShow;if(t("setLastProductionScreen","episodes"),0===s.episodes.length||s.episodes[0].production_id!==a)return o?t("loadEpisodes").then((function(){return t("loadEpisodeStats",a)})).then((function(){return t("loadEpisodeRetakeStats",a)})):t("computeEpisodeStats")},loadEpisodeStats:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskTypeMap;return s(x["te"],{episodeStats:{},taskTypeMap:n}),m.getEpisodeStats(t).then((function(e){return s(x["te"],{episodeStats:e,taskTypeMap:n}),Promise.resolve(e)})).catch(console.error)},loadEpisodeRetakeStats:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskTypeMap;return s(x["re"],{episodeRetakeStats:{},taskTypeMap:n}),m.getEpisodeRetakeStats(t).then((function(e){return s(x["re"],{episodeRetakeStats:e,taskTypeMap:n}),Promise.resolve(e)})).catch(console.error)},setEpisodeSearch:function(e,t){var s=e.commit;s(x["se"],t)},setEpisodeListScrollPosition:function(e,t){var s=e.commit;s(x["qe"],t)},computeEpisodeStats:function(e){var t=e.commit,s=e.dispatch,i=e.rootGetters,n=i.taskStatusMap,a=i.taskMap,o=i.isTVShow;o?s("loadEpisodeStats",i.currentProduction.id):t(x["W"],{taskStatusMap:n,taskMap:a})},getShotsCsvLines:function(e){var t=e.state,s=e.rootGetters,i=s.currentProduction,n=s.isTVShow,a=s.organisation,r=s.personMap,c=A.shots;A.result&&A.result.length>0&&(c=A.result);var l=c.map((function(e){var c=[];return n&&c.push(e.episode_name),c=c.concat([e.sequence_name,e.name,e.description]),Object(g["d"])(Object(o["a"])(i.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(t){c.push(e.data[t.field_name])})),t.isShotTime&&c.push(Object(C["o"])(a,e.timeSpent).toFixed(2)),t.isShotEstimation&&c.push(Object(C["o"])(a,e.estimation).toFixed(2)),t.isFrames&&c.push(e.nb_frames),t.isFrameIn&&c.push(e.data.frame_in),t.isFrameOut&&c.push(e.data.frame_out),t.isFps&&c.push(e.data.fps),t.shotValidationColumns.forEach((function(t){var i=s.taskMap[e.validations[t]];i?(c.push(i.task_status_short_name),c.push(i.assignees.map((function(e){return r[e].full_name})).join(","))):(c.push(""),c.push(""))})),c}));return l},loadShotHistory:function(e,t){e.commit,e.state;return m.loadShotHistory(t)},computeQuota:function(e,t){e.commit,e.state;var s=e.rootGetters,i=t.taskTypeId,n=t.detailLevel,a=t.countMode,o=s.taskMap,r=s.taskStatusMap,c=s.currentProduction,l={};return A.shots.forEach((function(e){var t=o[e.validations[i]],s=t&&r[t.task_status_id].is_done;if(s){var d=j.getPeriod(t,n),u=j.getTaskEndDate(t,n);t.assignees.forEach((function(t){var s=j.initQuota(l,t,u,d);if(e.nb_frames){var i=e.nb_frames;"seconds"===a&&(i=Object(w["c"])(e.nb_frames,c,e));var n=0===s[u];n&&s[P][d]++,s[u]+=i,s[O][d]+=i,"seconds"===a&&(s[O][d]=Math.round(100*s[O][d])/100,s[u]=Math.round(100*s[u])/100),s[E][d]=s[O][d]/s[P][d]}}))}})),Promise.resolve(l)},getPersonShots:function(e,t){e.commit,e.state;var s=e.rootGetters,i=t.taskTypeId,n=t.detailLevel,o=t.personId,r=t.year,c=t.month,l=t.week,d=t.day,u=s.taskStatusMap,p=j.getDateFromParameters({detailLevel:n,year:r,month:c,week:l,day:d}),m=A.shots.filter((function(e){var t=s.taskMap[e.validations[i]];if(t){var a=u[t.task_status_id],r=j.getTaskEndDate(t,n);return t&&a.is_done&&t.assignees.includes(o)&&r===p}return!1})).map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{full_name:j.getShotName(e)})}));return Promise.resolve(m)},changeShotSort:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskStatus,a=i.taskTypeMap,o=i.taskMap,r=i.people,c=i.currentProduction,l=t?[t]:[];s(x["O"],{taskStatusMap:n,taskTypeMap:a,taskMap:o,persons:r,production:c,sorting:l})},deleteAllShotTasks:function(e,t){e.commit;var s=e.dispatch,i=(e.state,t.projectId),n=t.taskTypeId,a=t.selectionOnly,o=[];return a&&(o=A.result.filter((function(e){return e.validations[n]})).map((function(e){return e.validations[n]}))),s("deleteAllTasks",{projectId:i,taskTypeId:n,taskIds:o})}},L=(i={},Object(n["a"])(i,x["U"],(function(e){A.shots=[],A.result=[],A.shotIndex={},e.shotMap={},e.sequences=[],e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedTimeSpent=0,e.displayedEstimation=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(n["a"])(i,x["Nc"],(function(e){A.shots=[],A.result=[],A.shotIndex={},e.shotMap={},e.shotValidationColumns=[],e.sequences=[],e.isShotsLoading=!0,e.isShotsLoadingError=!1,e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedEstimation=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(n["a"])(i,x["Mc"],(function(e){e.isShotsLoading=!1,e.isShotsLoadingError=!0})),Object(n["a"])(i,x["Lc"],(function(e,t){var s=t.production,i=t.shots,n=t.userFilters,a=t.taskMap,o=t.taskTypeMap,r=t.personMap,c={},l=!1,d=!1,u=!1,p=!1,m=!1,h=!1,f=!1;i=Object(g["m"])(i),A.shots=i,A.result=i,A.shotIndex=Object(S["e"])(i),e.shotMap={},i.forEach((function(t){var i=[],n={},_=0,v=0;t.project_name=s.name,t.production_id=s.id,t.full_name=j.getShotName(t),t.tasks.forEach((function(e){j.populateTask(e,t,s),_+=e.duration,v+=e.estimation,e.episode_id=t.episode_id,a[e.id]=e,n[e.task_type_id]=e.id,i.push(e.id);var l=o[e.task_type_id];c[l.name]||(c[l.name]=l.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return r[e].name.localeCompare(r[t])})))})),t.tasks=i,t.validations=n,t.timeSpent=_,t.estimation=v,!l&&t.data.fps&&(l=!0),!d&&t.nb_frames&&(d=!0),!u&&t.data.frame_in&&(u=!0),!p&&t.data.frame_out&&(p=!0),!h&&t.timeSpent>0&&(h=!0),!f&&t.estimation>0&&(f=!0),!m&&t.description&&(m=!0),e.shotMap[t.id]=t}));var _=i.slice(0,v["a"]),k=Object(b["c"])(_);e.shotValidationColumns=j.sortValidationColumns(Object.values(c),k,o),e.nbValidationColumns=e.shotValidationColumns.length,e.isFps=l,e.isFrames=d,e.isFrameIn=u,e.isFrameOut=p,e.isShotTime=h,e.isShotEstimation=f,e.isShotDescription=m,e.isShotsLoading=!1,e.isShotsLoadingError=!1,e.displayedShots=_,e.shotFilledColumns=k;var w=e.displayedShots.length,C=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(w,C),j.setListStats(e,i),n.shot&&n.shot[s.id]?e.shotSearchQueries=n.shot[s.id]:e.shotSearchQueries=[],n.sequence&&n.sequence[s.id]?e.sequenceSearchQueries=n.sequence[s.id]:e.sequenceSearchQueries=[]})),Object(n["a"])(i,x["he"],(function(e,t){var s=t.searchQuery;e.shotSearchQueries.push(s),e.shotSearchQueries=Object(g["d"])(e.shotSearchQueries)})),Object(n["a"])(i,x["Xd"],(function(e,t){var s=t.searchQuery,i=e.shotSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.shotSearchQueries.splice(i,1)})),Object(n["a"])(i,x["ge"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries.push(s),e.sequenceSearchQueries=Object(g["d"])(e.sequenceSearchQueries)})),Object(n["a"])(i,x["Vd"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries=e.sequenceSearchQueries.filter((function(e){return e.name!==s.name}))})),Object(n["a"])(i,x["Ic"],(function(e,t){var s={};t.forEach((function(t){if(s[t.id]=t,t.parent_id){var i=e.episodeMap[t.parent_id];i&&Object.assign(t,{episode_id:i.id,episode_name:i.name})}}));var i=Object(g["k"])(t);e.sequenceMap=s,e.sequences=i,e.sequenceIndex=Object(S["d"])(i),e.displayedSequences=i.slice(0,2*v["a"]),e.displayedSequencesLength=i.length})),Object(n["a"])(i,x["kc"],(function(e,t){var s=t.episodes,i=t.routeEpisodeId,n={};s||(s=[]),s.forEach((function(e){n[e.id]=e})),e.episodeMap=n,e.episodes=Object(g["d"])(s),e.episodeIndex=Object(S["b"])(e.episodes),e.displayedEpisodes=e.episodes.slice(0,v["a"]),e.displayedEpisodesLength=e.episodes.length,e.episodes.length>0?e.currentEpisode="all"===i?{id:"all"}:"main"===i?{id:"main"}:i?e.episodeMap[i]:e.episodes[0]:e.currentEpisode=null})),Object(n["a"])(i,x["Pc"],(function(e,t){var s=t.shot,i=t.taskTypeMap;s.tasks.forEach((function(e){j.populateTask(e,s)})),s.tasks=Object(g["o"])(s.tasks,i),e.shotMap[s.id]=s})),Object(n["a"])(i,x["Le"],(function(e,t){e.shotsCsvFormData=t})),Object(n["a"])(i,x["Wb"],(function(e){e.shotsCsvFormData=null})),Object(n["a"])(i,x["oc"],(function(e,t){e.openProductions=t})),Object(n["a"])(i,x["Jb"],(function(e,t){var s=e.shotMap[t.id],i=e.sequences.find((function(e){return e.id===t.parent_id}));if(i&&(t.sequence_name=i.name),s)Object.assign(s,t);else{A.shots.push(t),A.shots=Object(g["m"])(A.shots),e.shotMap[t.id]=t;var n=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(n,a)}e.editShot={isLoading:!1,isError:!1},A.shotIndex=Object(S["e"])(A.shots),e.shotCreated=t.name,e.shotSearchText?j.setListStats(e,A.result):j.setListStats(e,A.shots),t.data||(t.data={}),t.data.fps&&(e.isFps=!0),t.nb_frames&&(e.isFrames=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0),s.description&&!e.isShotDescription&&(e.isShotDescription=!0)})),Object(n["a"])(i,x["Ib"],(function(e,t){var s=e.sequenceMap[t.id];s&&Object.assign(s,t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["Ab"],(function(e,t){var s=e.episodeMap[t.id];s&&Object.assign(s,t),e.episodeIndex=Object(S["b"])(e.episodes)})),Object(n["a"])(i,x["de"],(function(e,t){var s=e.shotMap[t.id];s.canceled=!1,A.shotIndex=Object(S["e"])(A.shots)})),Object(n["a"])(i,x["rd"],(function(e,t){t.comment,t.taskId})),Object(n["a"])(i,x["He"],(function(e,t){var s=e.shotSorting;t.sorting=s,j.buildResult(e,t)})),Object(n["a"])(i,x["Fe"],(function(e,t){var s=t.sequenceSearch,i=t.production,n=Object(T["e"])(s),a=Object(S["j"])(e.sequenceIndex,n)||e.sequences;e.searchSequenceFilters=Object(T["d"])({entryIndex:A.shotIndex,assetTypes:[],taskTypes:[],taskStatuses:[],descriptors:i.descriptors.filter((function(e){return"Shot"===e.entity_type})),persons:[],query:s}),e.displayedSequences=a.slice(0,2*v["a"]),e.displayedSequencesLength=a.length,e.sequenceSearchText=s})),Object(n["a"])(i,x["se"],(function(e,t){var s=Object(T["e"])(t),i=Object(S["j"])(e.episodeIndex,s)||e.episodes;e.displayedEpisodes=i.slice(0,v["a"]),e.displayedEpisodesLength=i.length,e.episodeSearchText=t})),Object(n["a"])(i,x["qd"],(function(e,t){var s=e.sequenceMap[t.parent_id],i=e.episodeMap[s.parent_id];t.production_id=t.project_id,t.sequence_name=s.name,t.sequence_id=s.id,t.episode_name=i?i.name:null,t.episode_id=i?i.id:null,t.preview_file_id="",t.tasks=[],t.validations={},t.data={},A.shots.push(t),A.shots=Object(g["m"])(A.shots),e.displayedShots=A.shots.slice(0,v["a"]),j.setListStats(e,A.shots),e.shotFilledColumns=Object(b["c"])(e.displayedShots),e.shotMap[t.id]=t,A.shotIndex=Object(S["e"])(A.shots);var n=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(n,a),t.data.fps&&(e.isFps=!0),t.nb_frames&&(e.isFrames=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0)})),Object(n["a"])(i,x["pd"],(function(e,t){if(t.parent_id){var s=e.episodeMap[t.parent_id];t.episode_id=s.id,t.episode_name=s.name}e.sequences.push(t),e.sequences=Object(g["k"])(e.sequences),e.sequenceMap[t.id]=t,e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["od"],(function(e,t){e.episodes.push(t),e.episodes=Object(g["d"])(e.episodes),e.displayedEpisodes=e.episodes,e.episodeMap[t.id]=t})),Object(n["a"])(i,x["Y"],(function(e,t){t.forEach((function(t){if(t){var s=e.shotMap[t.entity_id];if(s){j.populateTask(t,s);var i=Object(a["a"])({},s.validations);c.a.set(i,t.task_type_id,t.id),delete s.validations,c.a.set(s,"validations",i),s.tasks.push(t.id)}}}))})),Object(n["a"])(i,x["vb"],(function(e,t){t.taskTypeMap,t.taskStatusMap,t.taskMap,t.production;var s=A.result,i=e.displayedShots.length+v["a"];if(i<s.length+v["a"]){e.displayedShots=s.slice(0,e.displayedShots.length+v["a"]),e.shotFilledColumns=Object(b["c"])(e.displayedShots);var n=e.displayedShots.length-v["a"],a=e.displayedShots.length,o=e.nbValidationColumns;n>=0&&(e.shotSelectionGrid=Object(y["a"])(e.shotSelectionGrid,n,a,o))}})),Object(n["a"])(i,x["ub"],(function(e,t){var s=e.sequences;if(e.sequenceSearchText.length>0){var i=Object(T["e"])(e.sequenceSearchText);s=Object(S["j"])(e.sequenceIndex,i)}e.displayedSequences=s.slice(0,e.displayedSequences.length+v["a"])})),Object(n["a"])(i,x["tb"],(function(e,t){var s=e.episodes;if(e.episodeSearchText.length>0){var i=Object(T["e"])(e.episodeSearchText);s=Object(S["j"])(e.episodeIndex,i)}e.displayedEpisodes=s.slice(0,e.displayedEpisodes.length+v["a"])})),Object(n["a"])(i,x["oe"],(function(e,t){e.shotSearchText="",e.sequenceSearchText=""})),Object(n["a"])(i,x["Q"],(function(e){e.episodes=[],e.currentEpisode=null})),Object(n["a"])(i,x["Ce"],(function(e,t){var s=t.entityId,i=(t.taskId,t.previewId),n=t.taskMap,a=e.shotMap[s];a&&(a.preview_file_id=i,a.tasks.forEach((function(e){var t=n[e];t&&(t.entity.preview_file_id=i)})))})),Object(n["a"])(i,x["Ge"],(function(e,t){e.shotListScrollPosition=t})),Object(n["a"])(i,x["Ee"],(function(e,t){e.sequenceListScrollPosition=t})),Object(n["a"])(i,x["qe"],(function(e,t){e.episodeListScrollPosition=t})),Object(n["a"])(i,x["Td"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!1)})),Object(n["a"])(i,x["n"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!0)})),Object(n["a"])(i,x["T"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));e.shotSelectionGrid=Object(y["c"])(s)})),Object(n["a"])(i,x["sd"],(function(e,t){var s=e.shotMap[t.entity_id];s&&t&&(t=j.populateTask(t,s),s.tasks.push(t),c.a.set(s.validations,t.task_type_id,t.id))})),Object(n["a"])(i,x["nb"],(function(e,t){var s=e.displayedShots.find((function(e){return e.id===t.entity_id}));if(s){var i=JSON.parse(JSON.stringify(s.validations));delete i[t.task_type_id],delete s.validations,c.a.set(s,"validations",i);var n=s.tasks.findIndex((function(e){return e===t.id}));s.tasks.splice(n,1)}})),Object(n["a"])(i,x["o"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.shotSelectionGrid=s})),Object(n["a"])(i,x["ne"],(function(e,t){t&&(e.currentEpisode="main"===t?{id:"main"}:"all"===t?{id:"all"}:e.episodeMap[t])})),Object(n["a"])(i,x["te"],(function(e,t){var s=t.episodeStats,i=t.taskTypeMap;e.episodeValidationColumns=j.sortStatColumns(s,i),e.episodeStats=s})),Object(n["a"])(i,x["re"],(function(e,t){var s=t.episodeRetakeStats;t.taskTypeMap;e.episodeRetakeStats=s})),Object(n["a"])(i,x["X"],(function(e,t){var s=t.taskMap,i=t.taskStatusMap,n=A.shots;e.searchSequenceFilters.length>0&&(n=Object(T["a"])(A.shots,e.searchSequenceFilters,{}),n=n.filter((function(e){return!e.canceled}))),e.sequenceStats=Object(k["a"])(n,"sequence_id",i,s)})),Object(n["a"])(i,x["W"],(function(e,t){var s=t.taskMap,i=t.taskStatusMap;e.episodeStats=Object(k["a"])(A.shots,"episode_id",i,s)})),Object(n["a"])(i,x["d"],(function(e,t){e.episodes.push(t);var s=Object(g["d"])(e.episodes);e.episodeMap[t.id]=t,e.episodes=s,e.displayedEpisodes.push(t),e.displayedEpisodes=Object(g["d"])(e.displayedEpisodes),e.episodeIndex=Object(S["b"])(s),e.displayedEpisodesLength=s.length})),Object(n["a"])(i,x["Xe"],(function(e,t){Object.assign(e.episodeMap[t.id],t),e.episodeIndex=Object(S["d"])(e.episodes)})),Object(n["a"])(i,x["Od"],(function(e,t){delete e.episodeMap[t.id],e.episodes=Object(b["h"])(e.episodes,t),e.displayedEpisodes=Object(b["h"])(e.displayedEpisodes,t),e.episodeIndex=Object(S["b"])(e.episodes)})),Object(n["a"])(i,x["p"],(function(e,t){e.sequences.push(t);var s=Object(g["k"])(e.sequences);if(e.sequenceMap[t.id]=t,t.parent_id){var i=e.episodeMap[t.parent_id];i&&Object.assign(t,{episode_id:i.id,episode_name:i.name})}e.sequences=s,e.displayedSequences.push(t),e.displayedSequences=Object(g["k"])(e.displayedSequences),e.sequenceIndex=Object(S["d"])(s),e.displayedSequencesLength=s.length})),Object(n["a"])(i,x["cf"],(function(e,t){Object.assign(e.sequenceMap[t.id],t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["Ud"],(function(e,t){delete e.sequenceMap[t.id],e.sequences=Object(b["h"])(e.sequences,t),e.displayedSequences=Object(b["h"])(e.displayedSequences,t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["q"],(function(e,t){t.taskTypeMap;var s=t.taskMap,i=t.personMap,n=t.production,a=t.shot,o=[],r={},c=0,l=0;a.project_name=n.name,a.production_id=n.id,a.tasks.forEach((function(e){j.populateTask(e,a,n),c+=e.duration,l+=e.estimation,e.episode_id=a.episode_id,s[e.id]=e,r[e.task_type_id]=e.id,o.push(e.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return i[e].name.localeCompare(i[t])})))})),a.tasks=o,a.validations=r,a.timeSpent=c,a.estimation=l,A.shots.push(a),A.shots=Object(g["m"])(A.shots),e.shotMap[a.id]=a,e.displayedShots.push(a),e.displayedShots=Object(g["m"])(e.displayedShots),e.displayedShotsLength=A.shots.length,e.shotFilledColumns=Object(b["c"])(e.displayedShots);var d=e.displayedShots.length,u=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(d,u),e.shotMap[a.id]=a})),Object(n["a"])(i,x["df"],(function(e,t){Object.assign(e.shotMap[t.id],t),A.shotIndex=Object(S["e"])(A.shots)})),Object(n["a"])(i,x["Wd"],(function(e,t){delete e.shotMap[t.id],A.shots=Object(b["h"])(A.shots,t),A.result=Object(b["h"])(A.result,t),A.shotIndex=Object(S["e"])(A.shots),e.displayedShots=Object(b["h"])(e.displayedShots,t),t.timeSpent&&(e.displayedShotsTimeSpent-=t.timeSpent),t.estimation&&(e.displayedShotsEstimation-=t.estimation),t.nb_frames&&(e.displayedShotsFrames-=t.nb_frames)})),Object(n["a"])(i,x["u"],(function(e,t){t.canceled=!0})),Object(n["a"])(i,x["O"],(function(e,t){var s=t.taskStatusMap,i=t.taskTypeMap,n=t.taskMap,a=t.production,o=t.sorting,r=t.persons,c=e.shotSearchText;e.shotSorting=o,j.buildResult(e,{persons:r,production:a,sorting:o,shotSearch:c,taskStatusMap:s,taskTypeMap:i,taskMap:n})})),Object(n["a"])(i,x["Ye"],(function(e,t){var s=t.descriptor,i=t.previousDescriptorFieldName;"Shot"===s.entity_type&&i&&A.shots.forEach((function(e){e.data[s.field_name]=e.data[i],delete e.data[i]}))})),Object(n["a"])(i,x["dd"],(function(e,t){t=e.shotMap[t.id],t&&(t.lock=!0)})),Object(n["a"])(i,x["Ue"],(function(e,t){t=e.shotMap[t.id],t&&(t.lock=!1)})),Object(n["a"])(i,x["ae"],(function(e){Object.assign(e,Object(a["a"])({},D)),A.shots=[],A.result=[],A.shotIndex={}})),i);t["a"]={state:M,getters:I,actions:$,mutations:L,cache:A}},"0555":function(e,t,s){},"071d":function(e,t,s){},"0774":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("5530"),n=(s("159b"),s("bf19"),s("c740"),s("a434"),s("2f62")),a=s("7a94"),o={data:function(){return{isShowingPalette:!1,isShowingPencilPalette:!1}},created:function(){this.resetUndoStacks()},mounted:function(){},beforeDestroy:function(){},computed:Object(i["a"])(Object(i["a"])({},Object(n["c"])([])),{},{annotationCanvas:function(){return this.$refs["annotation-canvas"]}}),methods:{addObject:function(e){var t=this;e._objects?e._objects.forEach((function(e){t.fabricCanvas.add(e),t.$options.doneActionStack.pop()})):this.fabricCanvas.add(e),this.$options.doneActionStack.push({type:"add",obj:e}),this.saveAnnotations()},addText:function(){var e=this,t=this.canvas||this.canvasWrapper,s=t.getBoundingClientRect(),i=event.clientX-s.x,n=event.clientY-s.y,o=320,r=12;this.fabricCanvas.getHeight()>o&&(r*=this.fabricCanvas.getHeight()/o);var c=new a["fabric"].IText("Type...",{left:i,top:n,fontFamily:"arial",fill:this.textColor,fontSize:r});this.fabricCanvas.add(c),this.fabricCanvas.setActiveObject(c),c.enterEditing(),c.selectAll(),c.hiddenTextarea.onblur=function(){e.saveAnnotations()}},addTypeArea:function(){var e=a["fabric"].IText.prototype.initHiddenTextarea;a["fabric"].util.object.extend(a["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),this.canvas.wrapperEl.appendChild(this.hiddenTextarea)}})},removeTypeArea:function(){var e=a["fabric"].IText.prototype.initHiddenTextarea;a["fabric"].util.object.extend(a["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),a["fabric"].document.body.appendChild(this.hiddenTextarea)}})},deleteSelection:function(){var e=this.fabricCanvas.getActiveObject();this.deleteObject(e)},deleteObject:function(e){var t=this;e&&e._objects?e._objects.forEach((function(e){t.fabricCanvas.remove(e)})):this.fabricCanvas.remove(e),this.$options.doneActionStack.push({type:"remove",obj:e}),this.saveAnnotations()},getNewAnnotations:function(e,t){var s=this;if(this.fabricCanvas.getObjects().forEach((function(e){"path"===e.type&&(e.canvasWidth||(e.canvasWidth=s.fabricCanvas.width),e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))})),t){if(t.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),t.width=this.fabricCanvas.width,t.height=this.fabricCanvas.height,t.time=e,t.drawing&&t.drawing.objects.length<1){var n=this.annotations.findIndex((function(t){return t.time===e}));this.annotations.splice(n,1)}}else this.annotations.push({time:e,width:this.fabricCanvas.width,height:this.fabricCanvas.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])}),this.annotations=this.annotations.sort((function(e,t){return e.time<t.time}))||[];var a=[];return this.annotations.forEach((function(e){return a.push(Object(i["a"])({},e))})),a},onPickPencil:function(){this.isShowingPencilPalette=!this.isShowingPencilPalette},onPickColor:function(){this.isShowingPalette=!this.isShowingPalette},onChangeColor:function(e){this.color=e,this.fabricCanvas.freeDrawingBrush.color=this.color,this.isShowingPalette=!1},onChangeTextColor:function(e){this.textColor=e,this.isShowingPalette=!1},onChangePencil:function(e){this.pencil=e;var t={big:4,medium:2,small:1},s=t[e];this.fabricCanvas.freeDrawingBrush.width=s,this.isShowingPalette=!1},resetUndoStacks:function(){this.$options.doneActionStack=[],this.$options.undoneActionStack=[]},stackAddAction:function(e){var t=e.target;this.$options.doneActionStack.push({type:"add",obj:t}),t.lockScalingX=!0,t.lockScalingY=!0,t.rotation=!0},undoLastAction:function(){var e=this.$options.doneActionStack.pop();e&&e.obj&&("add"===e.type?this.deleteObject(e.obj):"remove"===e.type&&this.addObject(e.obj),this.$options.doneActionStack.pop(),this.$options.undoneActionStack.push(e))},redoLastAction:function(){var e=this.$options.undoneActionStack.pop();e&&("add"===e.type?this.addObject(e.obj):"remove"===e.type&&this.deleteObject(e.obj))},clearUndoneStack:function(){this.$options.undoneActionStack=[]},reloadAnnotations:function(){if(this.annotations=[],this.preview.annotations){var e=[];this.preview.annotations.forEach((function(t){return e.push(Object(i["a"])({},t))})),this.annotations=e.sort((function(e,t){return e.time<t.time}))||[]}else this.annotations=[];return this.annotations},setupFabricCanvas:function(){if(this.annotationCanvas){var e=this.annotationCanvas.id;return this.fabricCanvas=new a["fabric"].Canvas(e,{fireRightClick:!0}),this.fabricCanvas.off("object:moved",this.saveAnnotations),this.fabricCanvas.off("object:added",this.stackAddAction),this.fabricCanvas.off("mouse:up",this.endDrawing),this.fabricCanvas.off("mouse:up",this.onCanvasReleased),this.fabricCanvas.off("mouse:move",this.onCanvasMouseMoved),this.fabricCanvas.off("mouse:down",this.onCanvasClicked),this.fabricCanvas.on("object:moved",this.saveAnnotations),this.fabricCanvas.on("object:added",this.stackAddAction),this.fabricCanvas.on("mouse:up",this.endDrawing),this.fabricCanvas.on("mouse:move",this.onCanvasMouseMoved),this.fabricCanvas.on("mouse:down",this.onCanvasClicked),this.fabricCanvas.on("mouse:up",this.onCanvasReleased),this.fabricCanvas.setDimensions({width:100,height:100}),this.fabricCanvas.freeDrawingBrush.color=this.color,this.fabricCanvas.freeDrawingBrush.width=4,this.fabricCanvas}},endDrawing:function(){this.isDrawing&&(this.clearUndoneStack(),this.saveAnnotations())},isEmptyCanvas:function(){return!this.fabricCanvas||this.fabricCanvas.getObjects().length>0},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()}}}},"0832":function(e,t,s){"use strict";s("8395")},"085a":function(e,t,s){},"09a4":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:e.tooltipOptions,expression:"tooltipOptions",modifiers:{right:!0}}],staticClass:"flexrow production-name"},[e.noLink?s("div",{staticClass:"flexrow flexrow-item"},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v(" "+e._s(e.generateAvatar(e.entry))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.entry.name)+" ")])]):s("router-link",{staticClass:"flexrow flexrow-item",attrs:{to:e.productionRoute}},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v(" "+e._s(e.generateAvatar(e.entry))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.entry.name)+" ")])])],1)},n=[],a=s("5530"),o=(s("a9e3"),s("b0c0"),s("99af"),s("a15b"),s("7930")),r=s("2f62"),c={name:"production-name-cell",props:{entry:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String},isTooltip:{default:!1,type:Boolean},noLink:{default:!1,type:Boolean}},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])([])),{},{productionRoute:function(){var e={name:this.lastProductionScreen,params:{production_id:this.entry.id}};return this.entry.first_episode_id&&(e.name="episode-".concat(this.lastProductionScreen),e.params.episode_id=this.entry.first_episode_id),e},productionInfo:function(){var e=this.entry?this.entry.fps:null,t=this.entry?this.entry.ratio:null,s=this.entry?this.entry.resolution:null,i=[];return e&&i.push("".concat(this.$t("productions.fields.fps"),": ").concat(e)),t&&i.push("".concat(this.$t("productions.fields.ratio"),": ").concat(t)),s&&i.push("".concat(this.$t("productions.fields.resolution"),": ").concat(s)),i.length>0&&this.isTooltip?i.join("<br>"):""},tooltipOptions:function(){return{content:this.productionInfo,delay:{hide:5e3}}}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])([])),{},{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},l=c,d=(s("0832"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"d4eedca6",null);t["a"]=u.exports},"09d3":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"f",(function(){return o})),s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"e",(function(){return u}));var i=s("5530"),n=(s("d81d"),s("b64b"),s("b0c0"),s("159b"),s("b680"),function(e,t,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count";if(!e[t]||!e[t][s])return[];var n=e[t][s],o="count"===i?"count":"frames";return Object.keys(n).map((function(e){var t=n[e],s="todo"===t.name?"#6F727A":t.color;return[t.name,t[o],s]})).sort(a)}),a=function(e,t){return e[0]&&t[0]?e[0].localeCompare(t[0]):!e[0]&&t[0]?-1:(e[0]&&t[0],1)},o=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count",a={done:"#22d160",retake:"#ff3860",other:"#6f727a"};if(!e[t]||!e[t][s])return[];var o=Object(i["a"])({},e[t][s]);delete o.evolution,delete o.max_retake_count;var r="count"===n?"count":"frames";return[["retake",o.retake[r]||0,a.retake],["other",o.other[r]||0,a.other],["done",o.done[r]||0,a.done]]},r=function(e,t,s){return n(e,t,s).map((function(e){return e[2]}))},c=function(e,t,s){return e[t]&&e[t][s]?e[t][s].max_retake_count:-1},l=function(e,t,s,i){var n={all:{all:{}}};return e.forEach((function(e){if(!e.canceled){var a=e[t];n[a]||(n[a]={all:{}}),e.tasks.forEach((function(t){var o=i[t];d(s,n,a,e,o)}))}})),n},d=function(e,t,s,i,n){if(n){var a=n.task_type_id,o=e[n.task_status_id];if(o){var r=o.id;t[s][a]||(t[s][a]={}),t.all.all[r]||(t.all.all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t.all[a]||(t.all[a]={}),t.all[a][r]||(t.all[a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s].all[r]||(t[s].all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r]||(t[s][a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r].count++,t[s].all[r].count++,t.all[a][r].count++,t.all.all[r].count++,i.nb_frames&&(t[s][a][r].frames+=i.nb_frames,t[s].all[r].frames+=i.nb_frames,t.all[a][r].frames+=i.nb_frames,t.all.all[r].frames+=i.nb_frames)}}},u=function(e,t){var s=0;return t>0&&(s=e/t*100),s.toFixed(2)}},"09d9":function(e,t,s){},"0bd7":function(e,t,s){},"0daf":function(e,t,s){},"0f9a":function(e,t,s){"use strict";var i,n=s("ade3"),a=s("5530"),o=(s("caad"),s("d3b7"),s("7db0"),s("b0c0"),s("159b"),s("25f0"),s("c740"),s("a434"),s("b64b"),s("13d5"),s("07ac"),s("2532"),s("ba4c")),r=s.n(o),c=s("ce6b"),l=s("52ad"),d=s("e07d"),u=s("48c6"),p=s("2229"),m=s("2017"),h=s("ca76"),f=s("66e7"),_=s("6185"),v=s("9fb0"),g={getTaskStatus:function(e){return d["a"].state.taskStatusMap[e]}},y={user:null,isAuthenticated:!1,avatarFormData:null,isSaveProfileLoading:!1,isSaveProfileLoadingError:!1,changePassword:{isLoading:!1,isError:!1,isSuccess:!1,isValid:!0},isTodosLoading:!1,isTodosLoadingError:!1,todos:[],displayedTodos:[],displayedDoneTasks:[],todosIndex:{},todosSearchText:"",todoSelectionGrid:{},todoSearchQueries:[],userFilters:{},todoListScrollPosition:0,timeSpentMap:{},timeSpentTotal:0},b=Object(a["a"])({},y),k={user:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated},isCurrentUserManager:function(e){return e.user&&["admin","manager"].includes(e.user.role)},isCurrentUserAdmin:function(e){return e.user&&"admin"===e.user.role},isCurrentUserArtist:function(e){return e.user&&["user","vendor"].includes(e.user.role)},isCurrentUserClient:function(e){return e.user&&"client"===e.user.role},isCurrentUserVendor:function(e){return e.user&&"vendor"===e.user.role},isSaveProfileLoading:function(e){return e.isSaveProfileLoading},isSaveProfileLoadingError:function(e){return e.isSaveProfileLoadingError},changePassword:function(e){return e.changePassword},displayedTodos:function(e){return e.displayedTodos},displayedDoneTasks:function(e){return e.displayedDoneTasks},todosSearchText:function(e){return e.todosSearchText},todoSelectionGrid:function(e){return e.todoSelectionGrid},todoSearchQueries:function(e){return e.todoSearchQueries},userFilters:function(e){return e.userFilters},isTodosLoading:function(e){return e.isTodosLoading},isTodosLoadingError:function(e){return e.isTodosLoadingError},todoListScrollPosition:function(e){return e.todoListScrollPosition},timeSpentMap:function(e){return e.timeSpentMap},timeSpentTotal:function(e){return e.timeSpentTotal}},w={saveProfile:function(e,t){var s=e.commit,i=e.state;s(v["tf"]),c["a"].updatePerson(t.form).then((function(){t.form.id=i.user.id,s(v["uf"],t.form)})).catch((function(e){console.error(e),s(v["sf"])}))},checkNewPasswordValidityAndSave:function(e,t){var s=e.commit,i=e.state,n=t.form,a=t.callback;u["a"].isPasswordValid(n.password,n.password2)?w.changeUserPassword({commit:s,state:i},{form:n,callback:a}):(s(v["jf"]),a&&a())},changeUserPassword:function(e,t){var s=e.commit;e.state;s(v["hf"]),c["a"].changePassword(t.form,(function(e){s(e?v["gf"]:v["if"]),t.callback&&t.callback()}))},loadTodos:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=t.callback,o=t.forced,r=t.date,l=n.userFilters,d=n.taskTypeMap;0===i.todos.length||o?(s(v["of"]),c["a"].loadTodos((function(e,t){e?(s(v["nf"]),a&&a(e)):c["a"].loadDone((function(e,n){return e?s(v["nf"]):s(v["kf"],n),c["a"].loadTimeSpents(r).then((function(e){return s(v["lf"],e),s(v["mf"],{tasks:t,userFilters:l,taskTypeMap:d}),c["a"].getDayOff(i.user.id,r)})).then((function(e){s(v["zd"],e),a&&a()})).catch((function(e){console.error(e),s(v["nf"])}))}))}))):a&&a()},uploadAvatar:function(e,t){var s=e.commit,i=e.state;c["a"].postAvatar(i.user.id,i.avatarFormData,(function(e){e||s(v["ff"],i.user.id),t&&t(e)}))},setTodosSearch:function(e,t){var s=e.commit;e.state;s(v["Je"],t)},updateSearchFilter:function(e,t){var s=e.commit;return s(v["ef"],t),c["a"].updateFilter(t)},loadUserSearchFilters:function(e,t){var s=e.commit;c["a"].getUserSearchFilters((function(e,i){e?s(v["bd"]):s(v["ad"],i),t(e)}))},saveTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,i){var n=b.todoSearchQueries.find((function(e){return e.name===t}));n?e():c["a"].createFilter("todos",t,t,null,null,(function(t,n){s(v["je"],{searchQuery:n}),t?i(t):e(n)}))}))},removeTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return c["a"].removeFilter(t).then((function(){return s(v["Zd"],{searchQuery:t}),Promise.resolve(t)}))},setTodoListScrollPosition:function(e,t){var s=e.commit;e.rootGetters;s(v["Ke"],t)},loadContext:function(e,t){var s=e.commit;return c["a"].getContext().then((function(e){s(v["ad"],e.search_filters),s(v["Fc"],e.project_status),s(v["Tc"],e.task_status),s(v["Xc"],e.task_types),s(v["rc"],e.persons),s(v["gc"],e.custom_actions),s(v["dc"],e.asset_types),s(v["ye"],e.notification_count),s(v["oc"],e.projects)}))}},C=(i={},Object(n["a"])(i,v["pf"],(function(e,t){e.user=l["a"].helpers.addAdditionalInformation(t),e.isAuthenticated=!0})),Object(n["a"])(i,v["rf"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(n["a"])(i,v["qf"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(n["a"])(i,v["tf"],(function(e){e.isSaveProfileLoading=!0,e.isSaveProfileLoadingError=!1})),Object(n["a"])(i,v["sf"],(function(e){e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!0})),Object(n["a"])(i,v["uf"],(function(e,t){Object.assign(e.user,t),Object.assign(e.user,l["a"].helpers.addAdditionalInformation(e.user)),e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!1})),Object(n["a"])(i,v["Bb"],(function(e,t){e.user&&t&&e.user.id===t.id&&(Object.assign(e.user,t),Object.assign(e.user,l["a"].helpers.addAdditionalInformation(e.user)))})),Object(n["a"])(i,v["hf"],(function(e){e.changePassword={isLoading:!0,isError:!1,isSuccess:!1,isValid:!0}})),Object(n["a"])(i,v["gf"],(function(e){e.changePassword={isLoading:!1,isError:!0,isSuccess:!1,isValid:!0}})),Object(n["a"])(i,v["if"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!0,isValid:!0}})),Object(n["a"])(i,v["jf"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!1,isValid:!1}})),Object(n["a"])(i,v["of"],(function(e){e.isTodosLoadingError=!1,e.isTodosLoading=!0,e.timeSpents={},e.timeSpentTotal=0})),Object(n["a"])(i,v["mf"],(function(e,t){var s=t.tasks,i=t.userFilters,n=t.taskTypeMap;e.isTodosLoading=!1,s.forEach(f["e"]),s.forEach((function(e){var t=g.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.todoSelectionGrid=Object(_["b"])(s.length,1),e.todos=Object(p["o"])(s,n),e.todosIndex=Object(m["g"])(s);var a=Object(h["e"])(e.todosSearchText),o=Object(m["j"])(e.todosIndex,a);e.displayedTodos=o||e.todos,i.todos&&i.todos.all?e.todoSearchQueries=i.todos.all:e.todoSearchQueries=[]})),Object(n["a"])(i,v["kf"],(function(e,t){t.forEach(f["e"]),t.forEach((function(e){var t=g.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.displayedDoneTasks=t})),Object(n["a"])(i,v["nf"],(function(e,t){e.isTodosLoadingError=!0})),Object(n["a"])(i,v["H"],(function(e,t){e.avatarFormData=t})),Object(n["a"])(i,v["ff"],(function(e){if(e.user){var t=Math.random().toString(36).substring(7);e.user.has_avatar=!0,r.a.set(e.user,"uniqueHash",t),e.user.avatarPath="/api/pictures/thumbnails/persons/".concat(e.user.id,".png")}})),Object(n["a"])(i,v["rd"],(function(e,t){var s=t.comment,i=t.taskId,n=e.todos.find((function(e){return e.id===i}));if(n){var a=g.getTaskStatus(s.task_status_id);Object.assign(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color,last_comment:s}),e.todosIndex=Object(m["g"])(e.todos)}})),Object(n["a"])(i,v["Je"],(function(e,t){var s=Object(h["e"])(t),i=Object(m["j"])(e.todosIndex,s);e.todosSearchText=t,e.displayedTodos=i||e.todos})),Object(n["a"])(i,v["je"],(function(e,t){var s=t.searchQuery;e.todoSearchQueries.push(s),e.todoSearchQueries=Object(p["d"])(e.todoSearchQueries)})),Object(n["a"])(i,v["Zd"],(function(e,t){var s=t.searchQuery,i=e.todoSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.todoSearchQueries.splice(i,1)})),Object(n["a"])(i,v["n"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[t.x]&&(e.todoSelectionGrid[t.x][t.y]=!0)})),Object(n["a"])(i,v["Td"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[t.x]&&(e.todoSelectionGrid[t.x][t.y]=!1)})),Object(n["a"])(i,v["T"],(function(e){e.todoSelectionGrid=Object(_["c"])(e.todoSelectionGrid)})),Object(n["a"])(i,v["Ke"],(function(e,t){e.todoListScrollPosition=t})),Object(n["a"])(i,v["bd"],(function(e){})),Object(n["a"])(i,v["ad"],(function(e,t){e.userFilters=t})),Object(n["a"])(i,v["ef"],(function(e,t){Object.keys(e.userFilters).forEach((function(s){Object.keys(e.userFilters[s]).forEach((function(i){var n=e.userFilters[s][i],a=n.find((function(e){return e.id===t.id}));a&&Object.assign(a,t)}))}))})),Object(n["a"])(i,v["Ie"],(function(e,t){e.user.id===t.person_id&&(e.timeSpentMap[t.task_id]=t),e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,v["lf"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.timeSpentMap=s,e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,v["ee"],(function(e,t){var s=t.searchQuery,i=t.production;i&&(e.userFilters.task||(e.userFilters.task={}),e.userFilters.task[i.id]||(e.userFilters.task[i.id]=[]),e.userFilters.task[i.id].includes(s)||(e.userFilters.task[i.id].push(s),e.userFilters.task[i.id]=Object(p["d"])(e.userFilters.task[i.id])))})),Object(n["a"])(i,v["he"],(function(e,t){var s=t.searchQuery,i=t.production;e.userFilters.shot||(e.userFilters.shot={}),e.userFilters.shot[i.id]||(e.userFilters.shot[i.id]=[]),e.userFilters.shot[i.id].includes(s)||(e.userFilters.shot[i.id].push(s),e.userFilters.shot[i.id]=Object(p["d"])(e.userFilters.shot[i.id]))})),Object(n["a"])(i,v["Ld"],(function(e){})),Object(n["a"])(i,v["ae"],(function(e){Object.assign(e,Object(a["a"])({},y))})),i);t["a"]={namespace:!0,state:b,getters:k,actions:w,mutations:C}},"0fcb":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"description-cell",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onClick(t)},click:e.onClick}},[e.full?[s("div",{staticClass:"description-shorten-text",domProps:{innerHTML:e._s(e.compileMarkdown(e.entry.description||""))}})]:[e.isOpen?s("div",{staticClass:"c-mask"}):e._e(),s("span",{staticClass:"description-shorten-text",domProps:{innerHTML:e._s(e.compileMarkdown(e.shortenText(e.entry.description||"",20)))}}),e.isOpen?s("div",{staticClass:"tooltip",on:{dblclick:e.onDoubleClick,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onClick(t)}}},[e.isEditing?s("textarea",{ref:"text",staticClass:"tooltip-editor",domProps:{value:e.entry.description},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onClick(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.onDoubleClick(t):null}]}}):s("div",{staticClass:"tooltip-text",domProps:{innerHTML:e._s(e.compileMarkdown(e.entry.description))},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onClick(t)}}})]):e._e()]],2)},n=[],a=s("5530"),o=(s("a4d3"),s("e01a"),s("0e54")),r=s.n(o),c=s("2f62"),l=s("8c97"),d={name:"description-cell",data:function(){return{isEditing:!1,isOpen:!1,timeout:null}},components:{},props:{editable:{type:Boolean,default:!1},entry:{type:Object,default:function(){}},full:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])([])),{},{content:function(){return this.compileMarkdown(this.entry.description)}}),methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])([])),{},{compileMarkdown:function(e){return r()(e||"")},shortenText:l["a"].shortenText,onClick:function(e){"description"!==e.target.className.substring(0,11)&&"description"!==e.target.parentNode.className.substring(0,11)&&27!==e.keyCode||(this.isOpen=!this.isOpen)},onDoubleClick:function(){var e=this;if(this.editable){if(this.isEditing){var t=this.$refs.text.value;this.$emit("description-changed",t)}this.isEditing=!this.isEditing,this.isEditing&&this.$nextTick((function(){e.$refs.text.focus()}))}}})},u=d,p=(s("a423"),s("2877")),m=Object(p["a"])(u,i,n,!1,null,"03d1fb18",null);t["a"]=m.exports},"0ffc":function(e,t,s){},1:function(e,t){},"10de":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABxCAYAAACQnewjAAAH/klEQVR4nO3dSYwMbxzG8Xfsyxgh9rEFQRARCU4Eie0gHFwlRJwtV8RcnCUcJeIiHIRBgguxJdZEhBBi37eRse/mn+f9q9ZdU+9vqnvGzHT395NUZlpNdVe396l3q+qqcM41OACJOvCxAGEEBDAQEMBAQAADAQEMBAQwEBDAQEAAAwEBDAQEMBAQwEBAAAMBAQwEBDAQEMBAQAADAQEMBAQwEBDAQEAAAwEBDAQEMHTiwyldXbp0ccOHD/fLyJEjM0v0eM6cOe7+/fvl/jGZCEgR69atW6NCr2XEiBFu1KhRbuDAga6iosL9+PHDPXz40N26dcs9evTIHTlyxNXU1Pi/IyA2AtKOVVZW5hR6LdmBUACkvr7eB6Cqqsr16dPH9erVy3Xs2DHzxjp37uw2bdrk9u7dm/m3FStW+OeBjYC0IRXm7EKfHQLVAL179/Y79/nzZ/f161d3+vRpd/fuXf9TNcGDBw/88v79e/93qhkWLVqU+IYGDx6c81jbEZCmEZB/aMCAAYlH/uh3Henl+fPnvgZQoZ81a5YPRqdOf/9revTo4Zf169ebTaKnT58G1w0aNCjnsV5L+wUbASmQ2vY6KscLfVQT6Kf6CA0NDe7jx4/u27dvPgTHjh1zhw4d8kdwFVL9m9ZFXr9+nROObCrkVkBevnwZXFddXZ3zWK8/f/78Vv/cig0BCVAbXoUq1AnWY40S/fz50z1+/DjT3FEgxo4d6zp0+H8EXUFSTaHlxIkTbuPGjebrqpD369cvcV28kMdZNYhqs2w0sdIhIFl05D5+/LgbM2aM7wArJL9+/fLtfxV0dXY1+pPd/n/27Jn7/ft35klWr17tFi5cmPj88X5AEhXyiRMnJq6LF/I4qwYZOnRozmPt+7BhwzLvEYEywefyl2qDCRMm5BzBVYB69uyZebxjxw7fDArJpx+QJJ9CHqewhkQjXhGFXAcEhfbJkyepPp9yREBi1MbX6FL2MGk2FTQrIC9evAiua6qJ5PIs5HHq7If07dvXvy8FIuojiX4SkDACEqMj67hx4/ycQhIV8uvXrwe3twqpRqI0t6FOeyHbDxkyxNx3DQdH1GzS8K8GABT27t27u7dv3/q1+qnBgQMHDrgvX76Yz1nuCEiM2uaaeQ5p6ij+6tUr3yeJOulxCphmtEOsGkh9hqlTpwYnD6N5kzdv3viaMOonRSNm0e9WQJGLgMSoAIUKt0txFNeRWyEJ9TcUsFBAtE1UyPU8Ksjfv3/3NYBqHnXeL1++7JthqgG03Lhxw08QZgdAgwpoGQQkRgVM8xchaUai1EwKBUQnCKqznVQLdO3a1QdDHX3NmGtfFILsWkCLQoPWQUBiVADVXg8JFXyNCEUFX0d8NdNUA6jAa3hYNYD+fcOGDTlH+7Nnz7rdu3fnDBtrNA3tA3e5jVHn/N27d8H1165dc9u2bWvU/lfTSwFQp1ejQvfu3Uts/6t20WQiigMBSaDRn6gGiNr/Ud/gw4cPjQp91B/Q7+p/oHQQkARHjx71k4Mq7BpV0qIJPP1UQEqJRrysYetyRx8kgfogM2fObHf79S8cPHjQLV26tPTeWAvhmnTAQEAM1nlV27dv96duhJYtW7YEt71y5Yq5beiiJ1EHXxOGoW01cGANAixYsMD/3Z49e5r9+ZQDmliG/v37B1eeOXPGX+oaMmXKlOC6c+fOmdtOmjQpuO7mzZvmuVPTpk3zZx4n0fCx9lsjbcylpEMNYtD1HiHnz583t1VBDblw4UKbbHv16lXOvcoTASmARrR0kVSI5kWsazcuXrxovuiMGTP+ybaXLl1qyY+hLBCQAjR1FLcKqSYhrZMVda6Wda14c167qW3RGAEpQFMFbfr06cF1qgGsTrS1rZpHmskPyf4qoCQEJH900hNYZ/NKXV2d2QnXCYkhmoG3tl28eHFw3e3bt80O/Lx584LrPn365Od3oteOzgxA0xpYcpeTJ082SH19fUOpqqur8++straW/39joQYx6Ava9u/fn/kDDZ9qDiG6Mi9f+mYTXeFXyBCrToXXGcOqCfKl7XTqTPZJmMuXL3dz5879J59bKSEgBp2Ru2vXrna7f80xe/bs4t35VkQnHTAQEMBAQAADfZAUdCmtvm2xmOniL33hA/JDQFJYtmyZ27p1a7vfT4vOw7LmX5CMJhZgoAZJYefOna62tragbdeuXevWrFnjL9WdPHlyK+/5X5zeXhgCkoK+xCG6i1O+ous+9G2L+lIHFBeaWICBgAAGAgIYCAhgICCAgYAABgICGJgHSUGXwa5ataqgbcePH+9/6vZrhU42tgTdcWrdunVt9vrFioCkMHr0aLdkyZJmPYfuEdLc52gOnYuF/BGQFHS3J33JcyFUg+imoLqdgm6V1lZUgyB/BCSFw4cP+6UQNTU1bvPmzf4OtHyLevGhkw4YCAhgICCAgYAABgICGAgIYCAggIF5kBSac6pJdXW1v320bn/GqSbFh4Ck0BKnmrg/36/VVjjVpDAEJAXdNPPUqVPtfj8td+7cab87144RkBT27dvnF5QfOumAgYAABgICGOiDGKqqqvw9z0tRZWVlSb6vlkZADCtXrvQLyhdNLMBQ8ecWuMiim+WUSxNEd77lctwwAgIYaGIBBgICGAgIYCAggIGAAAYCAhgICGAgIICBgAAGAgIYCAhgICCAgYAABgICGAgIYCAggIGAAAYCAhgICGAgIICBgAAGAgKEOOf+A6kjsx2PQ0m8AAAAAElFTkSuQmCC"},"10fe":function(e,t,s){"use strict";s("20d1")},1149:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label?s("label",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),s("p",{staticClass:"control"},[s("textarea",{ref:"input",staticClass:"input",class:"input "+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.value},on:{input:e.updateValue,keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter(t)},e.emitKeyup]}})])])},n=[],a=s("5530"),o=s("2f62"),r={name:"textarea-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},emitKeyup:function(e){this.$emit("keyup",e)},focus:function(){this.$refs.input&&this.$refs.input.focus()}})},c=r,l=(s("10fe"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"3c02bd0a",null);t["a"]=d.exports},"11ca":function(e,t,s){},"12c5":function(e,t,s){"use strict";s("f420")},"14b2":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"actions has-text-right"},[e.hideHistory?e._e():s("button",{staticClass:"button",attrs:{"data-test":"button-history",tabindex:"-1"},on:{click:function(t){return e.$emit("history-clicked")}}},[s("clock-icon",{staticClass:"icon is-small only-icon"})],1),e.hideEdit||e.entry.canceled?e._e():s("button",{staticClass:"button",attrs:{"data-test":"button-edit",tabindex:"-1"},on:{click:function(t){return e.$emit("edit-clicked")}}},[s("edit-icon",{staticClass:"icon is-small only-icon"})],1),e.entry.canceled?s("button",{staticClass:"button",attrs:{"data-test":"button-restore",tabindex:"-1"},on:{click:function(t){return e.$emit("restore-clicked")}}},[s("rotate-ccw-icon",{staticClass:"icon is-small only-icon"})],1):e._e(),e.hideDelete||e.entry.canceled||!e.isCurrentUserAdmin?e.hideDelete?e._e():s("button",{staticClass:"button",attrs:{"data-test":"button-delete",tabindex:"-1"},on:{click:function(t){return e.$emit("delete-clicked")}}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1):s("button",{staticClass:"button",attrs:{"data-test":"button-delete-admin",tabindex:"-1"},on:{click:function(t){return e.$emit("delete-clicked")}}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1)])},n=[],a=s("5530"),o=s("2f62"),r=s("0a35"),c={name:"row-actions-cell",components:{ClockIcon:r["l"],EditIcon:r["s"],RotateCcwIcon:r["N"],TrashIcon:r["V"]},props:{entry:{type:Object,default:function(){return{}}},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1},hideHistory:{type:Boolean,default:!0}},computed:Object(a["a"])({},Object(o["c"])(["isCurrentUserAdmin"])),methods:Object(a["a"])({},Object(o["b"])([]))},l=c,d=(s("fd99"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"95ecbf62",null);t["a"]=u.exports},1537:function(e,t,s){},"162b":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.shotToEdit&&this.shotToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.edit_title"))+" "+e._s(e.shotToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.new_shot"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("shots.fields.sequence"),options:e.getSequenceOptions},model:{value:e.form.sequence_id,callback:function(t){e.$set(e.form,"sequence_id",t)},expression:"form.sequence_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("shots.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("shots.fields.description")},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runConfirmation(t):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.runConfirmation(t):null}]},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbFramesField",attrs:{label:e.$t("shots.fields.nb_frames"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.nb_frames,callback:function(t){e.$set(e.form,"nb_frames",t)},expression:"form.nb_frames"}}),s("text-field",{ref:"frameInField",attrs:{label:e.$t("shots.fields.frame_in"),type:"number"},model:{value:e.form.frameIn,callback:function(t){e.$set(e.form,"frameIn",t)},expression:"form.frameIn"}}),s("text-field",{ref:"frameOutField",attrs:{label:e.$t("shots.fields.frame_out"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.frameOut,callback:function(t){e.$set(e.form,"frameOut",t)},expression:"form.frameOut"}}),s("text-field",{ref:"fpsField",attrs:{label:e.$t("shots.fields.fps"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}),e._l(e.shotMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)})),s("div",{staticClass:"jsoneditor-container"},[s("h2",[e._v("Metadata")]),s("v-jsoneditor",{staticClass:"json-editor",attrs:{options:e.options,plus:!0,height:"400px"},model:{value:e.form.data.metadata,callback:function(t){e.$set(e.form.data,"metadata",t)},expression:"form.data.metadata"}})],1)],2),s("modal-footer",{attrs:{"error-text":e.$t("shots.edit_fail"),"is-loading":e.isLoading,"is-error":e.isError},on:{confirm:e.confirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=s("2909"),o=s("5530"),r=(s("d81d"),s("99af"),s("b0c0"),s("a4d3"),s("e01a"),s("2f62")),c=s("d065"),l=s("bcb2"),d=s.n(l),u=s("992f"),p=s("d5c9"),m=s("7bf8"),h=s("1149"),f={name:"edit-shot-modal",mixins:[c["a"]],components:{VJsoneditor:d.a,Combobox:u["a"],ModalFooter:p["a"],TextField:m["a"],TextareaField:h["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","shotToEdit","errorText"],data:function(){return{form:{data:{}},shotSuccessText:""}},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["currentProduction","getSequenceOptions","getOpenProductionOptions","openProductions","sequences","shots","shotCreated","shotMetadataDescriptors"])),{},{frameIn:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_in:""},frameOut:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_out:""},fps:function(){return this.shotToEdit.data?this.shotToEdit.data.fps:""}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])([])),{},{runConfirmation:function(){this.isEditing()?this.confirmClicked():this.confirmAndStayClicked()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(a["a"])(t))},isEditing:function(){return this.shotToEdit&&this.shotToEdit.id},resetForm:function(){this.shotSuccessText="",this.isEditing()?this.form={sequence_id:this.shotToEdit.sequence_id,project_id:this.shotToEdit.project_id,name:this.shotToEdit.name,description:this.shotToEdit.description,nb_frames:this.shotToEdit.nb_frames,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps,data:Object(o["a"])({},this.shotToEdit.data)||{}}:(this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.sequences.length>0&&(this.form.sequence_id=this.sequences[0].id),this.form.name="",this.form.description="",this.form.nb_frames=0,this.form.data={})}}),mounted:function(){this.resetForm()},watch:{active:function(){var e=this;this.shotSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)},shotToEdit:function(){this.resetForm()},shotCreated:function(){this.isEditing()?this.shotSuccessText=this.$t("shots.edit_success",{name:this.shotCreated}):this.shotSuccessText=this.$t("shots.new_success",{name:this.shotCreated})}}},_=f,v=(s("a2db"),s("6304"),s("2877")),g=Object(v["a"])(_,i,n,!1,null,"47ce346b",null);t["a"]=g.exports},"16ce":function(e,t,s){},"186e":function(e,t,s){},"18ab":function(e,t,s){e.exports=s.p+"img/empty_production.3f6b8a82.png"},"1b4a":function(e,t,s){},"1b5e":function(e,t,s){},"1b99":function(e,t,s){"use strict";s("7128")},"1bbb":function(e,t,s){"use strict";s("0ffc")},"1ce5":function(e,t,s){"use strict";s("e577")},"1d3d":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.productionToEdit&&e.productionToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.edit_title"))+" "+e._s(e.productionToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.new_production"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[e.productionToEdit&&e.productionToEdit.id?s("div",{staticClass:"productionpicturedrop"},[s("span",{staticClass:"label"},[e._v(e._s(e.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{label:e.$t("main.csv.upload_file"),accept:".png,.jpg,.jpeg"},on:{fileselected:e.onFileSelected}})],1):e._e(),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("productions.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.productionToEdit&&e.productionToEdit.id?s("combobox",{attrs:{label:e.$t("productions.fields.status"),options:e.productionStatusOptions,localeKeyPrefix:"productions.status."},on:{enter:e.runConfirmation},model:{value:e.form.project_status_id,callback:function(t){e.$set(e.form,"project_status_id",t)},expression:"form.project_status_id"}}):e._e(),s("combobox",{attrs:{label:e.$t("productions.fields.type"),options:e.productionTypeOptions,localeKeyPrefix:"productions.type."},on:{enter:e.runConfirmation},model:{value:e.form.production_type,callback:function(t){e.$set(e.form,"production_type",t)},expression:"form.production_type"}}),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:e.$t("productions.fields.fps")},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:e.$t("productions.fields.ratio")},on:{enter:e.runConfirmation},model:{value:e.form.ratio,callback:function(t){e.$set(e.form,"ratio",t)},expression:"form.ratio"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:e.$t("productions.fields.resolution")},on:{enter:e.runConfirmation},model:{value:e.form.resolution,callback:function(t){e.$set(e.form,"resolution",t)},expression:"form.resolution"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("div",{staticClass:"jsoneditor-container"},[s("h2",[e._v("Metadata")]),s("v-jsoneditor",{staticClass:"json-editor",attrs:{options:e.options,plus:!0,height:"400px"},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1):e._e()],1),s("modal-footer",{attrs:{"error-text":e.$t("productions.edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=s("5530"),o=(s("b0c0"),s("2f62")),r=s("d065"),c=s("bcb2"),l=s.n(c),d=s("992f"),u=s("d5c9"),p=s("4085"),m=s("7bf8"),h={name:"edit-production-modal",mixins:[r["a"]],components:{VJsoneditor:l.a,Combobox:d["a"],FileUpload:p["a"],ModalFooter:u["a"],TextField:m["a"]},props:["text","active","isLoading","isError","errorText","productionToEdit"],data:function(){var e={formData:null,productionTypeOptions:[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"},{label:"game",value:"game"}]};return this.productionToEdit&&this.productionToEdit.id?e.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short",data:this.productionToEdit.data}:e.form={name:"",project_status_id:this.productionStatus?this.productionStatus[0].id:null,fps:"",ratio:"",resolution:"",production_type:"short",data:{}},e.options={name:"metadata root",mode:"form",modes:["tree","form","preview","code"]},e},created:function(){this.resetForm(),this.productionTypeOptions=[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"},{label:"game",value:"game"}]},mounted:function(){this.productionStatus.length>0&&(this.form.project_status_id=this.productionStatus[0].id)},computed:Object(a["a"])({},Object(o["c"])(["productions","productionStatus","productionStatusOptions"])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{runConfirmation:function(){this.$emit("confirm",this.form)},onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},resetForm:function(){var e=this;this.productionToEdit&&this.productionToEdit.id?(this.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short",data:this.productionToEdit.data},this.form.project_status_id=null,this.$nextTick((function(){e.form.project_status_id=e.productionToEdit.project_status_id}))):this.form={name:"",project_status_id:this.productionStatusOptions[0].value,fps:"",ratio:"",resolution:"",production_type:"short",data:{}}}}),watch:{productionToEdit:function(){this.resetForm()},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.nameField.focus(),e.formData=null,e.$refs.fileField&&e.$refs.fileField.reset()}),100)}}},f=h,_=(s("d936"),s("2153"),s("2877")),v=Object(_["a"])(f,i,n,!1,null,"e1780f9a",null);t["a"]=v.exports},"1d53":function(e,t,s){"use strict";s("5395")},"1dc9":function(e,t,s){},"1e4c":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isSimple?s("span",{staticClass:"select"},[s("select",{ref:"select",staticClass:"select-input",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,i){return s("option",{key:i+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)]):s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0}},[s("select",{ref:"select",staticClass:"select-input",attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,i){return s("option",{key:i+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)])])])},n=[],a=(s("a9e3"),{name:"combobox",props:{label:{default:"",type:String},value:{default:0,type:Number},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isSimple:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",parseInt(this.$refs.select.value))},emitEnter:function(){this.$emit("enter",parseInt(this.$refs.select.value))},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}}),o=a,r=(s("e007"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"4e1af092",null);t["a"]=c.exports},"1ea9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",class:{dark:!0,"full-height":!e.isAddingEntity||e.isLoading,"playlist-player":!0}},[e.tempMode?e._e():s("div",{ref:"header",staticClass:"playlist-header flexrow"},[e.playlist&&e.playlist.for_client?s("div",{staticClass:"flexrow-item for-client"},[e._v(" "+e._s(e.$t("playlists.client_playlist"))+" ")]):e._e(),s("span",{staticClass:"flexrow-item playlist-name"},[e._v(" "+e._s(e.playlist.name)+" ")]),e.isCurrentUserManager&&!e.isAddingEntity?s("button-simple",{staticClass:"playlist-button add-entities-button flexrow-item",attrs:{icon:"plus",text:e.addEntitiesText},on:{click:function(t){return e.$emit("show-add-entities")}}}):e._e(),e.isCurrentUserManager?s("button-simple",{staticClass:"edit-button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.edit"),icon:"edit"},on:{click:function(t){return e.$emit("edit-clicked")}}}):e._e(),e.isCurrentUserManager?s("button-simple",{staticClass:"delete-button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.delete"),icon:"delete"},on:{click:e.showDeleteModal}}):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAddingEntity||e.isLoading,expression:"!isAddingEntity || isLoading"}],staticClass:"flexrow filler"},[s("div",{ref:"video-container",class:{filler:!0,flexrow:!0,"video-container":!0,"flexrow-reverse":!e.isComparisonOverlay}},[s("raw-video-player",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&e.isCurrentPreviewMovie&&e.isMovieComparison&&!e.isLoading,expression:"isComparing && isCurrentPreviewMovie &&\r\n                isMovieComparison && !isLoading"}],ref:"raw-player-comparison",staticClass:"raw-player",style:{position:e.isComparisonOverlay?"absolute":"static"},attrs:{entities:e.entityListToCompare,"is-repeating":e.isRepeating,muted:!0,"full-screen":e.fullScreen,name:"comparison"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&!e.isLoading&&!e.isCurrentPreviewFile&&(e.isCurrentPreviewMovie&&!e.isMovieComparison||!e.isCurrentPreviewMovie),expression:"\r\n          isComparing &&\r\n          !isLoading &&\r\n          !isCurrentPreviewFile &&\r\n          (\r\n            (isCurrentPreviewMovie && !isMovieComparison) ||\r\n            !isCurrentPreviewMovie\r\n          )\r\n        "}],staticClass:"picture-preview-comparison-wrapper",style:{position:e.isComparisonOverlay?"absolute":"static",left:0,right:0}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&e.isPictureComparison,expression:"isComparing && isPictureComparison"}],ref:"picture-player-comparison",staticClass:"picture-preview",attrs:{src:e.currentComparisonPreviewPath}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&!e.isPictureComparison,expression:"isComparing && !isPictureComparison"}],staticClass:"picture-preview"},[e._v(" It's not a picture preview ")])]),s("raw-video-player",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewMovie&&!e.isLoading,expression:"isCurrentPreviewMovie && !isLoading"}],ref:"raw-player",staticClass:"raw-player",style:{position:e.isComparisonOverlay?"absolute":"static",opacity:e.overlayOpacity},attrs:{entities:e.entityList,"is-repeating":e.isRepeating,muted:e.isMuted,"full-screen":e.fullScreen},on:{repeat:e.onVideoRepeated,"metadata-loaded":e.onMetadataLoaded,"entity-change":e.onPlayerEntityChange,"time-update":e.onTimeUpdate,"max-duration-update":e.onMaxDurationUpdate}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewFile&&!e.isLoading,expression:"isCurrentPreviewFile && !isLoading"}],staticClass:"preview-standard-file has-text-centered",style:{width:"100%"}},[s("a",{ref:"preview-file",staticClass:"button",attrs:{href:e.currentPreviewDlPath}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v(" "+e._s(e.$t("tasks.download_pdf_file",{extension:e.extension}))+" ")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewPicture&&!e.isLoading,expression:"isCurrentPreviewPicture && !isLoading"}],ref:"picture-player-wrapper",staticClass:"picture-preview-wrapper flexrow",style:{position:e.isComparisonOverlay?"absolute":"static",opacity:e.overlayOpacity,left:0,right:0}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewPicture,expression:"isCurrentPreviewPicture"}],ref:"picture-player",staticClass:"picture-preview",attrs:{id:"picture-player",src:e.isCurrentPreviewPicture?e.currentPreviewPath:null}})]),e.isLoading?s("div",{staticClass:"loading-wrapper"},[s("spinner")],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCurrentPreviewFile,expression:"!isCurrentPreviewFile"}],ref:"canvas-wrapper",staticClass:"canvas-wrapper",attrs:{oncontextmenu:"return false;"}},[s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"playlist-annotation-canvas"}})])],1),s("task-info",{ref:"task-info",class:{"flexrow-item":!0,"task-info-column":!0,hidden:e.isCommentsHidden},attrs:{task:e.task,"is-preview":!1}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewMovie&&!e.isAddingEntity,expression:"isCurrentPreviewMovie && !isAddingEntity"}],ref:"playlist-progress",staticClass:"playlist-progress"},[s("div",{staticClass:"video-progress"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:e.onProgressBarClicked}},[s("span",{ref:"progress-bar",attrs:{id:"progress-bar"}})])])]),s("annotation-bar",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewMovie&&e.playlist.id&&!e.isAddingEntity,expression:"isCurrentPreviewMovie && playlist.id && !isAddingEntity"}],ref:"playlist-annotation",staticClass:"playlist-annotations",attrs:{annotations:e.annotations,"max-duration-raw":e.maxDurationRaw},on:{"select-annotation":e.loadAnnotation}}),e.playlist.id&&!e.isAddingEntity?s("div",{ref:"button-bar",staticClass:"playlist-footer flexrow"},[s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.previous_shot"),icon:"back"},on:{click:e.onPlayPreviousEntityClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.next_shot"),icon:"forward"},on:{click:e.onPlayNextEntityClicked}}),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.entity_index")}},[e._v(" "+e._s(e.entityList.length>0?e.playingEntityIndex+1:0)+" ")]),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.entities_number")}},[e._v(" "+e._s(e.entityList.length)+" ")]),s("div",{staticClass:"separator"}),e.currentEntityPreviewLength>1?s("div",{staticClass:"flexrow flexrow-item"},[s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"left",title:e.$t("playlists.actions.files_previous")},on:{click:e.onPreviousPreviewClicked}}),s("span",{staticClass:"ml05 mr05",attrs:{title:e.$t("playlists.actions.files_position")}},[e._v(" "+e._s(e.currentPreviewIndex+1)+" / "+e._s(e.currentEntityPreviewLength)+" ")]),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"right",title:e.$t("playlists.actions.files_next")},on:{click:e.onNextPreviewClicked}}),s("a",{staticClass:"button playlist-button flexrow-item",attrs:{href:e.currentPreviewPath,title:e.$t("playlists.actions.see_original_file"),target:"blank"}},[s("arrow-up-right-icon",{staticClass:"icon is-small"})],1)],1):e._e(),e.isCurrentPreviewMovie?s("div",{staticClass:"flexrow flexrow-item"},[e.isPlaying?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.pause"),icon:"pause"},on:{click:e.onPlayClicked}}):s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.play"),icon:"play"},on:{click:e.onPlayClicked}}),3===e.speed?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.speed"),text:"x1.00"},on:{click:e.onSpeedClicked}}):2===e.speed?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.speed"),text:"x0.50"},on:{click:e.onSpeedClicked}}):s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.speed"),text:"x0.25"},on:{click:e.onSpeedClicked}}),e.isMuted?s("button-simple",{staticClass:"flexrow-item playlist-button",attrs:{title:e.$t("playlists.actions.unmute"),icon:"soundoff"},on:{click:e.onToggleSoundClicked}}):s("button-simple",{staticClass:"flexrow-item playlist-button",attrs:{title:e.$t("playlists.actions.mute"),icon:"soundon"},on:{click:e.onToggleSoundClicked}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{active:e.isRepeating,title:e.$t("playlists.actions.looping"),icon:"repeat"},on:{click:e.onRepeatClicked}}),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.current_time")}},[e._v(" "+e._s(e.currentTime)+" ")]),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.max_duration")}},[e._v(" "+e._s(e.maxDuration)+" ")]),s("span",{staticClass:"flexrow-item time-indicator mr1",attrs:{title:e.$t("playlists.actions.frame_number")}},[e._v(" ("+e._s(e.currentFrame)+") ")]),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.previous_frame"),icon:"left"},on:{click:e.onPreviousFrameClicked}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.next_frame"),icon:"right"},on:{click:e.onNextFrameClicked}})],1):e._e(),e.isCurrentPreviewMovie||e.isCurrentPreviewPicture?s("div",{staticClass:"flexrow flexrow-item comparison-buttons"},[e.taskTypeOptions&&e.taskTypeOptions.length>0?s("button-simple",{class:{"comparison-button":!0,"flexrow-item":!0,"playlist-button":!0,active:e.isComparing},attrs:{title:e.$t("playlists.actions.split_screen"),icon:"compare"},on:{click:e.onCompareClicked}}):e._e(),s("div",{staticClass:"flexrow comparison-combos"},[e.isComparing?s("combobox",{staticClass:"playlist-button flexrow-item comparison-list",attrs:{options:e.taskTypeOptions},model:{value:e.taskTypeToCompare,callback:function(t){e.taskTypeToCompare=t},expression:"taskTypeToCompare"}}):e._e(),e.isComparing?s("combobox",{staticClass:"playlist-button flexrow-item comparison-list",attrs:{options:e.revisionOptions},model:{value:e.revisionToCompare,callback:function(t){e.revisionToCompare=t},expression:"revisionToCompare"}}):e._e(),e.isComparing?s("combobox",{staticClass:"playlist-button flexrow-item comparison-list",attrs:{options:e.comparisonModeOptions},model:{value:e.comparisonMode,callback:function(t){e.comparisonMode=t},expression:"comparisonMode"}}):e._e(),e.isComparing&&e.currentRevisionToCompare&&e.currentComparisonPreviewLength>1?s("div",{staticClass:"flexrow flexrow-item comparison-list"},[s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"left"},on:{click:e.onPreviousComparisonPictureClicked}}),s("span",{staticClass:"flexrow-item comparison-index"},[e._v(" "+e._s(e.currentComparisonPreviewIndex+1)+" / "+e._s(e.currentComparisonPreviewLength)+" ")]),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"right"},on:{click:e.onNextComparisonPictureClicked}})],1):e._e()],1)],1):e._e(),s("span",{staticClass:"filler"}),e.isCurrentUserManager&&e.tempMode?s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.save_playlist"),icon:"save"},on:{click:function(t){return e.$emit("save-clicked")}}}):e._e(),e.isCurrentUserArtist||!e.isCurrentPreviewMovie&&!e.isCurrentPreviewPicture?e._e():s("div",{staticClass:"flexrow"},[e.isCurrentUserManager&&e.tempMode?s("div",{staticClass:"separator"}):e._e(),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"undo",title:e.$t("playlists.actions.annotation_undo")},on:{click:e.undoLastAction}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.annotation_redo"),icon:"redo"},on:{click:e.redoLastAction}}),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isTyping,expression:"isTyping"}],staticClass:"annotation-tools"},[s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.textColor,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeTextColor}})],1)]),s("button-simple",{class:{"playlist-button":!0,"flexrow-item":!0,active:e.isTyping},attrs:{title:e.$t("playlists.actions.annotation_text"),icon:"type"},on:{click:e.onTypeClicked}}),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawing,expression:"isDrawing"}],staticClass:"annotation-tools"},[s("pencil-picker",{attrs:{isOpen:e.isShowingPencilPalette,pencil:e.pencil,sizes:this.pencilPalette},on:{"toggle-palette":e.onPickPencil,change:e.onChangePencil}}),s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.color,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeColor}})],1)]),s("button-simple",{class:{"playlist-button":!0,"flexrow-item":!0,active:e.isDrawing},attrs:{title:e.$t("playlists.actions.annotation_draw"),icon:"pencil"},on:{click:e.onAnnotateClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"remove",title:e.$t("playlists.actions.annotation_delete")},on:{click:e.onDeleteClicked}})],1),s("div",{staticClass:"separator"}),e.tempMode?e._e():s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.change_task_type"),icon:"layers"},on:{click:e.showTaskTypeModal}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.comments"),icon:"comment"},on:{click:e.onCommentClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.entity_list"),icon:"film"},on:{click:e.onFilmClicked}}),e.tempMode?e._e():s("div",{staticClass:"flexrow-item playlist-button",staticStyle:{position:"relative"}},[s("a",{class:{"dl-button":!0,"zip-button":!0,hidden:e.isDlButtonsHidden},attrs:{href:e.zipDlPath}},[e._v(" "+e._s(e.$t("playlists.download_zip"))+" ")]),s("a",{class:{"dl-button":!0,"csv-button":!0,hidden:e.isDlButtonsHidden},attrs:{href:e.csvDlPath}},[e._v(" "+e._s(e.$t("playlists.download_csv"))+" ")]),s("span",{class:{"dl-button":!0,"mp4-button":!0,disabled:!e.isCurrentUserManager||e.isJobRunning,hidden:e.isDlButtonsHidden},on:{click:e.onBuildClicked}},[e._v(" "+e._s(e.$t("playlists.build_mp4"))+" ")]),s("div",{class:{"build-list":!0,hidden:e.isDlButtonsHidden}},[e.playlist.build_jobs&&0!==e.playlist.build_jobs.length?s("div",[s("div",{staticClass:"build-title"},[e._v(" "+e._s(e.$t("playlists.available_build"))+" ")]),e._l(e.playlist.build_jobs,(function(t){return s("div",{key:t.id,staticClass:"flexrow"},["running"===t.status?s("span",[e._v(" "+e._s(e.$t("playlists.building"))+" ")]):"failed"===t.status?s("span",[e._v(" "+e._s(e.$t("playlists.failed"))+" ")]):s("a",{staticClass:"flexrow-item",attrs:{href:e.getBuildPath(t)}},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")]),s("span",{staticClass:"filler"}),"running"===t.status?s("spinner",{staticClass:"build-spinner"}):e._e(),s("button",{staticClass:"delete-job-button",on:{click:function(s){return e.onRemoveBuildJob(t)}}},[e._v(" x ")])],1)}))],2):s("span",[e._v(" "+e._s(e.$t("playlists.no_build"))+" ")])]),s("button-simple",{staticClass:"playlist-button",attrs:{title:e.$t("playlists.actions.download"),icon:"download"},on:{click:e.toggleDlButtons}})],1),e.isFullScreenEnabled?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.fullscreen"),icon:"maximize"},on:{click:e.onFullscreenClicked}}):e._e()],1):e._e(),e.playlist.id?s("div",{ref:"playlisted-entities",class:{"playlisted-entities":!0,flexrow:!0,hidden:e.isEntitiesHidden}},[e.isLoading?s("spinner",{staticClass:"spinner"}):e._l(e.entityList,(function(t,i){return s("div",{key:t.id,staticClass:"flexrow-item has-text-centered playlisted-wrapper"},[s("playlisted-entity",{ref:"entity-"+i,refInFor:!0,attrs:{index:i,entity:t,"is-playing":e.playingEntityIndex===i},on:{"play-click":e.playEntity,"remove-entity":e.removeEntity,"preview-changed":e.onPreviewChanged,"entity-dropped":e.onEntityDropped}})],1)}))],2):e._e(),s("delete-modal",{attrs:{active:e.modals.delete,"is-loading":e.loading.deletePlaylist,"is-error":e.errors.deletePlaylist,text:e.deleteText,"error-text":e.$t("playlists.delete_error")},on:{confirm:e.confirmRemovePlaylist,cancel:e.hideDeleteModal}}),s("select-task-type-modal",{attrs:{active:e.modals.taskType,"task-type-list":e.entityTaskTypes},on:{confirm:e.confirmChangeTaskType,cancel:e.hideTaskTypeModal}})],1)},n=[],a=s("5530"),o=(s("07ac"),s("caad"),s("7db0"),s("99af"),s("b0c0"),s("4de4"),s("c740"),s("a434"),s("d81d"),s("d3b7"),s("b64b"),s("159b"),s("cb29"),s("a9e3"),s("25f0"),s("7f45")),r=s.n(o),c=s("2f62"),l=s("7a94"),d=s("0a35"),u=s("bcd2"),p=s("8707"),m=s("de40"),h=s("7096"),f=s("992f"),_=s("5f48"),v=s("7f06"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flexrow wrapper"},[s("drag",{attrs:{"transfer-data":e.entity.id},on:{drag:e.onDragged}},[s("div",{class:{"playlisted-entity":!0,playing:e.isPlaying}},[s("div",{staticClass:"thumbnail-wrapper",on:{click:function(t){return t.preventDefault(),e.onPlayClick(t)}}},[e.isCurrentUserManager?s("span",{staticClass:"remove-button flexrow-item",attrs:{title:e.$t("playlists.remove")},on:{click:function(t){return t.preventDefault(),e.onRemoveClick(t)}}},[s("x-icon")],1):e._e(),s("light-entity-thumbnail",{attrs:{width:"150px",height:"103px","preview-file-id":e.previewFileId}})],1),s("div",{staticClass:"entity-title"},[e._v(" "+e._s(e.entity.parent_name)+" / "+e._s(e.entity.name)+" ")]),e.taskTypeOptions.length>0?s("div",{staticClass:"preview-choice"},[s("combobox",{ref:"task-type-combobox",attrs:{thin:!0,width:150,options:e.taskTypeOptions},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("combobox",{staticClass:"version-combo",attrs:{thin:!0,width:150,options:e.previewFileOptions},model:{value:e.previewFileId,callback:function(t){e.previewFileId=t},expression:"previewFileId"}})],1):s("div",[e._v(" "+e._s(e.$t("playlists.no_preview"))+" ")])])]),s("drop",{on:{drop:e.onDropped}},[s("div",{ref:"drop-area",staticClass:"drop-area"})])],1)},y=[],b=s("ceca"),k=s.n(b),w=s("d793"),C={name:"playlisted-entity",components:{Combobox:f["a"],LightEntityThumbnail:w["a"],XIcon:d["cb"]},data:function(){return{taskTypeId:null,previewFileId:this.entity.preview_file_id}},props:{index:{default:0,type:Number},isPlaying:{default:!1,type:Boolean},entity:{default:function(){},type:Object}},mounted:function(){this.setCurrentParameters(),this.setListeners()},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])(["taskTypeMap","isCurrentUserManager"])),{},{dropArea:function(){return this.$refs["drop-area"]},taskTypeOptions:function(){var e=this;return this.entity.preview_files?Object.keys(this.entity.preview_files).map((function(t){return e.taskTypeMap[t]})).sort(k()("priority",1).thenBy("name")).map((function(e){return{label:e.name,value:e.id}})):[]},previewFileOptions:function(){var e=this.entity.preview_files[this.taskTypeId]||[];return e.map((function(e){return{label:"v".concat(e.revision),value:e.id}}))}}),methods:{getTaskTypeIdForPreviewFile:function(e,t){var s=this;return e.find((function(e){var i=s.entity.preview_files[e];return i.some((function(e){return e.id===t}))}))},setCurrentParameters:function(){var e=Object.keys(this.entity.preview_files);e.length>0&&(this.entity.preview_file_id&&(this.taskTypeId=this.getTaskTypeIdForPreviewFile(e,this.entity.preview_file_id)),this.taskTypeId||(this.taskTypeId=e[0]))},onPlayClick:function(){this.$emit("play-click",this.index)},onRemoveClick:function(e){e.preventDefault(),e.stopPropagation(),this.$emit("remove-entity",this.entity)},setListeners:function(){this.dropArea.addEventListener("dragover",this.onDragover),this.dropArea.addEventListener("dragleave",this.onDragleave)},onDragged:function(){},onDragleave:function(){this.dropArea.style.background="transparent",this.dropArea.style.width="15px"},onDragover:function(){this.dropArea.style.width="60px"},onDropped:function(e){this.dropArea.style.background="transparent",this.dropArea.style.width="15px",this.$emit("entity-dropped",{before:this.entity.id,after:e})}},watch:{taskTypeId:function(){var e=this,t=this.entity.preview_files[this.taskTypeId];if(t&&t.length>0){var s=t.some((function(t){return t.id===e.entity.preview_file_id}));this.previewFileId=s?this.entity.preview_file_id:t[0].id}},previewFileId:function(){var e=this,t=null,s=this.entity.preview_files[this.taskTypeId];s&&s.length>0&&(t=s.find((function(t){return t.id===e.previewFileId}))),this.$emit("preview-changed",this.entity,t)}}},S=C,T=(s("2290"),s("2877")),x=Object(T["a"])(S,g,y,!1,null,"7c8bf57c",null),E=x.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"video-wrapper filler flexrow-item"},[s("video",{ref:"player1",attrs:{preload:"auto"},domProps:{muted:e.muted},on:{ended:e.playNext}}),s("video",{ref:"player2",attrs:{preload:"auto"},domProps:{muted:e.muted},on:{ended:e.playNext}})])},O=[],A={name:"raw-video-player",components:{},props:{entities:{type:Array,default:function(){return[]}},muted:{type:Boolean,default:!1},isRepeating:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},name:{type:String,default:"main"}},data:function(){return{currentPlayer:this.player1,isPlaying:!1,nextPlayer:this.player2,playingIndex:0}},mounted:function(){this.resetHeight(),this.player1.addEventListener("loadedmetadata",this.emitLoadedEvent),window.addEventListener("resize",this.resetHeight),this.$options.currentTimeCalls=[]},beforeDestroy:function(){window.removeEventListener("resize",this.resetHeight),this.player1.removeEventListener("loadedmetadata",this.emitLoadedEvent)},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])(["currentProduction"])),{},{container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},player1:function(){return this.$refs.player1},player2:function(){return this.$refs.player2},frameFactor:function(){return Math.round(1/this.fps*1e4)/1e4}}),methods:{emitLoadedEvent:function(e){this.$emit("metadata-loaded",e)},getMoviePath:function(e){if("mp4"===e.preview_file_extension){var t=e.preview_file_id;return this.fullScreen?"/api/movies/originals/preview-files/".concat(t,".mp4"):"/api/movies/low/preview-files/".concat(t,".mp4")}return""},getWidth:function(){return this.currentPlayer?this.currentPlayer.offsetWidth:0},getHeight:function(){return this.currentPlayer?this.currentPlayer.offsetHeight:0},getVideoRatio:function(){var e=this.getVideoHeight();return e?this.getVideoWidth()/e:0},getVideoWidth:function(){return this.currentPlayer?this.currentPlayer.videoWidth:0},getVideoHeight:function(){return this.currentPlayer?this.currentPlayer.videoHeight:0},clear:function(){this.currentPlayer&&(this.currentPlayer.src="",this.currentPlayer.removeAttribute("src"),this.currentPlayer.load())},resetHeight:function(e){var t=this;this.$nextTick((function(){t.currentPlayer&&(t.currentPlayer.style.height="0px"),t.nextPlayer&&(t.nextPlayer.style.height="0px"),t.container&&(e=e||t.container.offsetHeight,t.currentPlayer&&(t.currentPlayer.style.height="".concat(e,"px")),t.nextPlayer&&(t.nextPlayer.style.height="".concat(e,"px")))}))},getNextIndex:function(e){var t=e+1>=this.entities.length?0:e+1;while(t!==e&&this.entities[t]&&"mp4"!==this.entities[t].preview_file_extension)t++,t>=this.entities.length&&(t=0);return t},getPreviousIndex:function(e){var t=e-1>=0?e-1:this.entities.length-1;while(t!==e&&this.entities[t]&&"mp4"!==this.entities[t].preview_file_extension)t--,t<0&&(t=this.entities.length);return t},goPreviousFrame:function(){if(this.currentPlayer){var e=this.getLastPushedCurrentTime(),t=Object(u["d"])(e,this.fps)-this.frameFactor;t<0?this.setCurrentTime(0):this.setCurrentTime(t)}},goNextFrame:function(){if(this.currentPlayer){var e=this.getLastPushedCurrentTime(),t=Object(u["d"])(e,this.fps)+this.frameFactor;t>this.currentPlayer.duration?this.setCurrentTime(this.currentPlayer.duration):this.setCurrentTime(t)}},loadPreviousEntity:function(){this.loadEntity(this.getPreviousIndex(this.currentIndex)),this.$emit("entity-change",this.currentIndex)},loadNextEntity:function(){var e=this.getNextIndex(this.currentIndex);this.loadEntity(e),this.$emit("entity-change",this.currentIndex)},reloadCurrentEntity:function(){this.loadEntity(this.currentIndex,this.currentPlayer.currentTime)},loadEntity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<this.entities.length){var s=this.getNextIndex(e),i=this.entities[e],n=this.entities[s];this.currentIndex=e,this.currentPlayer=this.player1,this.nextPlayer=this.player2,this.currentPlayer.removeEventListener("loadedmetadata",this.updateMaxDuration),this.currentPlayer.addEventListener("loadedmetadata",this.updateMaxDuration);var a=this.$options.rate||1;this.currentPlayer.src=this.getMoviePath(i),this.nextPlayer.src=this.getMoviePath(n),this.currentPlayer.style.display="block",this.nextPlayer.style.display="none",this.resetHeight(),this.currentPlayer.removeEventListener("timeupdate",this.updateTime),this.currentPlayer.addEventListener("timeupdate",this.updateTime),this.setSpeed(a),this.setCurrentTime(t),this.$emit("entity-change",this.currentIndex)}},pause:function(){this.currentPlayer&&this.currentPlayer.pause(),this.isPlaying=!1},play:function(){var e=this.entities[this.currentIndex];e&&(e.preview_file_id||this.loadNextEntity(),e=this.entities[this.currentIndex],e.preview_file_id&&(this.currentPlayer&&this.currentPlayer.play(),this.isPlaying=!0))},playNext:function(){if(this.isPlaying)if(this.isRepeating)this.currentPlayer.currentTime=0,this.currentPlayer.play(),this.$emit("repeat");else{var e=this.getNextIndex(this.currentIndex);this.currentIndex=e,this.$emit("entity-change",this.currentIndex),this.currentPlayer&&(this.currentPlayer.style.display="none"),this.nextPlayer&&(this.nextPlayer.style.display="block",this.nextPlayer.play()),this.switchPlayers(),this.updateMaxDuration()}},getCurrentTime:function(){return this.currentPlayer?this.currentPlayer.currentTime-this.frameFactor:0},getLastPushedCurrentTime:function(){var e=this.$options.currentTimeCalls.length;return e>0?this.$options.currentTimeCalls[e-1]:this.getCurrentTime()},setCurrentTime:function(e){this.$options.currentTimeCalls||(this.$options.currentTimeCalls=[]),this.$options.currentTimeCalls.push(e),this.$options.running||this.runSetCurrentTime()},runSetCurrentTime:function(){var e=this;if(0===this.$options.currentTimeCalls.length)this.$options.running=!1;else{this.$options.running=!0;var t=this.$options.currentTimeCalls.shift();this.currentPlayer&&this.currentPlayer.currentTime!==t+this.frameFactor&&this.currentPlayer&&(this.currentPlayer.currentTime=t+this.frameFactor),setTimeout((function(){e.runSetCurrentTime()}),10)}},switchPlayers:function(){var e=this.getNextIndex(this.currentIndex),t=this.entities[e];this.tmpPlayer=this.currentPlayer,this.currentPlayer=this.nextPlayer,this.nextPlayer=this.tmpPlayer,t&&(this.nextPlayer.src=this.getMoviePath(t)),this.resetHeight(),this.currentPlayer&&(this.currentPlayer.removeEventListener("timeupdate",this.updateTime),this.currentPlayer.addEventListener("timeupdate",this.updateTime)),this.nextPlayer&&this.nextPlayer.removeEventListener("timeupdate",this.updateTime);var s=this.$options.rate||1;this.setSpeed(s)},updateTime:function(e){this.$emit("time-update",e)},updateMaxDuration:function(){this.currentPlayer&&this.$emit("max-duration-update",this.currentPlayer.duration)},setSpeed:function(e){this.$options.rate=e,this.currentPlayer&&(this.currentPlayer.playbackRate=e),this.nextPlayer&&(this.nextPlayer.playbackRate=e)}},watch:{fullScreen:function(){this.currentPlayer&&(this.loadEntity(this.currentIndex,this.currentPlayer.currentTime),this.isPlaying&&this.play())},entities:function(){if(this.entities.length>0){this.loadEntity(0),this.pause(),this.setCurrentTime(0);var e=this.entities[this.currentIndex];e&&!e.preview_file_id&&this.loadNextEntity()}setTimeout(this.resetHeight,300)}}},j=A,D=(s("9e75"),Object(T["a"])(j,P,O,!1,null,"b2894be6",null)),M=D.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("playlists.select_task_type"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox-task-type",{attrs:{"task-type-list":e.taskTypeList,value:e.taskTypeId},on:{input:e.onTaskTypeChanged}})],1),s("p",[e._v(" "+e._s(e.$t("playlists.apply_task_type_change"))+" ")]),s("p",{staticClass:"has-text-right mt2"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.runConfirmation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("playlist.change_task_type_fails"))+" ")]):e._e()])])])},$=[],L=s("e4fd"),F=s("d065"),q={name:"select-task-type-modal",mixins:[F["a"]],components:{ComboboxTaskType:L["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},taskTypeList:{type:Array,default:function(){}}},data:function(){return{taskTypeId:""}},methods:{onTaskTypeChanged:function(e){this.taskTypeId=e},runConfirmation:function(){this.$emit("confirm",this.taskTypeId)}},watch:{active:function(){this.taskTypeId=this.taskTypeList[0].id}}},N=q,z=(s("1d53"),Object(T["a"])(N,I,$,!1,null,"253cae1e",null)),R=z.exports,V=s("be83"),B=s("9d94"),U=s("0774"),H=s("eb23"),G={name:"playlist-player",mixins:[U["a"],H["a"]],components:{AnnotationBar:p["a"],ArrowUpRightIcon:d["a"],ButtonSimple:m["a"],ColorPicker:h["a"],Combobox:f["a"],DownloadIcon:d["q"],DeleteModal:_["a"],PencilPicker:v["a"],PlaylistedEntity:E,RawVideoPlayer:M,SelectTaskTypeModal:R,Spinner:V["a"],TaskInfo:B["a"]},props:{playlist:{type:Object,default:function(){}},entities:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isAddingEntity:{type:Boolean,default:!1},isAssetPlaylist:{type:Boolean,default:!1},tempMode:{type:Boolean,default:!1}},data:function(){return{annotations:[],color:"#ff3860",comparisonMode:"sidebyside",currentComparisonPreviewIndex:0,currentPreviewIndex:0,currentTime:"00:00.000",currentTimeRaw:0,entityList:[],entityListToCompare:[],fabricCanvas:null,fullScreen:!1,isDlButtonsHidden:!0,isCommentsHidden:!0,isComparing:!1,isDrawing:!1,isEntitiesHidden:!1,isMuted:!1,isPlaying:!1,isRepeating:!1,isShowingPalette:!1,isShowingPencilPalette:!1,isTyping:!1,maxDuration:"00:00.000",maxDurationRaw:0,palette:["#ff3860","#008732","#5E60BA","#f57f17"],pencil:"big",pencilPalette:["big","medium","small"],playlistToEdit:{},playingEntityIndex:0,revisionOptions:[],speed:3,task:null,taskTypeOptions:[],taskTypeToCompare:null,revisionToCompare:null,textColor:"#ff3860",modals:{delete:!1,taskType:!1},loading:{deletePlaylist:!1},errors:{playlists:!1,deletePlaylist:!1},forClientOptions:[{label:this.$t("playlists.for_client"),value:"true"},{label:this.$t("playlists.for_studio"),value:"false"}]}},mounted:function(){var e=this;this.$options.scrubbing=!1,this.entities?this.entityList=Object.values(this.entities):this.entityList=[],this.updateProgressBar(),this.picturePlayer&&this.picturePlayer.addEventListener("load",(function(){e.resetPictureCanvas()})),this.$nextTick((function(){e.configureEvents(),e.setupFabricCanvas(),e.resetCanvas(),e.setPlayerSpeed(1),e.rebuildComparisonOptions()}))},beforeDestroy:function(){this.removeEvents()},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])(["assetTaskTypes","currentEpisode","currentProduction","isCurrentUserArtist","isCurrentUserClient","isCurrentUserManager","isTVShow","taskMap","taskTypeMap","shotTaskTypes","user"])),{},{extension:function(){return this.currentPreview&&this.currentPreview.extension?this.currentPreview.extension:""},isCurrentPreviewMovie:function(){return"mp4"===this.extension},isCurrentPreviewPicture:function(){return["png","gif"].includes(this.extension)},isCurrentPreviewFile:function(){return!this.isCurrentPreviewMovie&&!this.isCurrentPreviewPicture},isMovieComparison:function(){return!!this.currentPreviewToCompare&&"mp4"===this.currentPreviewToCompare.extension},isPictureComparison:function(){return!!this.currentPreviewToCompare&&["png","gif"].includes(this.currentPreviewToCompare.extension)},isComparisonOverlay:function(){return"sidebyside"!==this.comparisonMode},overlayOpacity:function(){if(!this.isComparing||!this.isComparisonOverlay)return 1;switch(this.comparisonMode){case"overlay25":return.25;case"overlay50":return.5;case"overlay75":return.75;default:return 1}},comparisonModeOptions:function(){return[{label:this.$t("playlists.actions.side_by_side"),value:"sidebyside"},{label:"".concat(this.$t("playlists.actions.overlay")," 25%"),value:"overlay25"},{label:"".concat(this.$t("playlists.actions.overlay")," 50%"),value:"overlay50"},{label:"".concat(this.$t("playlists.actions.overlay")," 75%"),value:"overlay75"}]},currentRevisionToCompare:function(){var e=this;if(!this.currentEntity)return null;var t=this.currentEntity.preview_files[this.taskTypeToCompare];if(t&&t.length>0){var s=t.find((function(t){return"".concat(t.revision)===e.revisionToCompare}));return s||t[0]}return null},currentPreviewToCompare:function(){if(!this.currentEntity)return null;if(this.currentComparisonPreviewIndex>0){var e=this.currentComparisonPreviewIndex-1;return this.currentRevisionToCompare.previews[e]}return this.currentRevisionToCompare},currentPreviewPath:function(){if(this.currentPreview){var e=this.currentPreview.id,t=this.currentPreview.extension;if(this.currentPreviewIndex>0){var s=this.currentPreviewIndex-1,i=this.currentEntity.preview_file_previews[s];e=i.id,t=i.extension}return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)}return""},currentComparisonPreviewPath:function(){if(this.currentPreviewToCompare&&this.isPictureComparison){var e=this.currentPreviewToCompare.extension,t=this.currentPreviewToCompare.id;return"/api/pictures/originals/preview-files/".concat(t,".").concat(e)}return""},currentPreviewOriginalPath:function(){if(!this.currentPreview)return"";var e=this.currentPreview.id,t=this.currentPreview.extension;return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)},currentPreviewDlPath:function(){if(!this.currentPreview)return"";var e=this.currentPreview.id;return"/api/pictures/originals/preview-files/".concat(e,"/download")},currentEntity:function(){return this.entityList[this.playingEntityIndex]},currentPreview:function(){return this.currentEntity?0===this.currentPreviewIndex?{id:this.currentEntity.preview_file_id,extension:this.currentEntity.preview_file_extension,task_id:this.currentEntity.preview_file_task_id,annotations:this.currentEntity.preview_file_annotations||[]}:this.currentEntity.preview_file_previews[this.currentPreviewIndex-1]:null},previousEntityIndex:function(){var e=this.playingEntityIndex-1;return e<0&&(e=this.entityList.length-1),e},nextEntityIndex:function(){var e=this.playingEntityIndex+1;return e>this.entityList.length-1&&(e=0),e},currentEntityPreviewLength:function(){return this.currentEntity&&this.currentEntity.preview_file_previews?this.currentEntity.preview_file_previews.length+1:0},currentComparisonPreviewLength:function(){if(this.currentRevisionToCompare){var e=this.currentRevisionToCompare.previews;return e?e.length+1:0}return 0},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},csvDlPath:function(){return"/api/export/csv/playlists/".concat(this.playlist.id)},zipDlPath:function(){return"/api/data/playlists/".concat(this.playlist.id,"/download/zip")},currentFrame:function(){return Object(u["a"])(this.currentTimeRaw,this.fps)},deleteText:function(){return this.playlist?this.$t("playlists.delete_text",{name:this.playlist.name}):""},timezone:function(){return this.user.timezone||r.a.tz.guess()},entityTaskTypes:function(){return"asset"===this.playlist.for_entity?this.assetTaskTypes:this.shotTaskTypes},addEntitiesText:function(){return this.isAssetPlaylist?this.$t("playlists.add_assets"):this.$t("playlists.add_shots")},frameFactor:function(){return Math.round(1/this.fps*1e4)/1e4},fps:function(){return this.currentProduction&&this.currentProduction.fps||24},container:function(){return this.$refs.container},rawPlayer:function(){return this.$refs["raw-player"]},rawPlayerComparison:function(){return this.$refs["raw-player-comparison"]},picturePlayer:function(){return this.$refs["picture-player"]},canvas:function(){return this.$refs["canvas-wrapper"]},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},progressCursor:function(){return this.$refs["progress-cursor"]},video:function(){return this.$refs.movie},isJobRunning:function(){return 0!==this.playlist.build_jobs.filter((function(e){return"running"===e.status})).length}}),methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])(["changePlaylistType","deletePlaylist","removeBuildJob","runPlaylistBuild"])),{},{configureEvents:function(){window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("resize",this.onWindowResize),this.$el.nomousemove||(this.$el.onmousemove=this.onMouseMove),this.container.addEventListener("fullscreenchange",this.onFullScreenChange,!1),this.container.addEventListener("mozfullscreenchange",this.onFullScreenChange,!1),this.container.addEventListener("MSFullscreenChange",this.onFullScreenChange,!1),this.container.addEventListener("webkitfullscreenchange",this.onFullScreenChange,!1)},removeEvents:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize),this.$el.onmousemove=null,this.container.removeEventListener("fullscreenchange",this.onFullScreenChange,!1),this.container.removeEventListener("mozfullscreenchange",this.onFullScreenChange,!1),this.container.removeEventListener("MSFullscreenChange",this.onFullScreenChange,!1),this.container.removeEventListener("webkitfullscreenchange",this.onFullScreenChange,!1)},getBuildPath:function(e){return"/api/data/playlists/".concat(this.playlist.id,"/jobs/").concat(e.id,"/build/mp4")},formatDate:function(e){var t=r.a.tz(e,"UTC").tz(this.timezone);return t.format("YYYY-MM-DD HH:mm")},formatFrame:u["a"],formatTime:u["b"],getTimelinePosition:function(e,t){if(this.$refs.movie&&this.progress){var s=Math.round(e/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*t-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},displayBars:function(){this.$refs["button-bar"]&&(this.$refs.header&&(this.$refs.header.style.opacity=1),this.$refs["button-bar"]&&(this.$refs["button-bar"].style.opacity=1),this.$refs["playlist-progress"]&&(this.$refs["playlist-progress"].style.opacity=1),this.$refs["playlist-annotation"]&&(this.$refs["playlist-annotation"].$el.style.opacity=1),this.container.style.cursor="default")},hideBars:function(){this.$refs.header.style.opacity=0,this.$refs["button-bar"].style.opacity=0,this.$refs["playlist-progress"].style.opacity=0,this.$refs["playlist-annotation"].$el.style.opacity=0},showDeleteModal:function(){this.modals.delete=!0},hideDeleteModal:function(){this.modals.delete=!1},confirmRemovePlaylist:function(){var e=this;this.loading.deletePlaylist=!0,this.errors.deletePlaylist=!1,this.deletePlaylist({playlist:this.playlist,callback:function(t){t&&(e.errors.deletePlaylist=!0),e.loading.deletePlaylist=!1,e.$emit("playlist-deleted"),e.modals.delete=!1}})},updateProgressBar:function(){if(this.progress){var e=this.currentTimeRaw/this.maxDurationRaw;this.progress.value=this.currentTimeRaw,this.progressBar.style.width=Math.floor(100*e)+"%"}},updateTaskPanel:function(){if(this.entityList.length>0){var e=this.entityList[this.playingEntityIndex];this.task=e?this.taskMap[e.preview_file_task_id]:null}else this.task=null},scrollToEntity:function(e){var t=this.$refs["entity-"+e];if(t&&t[0]){var s=t[0].$el,i=this.$refs["playlisted-entities"],n=this.entityList[e];if(this.annotations=n.preview_file_annotations||[],s){var a=30,o=s.getBoundingClientRect(),r=i.getBoundingClientRect(),c=o.right>r.right-a,l=o.left<r.left-a;if(l){var d=o.left-r.left-a;i.scrollLeft=i.scrollLeft+d}else if(c){var u=o.right-r.right+a;i.scrollLeft=i.scrollLeft+u}}}},scrollToRight:function(){this.entityList.length>0&&this.scrollToEntity(this.entityList.length-1)},play:function(){this.rawPlayer.play(),this.isComparing&&this.$refs["raw-player-comparison"].play(),this.isPlaying=this.$refs["raw-player"].isPlaying,this.hideCanvas(),this.clearCanvas()},pause:function(){this.showCanvas();var e=this.$refs["raw-player-comparison"];this.rawPlayer&&this.rawPlayer.pause(),e&&e.pause(),this.isPlaying=!1},playEntity:function(e){var t=this,s=this.entityList[e];if(this.hideCanvas(),this.clearCanvas(),"mp4"===s.preview_file_extension)this.playingEntityIndex=e,this.$nextTick((function(){t.scrollToEntity(t.playingEntityIndex),t.rawPlayer.loadEntity(e),t.annotations=s.preview_file_annotations||[],t.isComparing&&t.$refs["raw-player-comparison"].loadEntity(e),t.isPlaying&&(t.rawPlayer.play(),t.isComparing&&t.$refs["raw-player-comparison"].play())}));else{this.playingEntityIndex=e;var i=this.getAnnotation(0);this.loadAnnotation(i)}this.scrollToEntity(this.playingEntityIndex)},goPreviousFrame:function(){this.clearCanvas(),this.rawPlayer.goPreviousFrame(),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(this.rawPlayer.getCurrentTime());var e=this.getAnnotation(this.rawPlayer.getCurrentTime());e&&this.loadAnnotation(e)},goNextFrame:function(){this.clearCanvas(),this.rawPlayer.goNextFrame(),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(this.rawPlayer.getCurrentTime());var e=this.getAnnotation(this.rawPlayer.getCurrentTime());e&&this.loadAnnotation(e)},removeEntity:function(e){var t=this;this.$emit("remove-entity",e),this.$options.silent=!0;var s=this.entityList.findIndex((function(t){return t.id===e.id}));this.entityList.splice(s,1),setTimeout((function(){t.$options.silent=!1}),1e3)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0),document.activeElement.blur(),this.fullScreen=!0},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1),document.activeElement.blur(),this.fullScreen=!1},isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},onProgressBarClicked:function(e){this.clearCanvas();var t=(e.pageX-this.progress.offsetLeft)/this.progress.offsetWidth,s=t*this.maxDurationRaw;this.rawPlayer.setCurrentTime(s),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(s);var i=this.getAnnotation(this.rawPlayer.getCurrentTime());i&&this.loadAnnotation(i)},onPreviousFrameClicked:function(){this.clearFocus(),this.goPreviousFrame()},onNextFrameClicked:function(){this.clearFocus(),this.goNextFrame()},onPlayPreviousEntityClicked:function(){this.clearFocus(),this.playEntity(this.previousEntityIndex),this.isCurrentPreviewMovie&&(this.rawPlayer.loadPreviousEntity(),this.isComparing&&this.$refs["raw-player-comparison"].loadPreviousEntity(),this.isPlaying&&this.play())},onPlayNextEntityClicked:function(){this.clearFocus(),this.playEntity(this.nextEntityIndex),this.isCurrentPreviewMovie&&(this.rawPlayer.loadNextEntity(),this.isComparing&&this.$refs["raw-player-comparison"].loadNextEntity(),this.isPlaying&&this.play())},onPlayPauseClicked:function(){if(this.clearFocus(),this.isPlaying){this.pause();var e=this.getAnnotation(this.rawPlayer.getCurrentTime());e&&this.loadAnnotation(e)}else this.play()},onVideoRepeated:function(){this.clearFocus(),this.rawPlayerComparison&&this.rawPlayerComparison.setCurrentTime(0)},onRepeatClicked:function(){this.clearFocus(),this.isRepeating=!this.isRepeating},onToggleSoundClicked:function(){this.clearFocus(),this.isMuted=!this.isMuted},onFullScreenChange:function(){this.fullScreen&&!this.isFullScreen()&&(this.fullScreen=!1)},onFullscreenClicked:function(){var e=l["fabric"].IText.prototype.initHiddenTextarea;this.isFullScreen()?(l["fabric"].util.object.extend(l["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),l["fabric"].document.body.appendChild(this.hiddenTextarea)}}),this.exitFullScreen()):(l["fabric"].util.object.extend(l["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),this.canvas.wrapperEl.appendChild(this.hiddenTextarea)}}),this.setFullScreen())},onKeyDown:function(e){this.displayBars(),["INPUT","TEXTAREA"].includes(e.target.tagName)||(46===e.keyCode&&this.fabricCanvas?this.deleteSelection():37===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.goPreviousFrame()):39===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.goNextFrame()):32===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.onPlayPauseClicked()):e.altKey&&74===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.onPlayPreviousEntityClicked()):e.altKey&&75===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.onPlayNextEntityClicked()):e.ctrlKey&&e.altKey&&68===e.keyCode?this.onAnnotateClicked():e.ctrlKey&&90===e.keyCode?this.undoLastAction():e.altKey&&82===e.keyCode&&this.redoLastAction())},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,setTimeout((function(){e.resetHeight(),e.resetCanvas().then((function(){e.reloadAnnotations()}))}),200))},reloadAnnotations:function(){var e=this;if(this.annotations){var t=this.annotations.map((function(e){return Object(a["a"])({},e)}));this.annotations=[],setTimeout((function(){e.annotations=t,e.reloadCurrentAnnotation()}),200)}},onFilmClicked:function(){var e=this;this.isEntitiesHidden=!this.isEntitiesHidden,this.$nextTick((function(){e.resetHeight(),e.reloadAnnotations(),e.scrollToEntity(e.playingEntityIndex)}))},reloadCurrentAnnotation:function(){var e=this.getAnnotation(this.currentTimeRaw);e&&this.loadAnnotation(e)},onCommentClicked:function(){var e=this,t=this.$refs["video-container"].offsetHeight;this.isCommentsHidden=!this.isCommentsHidden,this.isCommentsHidden||(this.$refs["task-info"].$el.style.height="".concat(t,"px")),this.$nextTick((function(){e.$refs["task-info"].focusCommentTextarea(),e.resetHeight(),e.reloadAnnotations()}))},onCompareClicked:function(){this.isComparing=!this.isComparing},onPlayClicked:function(){this.rawPlayer.isPlaying?this.pause():this.play()},onSpeedClicked:function(){this.speed=this.speed+1>3?1:this.speed+1;var e=1;2===this.speed&&(e=.5),1===this.speed&&(e=.25),this.setPlayerSpeed(e)},setPlayerSpeed:function(e){this.rawPlayer.setSpeed(e),this.rawPlayerComparison.setSpeed(e)},onTimeUpdate:function(){this.rawPlayer&&this.rawPlayer.currentPlayer?this.currentTimeRaw=this.rawPlayer.currentPlayer.currentTime-this.frameFactor:this.currentTimeRaw=0+this.frameFactor,this.currentTime=this.formatTime(this.currentTimeRaw),this.updateProgressBar()},onMaxDurationUpdate:function(e){this.maxDurationRaw=e-this.frameFactor,this.maxDuration=this.formatTime(e),this.progress&&this.progress.setAttribute("max",this.maxDurationRaw)},onMouseMove:function(){var e=this,t=this.$refs["button-bar"];t&&1!==t.style.opacity&&this.displayBars();var s=this.isFullScreen()&&this.isEntitiesHidden&&this.isCommentsHidden;s&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t=e.isFullScreen()&&e.isEntitiesHidden&&e.isCommentsHidden;t&&e.hideBars()}),2e3))},onPlayerEntityChange:function(e){if(this.isCurrentPreviewMovie&&(this.playingEntityIndex=e,this.isComparing)){var t=this.rawPlayerComparison.currentIndex;t!==e?(this.rawPlayerComparison.playNext(),this.rawPlayerComparison.setCurrentTime(0)):(this.rawPlayerComparison.setCurrentTime(0),this.rawPlayerComparison.play())}this.$options.silent||this.scrollToEntity(this.playingEntityIndex)},onPreviewChanged:function(e,t){this.pause();var s=this.entityList.find((function(t){return t.id===e.id}));s.preview_file_id=t.id,s.preview_file_task_id=t.task_id,s.preview_file_extension=t.extension,s.preview_file_annotations=t.annotations,s.preview_file_previews=t.previews,this.rawPlayer&&this.rawPlayer.reloadCurrentEntity(),this.$emit("preview-changed",e,t.id),this.clearCanvas(),this.updateTaskPanel()},onEntityDropped:function(e){var t=this.$refs["playlisted-entities"],s=t.scrollLeft,i=this.entityList.find((function(t){return t.id===e.after})),n=this.entityList.findIndex((function(t){return t.id===e.after})),a=this.entityList.findIndex((function(t){return t.id===e.before}));n>=0&&a>=0&&(this.entityList.splice(n,1),n>a&&a++,this.entityList.splice(a,0,i)),this.$nextTick((function(){t.scrollLeft=s})),this.$emit("order-change",e)},resetHeight:function(){var e=this;this.$nextTick((function(){var t=window.innerHeight-90;e.tempMode||(t=e.container?e.container.offsetHeight:0),t-=e.$refs.header?e.$refs.header.offsetHeight:0,e.$refs["playlist-progress"]&&(t-=e.$refs["playlist-progress"].offsetHeight),e.$refs["button-bar"]&&(t-=e.$refs["button-bar"].offsetHeight),e.$refs["playlisted-entities"]&&(t-=e.$refs["playlisted-entities"].offsetHeight),e.$refs["playlist-annotation"]&&(t-=e.$refs["playlist-annotation"].$el.offsetHeight),e.$refs["video-container"]&&(e.$refs["video-container"].style.height="".concat(t,"px")),e.isCommentsHidden||(e.$refs["task-info"].$el.style.height="".concat(t,"px")),e.rawPlayer&&e.rawPlayer.resetHeight(t),e.isComparing&&(e.$refs["raw-player-comparison"].resetHeight(t),e.$refs["picture-preview-wrapper"]&&(e.$refs["picture-preview-wrapper"].style.height="".concat(t,"px"))),e.$nextTick((function(){e.resetCanvas(),e.updateProgressBar()}))}))},resetCanvas:function(){var e=this;return this.clearCanvas(),this.resetCanvasSize().then((function(){return e.fabricCanvas&&e.fabricCanvas.renderAll(),Promise.resolve(e.fabricCanvas)}))},resetCanvasSize:function(){var e=this;return this.$nextTick().then((function(){if(e.isCurrentPreviewMovie&&e.fabricCanvas){if(e.canvas){var t=e.rawPlayer.getVideoRatio(),s=e.rawPlayer.$el.offsetWidth,i=e.rawPlayer.$el.offsetHeight,n=t?i*t:s;if(s>n){var a=Math.round((s-n)/2);e.canvas.style.left=a+"px",e.canvas.style.top="0px",e.fabricCanvas.setDimensions({width:n,height:i})}else{var o=t?Math.round(s/t):i,r=Math.round((i-o)/2);e.canvas.style.left="0px",e.canvas.style.top=r+"px",e.fabricCanvas.setDimensions({width:s,height:o})}}}else if(e.isCurrentPreviewPicture&&e.fabricCanvas&&e.canvas){var c=e.picturePlayer.naturalWidth,l=e.picturePlayer.naturalHeight,d=c/l,u=e.$refs["video-container"].offsetWidth,p=e.$refs["video-container"].offsetHeight;e.isComparing&&!e.isComparisonOverlay&&(u=Math.round(u/2));var m=d?p*d:u,h=d?Math.round(u/d):p,f=0,_=0;if(e.canvas.style.top="0px",e.canvas.style.left="0px",u>c)_=Math.round((u-c)/2),e.canvas.style.left=_+"px",m=c;else if(u>m){var v=Math.round((u-m)/2);e.canvas.style.left=v+"px"}else m=u;if(p>l)f=Math.round((p-l)/2),e.canvas.style.top=f+"px",h=l;else if(p>h)f=Math.round((p-h)/2),e.canvas.style.top=f+"px";else{h=p,m=Math.round(h*d);var g=Math.round((u-m)/2);e.canvas.style.left=g+"px"}e.fabricCanvas.setDimensions({width:m,height:h})}return Promise.resolve()}))},rebuildComparisonOptions:function(){var e=this,t=Object.values(this.entities);if(t.length>0){var s=Object.keys(t[0].preview_files);t.forEach((function(e){s=s.filter((function(t){return e.preview_files[t]}))})),this.taskTypeOptions=s.map((function(t){return{label:e.taskTypeMap[t].name,value:e.taskTypeMap[t].id}})).sort((function(e,t){return e.label.localeCompare(t.label)})),this.taskTypeOptions.length>0&&(this.taskTypeToCompare=this.taskTypeOptions[0].value),this.rebuildRevisionOptions()}else this.taskTypeOptions=[],this.revisionOptions=[]},rebuildRevisionOptions:function(){if(this.currentEntity&&this.currentEntity.preview_files[this.taskTypeToCompare]){var e=this.currentEntity.preview_files[this.taskTypeToCompare].map((function(e){return e.revision}));this.revisionOptions=[{label:"Last",value:null}].concat(e.sort((function(e,t){return t-e})).map((function(e){return{label:"v".concat(e),value:"".concat(e)}}))),this.revisionOptions.length>0&&(this.revisionToCompare=this.revisionOptions[0].value)}else this.revisionOptions=[]},rebuildEntityListToCompare:function(){var e=this;this.taskTypeToCompare?this.entityListToCompare=this.entityList.filter((function(t){return t.preview_files[e.taskTypeToCompare]})).map((function(t){var s=t.preview_files[e.taskTypeToCompare].find((function(t){return"".concat(t.revision)===e.revisionToCompare}));return s||(s=t.preview_files[e.taskTypeToCompare][0]),{preview_file_id:s.id,preview_file_extension:"mp4"}})):this.buildEntityListToCompare=[]},resetComparison:function(){var e=this;this.rebuildRevisionOptions(),this.rebuildEntityListToCompare(),this.$nextTick((function(){e.pause();var t=e.$refs["raw-player-comparison"];t.loadEntity(e.playingEntityIndex),t.setCurrentTime(e.currentTimeRaw)}))},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()},onAnnotateClicked:function(){this.showCanvas(),this.isDrawing?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.isTyping=!1,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!0),this.isDrawing=!0)},onTypeClicked:function(){var e=this.canvas.getElementsByClassName("upper-canvas")[0];this.showCanvas(),this.isTyping?(this.isTyping=!1,e.removeEventListener("dblclick",this.addText)):(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.isTyping=!0,e.addEventListener("dblclick",this.addText))},showCanvas:function(){this.canvas&&(this.canvas.style.display="block")},hideCanvas:function(){this.canvas&&(this.canvas.style.display="none")},loadAnnotation:function(e){var t=this;if(e){this.pause();var s=e&&e.time||0;if(this.rawPlayer||this.picturePlayer){this.rawPlayer&&(this.rawPlayer.setCurrentTime(s),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(s),this.currentTimeRaw=s,this.updateProgressBar()),this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.clearCanvas();var i=1,n=1;e.width&&(i=this.fabricCanvas.width/e.width,n=this.fabricCanvas.width/e.width),e.height&&(n=this.fabricCanvas.height/e.height),e.drawing.objects.forEach((function(s){var o={left:s.left*i,top:s.top*n,fill:"transparent",stroke:s.stroke,strokeWidth:s.strokeWidth,radius:s.radius,width:s.width,height:s.height,scaleX:s.scaleX*i,scaleY:s.scaleY*n};if("path"===s.type){var r=1;s.canvasWidth&&(r=e.width/t.fabricCanvas.width);var c=new l["fabric"].Path(s.path,Object(a["a"])(Object(a["a"])({},o),{},{strokeWidth:s.strokeWidth*r,canvasWidth:s.canvasWidth}));c.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(c)}else if("i-text"===s.type||"text"===s.type){var d=new l["fabric"].Text(s.text,Object(a["a"])(Object(a["a"])({},o),{},{fill:s.fill,left:s.left*i,top:s.top*n,fontFamily:s.fontFamily,fontSize:s.fontSize}));d.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(d)}}))}}},saveAnnotations:function(){var e=Object(u["d"])(this.currentTimeRaw,this.fps)||0;if(this.isCurrentPreviewPicture&&(e=0),this.annotations){var t=this.getAnnotation(e),s=this.getNewAnnotations(e,t),i=this.entityList[this.playingEntityIndex];if(i){var n={id:i.preview_file_id,task_id:i.preview_file_task_id,annotations:i.preview_file_annotations||[]};if(this.isCurrentPreviewPicture&&this.currentPreviewIndex>0){var a=this.currentPreviewIndex-1,o=this.currentEntity.preview_file_previews[a];n={id:o.id,task_id:i.preview_file_task_id,annotations:o.annotations||[]}}this.isCurrentUserArtist||(this.$emit("annotationchanged",{preview:n,annotations:s}),i.preview_file_annotations=s,Object.keys(i.preview_files).forEach((function(e){var t=null;i.preview_files[e].forEach((function(e){e.id===n.id&&(t=e),!t&&e.previews&&e.previews.forEach((function(s){s.id===n.id&&(t=e)}))})),t&&(t.annotations=s)})))}}},onDeleteClicked:function(){this.deleteSelection()},getAnnotation:function(e){if(this.annotations||(this.annotations=this.currentEntity.preview_file_annotations),e=Object(u["d"])(e,this.fps),this.annotations){var t=this.annotations.find((function(t){return t.time===e}));return t||(t=this.annotations.find((function(t){return t.time>e-.02&&t.time<e+.02}))),!t&&this.isCurrentPreviewPicture&&this.annotations.length>0&&(t=this.annotations[0],t.time=0),t}return null},toggleDlButtons:function(){this.isDlButtonsHidden=!this.isDlButtonsHidden},onBuildClicked:function(){this.isCurrentUserManager&&!this.isJobRunning&&this.runPlaylistBuild(this.playlist)},onRemoveBuildJob:function(e){e.playlist_id=this.playlist.id,this.removeBuildJob(e)},onMetadataLoaded:function(e){var t=this;this.$nextTick((function(){t.resetCanvasSize()}))},showTaskTypeModal:function(){this.modals.taskType=!0},hideTaskTypeModal:function(){this.modals.taskType=!1},confirmChangeTaskType:function(e){this.$emit("task-type-changed",e),this.modals.taskType=!1},clearPlayer:function(){this.rawPlayer&&this.rawPlayer.clear(),this.isComparing&&this.$refs["raw-player-comparison"].clear(),this.maxDurationRaw=0,this.maxDuration="00:00.000"},onPreviousPreviewClicked:function(){var e=this.currentPreviewIndex-1;this.currentPreviewIndex=e<0?this.currentEntityPreviewLength-1:e},onNextPreviewClicked:function(){var e=this.currentPreviewIndex+1;this.currentPreviewIndex=e>this.currentEntityPreviewLength-1?0:e},onPreviousComparisonPictureClicked:function(){var e=this.currentComparisonPreviewIndex-1;this.currentComparisonPreviewIndex=e<0?this.currentComparisonPreviewLength-1:e},onNextComparisonPictureClicked:function(){var e=this.currentComparisonPreviewIndex+1;this.currentComparisonPreviewIndex=e>this.currentComparisonPreviewLength-1?0:e},resetPictureCanvas:function(){var e=this;this.annotations=this.currentPreview.annotations,this.resetCanvas().then((function(){e.isCurrentPreviewPicture&&e.loadAnnotation(e.getAnnotation(0))}))},onCanvasMouseMoved:function(e){if(this.isCurrentPreviewMovie&&this.$options.scrubbing){var t=e.e.clientX;t-this.$options.scrubStartX<0?this.goPreviousFrame():this.goNextFrame(),this.$options.scrubStartX=t}},onCanvasClicked:function(e){return e.button>1&&this.isCurrentPreviewMovie&&(this.$options.scrubbing=!0,this.$options.scrubStartX=e.e.clientX,this.$options.scrubStartTime=Number(this.currentTimeRaw)),!1},onCanvasReleased:function(e){return this.isCurrentPreviewMovie&&this.$options.scrubbing&&(this.$options.scrubbing=!1),!1}}),watch:{currentPreviewIndex:function(){var e=this;this.resetUndoStacks(),this.$nextTick((function(){e.isCurrentPreviewPicture?e.resetPictureCanvas():e.resetCanvas()}))},playingEntityIndex:function(){var e=this;this.updateTaskPanel(),this.resetUndoStacks(),this.currentPreviewIndex=0,this.currentComparisonPreviewIndex=0,this.currentEntity&&(this.annotations=this.currentEntity.preview_file_annotations||[]),this.$nextTick((function(){e.isComparing&&e.rebuildRevisionOptions(),e.$nextTick((function(){e.resetCanvas()}))}))},isComparing:function(){var e=this;this.isComparing&&this.resetComparison(),this.$nextTick().then((function(){e.resetPictureCanvas(),e.resetCanvas(),e.reloadAnnotations()}))},taskTypeToCompare:function(){this.isComparing&&this.resetComparison()},revisionToCompare:function(){var e=this;this.isComparing&&(this.rebuildEntityListToCompare(),this.$nextTick((function(){e.pause();var t=e.$refs["raw-player-comparison"];t.loadEntity(e.playingEntityIndex),t.setCurrentTime(e.currentTimeRaw)})))},entities:function(){var e=this;this.currentPreviewIndex=0,this.currentComparisonPreviewuIndex=0,this.entityList=Object.values(this.entities),this.playingEntityIndex=0,this.pause(),this.rawPlayer&&this.rawPlayer.setCurrentTime(0),this.currentTimeRaw=0,this.updateProgressBar(),this.updateTaskPanel(),this.rebuildComparisonOptions(),this.clearCanvas(),this.annotations=[],0===this.entityList.length&&this.clearPlayer(),this.resetHeight(),this.resetCanvas().then((function(){e.isCurrentPreview&&(e.annotations=e.currentEntity.preview_file_annotations,e.loadAnnotation(e.getAnnotation(0)))}))},playlist:function(){var e=this;this.forClient=Boolean(this.playlist.for_client).toString(),this.$nextTick((function(){e.updateProgressBar(),e.clearCanvas()}))},isAddingEntity:function(){var e=this;this.$nextTick((function(){e.updateProgressBar()}))},isComparisonOverlay:function(){var e=this;this.$nextTick((function(){e.resetCanvas().then(e.reloadCurrentAnnotation)}))}}},K=G,W=(s("a45e"),Object(T["a"])(K,i,n,!1,null,"19115498",null));t["a"]=W.exports},"1f79":function(e,t,s){},2:function(e,t){},2e3:function(e,t,s){},2017:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"i",(function(){return o})),s.d(t,"h",(function(){return r})),s.d(t,"g",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return d})),s.d(t,"e",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"j",(function(){return h}));var i=s("b85c"),n=s("2909"),a=(s("159b"),s("b0c0"),s("1276"),s("ac1f"),s("5319"),s("99af"),s("4de4"),s("d81d"),s("13d5"),s("6062"),s("d3b7"),s("3ca3"),s("ddb0"),function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={},i={};return e.forEach((function(e){var n;e&&(n=e.name?t?e.name.split(" "):[e.name]:[],v(s,i,e,n))})),s}),o=function(e){var t=Object(n["a"])(e).sort((function(e,t){return e.name.localeCompare(t.name)}));return a(t,!1)},r=function(e){var t={};return e.forEach((function(e){var s=e.short_name.toLowerCase();t[s]=e})),t},c=function(e){var t={},s={};return e.forEach((function(e){var i=e.full_entity_name.replace(/_/g," ").replace(/-/g," "),n=i.split(" ").concat([e.task_type_name,e.task_status_short_name,e.project_name]);v(t,s,e,n)})),t},l=function(e,t){var s={},i={};return e.forEach((function(e){var n=e.entity_name.replace(/_/g," ").replace(/-/g," "),a=n.split(" ").concat([e.task_status_short_name]);e.assignees.forEach((function(e){var s=t[e];s&&a.push(s.first_name,s.last_name)})),v(s,i,e,a)})),s},d=function(e){var t={},s={};return e.forEach((function(e){var i=e.name.replace(/_/g," ").replace(/-/g," "),n=e.asset_type_name.split(" "),a=i.split(" ").concat(n).concat([e.name]);v(t,s,e,a)})),t},u=function(e){var t={},s={};return e.forEach((function(e){var i=[e.name,e.sequence_name,e.episode_name];v(t,s,e,i)})),t},p=function(e){var t={},s={};return e.forEach((function(e){var i=[e.name,e.episode_name];v(t,s,e,i)})),t},m=function(e){var t={},s={};return e.forEach((function(e){var i=[e.name];v(t,s,e,i)})),t},h=function(e,t){t||(t=[]);var s=t.map((function(t){return _(e,t)})).filter((function(e){return null!==e}));return s.length>0?s.reduce(f,Object(n["a"])(s[0])):null},f=function(e,t){return e.filter((function(e){return t.has(e)}))},_=function(e,t){return t&&t.indexOf("=")<0?e[t.toLowerCase()]?new Set(e[t.toLowerCase()]):new Set([]):null},v=function(e,t,s,n){var a,o=Object(i["a"])(n);try{for(o.s();!(a=o.n()).done;){var r=a.value,c="";if(r){var l,d=Object(i["a"])(r);try{for(d.s();!(l=d.n()).done;){var u=l.value;c+=u.toLowerCase(),void 0===e[c]&&(e[c]=[],t[c]={}),t[c][s.id]||(e[c].push(s),t[c][s.id]=!0)}}catch(p){d.e(p)}finally{d.f()}}}}catch(p){o.e(p)}finally{o.f()}return e}},"20d1":function(e,t,s){},2153:function(e,t,s){"use strict";s("b72a")},2229:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"m",(function(){return o})),s.d(t,"k",(function(){return r})),s.d(t,"h",(function(){return c})),s.d(t,"o",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"i",(function(){return u})),s.d(t,"n",(function(){return p})),s.d(t,"g",(function(){return m})),s.d(t,"f",(function(){return h})),s.d(t,"d",(function(){return f})),s.d(t,"c",(function(){return _})),s.d(t,"p",(function(){return v})),s.d(t,"j",(function(){return g})),s.d(t,"a",(function(){return y})),s.d(t,"l",(function(){return b}));s("b0c0");var i=s("ceca"),n=s.n(i),a=function(e){return e.sort(n()("canceled").thenBy((function(e,t){return e.asset_type_name.localeCompare(t.asset_type_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},o=function(e){return e.sort(n()("canceled").thenBy(C).thenBy((function(e,t){return e.sequence_name.localeCompare(t.sequence_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},r=function(e){return e.sort(n()("canceled").thenBy((function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},c=function(e){return e.sort((function(e,t){return e.project_status_name===t.project_status_name?e.name.localeCompare(t.name):-1*e.project_status_name.localeCompare(t.project_status_name)}))},l=function(e,t){return e.sort(n()("priority",-1).thenBy((function(e,t){return e.project_name?e.project_name.localeCompare(t.project_name):0})).thenBy((function(e,s){var i=t[e.task_type_id],n=t[s.task_type_id];return i.name.localeCompare(n.name)})).thenBy((function(e,t){return e.full_entity_name?e.full_entity_name.localeCompare(t.full_entity_name):e.entity_name.localeCompare(t.entity_name)})))},d=function(e){return e.sort(n()("pinned",-1).thenBy("created_at",-1))},u=function(e){return e.sort(n()("position").thenBy("created_at"))},p=function(e){return e.sort(n()("for_shots").thenBy("priority").thenBy("name"))},m=function(e){return e.sort(n()("created_at",-1).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},h=function(e){return e.sort(n()("active",-1).thenBy((function(e,t){return e.first_name?e.first_name.localeCompare(t.first_name):-1})).thenBy((function(e,t){return e.last_name?e.last_name.localeCompare(t.last_name):-1})))},f=function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))},_=function(e){return e.sort(n()("created_at",-1))},v=function(e,t){return e.sort((function(e,s){var i=t[e],n=t[s];return i.priority===n.priority?i.name.localeCompare(n.name):i.priority>n.priority?1:-1}))},g=function(e,t){return e.sort(n()("for_shots").thenBy("priority").thenBy("name").thenBy("start_date"))},y=function(e,t,s,i,o){if(t&&t.length>0){var r=t[0],c=w(o,r);"metadata"===r.type&&(c=k(r)),e=e.sort(n()("canceled").thenBy(c).thenBy((function(e,t){return e.asset_type_name.localeCompare(t.asset_type_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))}else e=a(e);return e},b=function(e,t,s,i,a){if(t&&t.length>0){var r=t[0],c=w(a,r);"metadata"===r.type&&(c=k(r)),e=e.sort(n()("canceled").thenBy(c).thenBy(C).thenBy((function(e,t){return e.sequence_name.localeCompare(t.sequence_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))}else e=o(e);return e},k=function(e){return function(t,s){var i=t.data[e.column]?t.data[e.column]:"",n=s.data[e.column]?s.data[e.column]:"";return i?n?i.localeCompare(n):-1:1}},w=function(e,t){return function(s,i){var n=s.validations[t.column],a=i.validations[t.column];if(!n)return-1;if(!a)return 1;var o=e[n].task_status_short_name,r=e[a].task_status_short_name;return o.localeCompare(r)}},C=function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0}},2254:function(e,t,s){"use strict";s("0555")},2272:function(e,t,s){},2290:function(e,t,s){"use strict";s("618c")},"274f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.productionId?s("router-link",{attrs:{to:e.taskTypePath}},[s("span",{staticClass:"tag task-type-name",style:{"border-left":"4px solid "+e.color}},[e._v(" "+e._s(e.taskType.name)+" ")])]):s("div",{staticClass:"tag task-type-name no-link",style:{"border-left":"4px solid "+e.color}},[e._v(" "+e._s(e.taskType.name)+" ")])},n=[],a=s("5530"),o=(s("b0c0"),s("2f62")),r={name:"task-type-name",components:{},props:{taskType:{type:Object,default:null},productionId:{type:String,default:null}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{color:function(){return"#000000"===this.taskType.color.toUpperCase()?"$grey-strong":this.taskType.color},taskTypePath:function(){var e={name:"task-type",params:{production_id:this.productionId,task_type_id:this.taskType.id,type:this.taskType.for_shots?"shots":"assets"}};return(this.taskType.episode_id||this.$route.params.episode_id)&&(e.name="episode-task-type",e.params.episode_id=this.taskType.episode_id||this.$route.params.episode_id),e}}),methods:Object(a["a"])({},Object(o["b"])([]))},c=r,l=(s("e95c"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"51afc9ee",null);t["a"]=d.exports},"29f8":function(e,t,s){},"2a44":function(e,t,s){},"2a7a":function(e,t,s){"use strict";s("a60a")},"2b11":function(e,t,s){"use strict";s("2b82")},"2b21":function(e,t,s){"use strict";s("2000")},"2b82":function(e,t,s){},"2bf2":function(e,t,s){},"2bf4":function(e,t,s){"use strict";s("8aba")},"2c1a":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userLockText,expression:"userLockText"}],ref:"confirmation-name",staticClass:"input",attrs:{type:"text"},domProps:{value:e.userLockText},on:{input:function(t){t.target.composing||(e.userLockText=t.target.value)}}})]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("div",{staticClass:"has-text-right flexrow"},[s("div",{staticClass:"filler"}),e.selectionOption?s("combobox",{staticClass:"flexrow-item",attrs:{options:e.selectionOptions,"with-margin":!1},model:{value:e.selectionOnly,callback:function(t){e.selectionOnly=t},expression:"selectionOnly"}}):e._e(),s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},attrs:{disabled:e.isLocked},on:{click:function(t){return e.$emit("confirm","true"===e.selectionOnly)}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])],1)])])])},n=[],a=s("5530"),o=s("2f62"),r=s("d065"),c=s("992f"),l={name:"hard-delete-modal",mixins:[r["a"]],components:{Combobox:c["a"]},data:function(){return{userLockText:"",selectionOnly:"true",selectionOptions:[{label:this.$t("tasks.for_selection"),value:"true"},{label:this.$t("tasks.for_project"),value:"false"}]}},props:{text:{type:String,default:""},active:{type:Boolean,default:!1},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},lockText:{type:String,default:"locked"},selectionOption:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{isLocked:function(){return"locked"===this.lockText||this.lockText!==this.userLockText}}),methods:Object(a["a"])({},Object(o["b"])([])),watch:{active:function(){var e=this;this.active&&(this.userLockText="",this.$nextTick((function(){e.$refs["confirmation-name"]&&e.$refs["confirmation-name"].focus()})))}}},d=l,u=(s("1bbb"),s("2877")),p=Object(u["a"])(d,i,n,!1,null,"17e976f9",null);t["a"]=p.exports},"2d24":function(e,t,s){"use strict";s("2a44")},3:function(e,t){},"302c":function(e,t,s){},"315e":function(e,t,s){"use strict";s("1537")},"31f2":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s("5530"),n=(s("5319"),s("ac1f"),s("2f62")),a={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:Object(i["a"])({},Object(n["c"])(["organisation"])),methods:{formatBoolean:function(e){return e?this.$t("main.yes"):this.$t("main.no")},formatDuration:function(e){return e?(e/60/this.organisation.hours_by_day).toLocaleString("fullwide",{maximumFractionDigits:2}):0},sanitizeInteger:function(e){var t=0;return"string"===typeof e&&(e=e.replace(/\D/g,""),e&&e.length>0&&(t=parseInt(e)||0)),t}}}},3455:function(e,t,s){"use strict";var i=s("2909"),n=(s("159b"),s("d81d"),s("5319"),s("ac1f"),s("a15b"),s("99af"),s("13d5"),s("b0c0"),s("b64b"),s("07ac"),s("4de4"),s("caad"),s("d3b7"),s("498a"),s("fb6a"),s("369b")),a=s.n(n),o=s("3657"),r=s("09d3"),c={generateTimesheet:function(e,t,s,i,n,a,o,r,l){var d=c.getTimesheetHeaders(i,n,a,o,r,l),u=c.getTimesheetEntries(d,s,t);c.buildCsvFile(e,u)},getTimesheetHeaders:function(e,t,s,i,n,a){var r=["Person"],c=[];for(var l in"month"===e?c=Object(o["l"])(t,i,n):"week"===e?c=Object(o["n"])(t,i,a):"day"===e&&(c=Object(o["h"])(t,s,i,n)),c)r.push(l);return r},getTimesheetEntries:function(e,t,s){var i=[e];return t.forEach((function(t){var n=[t.full_name];e.forEach((function(e,i){i>0&&(i--,s&&s[i]&&s[i][t.id]?n.push(s[i][t.id]/60):n.push("-"))})),i.push(n)})),i},turnEntriesToCsvString:function(e){var t=[];return e.forEach((function(e){var s=e.map((function(e){var t="".concat(e||"");return'"'.concat(t.replace(/"/g,""),'"')})),i=s.join(";");i.length>2&&t.push(i)})),t.join("\n")},buildCsvFile:function(e,t){var s=c.turnEntriesToCsvString(t),i="data:text/csv;charset=utf-8,"+s,n=encodeURI(i),a=document.createElement("a");return a.setAttribute("href",n),a.setAttribute("download","".concat(e,".csv")),document.body.appendChild(a),a.click(),s},generateStatReports:function(e,t,s,n,a,o){var r=c.getStatReportsHeaders(t,s,n),l=c.getStatReportsEntries(t,s,n,a,o),d=[r].concat(Object(i["a"])(l));return c.buildCsvFile(e,d)},getStatReportsHeaders:function(e,t,s){var i=l(e,t),n=["Name","","All",""];return i.reduce((function(e,s){if("all"!==s){var i=t[s].name;return e.concat([i,""])}return e}),n)},getStatReportsEntries:function(e,t,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"count",a=[],o=l(e,t),r=d(e,i);return r.forEach((function(t){var r=p(e,t),c=u(e,r,n,t),l=h(i,s,n,e,r,t,c);o.forEach((function(s){if("all"!==s){var i=e[t][s];if(i){var a=m(e,i,n,t,s);f(e,n,t,s,r,a,l)}else Object.keys(e[t].all).forEach((function(e){l[e]=l[e].concat(["",""])}))}})),a=a.concat(Object.values(l).sort((function(e,t){return e[1].localeCompare(t[1])}))),a.push([""])})),a},generateRetakeStatReports:function(e,t,s,n,a,o){var r=c.getStatReportsHeaders(t,s,n),l=c.getRetakeStatReportsEntries(t,s,n,a,o),d=[r].concat(Object(i["a"])(l));return c.buildCsvFile(e,d)},getRetakeStatReportsEntries:function(e,t,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"count",a=[],o=l(e,t),r=d(e,i);return r.forEach((function(t){var r=p(e,t).filter((function(e){return!["max_retake_count","evolution"].includes(e)})),c=u(e,r,n,t),l=h(i,s,n,e,r,t,c);o.forEach((function(s){if("all"===s)Object.keys(e[t].all).forEach((function(e){["max_retake_count","evolution"].includes(e)||(l[e]=l[e].concat(["",""]))}));else{var i=e[t][s];if(i){var a=m(e,i,n,t,s);f(e,n,t,s,r,a,l)}}})),a=a.concat(Object.values(l)),a.push([""])})),a},processCSV:function(e,t){return new Promise((function(s,i){a.a.parse(e,{config:t,encoding:"UTF-8",error:i,complete:function(e){var t=c.cleanUpCsv(e.data);s(t)}})}))},cleanUpCsv:function(e){return e.forEach((function(e){e.forEach((function(e,t,s){s[t]=e.trim()}))})),e[0].forEach((function(e,t,s){s[t]=(e[0]||"").toUpperCase()+e.slice(1)})),e}},l=function(e,t){return Object.keys(e.all).filter((function(e){return"evolution"!==e})).sort((function(e,s){return"all"===e?1:"all"===s?-1:t[e].priority-t[s].priority}))},d=function(e,t){return Object.keys(e).sort((function(e,s){return"all"===e?-1:"all"===s?1:t[e].name.localeCompare(t[s].name)}))},u=function(e,t,s,i){var n=0;return t.forEach((function(t){var a=e[i].all[t];n+=a[s]})),n},p=function(e,t){return Object.keys(e[t].all)},m=function(e,t,s,i,n){var a=0;return Object.keys(t).forEach((function(t){if(!["max_retake_count","evolution"].includes(t)){var o=e[i][n][t];a+=o[s]}})),a},h=function(e,t,s,i,n,a,o){var c={};return n.forEach((function(n){var l=t[n],d=l?l.name:n,u=e[a],p=u?u.name:"All",m=i[a].all[n],h=m[s],f=Object(r["e"])(h,o);c[n]=[p,d,h||"0",f+"%"]})),c},f=function(e,t,s,i,n,a,o){n.forEach((function(n){var c=e[s][i][n],l=0;c&&(l=c[t]);var d=Object(r["e"])(l,a);o[n]=o[n].concat([l||"0",d+"%"])}))};t["a"]=c},"34a4":function(e,t,s){"use strict";s("5a10")},3504:function(e){e.exports=JSON.parse('{"default":{"assets":{"cast_in":"角色分配","delete_error":"删除此资源时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此资源类型吗?","delete_text":"您确定要从您的数据库移除{name}吗?","edit_fail":"创建或编辑失败, 有错误出现.","edit_success":"已成功编辑资源{name}.","edit_title":"编辑资源","empty_list":"制作中没有资源. 要创建一些吗?","empty_list_client":"此制作中没有资源.","new_asset":"添加资源","new_assets":"添加多个资源","new_success":"已成功创建资源{name}.","no_cast_in":"任何镜头中都没为此资源分配角色.","number":"资源 | 资源(多个)","restore_text":"您确定要将{name}恢复进您的数据库吗?","restore_error":"恢复此资源时出现错误.","tasks":"资源任务(多个)","title":"资源(多个)","fields":{"description":"说明","episode":"片段","name":"名称","production":"道具","time_spent":"时间","type":"类型","hidden_from_client":"显示到客户端"}},"asset_types":{"all_asset_types":"所有资产种类","create_error":"保存此资产类型时出错。您确定没有相同名称的资产类型吗？","delete_text":"您确定要从您的数据库移除{name}吗?","delete_error":"删除此资源类型时出现错误. 很可能存在有链接至此的数据. 您确定没有资源链接至此资源类型吗?","edit_title":"编辑资源类型","new_asset_type":"添加资源类型","number":"资源类型 | 资源类型(多种)","title":"资源类型(多种)","production_title":"资产类型统计","fields":{"name":"名称"}},"breakdown":{"all_assets":"所有可用资源","edit_label":"更改资产的标签","empty":"空白标签","label":"标签","picture_mode":"切换到图片模式","text_mode":"切换到文字模式","title":"分解","options":{"fixed":"固定的","animate":"动画"}},"comments":{"add_attachment":"添加附件","add_checklist":"添加清单","add_comment":"添加注释...","add_preview":"附加预览","change_preview":"更换预览","comment_from_client":"客户留言","edit_title":"编辑注释","empty_text":"此条注释为空","edit_error":"编辑评论时发生错误。 请联系我们的支持团队。","error":"发布注释时出现错误","no_file_attached":"未附加文件","pin":"钉","pinned":"钉住","post_status":"发布注释","retake":"重新提交","revision":"校订","set_status_to":"将状态设为","task_placeholder":"新事项","text":"文本","unpin":"取消钉住","validated":"已确认!","validation_required":"需要认证","fields":{"text":"文本"},"checklist":""},"custom_actions":{"create_error":"保存此自定义自定义操作时发生错误。 您确定没有其他同名动作吗？","delete_text":"您确定要从您的数据库移除自定义操作{name}吗?","delete_error":"删除此自定义操作时出现错误.","edit_title":"编辑自定义操作","new_custom_action":"添加自定义操作","number":"自定义操作 | 自定义操作(多个)","run_for_selection":"为所选的多个任务执行自定义操作:","title":"自定义操作(多个)","fields":{"name":"名称","url":"URL","entity_type":"实体类型","is_ajax":"使用AJAX"},"entity_types":{"all":"所有","shot":"镜头","asset":"资产"}},"entities":{"build_filter":{"asset_type":"资产类别","all_types":"所有资产类别","assignation":"分配","assignation_exists_for":"重新分配至","assigned_to":"分配至","descriptor":"元数据","equal":"","in":"","no_assignation_for":"取消分配","no_filter":"五筛选","not_equal":"","not_assigned_to":"未分配","status":"任务状态","thumbnail":"缩略图","title":"筛选...","union_and":"","union_or":"匹配以下筛选","with_thumbnail":"显示缩略图","without_thumbnail":"关闭缩略图"},"thumbnails":{"error":"上传缩略图时发生错误","explaination":"添加缩略图需要设置新的预览。 为了同时设置多个缩略图，您必须首先选择一个任务类型，该任务类型将用于创建新的预览。 缩略图将从此新预览中设置。","explaination_two":"您必须选择要上传的文件。 要找到正确的文件，文件名必须匹配以下模式：","shots_pattern":"\\"场次号 镜头号\\"， 例如：SQ01_SH01","assets_pattern":"“资产类型 资产名称”，例如：Environment_Forest","select_files":"选择文件","selected_files":"选定文件","select_task_type":"选择任务类型","title":"添加缩略图","undefined":"未定义","undefined_pattern":"未定义","upload":"添加缩略图"}},"estimation":{"title":"预算\\n"},"episodes":{"all_episodes":"所有","edit_error":"保存此剧集时发生错误。 您确定没有名称相似的剧集吗？","delete_error":"删除此片段时出现错误. 很可能存在有链接至此的数据. 您确定没有序列链接至此片段吗?","delete_text":"您确定要从您的数据库移除{name}吗?","edit_title":"编辑片段","empty_list":"制作中没有片段. 要创建一些吗?","empty_list_client":"此制作中没有片段.","new_episode":"新建片段","number":"片段","title":"片段统计","fields":{"name":"名称","description":"说明"}},"keyboard":{"altdown":"下移任务选择","altj":"选择上一个预览","altk":"选择下一个预览","altleft":"向左移动任务选择","altright":"向右移动任务选择","altup":"上移任务选择","annotations":"注解","draw":"启用绘图模式","navigation":"导航","redo":"准备","undo":"撤消","playlist_navigation":"播放列表","remove_annotation":"移除播放列表","shortcuts":"捷径","ctrldown":"","ctrlleft":"","ctrlright":"","ctrlup":""},"login":{"back_to_login":"返回登录页面","forgot_password":"密码忘记了?","login":"登录","login_failed":"登录失败, 请核实您的凭据","login_page":"取消","redirecting":"","reset_change_password":"更改密码","reset_change_password_form_failed":"您给出的密码有问题. 请核实密码长度大于6个字符且两次密码一致.","reset_change_password_failed":"更改密码失败. 请再次重启整个步骤.","reset_change_password_succeed":"您的密码已成功更改. 请返回到登录页面来使用它.","reset_change_password_title":"输入新密码","reset_password":"重置密码","reset_password_failed":"重置密码失败. 请核实您的电子邮箱.","reset_password_succeed":"已成功重置密码. 请查看您的收件箱.","reset_password_title":"进入您的电子邮件来重置密码","title":"登录Kitsu","fields":{"email":"电子邮箱","password":"密码","password2":"再次输入密码"}},"main":{"about":"关于","add":"添加","all":"全部","all_assets":"添加资产","admin":"管理员","cancel":"取消","clear_selection":"清除当前所选","close":"关闭","confirmation":"确认","confirmation_and_stay":"确认并保存","date":"日期","dark_theme":"黑色主题","days_spent":"消耗天数","days_estimated":"预计天数","delete":"删除","delete_all":"全部删除","delete_text":"您确定要从您的数据库移除{name}吗?","documentation":"文档","edit":"编辑","empty_comment":"空注释","end_date":"结束日期","files_selected":"选择文件","for":"给","go_productions":"转到制作","history":"历史","info":"信息","or":"或","no":"否","loading":"加载中...","loading_data":"正在加载数据","loading_error":"加载数据时出现错误.","logout":"退出","modify":"修改","minimize":"最小化","main_pack":"主界面","maximize":"最大化","nb_frames":"帧","person":"人员","profile":"简介","production":"制作","remove":"移除","save":"保存","sort_by":"排序方式","sorted_by":"排序","start_date":"开始日期","studio":"工作室","tutorials":"教程","user":"用户","white_theme":"白色主题","yes":"是","csv":{"choose":"选择","error_upload":"上传您的CSV文件时出现错误.","export_file":"导出","import_file":"导入","import_title":"从CSV文件导入数据","legend":"传说","legend_ok":"可识别的数据","legend_ignored":"可忽略的数据","legend_missing":"缺失的数据","legend_disabled":"不会更新或创建的数据","legend_overwrite":"将要更新数据","paste":"粘贴","paste_code":"请在此处粘贴您的CSV数据：","preview":"预演","preview_episode_name":"剧集名称","preview_title":"预览导入的数据","preview_description":"上传.csv文件，在输入框内粘贴","preview_required":"注意：标题必须在第一行内","preview_reupload":"重新上传.CSV文件","required_fields":"您的CSV文件需要有如下列项","select_file":"请从您的某个文件夹选择文件:","tab_select_file":"上传CSV文件","tab_paste_code":"粘贴CSV数据","unknown":"未知栏","upload_file":"浏览","options":{"title":"选项","update":"更新数据"}},"after":"","before":"","from":"","home":"","less_filters":"","more_filters":"","reload":"","search_query":"","search_query_edit":"","search_query_edit_error":"","to":"","workspace":""},"menu":{"assign_tasks":"分配任务","change_priority":"更改优先级","change_status":"更改状态","create_tasks":"创建任务","delete_tasks":"删除任务","generate_playlists":"生成列表","run_custom_action":"执行自定义操作","set_estimations":"设定预算"},"news":{"all":"全部","commented_on":"评论","infos":"信息","no_news":"没有关于此产品或筛选的消息。","only_comments":"仅评论","only_previews":"仅预览","set_preview_on":"设置为预览","task_status":"任务状态","task_type":"任务类型","title":"消息提要","hide_stats":"","news":"","show_stats":""},"not_found":{"text":"您所点击的链接有问题，我们建议您返回首页。","title":"找不到页面...您要删除的内容吗？"},"notifications":{"and_change_status":"将状态更改为","assigned_you":"分配给你","commented_on":"已给出针对性注释, 注释对象为","mention_you_on":"提到你的","no_notifications":"目前没有关于您当前项目的通知.","unread_notifications":"未读通知","title":"通知\\n","with_preview":"带有预览"},"people":{"active":"活动","active_persons":"活跃用户","add_member_to_team":"向团队添加成员","create_invite":"创建和发送邀请","create_error":"创建或更新此用户时发生错误。 您可能已达到用户数限制。 请联系我们的支持团队以获取更多信息。","delete_error":"删除此人员时出现错误. 很可能存在有链接至此的数据. 您确定此人员没有分配任务或是没写注释吗?","delete_text":"您确定要从您的数据库移除{personName}吗?","edit_title":"编辑人员","empty_team":"项目团队里没有所列人员.","invite":"发送邀请","invite_error":"发送邀请时发生错误","invite_success":"邀请已成功发送","new_person":"添加新用户","no_task_assigned":"没有分配给您正在执行的任务","persons":"用户","running_tasks":"在执行任务","select_person":"选择用户","team":"团队","title":"人员","unactive":"非活动","csv":{"import_file":"导入.csv文件","export_file":"下载为.csv文件","import_title":"从CSV文件导入数据","required_fields":"您的CSV文件需要有如下列项","select_file":"请从您的某个文件夹选择文件:","error_upload":"上传您的CSV文件时出现错误."},"fields":{"first_name":"名字","last_name":"姓氏","email":"电子邮箱","phone":"电话","role":"职责","old_password":"当前密码","password":"新密码","password_2":"新密码(重复)","active":"活动"},"list":{"name":"名称","email":"电子邮箱","phone":"电话","role":"职责","active":"活动"},"role":{"admin":"工作室经理","client":"客户","manager":"监制","user":"CG艺术家","undefined":"未定义","vendor":"供应商"}},"playlists":{"add_assets":"添加资产","add_selection":"添加选择","add_shots":"添加镜头","add_sequence":"添加整个序列","add_episode":"添加整集","add_movie":"添加整部影片","apply_task_type_change":"这将为所有镜头设置定任务类型","available_build":"可用的版本","build_daily":"当日待处理","build_weekly":"所有待处理","build_mp4":"生成 .mp4 (beta)","building":"创建中...","client_playlist":"播放清单","create_for_selection":"为选择的镜头生成播放列表","create_title":"创建播放清单","created_at":"创建于：","delete_text":"您确定要从您的数据库移除{name}吗?","delete_error":"删除此播放列表时出现错误.","edit_error":"保存此播放列表时发生错误。","download_zip":"下载 .zip","failed":"失败","for_client":"客户端","for_studio":"工作室","edit_title":"编辑播放列表","last_creation":"最后的创建","last_modification":"最后修改","loading_error":"出现服务器错误. 多个播放列表无法被加载.","new_playlist":"添加播放列表","no_build":"没有创建","no_playlist":"此项目当前没有播放列表.","no_preview":"无预览","no_selection":"请从左侧选择播放列表.","no_sequence_for_episode":"此片段没有序列","no_shot_for_production":"此制作没有镜头","select_shot":"请从右列中选择镜头","select_playlist":"请从左列中选择播放列表","select_task_type":"更改所有镜头的任务类型","title":"播放列表","updated_at":"更新时间：","remove":"移除","fields":{"name":"名称","created_at":"创建日期","updated_at":"更新日期","for_entity":"选择显示实体","for_client":"共享至"},"actions":{"annotation":"注解","annotation_text":"双击预览并添加一些文本","annotation_delete":"删除注释","annotation_redo":"重做注释","annotation_undo":"撤消注释","annotation_big":"大","annotation_medium":"中","annotation_small":"小","change_task_type":"更改任务类型","comments":"显示/隐藏评论","delete":"删除播放列表","download":"下载播放列表","edit":"编辑播放列表","entity_list":"显示/隐藏实体列表","fullscreen":"全屏查看文件","next_frame":"下一帧","next_shot":"下一个实体","pause":"暂停","play":"播放","previous_frame":"前一帧","previous_shot":"上一个实体","save_playlist":"保存播放列表","speed":"更改播放速度","split_screen":"与其他任务类型比较","annotation_draw":"","current_time":"","display_revision":"","download_file":"","entity_index":"","entities_number":"","frame_number":"","files_add":"","files_delete":"","files_next":"","files_position":"","files_previous":"","looping":"","mute":"","unmute":"","number_of_files":"","max_duration":"","see_original_file":""}},"productions":{"current":"所选制作","delete_text":"您确定要从数据库中删除{name}吗？ 请在文本字段中输入要删除的项目的名称，以进行确认。","delete_error":"删除此制作时出现错误. 很可能存在有链接至此的数据. 您确定没有任务, 镜头或资源链接至此制作吗?","edit_title":"编辑制作","new_production":"添加制作","number":"制作","open_productions":"我的制作","picture":"更换图片","title":"制作","home":{"create_new":"创建新制作","empty":"您什么制作也没开启. 要创建一个新的吗?","no_task":"还没有任务分配给您. 您可以到监制那儿了解一下自己能做些什么!","no_prod_for_client":"您无权访问任何制作. 请联系您的承包商获取访问权限.","title":"执行多个制作","welcome":"欢迎使用Kitsu"},"fields":{"fps":"FPS","name":"名称","ratio":"宽高比","resolution":"分辨率","status":"状态","type":"类型","start_date":"","end_date":"","nb_episodes":"","episode_span":""},"metadata":{"add_explaination":"添加此项目需要的特定数据.","add_failed":"向您的项目添加元数据时出现错误.","add_new_values":"当前没有可用值.","available_values":"可用值","choices":"值列表","delete_text":"您确定要删除此列以及此制作的所有资源方面的相关数据吗?","delete_error":"删除此元数据列时出现错误.","error":"添加元数据列时出现错误. 要确保没有相似名称的列, 还要确保填充了所有字段. 如果问题仍然存在, 还请联系我们的支持团队.","free":"空闲值","title":"添加元数据列"},"status":{"closed":"已关闭","open":"开启","active":"开启","archived":"已关闭"},"type":{"short":"短片","featurefilm":"故事片","tvshow":"电视节目"},"edit_error":"","brief":{"title":"","empty":""},"parameters":{"title":"","save":{"button":""}}},"profile":{"change_avatar":"更换头像","info_title":"信息","language":"语种","notifications_enabled":"电子邮件通知已启用","notifications_slack_enabled":"Slack通知已启用","notifications_slack_user":"Slack 用户名","password_title":"更改密码","timezone":"时区","title":"您的简介","avatar":{"title":"更换头像","error_upload":"上传图片时出错"},"change_password":{"button":"更改密码","error":"更改密码时出现错误. 请核实您当前的密码.","success":"您的密码已成功更改!","unvalid":"您的确认密码与新密码不相符或您的密码长度太短(预期至少是7个字符)."},"save":{"button":"保存更改","error":"保存更改时出现错误"}},"settings":{"change_logo":"更改Logo","integrations":"集成","logo":"工作室Logo","no_logo":"没有设置Logo","set_logo":"设置工作室Logo","title":"设置","fields":{"name":"工作室名字","hours_by_day":"每天营业时间","slack_token":"Slack Token （可选）","use_original_name":"使用原始文件名进行下载"},"production":{"empty_list":"该列表当前为空。 这意味着用户可以使用主设置中的所有数据。 添加一些条目以限制此产品的选择。"},"save":{"button":"保存设置","error":"保存设置时发生服务器错误"}},"task_status":{"create_error":"保存此任务状态时发生错误。 您确定没有名称相似的任务状态吗？","delete_text":"您确定要从您的数据库移除{name}吗?","delete_error":"删除此任务状态时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务状态吗?","edit_title":"编辑任务状态","number":"任务状态","new_task_status":"添加任务状态","title":"任务状态","fields":{"color":"颜色","is_artist_allowed":"艺术家允许","is_client_allowed":"客户允许","is_done":"已完成","is_reviewable":"可审查","is_retake":"重新赋值","name":"名称","short_name":"简称"},"name":""},"task_types":{"delete_text":"您确定要从您的数据库移除{name}吗?","delete_error":"删除此任务类型时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务类型吗?","edit_title":"编辑任务类型","create_error":"创建任务类型时发生错误。 请检查是否没有名称相似的任务类型。","new_task_type":"添加任务类型","number":"任务类型","title":"任务类型","fields":{"dedicated_to":"用于","color":"颜色","name":"名称","allow_timelog":"时间日志","priority":"优先级"}},"sequences":{"all_sequences":"所有序列","edit_error":"保存此序列时发生错误。 您确定没有相似名称的序列吗？","delete_text":"您确定要从您的数据库移除{name}吗?","delete_error":"删除此序列时出现错误. 很可能存在有链接至此的数据. 您确定没有镜头链接至此序列吗?","edit_title":"编辑序列","empty_list":"制作中没有序列. 要创建一些吗?","empty_list_client":"此制作中没有序列.","new_sequence":"新建序列","number":"序列","title":"序列","fields":{"name":"名称","description":"说明"}},"schedule":{"title":"时间表","title_main":"主时间表","overall_man_days":"月-日","md":"","zoom_level":"缩放等级","milestone":{"add_milestone":"添加重要阶段","edit_milestone":"","name":"","error":""}},"quota":{"average":"","count_label":"","detail_label":"","details_name":"","details_seconds":"","details_frames":"","month_label":"","no_quota":"","name":"","quota_day":"","quota_week":"","quota_month":"","year_label":"","title":"","type_label":""},"shots":{"casting":"镜头的角色分配","creation_explaination":"","delete_text":"您确定要从您的数据库移除{name}吗?","delete_error":"删除此镜头时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此镜头吗?","edit_success":"已成功编辑镜头{name}.","edit_fail":"创建或编辑失败, 有错误出现. 要确保您没要重命名其名称已为给定序列列出的镜头.","edit_title":"编辑镜头","empty_list":"制作中没有镜头. 要创建一些吗?","empty_list_client":"此制作中没有镜头.","episodes":"","history":"","new_shot":"添加镜头","new_shots":"添加多个镜头","new_sequences":"添加多个序列","new_episodes":"添加多个片段","no_casting":"镜头的角色分配为空.","number":"镜头 | 镜头(多个)","manage":"创建多个镜头","new_success":"已成功创建镜头{name}.","padding":"","restore_text":"您确定要将{name}恢复进您的数据库吗?","restore_error":"恢复此镜头时出现错误.","sequences":"","tasks":"镜头任务(多个)","title":"镜头(多个)","fields":{"description":"说明","nb_frames":"","episode":"片段","frame_in":"入镜","frame_out":"出镜","fps":"FPS","name":"镜头","production":"制作","sequence":"序列","time_spent":"","person":""}},"server_down":{"text":"请联系您的供应商支持, 您的系统管理员或您的IT部门来搞清楚出什么问题了.","title":"Kitsu在访问其数据API时出现错误."},"statistics":{"count":"","count_mode":"","display_mode":"","frames":"","pie":"","shots":"","data_mode":"","retakes":"","status":""},"tasks":{"add_preview":"添加预览","add_preview_error":"添加预览时出现错误.","assign":"将单个任务分配给: | 将{nbSelectedTasks}个任务分配给:","back_to_list":"返回列表","bigger":"","change_status_to":"将任务状态改为:","change_preview":"更换预览","change_priority":"将优先级改为:","clear_assignations":"清除多个任务分配","comment_image":"","create_for_selection":"为每个空单元格都创建任务:","create_tasks":"添加多个任务","create_tasks_shot":"为当前的多个镜头添加多个任务","create_tasks_shot_explaination":"您将要为当前列表的每个镜头都创建给定任务类型的新任务. 要继续吗?","create_tasks_shot_failed":"继续进行多个创建时出现服务器错误.","create_tasks_asset":"为当前的多个资源添加多个任务","create_tasks_asset_explaination":"您将要为当前列表的每个资源都创建给定任务类型的新任务. 要继续吗?","create_tasks_asset_failed":"继续进行多个创建时出现服务器错误.","current":"待执行任务","current_status":"当前状态:","delete_all_text":"您确定要删除所有给定{name}的任务吗? 请通过在文本字段输入您想要删除的那些任务的任务类型名称来确认.","delete_all_error":"删除所有给定任务类型的任务失败.","delete_error":"删除任务时出现错误.","delete_comment":"您确定要删除最新注释吗?","delete_comment_error":"删除注释时出现错误","delete_for_selection":"删除所选的多个任务:","delete_preview":"您确定要删除此预览吗?","delete_preview_error":"删除预览时出现错误.","edit_comment":"编辑注释","done":"已完成","download_pdf_file":"下载.{extension}文件","feedback":"反馈","full_screen":"全屏显示","hide_assignations":"隐藏多个任务分配","hide_infos":"","my_tasks":"我的任务(多个)","next":"下一个任务","no_assignation_right":"不允许您管理多个任务分配","no_comment":"此任务当前没有注释.","no_preview":"此任务当前没有预览.","no_task_selected":"","number":"","preview":"预览(多个)","previous":"上一个任务","unsubscribe_notifications":"通过通知取消订阅","set_estimations":"","set_preview":"将此预览设置为缩略图","set_preview_error":"将预览设置为缩略图时出现错误","set_preview_done":"此预览被用作当前实体的缩略图.","select_preview_file":"请从您的硬盘选择一张要被用作当前任务的预览的图片:","show_assignations":"显示多个任务分配","show_infos":"","subscribe_notifications":"订阅通知","select_image_file":"","tasks":"任务(多个)","validation":"确认","with_comment":"","fields":{"asset_type":"","assignees":"被分配任务人员(多名)","count":"","due_date":"","duration":"","end_date":"结束日期","entity":"实体","entity_name":"","estimated_quota":"","estimation":"","frames":"","last_comment":"最新注释","last_comment_date":"","priority":"","production":"制作","real_end_date":"","real_start_date":"","retake_count":"","seconds":"","sequence":"","start_date":"","task_status":"状态","task_status_short_name":"","task_type":"类型"},"colors":{"title":"","neutral":"","status":"","late":""},"priority":{"emergency":"紧急","normal":"正常","high":"高","very_high":"非常高"},"assignation_warning":"","for_selection":"","for_project":""},"timesheets":{"detail_level":"细节层次","done_tasks":"已完成任务","export_timesheet":"","hours":"小时","month":"月","time_spents":"已用时长(小时)","title":"时间表(多个)","year":"年"},"wrong_browser":{"title":"","text":""},"logs":{"current_date_label":"","events":"","empty_list":"","title":""}}}')},3581:function(e,t,s){"use strict";s("2bf2")},"35bb":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i={computed:{},methods:{onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,i=t.y,n=null;e.altKey&&(37===e.keyCode?n=this.select(s,i-1):38===e.keyCode?n=this.select(s-1,i):39===e.keyCode?n=this.select(s,i+1):40===e.keyCode&&(n=this.select(s+1,i)),this.scrollToValidationCell(n),this.stopEvent(e))},stopEvent:function(e){e||(e=window.event),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},select:function(e,t){var s="validation-"+e+"-"+t,i=this.$refs[s];return i&&i[0].$el.click(),i?i[0]:0},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),n=s.bottom>i.bottom-t,a=s.top<i.top+t,o=s.right>i.right-t,r=s.left<i.left+t;if(n){var c=s.bottom-i.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=i.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-i.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=i.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}}}}},3657:function(e,t,s){"use strict";s.d(t,"s",(function(){return o})),s.d(t,"q",(function(){return r})),s.d(t,"r",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"d",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"p",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"h",(function(){return h})),s.d(t,"n",(function(){return f})),s.d(t,"j",(function(){return _})),s.d(t,"k",(function(){return v})),s.d(t,"m",(function(){return g})),s.d(t,"i",(function(){return y})),s.d(t,"g",(function(){return b})),s.d(t,"f",(function(){return k})),s.d(t,"a",(function(){return w})),s.d(t,"b",(function(){return S})),s.d(t,"o",(function(){return T}));var i=s("2909"),n=(s("d81d"),s("d3b7"),s("ddb0"),s("99af"),s("a9e3"),s("159b"),s("7f45")),a=s.n(n),o=function(e,t){var s=t-e+1;return s<0&&(s=0),Object(i["a"])(Array(s).keys()).map((function(t){return t+e}))},r=function(e){return a.a.tz(e,"YYYY-MM-DDTHH:mm:ss","UTC")},c=function(e){return a.a.tz(e,"YYYY-MM-DD","UTC")},l=function(e){return e?a()(e).format("YYYY-MM-DD"):""},d=function(e){var t=a.a.tz(e,"UTC");return t.format("YYYY-MM-DD HH:mm:ss")},u=function(e){var t=a.a.tz(e,"UTC");return a()().diff(t,"days")>1?t.format("YYYY-MM-DD HH:mm"):t.fromNow()},p=function(e){var t=a()().year();return a()("".concat(t,"-").concat(e),"YYYY-M").format("MMM")},m=function(e,t,s){return o(1,t===e?s:12)},h=function(e,t,s,i){if(s===e&&i===t)return o(1,a()().date());var n=a()("".concat(e,"-").concat(Number(t)),"YYYY-M","en");return o(1,n.endOf("month").date())},f=function(e,t){return o(1,t===e?a()().week():52)},_=function(e){var t=a()();return e.forEach((function(e){e.startDate.isBefore(t)&&(t=e.startDate.clone())})),t},v=function(e){var t=a()().add(3,"months");return e.forEach((function(e){e.endDate.isAfter(t)&&(t=e.endDate.clone())})),t},g=function(e){return c(e||l(a()()))},y=function(e,t){return t&&c(t).isAfter(e)?c(t):e.clone()},b=function(e,t,s){if(s&&s>0&&(t=w(e,Math.ceil(s)-1)),e&&t)return e.isAfter(t)?{start_date:l(e),due_date:l(e)}:{start_date:l(e),due_date:l(t)};var i=e?l(e)||e:null,n=t?l(t)||t:null;return{start_date:i,due_date:n}},k=function(e,t,s){if(s&&s>0&&(e=C(t,Math.ceil(s)-1)),e&&t)return e.isAfter(t)?{start_date:l(t),due_date:l(t)}:{start_date:l(e),due_date:l(t)};var i=e?l(e)||e:null,n=t?l(t)||t:null;return{start_date:i,due_date:n}},w=function(e,t){var s=0,i=6,n=t,a=e.clone();while(n>0)a.add(1,"days"),a.day()!==s&&a.day()!==i&&n--;return a},C=function(e,t){var s=0,i=6,n=t,a=e.clone();while(n>0)a.subtract(1,"days"),a.day()!==s&&a.day()!==i&&n--;return a},S=function(e,t){var s=e.hours_by_day;return Math.floor(t*s*60)},T=function(e,t){return t/60/e.hours_by_day}},3693:function(e,t,s){"use strict";s("bc47")},3714:function(e,t,s){},3722:function(e,t,s){"use strict";s("a4d5")},"3a7d":function(e,t,s){},"3a8d":function(e,t,s){},"3b25":function(e,t,s){"use strict";s("e3fc")},"3b81":function(e,t,s){},"3dcc":function(e,t,s){},"3fac":function(e,t,s){},4085:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"file-upload-wrapper",on:{drop:e.onDrop,dragover:e.onDragover,dragleave:e.onDragleave}},[s("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[s("div",{staticClass:"dropbox"},[s("label",{class:{button:!0,"is-primary":e.isPrimary}},[e._v(" "+e._s(e.label)+" "),s("input",{ref:"uploadInput",staticClass:"visuallyhidden",attrs:{type:"file",accept:e.accept,name:e.uploadFieldName,disabled:e.isSaving||e.disabled,multiple:e.multiple},on:{change:function(t){return e.filesChange(t.target.name,t.target.files)}}})]),this.uploadedFiles.length>1?s("span",{staticClass:"file-upload-status"},[e._v(" "+e._s(this.uploadedFiles.length)+" "+e._s(e.$tc("main.files_selected"))+" ")]):e._e(),1===this.uploadedFiles.length?s("span",{staticClass:"file-upload-status"},[e._v(" "+e._s(this.uploadedFiles[0])+" ")]):e._e()])])])},n=[],a=(s("b0c0"),{name:"file-upload",props:{accept:{default:".csv",type:String},isPrimary:{default:!0,type:Boolean},label:{type:String,required:!0},multiple:{default:!1,type:Boolean},uploadFieldName:{default:"file",type:String},disabled:{type:Boolean,default:!1}},data:function(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},mounted:function(){var e=this;this.reset();var t=["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"];t.forEach((function(t){e.$refs.wrapper.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))}))},computed:{},methods:{filesChange:function(e,t){for(var s=[],i=0,n=t.length;i<n;i++){var a=t[i],o=new FormData;o.append(this.uploadFieldName,a,a.name),s.push(o),this.multiple?this.uploadedFiles.push(a.name):this.uploadedFiles=[a.name]}this.multiple?this.$emit("fileselected",s):this.$emit("fileselected",s[0])},reset:function(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput.value=""},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(e){e.dataTransfer.files&&(this.isDragging=!1,this.isSaving=!1,this.filesChange("file",e.dataTransfer.files))}},watch:{}}),o=a,r=(s("9856"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"2dc0c4ee",null);t["a"]=c.exports},"430a":function(e,t,s){},4360:function(e,t,s){"use strict";var i={};s.r(i),s.d(i,"route",(function(){return _}));var n,a,o,r,c,l,d,u,p,m=s("ba4c"),h=s.n(m),f=s("2f62"),_=function(e){return e.route},v=s("ade3"),g=s("5530"),y=(s("7db0"),s("d81d"),s("b0c0"),s("d3b7"),s("159b"),s("c740"),s("a434"),s("edbf")),b={getAssetTypes:function(e){y["a"].get("/api/data/asset-types",e)},getAssetType:function(e,t){y["a"].get("/api/data/entity-types/".concat(e),t)},newAssetType:function(e,t){var s={name:e.name};return y["a"].ppost("/api/data/entity-types",s)},updateAssetType:function(e,t){var s={name:e.name};return y["a"].pput("/api/data/entity-types/".concat(e.id),s)},deleteAssetType:function(e,t){return y["a"].pdel("/api/data/entity-types/".concat(e.id))}},k=s("9fb0"),w=s("2229"),C={assetTypes:[],assetTypeMap:{}},S=Object(g["a"])({},C),T={assetTypes:function(e){return e.assetTypes},assetTypeMap:function(e){return e.assetTypeMap},getAssetType:function(e,t){return function(t){return e.assetTypes.find((function(e){return e.id===t}))}},getAssetTypeOptions:function(e){return e.assetTypes.map((function(e){return{label:e.name,value:e.id}}))}},x={loadAssetTypes:function(e,t){var s=e.commit;e.state;s(k["fc"]),b.getAssetTypes((function(e,i){e?s(k["ec"]):s(k["dc"],i),t&&t(e)}))},loadAssetType:function(e,t){var s=e.commit;e.state;b.getAssetType(t,(function(e,t){e?console.error(e):s(k["xb"],t)}))},newAssetType:function(e,t){var s=e.commit;e.state;return b.newAssetType(t).then((function(e){s(k["xb"],e),Promise.resolve(e)}))},editAssetType:function(e,t){var s=e.commit;e.state;return b.updateAssetType(t).then((function(e){s(k["xb"],e),Promise.resolve(e)}))},deleteAssetType:function(e,t){var s=e.commit;e.state;return b.deleteAssetType(t).then((function(){s(k["bb"],t),Promise.resolve(t)}))}},E=(n={},Object(v["a"])(n,k["fc"],(function(e){e.isAssetTypesLoading=!0,e.isAssetTypesLoadingError=!1})),Object(v["a"])(n,k["ec"],(function(e){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!0})),Object(v["a"])(n,k["dc"],(function(e,t){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!1,e.assetTypes=t,e.assetTypes=Object(w["d"])(e.assetTypes),e.assetTypeMap={},e.assetTypes.forEach((function(t){e.assetTypeMap[t.id]=t}))})),Object(v["a"])(n,k["xb"],(function(e,t){var s=T.getAssetType(e)(t.id);s&&s.id?Object.assign(s,t):(e.assetTypes.push(t),e.assetTypeMap[t.id]=t),e.assetTypes=Object(w["d"])(e.assetTypes)})),Object(v["a"])(n,k["bb"],(function(e,t){var s=e.assetTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.assetTypes.splice(s,1),delete e.assetTypeMap[t.id]})),Object(v["a"])(n,k["ae"],(function(e){Object.assign(e,Object(g["a"])({},C))})),n),P={state:S,getters:T,actions:x,mutations:E},O=s("7d26"),A=(s("4de4"),s("07ac"),s("b64b"),s("99af"),{getSequenceCasting:function(e,t){var s="/api/data/projects/".concat(e,"/sequences/").concat(t,"/casting");return y["a"].pget(s)},getAssetTypeCasting:function(e,t){var s="/api/data/projects/".concat(e,"/asset-types/").concat(t,"/casting");return y["a"].pget(s)},updateCasting:function(e,t,s,i){var n="/api/data/projects/".concat(e,"/entities/").concat(t,"/casting");return y["a"].pput(n,s)},postCastingCsv:function(e,t){var s="/api/import/csv/projects/".concat(e.id,"/casting");return y["a"].ppost(s,t)},getAssetCastIn:function(e){return y["a"].pget("/api/data/assets/".concat(e.id,"/cast-in"))},getShotCasting:function(e){var t="/api/data/projects/".concat(e.project_id,"/entities/")+"".concat(e.id,"/casting");return y["a"].pget(t)},getAssetCasting:function(e){var t=e.project_id||e.production_id,s="/api/data/projects/".concat(t,"/entities/").concat(e.id,"/casting");return y["a"].pget(s)}}),j=s("66e7"),D={castingSequenceId:"",castingShotId:0,castingSequenceShots:[],castingAssetTypeAssets:[],castingEpisodeSequences:[],castingSequenceOptions:[],castingAssetTypesOptions:[],castingCurrentShot:null,casting:{},castingByType:[]},M=Object(g["a"])({},D),I={castingEpisodeSequences:function(e){return e.castingEpisodeSequences},castingSequenceId:function(e){return e.castingSequenceId},castingSequenceShots:function(e){return e.castingSequenceShots},castingAssetTypeAssets:function(e){return e.castingAssetTypeAssets},castingSequenceOptions:function(e){return e.castingSequenceOptions},castingAssetTypesOptions:function(e){return e.castingAssetTypesOptions},casting:function(e){return e.casting},castingByType:function(e){return e.castingByType},castingCurrentShot:function(e){return e.castingCurrentShot}},$={setCastingSequence:function(e,t){var s=e.commit,i=e.rootState;if(!t)return console.error("SequenceId is undefined, no casting can be set.");var n=i.productions.currentProduction,a=i.assets.assetMap,o=Object.values(i.shots.shotMap).filter((function(e){return e.sequence_id===t}));return s(k["D"],t),s(k["F"],o),A.getSequenceCasting(n.id,t).then((function(e){s(k["A"],{casting:e,assetMap:a})}))},setCastingAssetType:function(e,t){var s=e.commit,i=e.rootState;if(!t)return console.error("assetTypeId is undefined, no casting can be set.");var n=i.productions.currentProduction,a=i.assets.assetMap,o=Object.values(i.assets.assetMap).filter((function(e){return e.asset_type_id===t}));return s(k["y"],t),s(k["x"],o),A.getAssetTypeCasting(n.id,t).then((function(e){s(k["A"],{casting:e,assetMap:a})}))},setCastingEpisode:function(e,t){var s=e.commit,i=e.rootState,n=i.shots.sequences;s(k["E"],n),s(k["B"],t)},setCastingAssetTypes:function(e){var t=e.commit,s=e.rootState,i=s.assets.assetTypes;t(k["z"],i)},addAssetToCasting:function(e,t){var s=e.commit,i=e.rootState,n=t.entityId,a=t.assetId,o=t.nbOccurences,r=i.assets.assetMap[a];s(k["v"],{entityId:n,asset:r,nbOccurences:o})},removeAssetFromCasting:function(e,t){var s=e.commit,i=e.rootState,n=t.entityId,a=t.assetId,o=t.nbOccurences,r=i.assets.assetMap[a];s(k["w"],{entityId:n,asset:r,nbOccurences:o})},saveCasting:function(e,t){e.commit;var s=e.rootGetters;if(!t)return console.error("ShotId is undefined, no casting can be saved.");var i=s.currentProduction,n=[];return Object.values(M.casting[t]).forEach((function(e){n.push({asset_id:e.asset_id,nb_occurences:e.nb_occurences||1,label:e.label})})),A.updateCasting(i.id,t,n)},uploadCastingFile:function(e,t){e.commit,e.state;var s=e.rootGetters,i=s.currentProduction;return A.postCastingCsv(i,t)},setAssetLinkLabel:function(e,t){var s=e.commit,i=e.dispatch,n=(e.state,e.rootGetters,t.label),a=t.asset,o=t.targetEntityId;return s(k["C"],{label:n,asset:a,targetEntityId:o}),i("saveCasting",o)},loadAssetCasting:function(e,t){var s=e.commit,i=e.rootGetters;if(!t)return Promise.resolve({});var n=i.assetMap;return A.getAssetCasting(t).then((function(e){return s(k["bc"],{asset:t,casting:e,assetMap:n}),Promise.resolve(e)}))},loadShotCasting:function(e,t){var s=e.commit,i=e.rootGetters;if(!t)return Promise.resolve({});var n=i.assetMap;return A.getShotCasting(t).then((function(e){return s(k["Oc"],{shot:t,casting:e,assetMap:n}),Promise.resolve(e)}))},loadAssetCastIn:function(e,t){var s=e.commit,i=(e.state,e.rootState);if(!t)return Promise.resolve({});var n=i.shots.shotMap;return A.getAssetCastIn(t).then((function(e){return s(k["cc"],{asset:t,castIn:e,shotMap:n}),Promise.resolve(e)}))}},L=(a={},Object(v["a"])(a,k["Nc"],(function(e){Object.assign(e,D)})),Object(v["a"])(a,k["F"],(function(e,t){var s={},i=[];e.castingSequenceShots=t,t.forEach((function(e){s[e.id]=[],i[e.id]=[]})),e.casting=s,e.castingByType=i})),Object(v["a"])(a,k["x"],(function(e,t){var s={},i=[];e.castingAssetTypeAssets=t,t.forEach((function(e){s[e.id]=[],i[e.id]=[]})),e.casting=s,e.castingByType=i})),Object(v["a"])(a,k["E"],(function(e,t){e.castingEpisodeSequences=t,e.castingSequenceOptions=t.map((function(e){var t={name:"breakdown-sequence",params:{production_id:e.project_id,sequence_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(v["a"])(a,k["z"],(function(e,t){e.castingAssetTypesOptions=t.map((function(e){var t={name:"breakdown-asset-type",params:{production_id:e.project_id,asset_type_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(v["a"])(a,k["D"],(function(e,t){e.castingSequenceId=t})),Object(v["a"])(a,k["B"],(function(e,t){e.castingEpisodeId=t})),Object(v["a"])(a,k["y"],(function(e,t){e.castingAssetTypeId=t})),Object(v["a"])(a,k["A"],(function(e,t){var s=t.casting,i=(t.assetMap,{}),n=Object.keys(s);n.forEach((function(e){var t=s[e];i[e]=Object(j["d"])(t,"asset_type_name")})),Object.assign(e.casting,s),e.casting=Object(g["a"])({},e.casting),Object.assign(e.castingByType,i),e.castingByType=Object(g["a"])({},e.castingByType)})),Object(v["a"])(a,k["v"],(function(e,t){var s=t.entityId,i=t.asset,n=t.nbOccurences;e.casting[s]||(e.casting[s]=[]);var a=e.casting[s].find((function(e){return e.asset_id===i.id}));if(a)a.nb_occurences+=n;else{var o={asset_id:i.id,name:i.name,asset_name:i.name,asset_type_name:i.asset_type_name,nb_occurences:n,preview_file_id:i.preview_file_id};e.casting[s].push(o)}e.casting[s]=Object(w["b"])(e.casting[s]),e.castingByType[s]=Object(j["d"])(e.casting[s],"asset_type_name")})),Object(v["a"])(a,k["w"],(function(e,t){var s=t.entityId,i=t.asset,n=t.nbOccurences,a=e.casting[s].find((function(e){return e.asset_id===i.id}));a&&(a.nb_occurences-=n,a.nb_occurences<1&&(delete e.casting[s][i.id],e.casting[s]=e.casting[s].filter((function(e){return e.asset_id!==i.id}))),e.castingByType[s]=Object(j["d"])(e.casting[s],"asset_type_name"))})),Object(v["a"])(a,k["bc"],(function(e,t){var s=t.asset,i=t.casting;i.forEach((function(e){e.name=e.asset_name}));var n=Object(j["d"])(i,"asset_type_name");s.casting=i,h.a.set(e.casting,s.id,i),h.a.set(e.castingByType,s.id,n),h.a.set(s,"castingAssetsByType",n)})),Object(v["a"])(a,k["Oc"],(function(e,t){var s=t.shot,i=t.casting;i.forEach((function(e){e.name=e.asset_name||e.name}));var n=Object(j["d"])(i,"asset_type_name");s.casting=i,h.a.set(e.casting,s.id,i),h.a.set(e.castingByType,s.id,n),h.a.set(s,"castingAssetsByType",n)})),Object(v["a"])(a,k["cc"],(function(e,t){var s=t.asset,i=t.castIn;i.forEach((function(e){e.episode_name&&(e.sequence_name="".concat(e.episode_name," / ").concat(e.sequence_name))})),s.castIn=i,h.a.set(s,"castInShotsBySequence",Object(j["d"])(i,"sequence_name"))})),Object(v["a"])(a,k["C"],(function(e,t){var s=t.label,i=t.asset,n=t.targetEntityId,a=e.casting[n].find((function(e){return e.asset_id===i.asset_id}));a.label=s})),Object(v["a"])(a,k["ae"],(function(e){Object.assign(e,Object(g["a"])({},D))})),a),F={state:M,getters:I,actions:$,mutations:L},q=(s("caad"),s("db82")),N=s.n(q),z={getCustomActions:function(e){y["a"].get("/api/data/custom-actions",e)},newCustomAction:function(e){var t={name:e.name,url:e.url};return y["a"].ppost("/api/data/custom-actions/",t)},updateCustomAction:function(e){var t={name:e.name,url:e.url,entity_type:e.entityType,is_ajax:"true"===e.isAjax};return y["a"].pput("/api/data/custom-actions/".concat(e.id),t)},deleteCustomAction:function(e){return y["a"].pdel("/api/data/custom-actions/".concat(e.id))},postCustomAction:function(e,t){return new Promise((function(s,i){N.a.post(e).withCredentials().send(t).end((function(e,t){e?i(e):s()}))}))}},R={customActions:[],isCustomActionsLoading:!1,isCustomActionsLoadingError:!1,editCustomAction:{isLoading:!1,isError:!1},deleteCustomAction:{isLoading:!1,isError:!1}},V=Object(g["a"])({},R),B={customActions:function(e){return e.customActions},isCustomActionsLoading:function(e){return e.isCustomActionsLoading},isCustomActionsLoadingError:function(e){return e.isCustomActionsLoadingError},editCustomAction:function(e){return e.editCustomAction},deleteCustomAction:function(e){return e.deleteCustomAction},customAction:function(e,t,s){return function(t){return e.customActions.find((function(e){return e.id===t}))}},allCustomActions:function(e){return e.customActions.filter((function(e){return"all"===e.entity_type}))},assetCustomActions:function(e){return e.customActions.filter((function(e){return["all","asset"].includes(e.entity_type)}))},shotCustomActions:function(e){return e.customActions.filter((function(e){return["all","shot"].includes(e.entity_type)}))}},U={loadCustomActions:function(e,t){var s=e.commit;e.state;s(k["ic"]),z.getCustomActions((function(e,i){e?s(k["hc"]):s(k["gc"],i),t&&t(e)}))},newCustomAction:function(e,t){var s=e.commit;e.state;return z.newCustomAction(t).then((function(e){s(k["zb"],e),Promise.resolve(e)}))},editCustomAction:function(e,t){var s=e.commit;e.state;return z.updateCustomAction(t).then((function(e){s(k["zb"],e),Promise.resolve(e)}))},deleteCustomAction:function(e,t){var s=e.commit;e.state;return z.deleteCustomAction(t).then((function(){s(k["db"],t),Promise.resolve(t)}))},postCustomAction:function(e,t){e.commit;var s=t.data,i=t.url;z.postCustomAction(i,s)}},H=(o={},Object(v["a"])(o,k["ic"],(function(e){e.customActions=[]})),Object(v["a"])(o,k["gc"],(function(e,t){e.customActions=t,e.customActions=Object(w["d"])(e.customActions)})),Object(v["a"])(o,k["zb"],(function(e,t){var s=B.customAction(e)(t.id);s&&s.id?Object.assign(s,t):(e.customActions.push(t),e.customActions=Object(w["d"])(e.customActions))})),Object(v["a"])(o,k["db"],(function(e,t){var s=e.customActions.findIndex((function(e){return e.id===t.id}));e.customActions.splice(s,1)})),Object(v["a"])(o,k["ae"],(function(e){Object.assign(e,Object(g["a"])({},R))})),o),G={state:V,getters:B,actions:U,mutations:H},K=s("48c6"),W={email:"",password:"",isLdap:!1,isLoginLoading:!1,isLoginError:!1,isDataLoading:!1},Y=Object(g["a"])({},W),Q={email:function(e){return e.email},password:function(e){return e.password},isLdap:function(e){return e.isLdap},isLoginLoading:function(e){return e.isLoginLoading},isLoginError:function(e){return e.isLoginError},isDataLoading:function(e){return e.isDataLoading}},X={changeEmail:function(e,t){var s=e.commit;e.state;s(k["I"],t)},changePassword:function(e,t){var s=e.commit;e.state;s(k["J"],t)},logIn:function(e,t){var s=e.commit,i=e.state;s(k["fd"]),K["a"].logIn(i.email,i.password,(function(e){e?(s(k["ed"]),t(e,!1)):(s(k["gd"]),t(null,!0))}))},logout:function(e,t){var s=e.commit;e.state;K["a"].logout((function(e){e?(s(k["hd"]),t(null,!1)):(s(k["ae"]),s(k["id"]),s(k["Re"]),t(null,!0))}))},resetPassword:function(e,t){e.commit;return new Promise((function(e,s){K["a"].resetPassword(t).then(e).catch(s)}))},resetChangePassword:function(e,t){var s=e.commit,i=t.token,n=t.password,a=t.password2;return new Promise((function(e,t){K["a"].resetChangePassword(i,n,a).then((function(){s(k["gd"]),e()})).catch(t)}))}},J=(r={},Object(v["a"])(r,k["I"],(function(e,t){e.email=t})),Object(v["a"])(r,k["J"],(function(e,t){e.password=t})),Object(v["a"])(r,k["fd"],(function(e){e.isLoginLoading=!0,e.isLoginError=!1})),Object(v["a"])(r,k["gd"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(v["a"])(r,k["ed"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!0})),Object(v["a"])(r,k["id"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(v["a"])(r,k["ab"],(function(e,t){e.isDataLoading=!0,t&&void 0!==t.isLdap&&(e.isLdap=t.isLdap)})),Object(v["a"])(r,k["Z"],(function(e){e.isDataLoading=!1})),Object(v["a"])(r,k["ae"],(function(e,t){Object.assign(e,Object(g["a"])({},W))})),r),Z={state:Y,getters:Q,actions:X,mutations:J},ee={currentProductionScreen:"assets",isDarkTheme:!1,isSidebarHidden:!0,isUserMenuHidden:!0,lastProductionScreen:"assets",lastProductionViewed:null},te=Object(g["a"])({},ee),se={isDarkTheme:function(e){return e.isDarkTheme},isSidebarHidden:function(e){return e.isSidebarHidden},isUserMenuHidden:function(e){return e.isUserMenuHidden},lastProductionScreen:function(e){return e.lastProductionScreen},lastProductionViewed:function(e){return e.lastProductionViewed},currentProductionScreen:function(e){return e.currentProductionScreen}},ie={toggleDarkTheme:function(e){var t=e.commit,s=e.state;t(k["Pe"]),localStorage&&localStorage.setItem("dark-theme",s.isDarkTheme)},toggleSidebar:function(e){var t=e.commit;e.state;t(k["Qe"])},toggleUserMenu:function(e){var t=e.commit;e.state;t(k["Re"])},setLastProductionScreen:function(e,t){var s=e.commit;e.state;s(k["xe"],t)},loadEvents:function(e,t){e.commit,e.state;var s=t.after,i=t.before;return y["a"].getEvents(s,i)}},ne=(c={},Object(v["a"])(c,k["Pe"],(function(e){e.isDarkTheme=!e.isDarkTheme})),Object(v["a"])(c,k["Qe"],(function(e){e.isSidebarHidden=!e.isSidebarHidden})),Object(v["a"])(c,k["Re"],(function(e){e.isUserMenuHidden=!e.isUserMenuHidden})),Object(v["a"])(c,k["xe"],(function(e,t){e.lastProductionScreen=t})),Object(v["a"])(c,k["oe"],(function(e,t){t&&(e.lastProductionViewed=t)})),Object(v["a"])(c,k["pf"],(function(e,t){t&&"client"===t.role&&(e.lastProductionScreen="playlists")})),Object(v["a"])(c,k["ae"],(function(e){var t=e.isDarkTheme;Object.assign(e,Object(g["a"])({},ee)),e.isDarkTheme=t})),c),ae={state:te,getters:se,actions:ie,mutations:ne},oe=(s("a15b"),function(e,t){var s="".concat(e,"?"),i=[];return Object.keys(t).forEach((function(e){t[e]&&i.push("".concat(e,"=").concat(t[e]))})),s+i.join("&")}),re={getLastNews:function(e){return new Promise((function(t,s){var i=e.productionId;delete e.productionId;var n=oe("/api/data/projects/".concat(i,"/news"),e);y["a"].get(n,(function(e,i){e?s(e):t(i)}))}))},getNews:function(e,t){return new Promise((function(s,i){var n="/api/data/projects/".concat(e,"/news/").concat(t);y["a"].get(n,(function(e,t){e?i(e):s(t)}))}))}},ce={newsList:[],newsStats:{},newsTotal:0},le=Object(g["a"])({},ce),de={newsList:function(e){return e.newsList},newsTotal:function(e){return e.newsTotal},newsStats:function(e){return e.newsStats},newsListByDay:function(e){if(0===e.newsList.length)return[];var t=[],s=[],i=e.newsList[0].created_at.substring(0,10);return e.newsList.forEach((function(e){var n=e.created_at.substring(0,10);n!==i&&(t.push(s),i=n,s=[]),s.push(e)})),0!==s.length&&t.push(s),t}},ue={loadNews:function(e,t){var s=e.commit;e.state;return s(k["R"]),re.getLastNews(t).then((function(e){return s(k["l"],e.data),s(k["nd"],e.total),s(k["md"],e.stats),Promise.resolve()}))},loadMoreNews:function(e,t){var s=e.commit;e.state;return re.getLastNews(t).then((function(e){return s(k["l"],e.data)}))},loadSingleNews:function(e,t){var s=e.commit,i=(e.state,t.productionId),n=t.newsId;return new Promise((function(e,t){re.getNews(i,n).then((function(e){return s(k["e"],e)})).catch(t)}))}},pe=(l={},Object(v["a"])(l,k["R"],(function(e){e.newsList=[],e.newsTotal=0})),Object(v["a"])(l,k["l"],(function(e,t){e.newsList=e.newsList.concat(Object(w["c"])(t))})),Object(v["a"])(l,k["e"],(function(e,t){e.newsList.unshift(t)})),Object(v["a"])(l,k["ld"],(function(e,t){var s=t.commentId,i=t.previewId,n=t.extension;if(s){var a=e.newsList.find((function(e){return e.comment_id===s}));a&&(a.preview_file_id=i,a.preview_file_extension=n)}})),Object(v["a"])(l,k["nd"],(function(e,t){e.newsTotal=t})),Object(v["a"])(l,k["md"],(function(e,t){e.newsStats=t})),Object(v["a"])(l,k["ae"],(function(e){Object.assign(e,Object(g["a"])({},ce))})),l),me={state:le,getters:de,actions:ue,mutations:pe},he={getNotifications:function(e){var t="/api/data/user/notifications";return e&&(t+="?before=".concat(e)),y["a"].pget(t)},getNotification:function(e){return y["a"].pget("/api/data/user/notifications/".concat(e))}},fe={notificationCount:0,notifications:[]},_e=Object(g["a"])({},fe),ve={notificationCount:function(e){return e.notificationCount},notifications:function(e){return e.notifications},isNewNotification:function(e){return e.notificationCount>0}},ge={clearNotifications:function(e){var t=e.commit;t(k["S"])},loadNotifications:function(e){var t=e.commit;e.state;return t(k["mc"],[]),he.getNotifications().then((function(e){return t(k["mc"],e),Promise.resolve()}))},loadMoreNotifications:function(e){var t=e.commit,s=e.state;if(s.notifications.length>0&&s.notifications.length%100===0){var i=s.notifications.length-1,n=s.notifications[i].created_at;return he.getNotifications(n).then((function(e){return t(k["lc"],e),Promise.resolve(e)}))}return Promise.resolve([])},loadNotification:function(e,t){var s=e.commit;e.state;return he.getNotification(t).then((function(e){return s(k["nc"],e),Promise.resolve()}))},incrementNotificationCounter:function(e){var t=e.commit;t(k["Xb"])},markAllNotificationsAsRead:function(e){var t=e.commit;t(k["jd"])}},ye=(d={},Object(v["a"])(d,k["S"],(function(e){e.notifications=[]})),Object(v["a"])(d,k["mc"],(function(e,t){e.notifications=Object(w["c"])(t)})),Object(v["a"])(d,k["lc"],(function(e,t){e.notifications=Object(w["c"])(e.notifications.concat(t))})),Object(v["a"])(d,k["nc"],(function(e,t){e.notifications.push(t),e.notifications=Object(w["c"])(e.notifications)})),Object(v["a"])(d,k["ye"],(function(e,t){e.notificationCount=t})),Object(v["a"])(d,k["jd"],(function(e){var t=e.notificationCount-e.notifications.length;t<0&&(t=0),e.notificationCount=t})),Object(v["a"])(d,k["td"],(function(e,t){var s=t.commentId,i=t.previewId,n=e.notifications.find((function(e){return e.comment_id===s}));n&&(n.preview_file_id=i)})),Object(v["a"])(d,k["Xb"],(function(e){e.notificationCount=e.notificationCount+1})),Object(v["a"])(d,k["ae"],(function(e){Object.assign(e,Object(g["a"])({},fe))})),d),be={state:_e,getters:ve,actions:ge,mutations:ye},ke=s("52ad"),we=s("0f9a"),Ce=s("487c"),Se={playlists:[],playlistMap:{}},Te=Object(g["a"])({},Se),xe={playlists:function(e){return e.playlists},playlistMap:function(e){return e.playlistMap}},Ee={loadPlaylists:function(e,t){var s=e.commit,i=e.rootGetters,n=i.currentProduction,a=i.currentEpisode,o=i.isTVShow;if(o&&!a)return t?t():null;o||(a=null),s(k["yc"]),Ce["a"].getPlaylists(n,a,(function(e,i){e?s(k["xc"]):s(k["wc"],i),t&&t(e)}))},loadPlaylist:function(e,t){var s=e.commit,i=e.rootGetters,n=t.playlist,a=t.callback,o=i.currentProduction;s(k["Bc"]),Ce["a"].getPlaylist(o,n,(function(e,t){e?s(k["Ac"]):s(k["zc"],t),a&&a(e,t)}))},refreshPlaylist:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=i.currentProduction;Ce["a"].getPlaylist(a,{id:t},(function(t,i){t?n(t):(s(k["Cb"],i),e(i))}))}))},loadEntityPreviewFiles:function(e,t){e.commit;return Ce["a"].getEntityPreviewFiles(t)},newPlaylist:function(e,t){var s=e.commit;return s(k["Eb"],t),Ce["a"].newPlaylist(t).then((function(e){return s(k["Cb"],e),Promise.resolve(e)}))},editPlaylist:function(e,t){var s=e.commit,i=e.rootGetters,n=t.data,a=t.callback;if(!i.isCurrentUserClient)return s(k["Eb"]),Ce["a"].updatePlaylist(n,(function(e,t){e?s(k["Db"]):s(k["Cb"],t),a&&a(e,t)}));a&&a()},deletePlaylist:function(e,t){var s=e.commit,i=t.playlist,n=t.callback;s(k["ib"]),Ce["a"].deletePlaylist(i,(function(e){e?s(k["hb"]):s(k["gb"],i),n&&n(e)}))},pushEntityToPlaylist:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.entity,o=t.previewFiles,r=t.task;t.callback;return new Promise((function(e,t){s(k["jc"],{playlist:n,entity:a,previewFiles:o}),s(k["c"],{playlist:n,entity:a,task:r}),i("editPlaylist",{data:n,callback:function(s){s&&t(s),e(a)}})}))},removeEntityPreviewFromPlaylist:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.entity,o=t.callback;s(k["Nd"],{playlist:n,entity:a}),i("editPlaylist",{data:n,callback:o})},changePlaylistOrder:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.info,o=t.callback;s(k["K"],{playlist:n,info:a}),i("editPlaylist",{data:n,callback:o})},changePlaylistPreview:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.entity,o=t.previewFileId,r=t.callback;s(k["L"],{playlist:n,entityId:a.id,previewFileId:o}),i("editPlaylist",{data:n,callback:r})},removeBuildJob:function(e,t){var s=e.commit;s(k["Md"],t),Ce["a"].deleteBuildJob(t)},removeBuildJobFromList:function(e,t){var s=e.commit;s(k["Md"],t)},addNewBuildJob:function(e,t){var s=e.commit;s(k["i"],t)},markBuildJobAsDone:function(e,t){var s=e.commit;s(k["kd"],t)},runPlaylistBuild:function(e,t){e.commit;return Ce["a"].runPlaylistBuild(t)},changePlaylistType:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.taskTypeId,o=t.callback;return s(k["M"],{playlist:n,taskTypeId:a}),i("editPlaylist",{data:n,callback:o})},loadTempPlaylist:function(e,t){e.commit,e.dispatch;var s=e.rootGetters,i=s.currentProduction;return Ce["a"].loadTempPlaylist(i,t)}},Pe=(u={},Object(v["a"])(u,k["yc"],(function(e){})),Object(v["a"])(u,k["xc"],(function(e){})),Object(v["a"])(u,k["wc"],(function(e,t){e.playlists=t,e.playlists=Object(w["g"])(e.playlists),e.playlistMap={},t.forEach((function(t){t.entities||(t.entities=[]),e.playlistMap[t.id]=t}))})),Object(v["a"])(u,k["Bc"],(function(e){})),Object(v["a"])(u,k["Ac"],(function(e){})),Object(v["a"])(u,k["zc"],(function(e,t){e.playlistMap[t.id].build_jobs=t.build_jobs})),Object(v["a"])(u,k["Eb"],(function(e,t){})),Object(v["a"])(u,k["Db"],(function(e){})),Object(v["a"])(u,k["Cb"],(function(e,t){var s=e.playlistMap[t.id];s&&s.id?Object.assign(s,t):(e.playlists=[t].concat(e.playlists),e.playlistMap[t.id]=t)})),Object(v["a"])(u,k["ib"],(function(e){})),Object(v["a"])(u,k["hb"],(function(e){})),Object(v["a"])(u,k["gb"],(function(e,t){e.playlists=Object(j["h"])(e.playlists,t),delete e.playlistMap[t.id]})),Object(v["a"])(u,k["jc"],(function(e,t){t.playlist;var s=t.entity,i=t.previewFiles,n=[];if(Object.keys(i).forEach((function(e){i[e].forEach((function(e){n.push(e)}))})),n=Object(w["c"])(n),n.length>0){var a=n[0];s.preview_file_id=a.id,s.preview_file_extension=a.extension,s.preview_file_annotations=a.annotations,s.preview_file_task_id=a.task_id}s.preview_files=i})),Object(v["a"])(u,k["c"],(function(e,t){var s=t.playlist,i=t.entity;s.shots||(s.shots=[]),s.shots.push({entity_id:i.id,preview_file_task_id:i.preview_file_task_id,preview_file_id:i.preview_file_id,preview_file_extension:i.preview_file_extension,preview_file_annotations:i.preview_file_annotations,preview_files:i.preview_files})})),Object(v["a"])(u,k["Nd"],(function(e,t){var s=t.playlist,i=t.entity;s.shots||(s.shots=[]);var n=s.shots.findIndex((function(e){return e.entity_id===i.id}));s.shots.splice(n,1)})),Object(v["a"])(u,k["K"],(function(e,t){var s=t.playlist,i=t.info,n=s.shots.find((function(e){return e.entity_id===i.after})),a=s.shots.findIndex((function(e){return e.entity_id===i.after})),o=s.shots.findIndex((function(e){return e.entity_id===i.before}));a>=0&&o>=0&&(s.shots.splice(a,1),a>o&&o++,s.shots.splice(o,0,n))})),Object(v["a"])(u,k["L"],(function(e,t){var s=t.playlist,i=t.entityId,n=t.previewFileId,a=s.shots.find((function(e){return e.entity_id===i}));a||(a=s.shots.find((function(e){return e.id===i}))),a&&(a.preview_file_id=n)})),Object(v["a"])(u,k["i"],(function(e,t){var s=e.playlistMap[t.playlist_id];s.build_jobs=[{id:t.build_job_id,created_at:t.created_at,status:"running",playlist_id:s.id}].concat(s.build_jobs)})),Object(v["a"])(u,k["kd"],(function(e,t){var s=e.playlistMap[t.playlist_id];Object(j["i"])(s.build_jobs,{id:t.build_job_id,status:"succeeded"})})),Object(v["a"])(u,k["Md"],(function(e,t){var s=e.playlistMap[t.playlist_id];h.a.set(s,"build_jobs",Object(j["h"])(s.build_jobs,t))})),Object(v["a"])(u,k["M"],(function(e,t){var s=t.playlist,i=t.taskTypeId;s&&s.shots.forEach((function(e){if(e.preview_files[i]){var t=e.preview_files[i][0];e.preview_file_id=t.id,e.preview_file_extension=t.extension,e.preview_file_annotations=t.annotations,e.extension=t.extension,e.annotations=t.annotations}}))})),Object(v["a"])(u,k["ae"],(function(e){Object.assign(e,Object(g["a"])({},Se))})),u),Oe={state:Te,getters:xe,actions:Ee,mutations:Pe},Ae=s("f83f"),je=(s("fb6a"),{getMilestones:function(e){return new Promise((function(t,s){if(e){var i="/api/data/projects/".concat(e.id,"/milestones");y["a"].get(i,(function(e,i){e?s(e):t(i)}))}else t([])}))},createMilestone:function(e,t){var s={date:t.date.format("YYYY-MM-DD"),name:t.name,task_type_id:t.task_type_id,project_id:e.id};return y["a"].ppost("/api/data/milestones",s)},updateMilestone:function(e){var t={date:e.date.format("YYYY-MM-DD"),name:e.name,task_type_id:e.task_type_id},s="/api/data/milestones/".concat(e.id);return y["a"].pput(s,t)},deleteMilestone:function(e){var t="/api/data/milestones/".concat(e.id);return y["a"].pdel(t)},getScheduleItems:function(e){return y["a"].pget("/api/data/projects/".concat(e.id,"/schedule-items/task-types"))},getAllScheduleItems:function(e){return y["a"].pget("/api/data/projects/".concat(e.id,"/schedule-items/"))},createScheduleItem:function(e){e.endDate||(e.endDate=e.startDate.add("days",1).clone());var t=e.man_days,s={start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD"),project_id:e.project_id,task_type_id:e.task_type_id};return t&&(s.man_days=parseInt(t)),y["a"].ppost("/api/data/schedule-items/",s)},deleteScheduleItem:function(e){var t="/api/data/schedule-items/".concat(e.id);return y["a"].pdel(t)},getAssetTypeScheduleItems:function(e,t){return this.getEntityScheduleItems(e,t,"asset-types")},getSequenceScheduleItems:function(e,t){return this.getEntityScheduleItems(e,t,"sequences")},getEpisodeScheduleItems:function(e,t){return this.getEntityScheduleItems(e,t,"episodes")},getEntityScheduleItems:function(e,t,s){return y["a"].pget("/api/data/projects/".concat(e.id,"/schedule-items/")+"".concat(t.id,"/").concat(s))},updateScheduleItem:function(e){e.endDate||(e.endDate=e.startDate.add("days",1).clone());var t=e.man_days,s={start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD")};return t&&(s.man_days=parseInt(t)),y["a"].pput("/api/data/schedule-items/".concat(e.id),s)}}),De={milestones:{},currentScheduleItems:[]},Me=Object(g["a"])({},De),Ie={milestones:function(e){return e.milestones},currentScheduleItems:function(e){return e.currentScheduleItems}},$e={loadScheduleItems:function(e,t){var s=e.commit;return je.getScheduleItems(t).then((function(e){return s(k["pe"],e),Promise.resolve(e)})).catch(console.error)},loadAllScheduleItems:function(e,t){var s=e.commit;return je.getAllScheduleItems(t).then((function(e){s(k["pe"],e)})).catch(console.error)},loadAssetTypeScheduleItems:function(e,t){e.commit;var s=t.production,i=t.taskType;return je.getAssetTypeScheduleItems(s,i).catch(console.error)},loadSequenceScheduleItems:function(e,t){e.commit;var s=t.production,i=t.taskType;return je.getSequenceScheduleItems(s,i).catch(console.error)},loadEpisodeScheduleItems:function(e,t){e.commit;var s=t.production,i=t.taskType;return i.id?je.getEpisodeScheduleItems(s,i).catch(console.error):Promise.reject(new Error("Wrong task type for loading schedule"))},createScheduleItem:function(e,t){var s=e.commit,i=e.state;if(!t.object_id){var n=i.currentScheduleItems.find((function(e){return e.task_type_id===t.taskTypeId&&e.project_id===t.project_id}));if(n)return Promise.resolve(t)}return je.createScheduleItem(t).then((function(e){var t=i.currentScheduleItems.slice();return t.push(e),s(k["pe"],t),Promise.resolve(e)})).catch(console.error)},deleteScheduleItem:function(e,t){var s=e.commit,i=e.state;return je.deleteScheduleItem(t).then((function(){var e=i.currentScheduleItems.slice(),n=e.findIndex((function(e){return e.id===t.id}));-1!==n&&(e.splice(n,1),s(k["pe"],e))})).catch(console.error)},saveScheduleItem:function(e,t){var s=e.commit,i=e.state;return je.updateScheduleItem(t).then((function(e){var t=i.currentScheduleItems.slice(),n=t.findIndex((function(t){return t.id===e.id}));-1!==n&&(t[n]=e,s(k["pe"],t))})).catch(console.error)},loadMilestones:function(e){var t=e.commit,s=e.rootState,i=s.productions.currentProduction;return je.getMilestones(i).then((function(e){t(k["h"],e)})).catch(console.error)},saveMilestone:function(e,t){var s=e.commit,i=e.rootState,n=i.productions.currentProduction;return t.id?je.updateMilestone(t).then((function(e){s(k["g"],e)})).catch(console.error):je.createMilestone(n,t).then((function(e){s(k["g"],e)}))},deleteMilestone:function(e,t){var s=e.commit;e.rootState;return je.deleteMilestone(t).then((function(e){s(k["Qd"],e)})).catch(console.error)}},Le=(p={},Object(v["a"])(p,k["g"],(function(e,t){e.milestones[t.date]=t})),Object(v["a"])(p,k["h"],(function(e,t){e.milestones={},t.forEach((function(t){e.milestones[t.date]=t}))})),Object(v["a"])(p,k["Qd"],(function(e,t){delete e.milestones[t.date.format("YYYY-MM-DD")]})),Object(v["a"])(p,k["pe"],(function(e,t){e.currentScheduleItems=t})),Object(v["a"])(p,k["ae"],(function(e){Object.assign(e,Object(g["a"])({},De))})),p),Fe={state:Me,getters:Ie,actions:$e,mutations:Le},qe=s("0263"),Ne=s("ef8b"),ze=s("e07d"),Re=s("fa53");h.a.use(f["a"]);var Ve={assetTypes:P,assets:O["a"],breakdown:F,customActions:G,login:Z,main:ae,people:ke["a"],playlists:Oe,productions:Ae["a"],news:me,notifications:be,schedule:Fe,shots:qe["a"],tasks:Re["a"],taskTypes:Ne["a"],taskStatus:ze["a"],user:we["a"]};t["a"]=new f["a"].Store({getters:i,strict:!0,modules:Ve})},"440f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.csv.import_title"))+" ")]),s("p",{staticClass:"description"},[e._v(" "+e._s(e.$t("main.csv.required_fields"))+" "),s("ul",e._l(e.columns,(function(t){return s("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0)]),s("tabs",{on:{update:e.onTabUpdate}},[s("tab",{attrs:{name:e.$t("main.csv.tab_select_file"),selected:!0}},[s("p",[e._v(" "+e._s(e.$t("main.csv.select_file"))+" ")]),s("file-upload",{ref:"inputFile",attrs:{label:e.$t("main.csv.upload_file")},on:{fileselected:e.onFileSelected}})],1),s("tab",{attrs:{name:e.$t("main.csv.tab_paste_code")}},[s("p",[e._v(" "+e._s(e.$t("main.csv.paste_code"))+" ")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pastedCode,expression:"pastedCode"}],staticClass:"paste-area",attrs:{placeholder:e.pasteAreaPlacholder},domProps:{value:e.pastedCode},on:{input:function(t){t.target.composing||(e.pastedCode=t.target.value)}}})])],1),s("modal-footer",{attrs:{"confirm-label":e.$t("main.csv.preview"),"error-text":e.$t("main.csv.error_upload"),"is-loading":e.isLoading,"is-disabled":void 0===e.formData,"is-error":e.isError},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=s("5530"),o=(s("d3b7"),s("25f0"),s("5319"),s("ac1f"),s("2f62")),r=s("d065"),c=s("4085"),l=s("d5c9"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"tabs"},[s("ul",e._l(e.tabs,(function(t,i){return s("li",{key:t.name,ref:"tab-"+i,refInFor:!0,class:{"is-active":t.isActive}},[s("a",{on:{click:function(s){return e.selectTab(t)}}},[e._v(" "+e._s(t.name)+" ")])])})),0)]),s("div",{staticClass:"tabs-details"},[e._t("default")],2)])},u=[],p=(s("159b"),s("b0c0"),{name:"tabs",data:function(){return{tabs:[]}},created:function(){this.tabs=this.$children},mounted:function(){this.$emit("update",this.tabs)},methods:{selectTab:function(e){this.tabs.forEach((function(t){t.isActive=t.name===e.name})),this.$emit("update",this.tabs)}}}),m=p,h=(s("4b24"),s("2877")),f=Object(h["a"])(m,d,u,!1,null,"2ac014c1",null),_=f.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[e._t("default")],2)},g=[],y={name:"tab",props:{name:{required:!0},selected:{default:!1}},data:function(){return{isActive:!1}},computed:{href:function(){return"#"+this.name.toLowerCase().replace(/ /g,"-")}},mounted:function(){this.isActive=this.selected}},b=y,k=Object(h["a"])(b,v,g,!1,null,null,null),w=k.exports,C={name:"import-people-modal",mixins:[r["a"]],components:{FileUpload:c["a"],ModalFooter:l["a"],Tabs:_,Tab:w},data:function(){return{formData:null,pastedCode:"",tabs:[]}},props:{active:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},mounted:function(){this.formData=null},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{pasteAreaPlacholder:function(){var e=this.columns.toString();return e=e.replace(/,/g,";"),e}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onTabUpdate:function(e){this.tabs=e},onFileSelected:function(e){this.formData=e},onConfirmClicked:function(){var e="",t=null;!0===this.tabs[0].isActive?(t=this.formData,e="file"):!0===this.tabs[1].isActive&&(t=this.pastedCode,e="text"),this.$emit("confirm",t,e)},reset:function(){this.$refs.inputFile.reset(),this.pastedCode=""}}),watch:{active:function(){this.reset()}}},S=C,T=(s("34a4"),Object(h["a"])(S,i,n,!1,null,"80c8e440",null));t["a"]=T.exports},4437:function(e,t,s){},"44e8":function(e,t,s){"use strict";s("4437")},4636:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.booleanOptions,value:e.value},on:{input:e.emitValue,enter:e.emitEnter}})},n=[],a=s("992f"),o={name:"combobox-boolean",components:{Combobox:a["a"]},props:{label:{default:"",type:String},value:{default:"false",type:String},options:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{booleanOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},computed:{},methods:{emitValue:function(e){this.$emit("input",e)},emitEnter:function(e){this.$emit("enter",e)}}},r=o,c=s("2877"),l=Object(c["a"])(r,i,n,!1,null,"43de46b8",null);t["a"]=l.exports},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=a(e);return s(t)}function a(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id="4678"},4688:function(e,t,s){},4736:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"production-name flexrow"},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.production),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.production.has_avatar?s("img",{style:{width:e.size+"px",height:e.size+"px"},attrs:{src:e.getThumbnailPath(e.production)}}):s("span",[e._v(" "+e._s(e.generateAvatar(e.production))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item avatar-name"},[e._v(" "+e._s(e.production.name)+" ")])])},n=[],a=s("5530"),o=(s("a9e3"),s("99af"),s("b0c0"),s("7930")),r=s("2f62"),c={name:"production-name",props:{production:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String}},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])([])),{},{productionInfo:function(){var e=this.production.fps,t=this.production.ratio,s=this.production.resolution;return e||t||s?"fps: ".concat(e,"\nratio: ").concat(t,"\nresolution: ").concat(s):""}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])([])),{},{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},l=c,d=(s("d370"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"480e77bc",null);t["a"]=u.exports},"487c":function(e,t,s){"use strict";s("99af"),s("b0c0"),s("d3b7");var i=s("edbf");t["a"]={getPlaylists:function(e,t,s){var n="/api/data/projects/".concat(e.id);n+=t?"/episodes/".concat(t.id,"/playlists"):"/playlists",i["a"].get(n,s)},getPlaylist:function(e,t,s){var n="/api/data/projects/".concat(e.id,"/playlists/").concat(t.id);i["a"].get(n,s)},getEntityPreviewFiles:function(e,t){var s="/api/data/playlists/entities/".concat(e.id,"/preview-files");return i["a"].pget(s)},newPlaylist:function(e){var t={name:e.name,project_id:e.production_id,episode_id:e.episode_id,for_client:e.for_client,for_entity:e.for_entity,is_for_all:e.is_for_all};return i["a"].ppost("/api/data/playlists/",t)},updatePlaylist:function(e,t){var s={};e.name&&(s.name=e.name),void 0!==e.for_client&&(s.for_client=e.for_client),e.shots&&(s.shots=e.shots),e.for_entity&&(s.for_entity=e.for_entity),i["a"].put("/api/data/playlists/".concat(e.id),s,t)},deletePlaylist:function(e,t){i["a"].del("/api/data/playlists/".concat(e.id),t)},deleteBuildJob:function(e,t){return new Promise((function(t,s){var n="/api/data/playlists/".concat(e.playlist_id,"/jobs/").concat(e.id);i["a"].del(n,(function(e){e?s(e):t()}))}))},runPlaylistBuild:function(e){return new Promise((function(t,s){var n="/api/data/playlists/".concat(e.id,"/build/mp4");i["a"].get(n,(function(e){e?s(e):t()}))}))},loadTempPlaylist:function(e,t){var s="/api/data/projects/".concat(e.id,"/playlists/temp");return i["a"].ppost(s,{task_ids:t})}}},"48c6":function(e,t,s){"use strict";s("d3b7"),s("caad");var i=s("db82"),n=s.n(i),a=s("4360"),o=s("9fb0"),r={logIn:function(e,t,s){n.a.post("/api/auth/login").send({email:e,password:t}).end((function(e,t){if(e)t.body.default_password&&(e.default_password=t.body.default_password,e.token=t.body.token),s(e);else if(t.body.login){var i=t.body.user,n=t.body.ldap;a["a"].commit(o["ab"],{isLdap:n}),s(null,i)}else a["a"].commit(o["qf"]),s(new Error("Login failed"))}))},logout:function(e){n.a.get("/api/auth/logout").end((function(t,s){t&&(console.error(t),e(t)),a["a"].commit(o["rf"]),e()}))},resetPassword:function(e){return new Promise((function(t,s){n.a.post("/api/auth/reset-password").send({email:e}).end((function(e,i){e?s(e):t()}))}))},resetChangePassword:function(e,t,s){return new Promise((function(i,a){n.a.put("/api/auth/reset-password").send({token:e,password:t,password2:s}).end((function(e,t){e?a(e):i()}))}))},isServerLoggedIn:function(e){n.a.get("/api/auth/authenticated").end((function(t,s){if(t&&s&&[401,422].includes(s.statusCode))a["a"].commit(o["qf"]),e(null);else if(t)a["a"].commit(o["qf"]),e(t);else if(s&&null===s.body)a["a"].commit(o["qf"]),e(t);else{var i=s.body.user,n=s.body.organisation||{},r=s.body.ldap;n.use_original_file_name=n.use_original_file_name?"true":"false",a["a"].commit(o["ze"],n),a["a"].commit(o["pf"],i),e(null,r)}}))},requireAuth:function(e,t,s){var i=function(t){a["a"].state.user.isAuthenticated?(a["a"].commit(o["ab"],{isLdap:t}),s()):a["a"].dispatch("getOrganisation").then((function(){s({path:"/login",query:{redirect:e.fullPath}})})).catch((function(t){console.error(t),s({path:"/login",query:{redirect:e.fullPath}})}))};null===a["a"].state.user.user?r.isServerLoggedIn((function(t,n){t?s({path:"/server-down",query:{redirect:e.fullPath}}):i(n)})):i()},isPasswordValid:function(e,t){return e.length>6&&e===t}};t["a"]=r},4918:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.csv.preview_title"))+" ")]),s("div",{staticClass:"description"},[s("div",{staticClass:"flex-item"},[s("p",[e._v(" "+e._s(e.$t("main.csv.preview_description"))+" "),s("br"),e._v(" "+e._s(e.$t("main.csv.preview_required"))+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.disableUpdate,expression:"!disableUpdate"}]},[s("h2",{staticClass:"legend-title"},[e._v(e._s(e.$t("main.csv.options.title")))]),s("checkbox",{attrs:{toggle:!0,label:e.$t("main.csv.options.update")},model:{value:e.updateData,callback:function(t){e.updateData=t},expression:"updateData"}})],1)]),s("div",{staticClass:"flex-item"},[s("ul",{staticClass:"legend"},[s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term"}),e._v(" "+e._s(e.$t("main.csv.legend_ok"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term ignored"}),e._v(" "+e._s(e.$t("main.csv.legend_ignored"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term missing"}),e._v(" "+e._s(e.$t("main.csv.legend_missing"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term disabled"}),e._v(" "+e._s(e.$t("main.csv.legend_disabled"))+" ")]),s("li",{directives:[{name:"show",rawName:"v-show",value:!e.disableUpdate,expression:"!disableUpdate"}],staticClass:"legend-definition"},[s("span",{staticClass:"legend-term overwrite"}),e._v(" "+e._s(e.$t("main.csv.legend_overwrite"))+" ")])])])]),s("div",{staticClass:"render-container"},[s("table",{staticClass:"render"},[s("colgroup",[e._l(e.parsedCsv[0],(function(t,i){return s("col",{key:"col-"+i,class:e.stateColumn(t)})})),e._l(e.columnsRequired,(function(e){return s("col",{key:"col-missing-"+e,staticClass:"missing"})}))],2),s("thead",[s("tr",{staticClass:"render-headers"},[e._l(e.parsedCsv[0],(function(t,i){return s("th",{key:"header-"+i},[s("div",{staticClass:"render-select"},[s("combobox",{attrs:{options:e.columnOptions,value:t,error:e.isDuplicated(i)},on:{input:e.checkForDuplicate},model:{value:e.columnSelect[i],callback:function(t){e.$set(e.columnSelect,i,t)},expression:"columnSelect[index]"}})],1),e._v(" "+e._s(t||"-")+" ")])})),e._l(e.columnsRequired,(function(t){return s("th",{key:"header-"+t},[e._v(" "+e._s(t)+" ")])}))],2)]),s("tbody",e._l(e.startFrom(e.parsedCsv,1),(function(t,i){return t&&t.length>1?s("tr",{key:"line-"+i,class:{overwrite:e.updateData&&e.existingData(i),disabled:!e.updateData&&e.existingData(i)}},[e._l(t,(function(t,i){return s("td",{key:"cell-"+i},[e._v(" "+e._s(t||"-")+" ")])})),e._l(e.columnsRequired,(function(t){return s("td",{key:"cell-"+t},[e._v(" "+e._s("-")+" ")])}))],2):e._e()})),0)])]),s("div",{staticClass:"render-footer"},[s("button-simple",{attrs:{text:e.$t("main.csv.preview_reupload")},on:{click:e.onReupload}}),s("modal-footer",{attrs:{"error-text":e.errorText,"is-loading":e.isLoading,"is-disabled":void 0===e.formData,"is-error":e.isError},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])])},n=[],a=s("2909"),o=s("5530"),r=(s("4de4"),s("caad"),s("2532"),s("159b"),s("b0c0"),s("99af"),s("fb6a"),s("2f62")),c=s("d065"),l=s("992f"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("div",{class:{"checkbox-field":!0,toggle:e.toggle}},[s("input",{ref:"checkbox",staticClass:"visuallyhidden",attrs:{type:"checkbox",id:e.id,disabled:e.disabled},domProps:{checked:e.checked},on:{change:function(t){return e.updateStatus()}}}),s("label",{attrs:{for:e.id}},[s("span",[e._v(e._s(e.label))])])])])},u=[],p={name:"checkbox",model:{prop:"checked",event:"change"},props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String,required:!0},checked:{default:!1,type:Boolean},toggle:{type:Boolean,default:!1}},data:function(){return{id:null}},mounted:function(){this.id=this._uid},computed:{},methods:{updateStatus:function(){this.$emit("change",this.$refs.checkbox.checked)}}},m=p,h=(s("9bb3"),s("2877")),f=Object(h["a"])(m,d,u,!1,null,"98810fa2",null),_=f.exports,v=s("de40"),g=s("d5c9"),y={name:"import-render-modal",mixins:[c["a"]],components:{ButtonSimple:v["a"],Combobox:l["a"],Checkbox:_,ModalFooter:g["a"]},data:function(){return{duplicates:[],formData:null,form:{name:""},updateData:!1}},props:{active:{type:Boolean,default:!1},parsedCsv:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},dataMatchers:{type:Array,default:function(){return[]}},database:{type:Object,default:function(){}},disableUpdate:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},importError:{type:Error,default:null}},mounted:function(){this.formData=null},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["assetMetadataDescriptors","isTVShow","shotMetadataDescriptors"])),{},{columnsRequired:function(){var e=this;return 0!==this.parsedCsv.length?this.columns.filter((function(t){return!e.parsedCsv[0].includes(t)})):void 0},metadataDescriptors:function(){return this.$route.path.indexOf("assets")>0?this.assetMetadataDescriptors:this.shotMetadataDescriptors},columnsAllowed:function(){var e=Object(a["a"])(this.columns);return this.metadataDescriptors.forEach((function(t){e.includes(t.name)||e.push(t.name)})),e},columnOptions:function(){var e=[{label:this.$t("main.csv.choose"),value:this.$t("main.csv.unknown")}];return this.columnsAllowed.forEach((function(t){e.push({label:t,value:t})})),e},columnSelect:function(){return this.parsedCsv[0]},indexMatchers:function(){var e=this,t=[];return this.dataMatchers.forEach((function(s){t.push(e.parsedCsv[0].indexOf(s))})),t},errorText:function(){var e=this.$t("main.csv.error_upload");if(this.importError&&400===this.importError.status){var t=this.importError.response;e+=" (line: ".concat(t.body.line_number,") ").concat(t.body.message)}return e}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])([])),{},{onConfirmClicked:function(){this.$emit("confirm",this.parsedCsv,this.updateData)},onReupload:function(){this.$emit("reupload")},startFrom:function(e,t){return e.slice(t)},stateColumn:function(e){if(!this.columnsAllowed.includes(e))return"ignored"},checkForDuplicate:function(){var e=this,t=this.$t("main.csv.unknown");this.duplicates=this.columnSelect.filter((function(t,s){return e.columnSelect.indexOf(t)!==s})).filter((function(e){return e!==t}))},isDuplicated:function(e){if(this.duplicates.includes(this.columnSelect[e]))return!0},existingData:function(e){var t=this.parsedCsv[e+1],s=this.database,i=this.indexMatchers,n="";return i.forEach((function(e){n+=t[e]})),s[n]}})},b=y,k=(s("ba83"),Object(h["a"])(b,i,n,!1,null,"3bfb03e3",null));t["a"]=k.exports},"4b24":function(e,t,s){"use strict";s("ba8a")},"4bd6":function(e,t,s){},"4ce0":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.checklist,(function(t,i){return s("div",{key:"comment-checklist--"+i,class:{"checklist-entry":!0,flexrow:!0,checked:t.checked}},[s("span",{staticClass:"flexrow-item",on:{click:function(s){return e.toggleEntryChecked(t)}}},[t.checked?s("check-square-icon",{staticClass:"icon"}):s("square-icon",{staticClass:"icon"})],1),s("textarea-autosize",{ref:"checklist-entry-"+i,refInFor:!0,staticClass:"checklist-text flexrow-item",attrs:{type:"text",rows:"1",placeholder:e.$t("comments.task_placeholder"),disabled:e.disabled},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addChecklistEntry(i,t))},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"backspace",void 0,t.key,void 0)?null:e.removeChecklistEntry(i)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.focusPrevious(i)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.focusNext(i)}]},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"entry.text"}})],1)})),0)},n=[],a=s("0a35"),o={name:"checklist",components:{CheckSquareIcon:a["h"],SquareIcon:a["T"]},props:{checklist:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},methods:{addChecklistEntry:function(e,t){var s=this;-1!==e&&e!==this.checklist.length-1||this.$emit("add-item",{index:e,text:"",checked:!1}),this.$nextTick((function(){s.focusNext(e)}))},removeChecklistEntry:function(e){var t=this.checklist[e];0===t.text.length&&(this.$emit("remove-task",t),this.focusPrevious(e))},focusPrevious:function(e){if(this.checklist.length>0){0===e&&(e=this.checklist.length),e--;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},focusNext:function(e){if(this.checklist.length>0){e===this.checklist.length-1&&(e=-1),e++;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},toggleEntryChecked:function(e){e.checked=!e.checked,this.$emit("emit-change")}}},r=o,c=(s("d2f9"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"0c9f081e",null);t["a"]=l.exports},"4d04":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"flexrow search-field-wrapper",on:{click:e.focus}},[s("div",{staticClass:"flexrow-item"},[s("search-icon",{staticClass:"search-icon"})],1),s("div",{staticClass:"flexrow-item search-field"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"search-input",attrs:{type:"text",placeholder:e.placeholder},on:{input:e.onSearchChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSaveClicked(t)},focus:e.setFocusedStyle,blur:e.unsetFocusedStyle}})]),s("div",{staticClass:"flexrow-item erase-search"},[s("span",{staticClass:"tag",on:{click:e.clearSearch}},[e._v(" x ")])]),e.canSave?s("div",{staticClass:"flexrow-item save-search"},[s("button",{staticClass:"button save-button",on:{click:e.onSaveClicked}},[s("save-icon",{staticClass:"icon is-small only-icon"})],1)]):e._e()])},n=[],a=(s("498a"),s("0a35")),o={name:"search-field",data:function(){return{}},props:{placeholder:{type:String,default:""},canSave:{type:Boolean,default:!1}},components:{SaveIcon:a["O"],SearchIcon:a["P"]},computed:{},methods:{onSearchChange:function(){this.$emit("change",this.$refs.input.value)},onSaveClicked:function(){var e=this.$refs.input.value.trim();e.length>0&&this.canSave&&this.$emit("save",e)},getValue:function(e){return this.$refs.input?this.$refs.input.value:""},setValue:function(e){this.$refs.input.value=e},focus:function(){this.$refs.input&&this.$refs.input.focus()},clearSearch:function(){this.setValue(""),this.onSearchChange()},setFocusedStyle:function(){this.$refs.wrapper.className="flexrow search-field-wrapper focused"},unsetFocusedStyle:function(){this.$refs.wrapper.className="flexrow search-field-wrapper"}}},r=o,c=(s("6038"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"6ebdd1c2",null);t["a"]=l.exports},"4dab":function(e,t,s){},5097:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("99af"),s("159b"),s("b0c0"),s("caad");var i=s("ba4c"),n=s.n(i),a=s("7930"),o={created:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)},mounted:function(){this.resizeHeaders&&this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{getBackground:function(e){return a["a"].hexToRGBa(e,.08)},buildHideKey:function(e){return"column-".concat(this.currentProduction.id,"-").concat(e)},initHiddenColumns:function(e,t){var s=this;e&&t&&e.forEach((function(e){var i=s.buildHideKey(e);n.a.set(t,e,"true"===localStorage.getItem(i))}))},hideColumn:function(e){var t=this.buildHideKey(e),s=!0;return"true"===localStorage.getItem(t)&&(s=!1),localStorage.setItem(t,s),n.a.set(this.hiddenColumns,e,s),this.hiddenColumns[e]=s,s},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},getValidationStyle:function(e){var t=this.taskTypeMap[e];return{"border-left":"1px solid ".concat(t.color),background:this.getBackground(t.color)}},onTaskSelected:function(e){var t=this,s=[];if(e.isShiftKey){if(this.lastSelection){var i=this.lastSelection.x,n=e.x,a=this.lastSelection.y,o=e.y,r=this.assetSelectionGrid;r||(r=this.shotSelectionGrid),e.x<this.lastSelection.x&&(i=e.x,n=this.lastSelection.x),e.y<this.lastSelection.y&&(a=e.y,o=this.lastSelection.y);for(var c=i;c<=n;c++)for(var l=a;l<=o;l++){var d="validation-"+c+"-"+l,u=this.$refs[d][0];r[c][l]||s.push({entity:u.entity,column:u.column,task:u.task,x:u.rowX,y:u.columnY})}this.$store.commit("ADD_SELECTED_TASK",e)}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(0===s.length?this.$store.commit("ADD_SELECTED_TASK",e):this.$store.commit("ADD_SELECTED_TASKS",s),!e.isShiftKey&&e.isUserClick){var p=e.x,m=e.y;this.lastSelection={x:p,y:m};var h="validation-"+p+"-"+m,f=this.$refs[h][0];this.$nextTick((function(){t.scrollToValidationCell(f)}))}},onTaskUnselected:function(e){e.isCtrlKey||1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},showHeaderMenu:function(e,t){var s=this.$refs.headerMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var i=t.srcElement.parentNode.parentNode;"TH"!==i.tagName&&(i=i.parentNode);var n=i.getBoundingClientRect(),a=n.left,o=n.bottom,r=Math.max(100,n.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastHeaderMenuDisplayed=e},onMinimizeColumnToggled:function(){this.hideColumn(this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onDeleteAllTasksClicked:function(){this.$emit("delete-all-tasks",this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onSortByTaskTypeClicked:function(){var e=this.lastHeaderMenuDisplayed;this.$emit("change-sort",{type:"status",column:e,name:this.taskTypeMap[e].name}),this.showHeaderMenu()},getEntityLineNumber:function(e,t,s){this.$options.lineIndex={};var i="".concat(t,"-").concat(s),n=this.$options.lineIndex[i];if(n)return n;var a=0,o=0;while(a<s)o+=e[a].length,a++;var r=t+o;return this.$options.lineIndex[i]=r,r},getGroupKey:function(e,t,s){var i=e[0]?e[0][s]+e[0].canceled:"";return"".concat(t,"-").concat(i)},onDescriptionChanged:function(e,t){this.$emit("field-changed",{entry:e,fieldName:"description",value:t})},onNumberFieldKeyDown:function(e){["ArrowDown","ArrowUp"].includes(e.key)&&this.pauseEvent(e)}}}},"52ad":function(e,t,s){"use strict";var i,n=s("ade3"),a=s("5530"),o=(s("b0c0"),s("99af"),s("d3b7"),s("25f0"),s("d81d"),s("7db0"),s("159b"),s("c740"),s("a434"),s("13d5"),s("07ac"),s("ba4c")),r=s.n(o),c=s("ce6b"),l=s("7930"),d=s("6185"),u=s("66e7"),p=s("2229"),m=s("2017"),h=s("ca76"),f=s("e07d"),_=s("9fb0"),v={addAdditionalInformation:function(e){if(e&&(e.first_name&&e.last_name?(e.name="".concat(e.first_name," ").concat(e.last_name),e.initials="".concat(e.first_name[0]).concat(e.last_name[0])):e.first_name?(e.name=e.first_name,e.initials=e.first_name[0]):e.last_name?(e.name=e.last_name,e.initials=e.last_name[0]):e.email?(e.name=e.email,e.initials=e.email[0]):e.initials="NN",r.a.set(e,"initials",e.initials.toUpperCase()),e.color=l["a"].fromString(e.name),e.has_avatar&&!e.uniqueHash)){var t=Math.random().toString(36).substring(7);r.a.set(e,"uniqueHash",t),e.avatarPath="/api/pictures/thumbnails/persons/".concat(e.id,".png")}return e},getTaskStatus:function(e){return f["a"].state.taskStatusMap[e]}},g={organisation:{name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:"false"},people:[],displayedPeople:[],peopleSearchText:"",peopleIndex:{},personMap:{},isPeopleLoading:!1,isPeopleLoadingError:!0,isImportPeopleModalShown:!1,isImportPeopleLoading:!1,isImportPeopleLoadingError:!1,isEditModalShown:!1,isEditLoading:!1,isEditLoadingError:!1,isDeleteModalShown:!1,isDeleteLoading:!1,isDeleteLoadingError:!1,personCsvFormData:void 0,person:{},personTasks:[],displayedPersonTasks:[],displayedPersonDoneTasks:[],personTasksIndex:{},personTasksSearchText:"",personTaskSelectionGrid:{},personTaskSearchQueries:[],personTasksScrollPosition:0,timesheet:{},personTimeSpentMap:{},personTimeSpentTotal:0,personIsDayOff:!1,dayOffMap:{}},y=Object(a["a"])({},g),b={organisation:function(e){return e.organisation},people:function(e){return e.people},displayedPeople:function(e){return e.displayedPeople},peopleIndex:function(e){return e.peopleIndex},personMap:function(e){return e.personMap},isPeopleLoading:function(e){return e.isPeopleLoading},isPeopleLoadingError:function(e){return e.isPeopleLoadingError},isImportPeopleModalShown:function(e){return e.isImportPeopleModalShown},isImportPeopleLoading:function(e){return e.isImportPeopleLoading},isImportPeopleLoadingError:function(e){return e.isImportPeopleLoadingError},isDeleteModalShown:function(e){return e.isDeleteModalShown},isDeleteLoading:function(e){return e.isDeleteLoading},isDeleteLoadingError:function(e){return e.isDeleteLoadingError},isEditModalShown:function(e){return e.isEditModalShown},isEditLoading:function(e){return e.isEditLoading},isEditLoadingError:function(e){return e.isEditLoadingError},personCsvFormData:function(e){return e.personCsvFormData},displayedPersonTasks:function(e){return e.displayedPersonTasks},displayedPersonDoneTasks:function(e){return e.displayedPersonDoneTasks},personTasksSearchText:function(e){return e.personTasksSearchText},personTaskSearchQueries:function(e){return e.personTaskSearchQueries},personTaskSelectionGrid:function(e){return e.personTaskSelectionGrid},personTasksScrollPosition:function(e){return e.personTasksScrollPosition},getPerson:function(e,t){return function(t){return e.personMap[t]}},getPersonOptions:function(e){return e.people.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}))},timesheet:function(e){return e.timesheet},personTimeSpentMap:function(e){return e.personTimeSpentMap},personTimeSpentTotal:function(e){return e.personTimeSpentTotal},personIsDayOff:function(e){return e.personIsDayOff},dayOffMap:function(e){return e.dayOffMap}},k={getOrganisation:function(e){var t=e.commit;return c["a"].getOrganisation().then((function(e){t(_["ze"],e)}))},saveOrganisation:function(e,t){var s=e.commit;return t.id=y.organisation.id,c["a"].updateOrganisation(t).then((function(e){s(_["ze"],e),Promise.resolve(e)}))},uploadOrganisationLogo:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){var a=i.organisation.id;c["a"].postOrganisationLogo(a,t).then((function(t){s(_["ze"],{has_avatar:!0}),e()})).catch(n)}))},loadPeople:function(e,t){var s=e.commit;e.state;s(_["tc"]),c["a"].getPeople((function(e,i){e?s(_["sc"]):s(_["rc"],i.map((function(e){return e.departments=e.departments||"",e}))),t&&t(e)}))},loadPerson:function(e,t){e.commit,e.state;c["a"].getPerson(t,(function(e,t){e&&console.error(e)}))},newPerson:function(e,t){var s=e.commit;e.state;return c["a"].createPerson(t).then((function(e){s(_["Bb"],e),Promise.resolve()}))},newPersonAndInvite:function(e,t){var s=e.commit;e.state;return c["a"].createPerson(t).then(c["a"].invitePerson).then((function(e){s(_["Bb"],e),Promise.resolve()}))},invitePerson:function(e,t){e.commit,e.state;return c["a"].invitePerson(t)},editPerson:function(e,t){var s=e.commit;e.state;return c["a"].updatePerson(t).then((function(e){s(_["Bb"],e),Promise.resolve()}))},deletePeople:function(e,t){var s=e.commit;e.state;return c["a"].deletePerson(t).then((function(){s(_["fb"]),Promise.resolve()}))},uploadPersonFile:function(e,t){var s=e.commit,i=e.state;return s(_["Vb"]),c["a"].postCsv(i.personCsvFormData,t).then((function(){s(_["Tb"]),Promise.resolve()})).catch((function(e){s(_["Ub"]),Promise.reject(e)}))},loadPersonTasks:function(e,t){var s=e.commit,i=(e.state,e.rootGetters),n=t.personId,a=(t.forced,t.date),o=t.callback,r=i.userFilters,l=i.taskTypeMap;s(_["vc"],{personId:n,tasks:[],userFilters:r,taskTypeMap:l}),s(_["uc"],[]),c["a"].getPersonTasks(n,(function(e,t){e&&(t=[]),c["a"].getPersonDoneTasks(n,(function(e,i){e&&(i=[]),s(_["uc"],i),c["a"].getTimeSpents(n,a).then((function(e){return s(_["yd"],e),c["a"].getDayOff(n,a)})).then((function(i){s(_["zd"],i),s(_["vc"],{personId:n,tasks:t,userFilters:r,taskTypeMap:l}),o&&o(e)}))}))}))},loadAggregatedPersonTimeSpents:function(e,t){e.commit,e.state,e.rootGetters;var s=t.personId,i=t.detailLevel,n=t.year,a=t.month,o=t.week,r=t.day,l=t.productionId;return c["a"].getAggregatedPersonTimeSpents(s,i,n,a,o,r,l)},loadAggregatedPersonDaysOff:function(e,t){e.commit,e.state,e.rootGetters;var s=t.personId,i=t.detailLevel,n=t.year,a=t.month,o=t.week;return"day"===i?Promise.resolve([]):c["a"].getAggregatedPersonDaysOff(s,i,n,a,o)},showPersonImportModal:function(e,t){var s=e.commit;e.state;s(_["Me"])},hidePersonImportModal:function(e,t){var s=e.commit;e.state;s(_["Qb"])},setPersonTasksSearch:function(e,t){var s=e.commit;e.state;s(_["Be"],t)},savePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,i){var n=y.personTaskSearchQueries.find((function(e){return e.name===t}));n?e():c["a"].createFilter("persontasks",t,t,null,null,(function(t,n){s(_["fe"],{searchQuery:n}),t?i(t):e(n)}))}))},removePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return c["a"].removeFilter(t).then((function(){return s(_["Rd"],{searchQuery:t}),Promise.resolve()}))},setTimeSpent:function(e,t){var s=e.commit,i=t.personId,n=t.taskId,a=t.date,o=t.duration;return c["a"].setTimeSpent(n,i,a,o).then((function(e){s(_["Ie"],e),Promise.resolve(e)}))},setDayOff:function(e,t){var s=e.commit,i=t.personId,n=t.date;return c["a"].setDayOff(i,n).then((function(e){s(_["zd"],e),Promise.resolve(e)}))},unsetDayOff:function(e,t){var s=e.commit,i=e.state;return c["a"].unsetDayOff(i.personDayOff).then((function(e){s(_["zd"],{}),Promise.resolve()}))},setPersonTasksScrollPosition:function(e,t){var s=e.commit;s(_["Ae"],t)},loadTimesheets:function(e,t){var s=e.commit,i=t.detailLevel,n=t.year,a=t.month,o=t.productionId,r=1===a.length?"0".concat(parseInt(a)+1):"".concat(a),l=c["a"].getMonthTable;return"day"===i&&(l=c["a"].getDayTable),"week"===i&&(l=c["a"].getWeekTable),"year"===i&&(l=c["a"].getYearTable),l(n,r,o).then((function(e){"day"===i?(console.log("get day offs"),c["a"].getDayOffs(n,r).then((function(t){s(_["vd"],t),s(_["wd"],e),Promise.resolve(e)}))):(s(_["wd"],e),Promise.resolve(e))}))},peopleSearchChange:function(e,t){var s=e.commit;s(_["ud"],t)}},w=(i={},Object(n["a"])(i,_["tc"],(function(e){e.isPeopleLoading=!0,e.isPeopleLoadingError=!1,e.personMap={}})),Object(n["a"])(i,_["sc"],(function(e){e.isPeopleLoading=!1,e.isPeopleLoadingError=!0})),Object(n["a"])(i,_["rc"],(function(e,t){e.isPeopleLoading=!1,e.isPeopleLoadingError=!1,e.people=Object(p["f"])(t),e.displayedPeople=e.people,e.people.forEach((function(t){t=v.addAdditionalInformation(t),e.personMap[t.id]=t})),e.peopleIndex=Object(m["c"])(e.people)})),Object(n["a"])(i,_["fb"],(function(e,t){if(t){var s=e.people.findIndex((function(e){return e.id===t.id}));s>=0&&e.people.splice(s,1),delete e.personMap[t.id]}if(e.peopleIndex=Object(m["c"])(e.people),e.peopleSearchText){var i=Object(h["e"])(e.peopleSearchText);e.displayedPeople=Object(m["j"])(e.peopleIndex,i)}else e.displayedPeople=e.people})),Object(n["a"])(i,_["Bb"],(function(e,t){var s=Object(a["a"])({},t);s=v.addAdditionalInformation(s);var i=e.people.findIndex((function(e){return e.id===s.id}));if(s.name)if(i>=0?(e.personMap[s.id]=s,delete e.people[i],e.people[i]=e.personMap[s.id]):e.personMap[s.id]||(e.people.push(s),e.personMap[s.id]=s),e.people=Object(p["f"])(e.people),e.peopleIndex=Object(m["c"])(e.people),e.peopleSearchText){var n=Object(h["e"])(e.peopleSearchText);e.displayedPeople=Object(m["j"])(e.peopleIndex,n)}else e.displayedPeople=e.people})),Object(n["a"])(i,_["Vb"],(function(e,t){e.isImportPeopleLoading=!0,e.isImportPeopleLoadingError=!1})),Object(n["a"])(i,_["Tb"],(function(e,t){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(n["a"])(i,_["Ub"],(function(e){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!0})),Object(n["a"])(i,_["Me"],(function(e){e.isImportPeopleModalShown=!0,e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(n["a"])(i,_["Qb"],(function(e){e.isImportPeopleModalShown=!1})),Object(n["a"])(i,_["xd"],(function(e,t){e.personCsvFormData=t})),Object(n["a"])(i,_["ff"],(function(e,t){var s=e.personMap[t];if(s){var i=Math.random().toString(36).substring(7);s.has_avatar=!0,r.a.set(s,"uniqueHash",i),s.avatarPath="/api/pictures/thumbnails/persons/".concat(s.id,".png")}})),Object(n["a"])(i,_["vc"],(function(e,t){var s=t.personId,i=t.tasks,n=t.userFilters,a=t.taskTypeMap;e.person=e.personMap[s],i.forEach(u["e"]),i.forEach((function(e){var t=v.getTaskStatus(e.task_status_id);e.taskStatus=t}));for(var o={},r=0;r<i.length;r++)o[r]={0:!1};e.personTaskSelectionGrid=o,e.personTasks=Object(p["o"])(i,a),e.personTasksIndex=Object(m["g"])(i);var c=Object(h["e"])(e.personTasksSearchText),l=Object(m["j"])(e.personTasksIndex,c);e.displayedPersonTasks=l||e.personTasks,n.persontasks&&n.persontasks.all?e.personTaskSearchQueries=n.persontasks.all:e.personTaskSearchQueries=[]})),Object(n["a"])(i,_["uc"],(function(e,t){t.forEach(u["e"]),e.displayedPersonDoneTasks=t})),Object(n["a"])(i,_["Be"],(function(e,t){e.displayedPersonTasks=[];var s=Object(h["e"])(t),i=Object(m["j"])(e.personTasksIndex,s);e.personTasksSearchText=t,e.displayedPersonTasks=i||e.personTasks})),Object(n["a"])(i,_["fe"],(function(e,t){var s=t.searchQuery;e.personTaskSearchQueries.push(s),e.personTaskSearchQueries=Object(p["d"])(e.personTaskSearchQueries)})),Object(n["a"])(i,_["Rd"],(function(e,t){var s=t.searchQuery,i=e.personTaskSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.personTaskSearchQueries.splice(i,1)})),Object(n["a"])(i,_["rd"],(function(e,t){var s=t.comment,i=t.taskId,n=e.personTasks.find((function(e){return e.id===i}));if(n){var a=v.getTaskStatus(s.task_status_id);Object.assign(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color}),e.personTasksIndex=Object(m["g"])(e.personTasks)}})),Object(n["a"])(i,_["Td"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!1)})),Object(n["a"])(i,_["n"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!0)})),Object(n["a"])(i,_["T"],(function(e,t){e.personTaskSelectionGrid=Object(d["c"])(e.personTaskSelectionGrid)})),Object(n["a"])(i,_["wd"],(function(e,t){e.timesheet=t})),Object(n["a"])(i,_["Ie"],(function(e,t){e.person.id===t.person_id&&(e.personTimeSpentMap[t.task_id]=t),e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,_["yd"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.personTimeSpentMap=s,e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,_["zd"],(function(e,t){e.personDayOff=t,e.personIsDayOff=null!==t&&void 0!==t.id})),Object(n["a"])(i,_["vd"],(function(e,t){var s={};t.forEach((function(e){s[e.person_id]||(s[e.person_id]={}),s[e.person_id][e.date.substring(8,10)]=!0})),e.dayOffMap=s})),Object(n["a"])(i,_["Ae"],(function(e,t){e.personTasksScrollPosition=t})),Object(n["a"])(i,_["ud"],(function(e,t){if(t){var s=Object(h["e"])(t);e.displayedPeople=Object(m["j"])(e.peopleIndex,s),e.peopleSearchText=t}else e.displayedPeople=e.people,e.peopleSearchText=""})),Object(n["a"])(i,_["uf"],(function(e,t){var s=e.personMap[t.id];s&&(Object.assign(s,t),v.addAdditionalInformation(s))})),Object(n["a"])(i,_["ze"],(function(e,t){Object.assign(e.organisation,t),e.organisation=Object(a["a"])({},e.organisation)})),Object(n["a"])(i,_["ae"],(function(e,t){Object.assign(e,Object(a["a"])({},g))})),i);t["a"]={state:y,getters:b,actions:k,mutations:w,helpers:v}},5395:function(e,t,s){},"539a":function(e,t,s){},"556f":function(e,t,s){"use strict";s("ebac")},"55ce":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-queries"},[e._l(e.userFilters,(function(t){return s("span",{key:t.id,staticClass:"tag flexrow",on:{click:function(s){return e.changeSearch(s,t)}}},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.name)+" ")]),s("button",{staticClass:"edit flexrow-item",on:{click:function(s){return s.preventDefault(),e.editSearch(t)}}},[s("edit2-icon",{staticClass:"edit-icon",attrs:{size:"0.6x"}})],1),s("button",{staticClass:"delete flexrow-item",on:{click:function(s){return s.preventDefault(),e.removeSearch(t)}}})])})),s("edit-search-filter-modal",{ref:"edit-search-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"search-query-to-edit":e.searchQueryToEdit},on:{cancel:function(t){e.modals.edit=!1},confirm:e.confirmEditSearch}})],2)},n=[],a=s("5530"),o=s("2909"),r=(s("caad"),s("2f62")),c=s("0a35"),l=s("2229"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.search_query_edit"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("main.search_query")},on:{enter:e.runConfirmation},model:{value:e.form.search_query,callback:function(t){e.$set(e.form,"search_query",t)},expression:"form.search_query"}})],1),s("modal-footer",{attrs:{"error-text":e.$t("main.search_query_edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},u=[],p=(s("b0c0"),s("d065")),m=s("7bf8"),h=s("d5c9"),f={name:"edit-search-filter-modal",mixins:[p["a"]],components:{ModalFooter:h["a"],TextField:m["a"]},props:["active","isLoading","isError","searchQueryToEdit"],data:function(){return this.searchQueryToEdit&&this.searchQueryToEdit.id?{form:{text:this.searchQueryToEdit.text,task_status_id:this.searchQueryToEdit.task_status_id}}:{form:{text:"",task_status_id:null}}},computed:{},methods:{runConfirmation:function(e){e&&13!==e.keyCode&&e.keyCode||this.$emit("confirm",Object(a["a"])({id:this.searchQueryToEdit.id},this.form))}},watch:{searchQueryToEdit:function(){this.searchQueryToEdit&&this.searchQueryToEdit.id?(this.form.id=this.searchQueryToEdit.id,this.form.name=this.searchQueryToEdit.name,this.form.search_query=this.searchQueryToEdit.search_query):this.form={id:"",name:"",search_query:""}},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)}}},_=f,v=s("2877"),g=Object(v["a"])(_,d,u,!1,null,"93cc40be",null),y=g.exports,b={name:"search-query-list",props:{queries:{type:Array,default:function(){return[]}}},components:{Edit2Icon:c["r"],EditSearchFilterModal:y},data:function(){return{searchQueryToEdit:{},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},computed:{userFilters:function(){return Object(l["d"])(Object(o["a"])(this.queries))}},methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["updateSearchFilter"])),{},{changeSearch:function(e,t){var s=["delete flexrow","edit flexrow"].includes(e.target.className);s||this.$emit("change-search",t)},editSearch:function(e){this.searchQueryToEdit=e,this.modals.edit=!0},confirmEditSearch:function(e){var t=this;this.loading.edit=!0,this.updateSearchFilter(e).then((function(){t.loading.edit=!1,t.modals.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},removeSearch:function(e){this.$emit("remove-search",e)}})},k=b,w=(s("a068"),Object(v["a"])(k,i,n,!1,null,null,null));t["a"]=w.exports},5688:function(e,t,s){},"56a0":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{field:!0,"field--narrow":e.narrow}},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("div",{staticClass:"status-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleStatusList}},[s("div",{staticClass:"selected-status-line flexrow-item"},[e.currentStatus?s("span",{staticClass:"tag",style:{background:e.backgroundColor(e.currentStatus),color:e.color(e.currentStatus)}},[e._v(" "+e._s(e.currentStatus.short_name)+" ")]):e._e()]),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showStatusList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskStatusList,(function(t){return s("div",{key:t.id,staticClass:"status-line",on:{click:function(s){return e.selectStatus(t)}}},[s("span",{staticClass:"tag",style:{background:e.backgroundColor(t),color:e.color(t)}},[e._v(" "+e._s(t.short_name)+" ")])])})),0):e._e()]),s("combobox-mask",{attrs:{displayed:e.showStatusList},on:{click:e.toggleStatusList}})],1)},n=[],a=s("5530"),o=s("2f62"),r=s("0a35"),c=s("7930"),l=s("dbde"),d={name:"combobox-status",components:{ChevronDownIcon:r["i"],ComboboxMask:l["a"]},data:function(){return{showStatusList:!1}},props:{label:{default:"",type:String},taskStatusList:{default:function(){return[]},type:Array},value:{default:"",type:String},narrow:{default:!1,type:Boolean}},mounted:function(){this.selectedTaskStatus=this.taskStatus},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isDarkTheme","taskStatusMap"])),{},{currentStatus:function(){return this.value?this.taskStatusMap[this.value]:this.taskStatusList[0]}}),methods:{selectStatus:function(e){this.$emit("input",e.id),this.showStatusList=!1},backgroundColor:function(e){return e&&"todo"!==e.short_name||this.isDarkTheme?e&&"todo"!==e.short_name||!this.isDarkTheme?this.isDarkTheme?c["a"].darkenColor(e.color):e.color:"#5F626A":"#ECECEC"},color:function(e){return!e||"todo"!==e.short_name||this.isDarkTheme?"white":"#333"},toggleStatusList:function(){this.showStatusList=!this.showStatusList}}},u=d,p=(s("9216"),s("2877")),m=Object(p["a"])(u,i,n,!1,null,"75e0f320",null);t["a"]=m.exports},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("ba4c"),n=s.n(i),a=s("31bd"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{theme:!0,dark:e.isDarkTheme}},[e.user&&e.isDataLoading?s("div",{staticClass:"has-text-centered mt2 loading-info"},[s("span",[e._v(e._s(e.$t("main.loading_data"))+"...")]),s("spinner",{staticClass:"mt2"})],1):s("router-view")],1)},r=[],c=s("5530"),l=s("2f62"),d=s("be83"),u=s("db82"),p=s.n(u),m={init:function(e){var t=this;p.a.get("/api/config").end((function(s,i){if(s)console.error(s);else{var n=i.body.crisp_token;n&&n.length>0&&t.setup(n)}e&&e()}))},setup:function(e){function t(){var e=document,t=e.createElement("script");t.src="https://client.crisp.chat/l.js",t.async=1,e.getElementsByTagName("head")[0].appendChild(t)}window.$crisp=[],window.CRISP_WEBSITE_ID=e,t()}},h={name:"app",components:{Spinner:d["a"]},computed:Object(c["a"])({},Object(l["c"])(["assetMap","assetTypeMap","currentEpisode","currentProduction","episodeMap","isCurrentUserAdmin","isDataLoading","isDarkTheme","isLoginLoading","isSavingCommentPreview","isTVShow","route","personMap","productionMap","sequenceMap","shotMap","taskMap","taskStatusMap","taskTypeMap","user"])),mounted:function(){"true"!==localStorage.getItem("dark-theme")||this.isDarkTheme?(document.documentElement.style.background="#FFF",document.body.style.background="#FFF"):(this.$store.commit("TOGGLE_DARK_THEME"),document.documentElement.style.background="#36393F",document.body.style.background="#36393F"),m.init()},metaInfo:{link:[{rel:"icon",href:"/static/favicon.ico"}]},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["getOrganisation","loadTask","loadAsset","loadAssetType","loadComment","loadEpisode","loadOpenProductions","loadPerson","loadPersonTasks","loadProduction","loadSequence","loadShot","loadTaskStatus","loadTaskType","refreshMetadataDescriptor","removeAsset"])),{},{onAssignation:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=e.person_id,i=[e.task_id];t?this.$store.commit("ASSIGN_TASKS",{selectedTaskIds:i,personId:s}):this.$store.commit("UNASSIGN_TASKS",i),this.route.path.indexOf(e.person_id)>0&&this.loadPersonTasks({personId:e.person_id,forced:!0})}}),watch:{isDarkTheme:function(){this.isDarkTheme?(document.documentElement.style.background="#36393F",document.body.style.background="#36393F"):(document.documentElement.style.background="#FFF",document.body.style.background="#FFF")}},socket:{events:{"project:new":function(e){this.productionMap[e.project_id]||this.loadProduction(e.project_id)},"project:update":function(e){this.productionMap[e.project_id]?this.loadProduction(e.project_id):this.loadOpenProductions()},"project:delete":function(e){this.productionMap[e.project_id]&&this.$store.commit("REMOVE_PRODUCTION",{id:e.project_id})},"sequence:new":function(e){!this.sequenceMap[e.sequence_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadSequence(e.sequence_id)},"sequence:update":function(e){this.sequenceMap[e.sequence_id]&&this.loadSequence(e.sequence_id)},"sequence:delete":function(e){this.sequenceMap[e.sequence_id]&&this.$store.commit("REMOVE_SEQUENCE",{id:e.sequence_id})},"episode:new":function(e){!this.episodeMap[e.episode_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadEpisode(e.episode_id)},"episode:update":function(e){this.episodeMap[e.episode_id]&&this.loadEpisode(e.episode_id)},"episode:delete":function(e){this.episodeMap[e.episode_id]&&this.$store.commit("REMOVE_EPISODE",{id:e.episode_id})},"shot:new":function(e){var t=this;this.shotMap[e.shot_id]||!this.currentProduction||this.currentProduction.id!==e.project_id||this.isTVShow&&this.currentEpisode.id!==e.episode_id||setTimeout((function(){t.loadShot(e.shot_id)}),1e3)},"shot:update":function(e){this.shotMap[e.shot_id]&&this.loadShot(e.shot_id)},"shot:delete":function(e){this.shotMap[e.shot_id]&&this.$store.commit("REMOVE_SHOT",{id:e.shot_id})},"asset:new":function(e){var t=this;!this.assetMap[e.asset_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&setTimeout((function(){t.loadAsset(e.asset_id)}),1e3)},"asset:update":function(e){this.assetMap[e.asset_id]&&this.loadAsset(e.asset_id)},"asset:delete":function(e){this.assetMap[e.asset_id]&&this.$store.commit("REMOVE_ASSET",{id:e.asset_id})},"task:delete":function(e){var t=this.taskMap[e.task_id];t&&this.$store.commit("DELETE_TASK_END",t)},"task-type:new":function(e){this.taskTypeMap[e.task_type_id]||this.loadTaskType(e.task_type_id)},"task-type:update":function(e){},"task-type:delete":function(e){this.taskTypeMap[e.task_type_id]&&this.$store.commit("DELETE_TASK_TYPE_END",{id:e.task_type_id})},"task-status:new":function(e){this.taskStatusMap[e.task_status_id]||this.loadTaskStatus(e.task_status_id)},"task-status:update":function(e){this.taskStatusMap[e.task_status_id]&&this.loadTaskStatus(e.task_status_id)},"task-status:delete":function(e){this.taskStatusMap[e.task_status_id]&&this.$store.commit("DELETE_TASK_STATUS_END",{id:e.task_status_id})},"asset-type:new":function(e){this.assetTypeMap[e.asset_type_id]||this.loadAssetType(e.asset_type_id)},"asset-type:update":function(e){this.assetTypeMap[e.asset_type_id]&&this.loadAssetType(e.asset_type_id)},"asset-type:delete":function(e){this.assetTypeMap[e.asset_type_id]&&this.$store.commit("DELETE_ASSET_TYPE_END",{id:e.asset_type_id})},"person:new":function(e){this.personMap[e.person_id]||this.loadPerson(e.person_id)},"person:update":function(e){this.personMap[e.person_id]&&this.loadPerson(e.person_id)},"person:delete":function(e){var t=this.personMap[e.person_id];t&&(this.$store.commit("DELETE_PEOPLE_START",t),this.$store.commit("DELETE_PEOPLE_END",t))},"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e,!1)},"comment:new":function(e){var t=e.comment_id;this.isSavingCommentPreview||this.loadComment({commentId:t}).catch(console.error)},"task:update":function(e){var t=this;this.taskMap[e.task_id]&&this.$nextTick((function(){t.loadTask({taskId:e.task_id})}))},"metadata-descriptor:new":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:update":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:delete":function(e){this.$store.commit("DELETE_METADATA_DESCRIPTOR_END",{id:e.metadata_descriptor_id})},"organisation:update":function(e){this.isCurrentUserAdmin&&this.getOrganisation()}}}},f=h,_=(s("5c0b"),s("2877")),v=Object(_["a"])(f,o,r,!1,null,null,null),g=v.exports,y=s("a925"),b={assets:{cast_in:"Cast in",delete_error:"An error occurred while deleting this asset. There are probably data linked to it. Are you sure this asset type has no task linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_fail:"Saving failed, it may be due to the fact that an asset with a similar name already exists.",edit_success:"Asset {name} successfully edited.",edit_title:"Edit asset",empty_list:"There is no asset in the production. What about creating some?",empty_list_client:"There is no asset in this production.",only_current_episode:"Only current episode",new_asset:"Create an asset",new_assets:"Add assets",new_success:"Asset {name} successfully created.",no_cast_in:"This asset is not cast in any shot.",number:"asset | assets",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occurred while restoring this asset.",tasks:"Asset tasks",title:"Assets",fields:{description:"Description",episode:"Ep.",name:"Name",production:"Prod",time_spent:"Time",type:"Type",hidden_from_client:"Displayed to client"}},asset_types:{all_asset_types:"All asset types",create_error:"An error occurred while saving this asset type. Are you sure there is no asset type with similar name?",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occurred while deleting this asset type. There are probably data linked to it. Are you sure this asset type has no asset linked to it?",edit_title:"Edit asset type",new_asset_type:"Add an asset type",number:"asset type | asset types",title:"Asset Types",production_title:"Asset Types Stats",fields:{name:"Name"}},breakdown:{all_assets:"All available assets",edit_label:"Change the asset's label",empty:"Empty casting",label:"Label",picture_mode:"Switch to picture mode",text_mode:"Switch to text mode",title:"Breakdown",options:{fixed:"fixed",animate:"animate"}},comments:{add_attachment:"Add attachment",add_checklist:"Add checklist",add_comment:"Add a comment...",add_preview:"Add a preview to publish",checklist:"Checklist",change_preview:"Change preview",comment_from_client:"Comment from client",edit_title:"Edit comment",empty_text:"This comment is empty",edit_error:"An error occurred while editing comment. Please contact our support team.",error:"An error occurred while posting comment",no_file_attached:"No preview attached",pin:"Pin",pinned:"Pinned",post_status:"Post comment",retake:"Retake",revision:"revision",set_status_to:"Set status to",task_placeholder:"New item...",text:"Text",unpin:"Unpin",validated:"Validated!",validation_required:"Validation Required",fields:{text:"text"}},custom_actions:{create_error:"An error occurred while saving this custom custom action. Are you sure that there is no other action with the same name?",delete_text:"Are you sure you want to remove custom action {name} from your database?",delete_error:"An error occurred while deleting this custom custom action.",edit_title:"Edit a custom action",new_custom_action:"Add a custom action",number:"custom action | custom actions",run_for_selection:"Run custom action for selected tasks:",title:"Custom Actions",fields:{name:"Name",url:"URL",entity_type:"Entity Type",is_ajax:"Use AJAX"},entity_types:{all:"All",shot:"Shot",asset:"Asset"}},entities:{build_filter:{asset_type:"Asset type",all_types:"All asset types",assignation:"Assignation",assignation_exists_for:"Assignations exists for",assigned_to:"Assigned to",descriptor:"Metadata",equal:"Equal",in:"In",no_assignation_for:"No assignation exists for",no_filter:"No filter",not_equal:"Not equal",not_assigned_to:"Not assigned to",status:"Task status",thumbnail:"Thumbnail presence",title:"Filter on...",union_and:"Match all the following filters",union_or:"Match one of the following filters",with_thumbnail:"With thumbnail",without_thumbnail:"Without thumbnail"},thumbnails:{error:"An error occurred while uploading thumbnails",explaination:"Adding a thumbnail requires to set a new preview. In order to set several thumbnails at the same time, you must chose first a task type that will be used to create the new previews. The thumbnails will be set from this new preview.",explaination_two:"Then you have to select the files you want to upload. To find the right entities, the file names must match the following pattern:",shots_pattern:'"SequenceName ShotName" eg. SQ01_SH01.',assets_pattern:'"AssetType AssetName" eg. Environment_Forest.',select_files:"Select Files",selected_files:"Selected Files",select_task_type:"Select Task Type",title:"Add Thumbnails",undefined:"Undefined",undefined_pattern:"Undefined",upload:"Add Thumbnails"}},estimation:{title:"Estimation"},episodes:{all_episodes:"All",edit_error:"An error occurred while saving this episode. Are you sure there is no episode with similar name?",delete_error:"An error occurred while deleting this episode. There are probably data linked to it. Are you sure this episode has no sequence linked to it?",delete_text:"Are you sure you want to remove {name} from your database? Every related shots and previews will be deleted. Pleas confirm by typing the episode name below.",edit_title:"Edit episode",empty_list:"There is no episode in the production. What about creating some?",empty_list_client:"There is no episode in this production.",new_episode:"New episode",number:"episode | episodes",title:"Episode Stats",fields:{name:"name",description:"description"}},keyboard:{altdown:"Move task selection down",altj:"Select previous preview",altk:"Select next preview",altleft:"Move task selection left",altright:"Move task selection right",altup:"Move task selection up",annotations:"Annotations",ctrldown:"Move metadata cell selection down",ctrlleft:"Move metadata cell selection left",ctrlright:"Move metadata cell selection right",ctrlup:"Move metadata cell selection up",draw:"Set draw mode on",navigation:"Navigation",redo:"Redo",undo:"Undo",playlist_navigation:"Playlist navigation",remove_annotation:"Remove annotation",shortcuts:"Shortcuts"},login:{back_to_login:"Go back to login page",forgot_password:"Forgot password?",login:"Log in",login_failed:"Log in failed, please verify your credentials",login_page:"Cancel",redirecting:"Redirecting in {secondsLeft} seconds...",reset_change_password:"Change password",reset_change_password_form_failed:"There is a problem with the password you gave. Please, verify that it is at least 7 chars long and that both passwords match.",reset_change_password_failed:"Changing password failed. Please, restart the whole procedure again.",reset_change_password_succeed:"Your password was changed successfully. Please, go back to the login page to use it.",reset_change_password_title:"Enter a new password",reset_password:"Reset Password",reset_password_failed:"Resetting you password failed. Please verify your email.",reset_password_succeed:"Resetting your password succeeded. Please check your inbox.",reset_password_title:"Enter your email to reset your password",title:"Log in to Kitsu",fields:{email:"Email",password:"Password",password2:"Password again"}},logs:{current_date_label:"Show logs for",events:"events listed for the current day",empty_list:"There is no logs for the selected date.",title:"Logs"},main:{about:"About",add:"add",all:"All",all_assets:"All assets",admin:"Admin",after:"After",before:"Before",cancel:"Cancel",clear_selection:"Clear current selection",close:"Close",confirmation:"Confirm",confirmation_and_stay:"Confirm and stay",date:"Date",dark_theme:"Dark Theme",days_spent:"day spent | days spent",days_estimated:"day estimated | days estimated",delete:"Delete",delete_all:"Delete all",delete_text:"Are you sure you want to remove {name} from your database?",documentation:"Documentation",edit:"Edit",empty_comment:"Empty comment",end_date:"End date",estimation_short:"Est.",files_selected:"files selected",for:"For",from:"From",go_productions:"Go to productions",history:"history",info:"Information",home:"return to home page",or:"or",no:"No",less_filters:"Less filters",loading:"Loading...",loading_data:"Loading data",loading_error:"An error occurred while loading data.",logout:"Logout",modify:"Modify",minimize:"Minimize",main_pack:"Main Pack",maximize:"Maximize",man_days:"man day | man days",more_filters:"More filters",nb_frames:"frame | frames",person:"Person",profile:"Profile",production:"Production",remove:"Remove",reload:"Reload",save:"Save",search_query:"Search query",search_query_edit:"Edit search filter",search_query_edit_error:"An error occurred while updating this search filter.",sorted_by:"Sorted by",sort_by:"Sort by",start_date:"Start date",studio:"Studio",to:"To",tutorials:"Tutorials",user:"User",white_theme:"White Theme",workspace:"Workspace",yes:"Yes",csv:{choose:"Choose",error_upload:"An error occurred while uploading your CSV.",export_file:"Export",import_file:"Import",import_title:"Import data from a CSV",legend:"Legend",legend_ok:"Recognized data",legend_ignored:"Ignored data",legend_missing:"Missing data",legend_disabled:"Data that will no be updated or created",legend_overwrite:"Data that will be updated",paste:"Paste",paste_code:"Please paste here your CSV data:",preview:"Preview",preview_episode_name:"Episode name",preview_title:"Preview of your imported data",preview_description:"Upload a .csv file to populate your board with posts.",preview_required:"NB: Headers must be included as first row.",preview_reupload:"Reupload .CSV file",required_fields:"Your CSV requires the following columns",select_file:"Please select a file from one of your folder:",tab_select_file:"Upload a CSV file",tab_paste_code:"Paste a CSV data",unknown:"Unknown column",upload_file:"Browse",options:{title:"Options",update:"Update existing data"}}},menu:{assign_tasks:"Assign tasks",change_priority:"Change priority",change_status:"Change status",create_tasks:"Create tasks",delete_tasks:"Delete tasks",generate_playlists:"Generate playlists",run_custom_action:"Run custom action",set_estimations:"Set estimations"},news:{all:"All",commented_on:"commented on",infos:"Infos",no_news:"There is no news for this production or for this filter.",only_comments:"Only comments",only_previews:"Only previews",hide_stats:"Hide stats",news:"news",set_preview_on:"set preview on",show_stats:"Show stats",task_status:"Task status",task_type:"Task type",title:"News Feed"},not_found:{text:"There was something wrong with the link you clicked on, we encourage you to come back on the home page.",title:"Page not found... are your looking for something you deleted?"},notifications:{and_change_status:"and changed status to",assigned_you:"assigned you to",commented_on:"commented on",mention_you_on:"mentioned you on",no_notifications:"There is currently no notification for you for your current projects.",unread_notifications:"unread notification | unread notifications",title:"Notifications",with_preview:"with a preview"},people:{active:"Active",active_persons:"active user | active users",add_member_to_team:"Add a member to the team: ",create_invite:"Create and send invitation",create_error:"An  error occurred while creating or update this user. You may have reach your user limit. Please contact our support team for more information.",delete_error:"An error occurred while deleting this user. There are probably data linked to it. Are you sure this user has no assignation or wrote no comment?",delete_text:"Are you sure you want to remove {personName} from your database? Every related comments and previews will be deleted. Please confirm by typing the full user name below.",edit_title:"Edit user",empty_team:"There is no one listed in the project team.",invite:"Send an invitation",invite_error:"An error occurred while sending the invitation",invite_success:"Invitation was successfully sent",new_person:"Add a new user",no_task_assigned:"There are no running tasks assigned to you",persons:"user | users",running_tasks:"Running tasks",select_person:"Select a user...",team:"Team",title:"People",unactive:"Unactive",csv:{import_file:"Import a .csv file",export_file:"Download as a .csv file",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:",error_upload:"An error occurred while uploading your CSV file."},fields:{first_name:"First name",last_name:"Last name",email:"Email",phone:"Phone",role:"Role",old_password:"Current password",password:"New password",password_2:"New password (repeat)",active:"Active"},list:{name:"Name",email:"Email",phone:"Phone",role:"Role",active:"Active"},role:{admin:"Studio Manager",client:"Client",manager:"Supervisor",user:"Artist",undefined:"",vendor:"Vendor"}},playlists:{add_assets:"Add assets",add_selection:"Add selection",add_shots:"Add shots",add_sequence:"Add whole sequence",add_episode:"Add whole episode",add_movie:"Add whole movie",apply_task_type_change:"This will set the last revison for given task type on all shots.",available_build:"Available builds",build_daily:"Daily pending",build_weekly:"All Pending",build_mp4:"Build .mp4 (beta)",building:"Building...",client_playlist:"Client Playlist",create_for_selection:"Generate a playlist for shot selection",create_title:"Create playlist",created_at:"Created at:",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occurred while deleting this playlist.",edit_error:"An error occurred while saving this playlist.",download_csv:"Download .csv",download_zip:"Download .zip",failed:"Failed",for_client:"The Client",for_studio:"The Studio",edit_title:"Edit playlist",last_creation:"Last creations",last_modification:"Last modifications",loading_error:"A server error occurred. Playlists cannot be loaded.",new_playlist:"Add a playlist",no_build:"No build",no_playlist:"There is currently no playlist for this project or episode.",no_preview:"No preview",no_selection:"Please select a playlist on the left.",no_sequence_for_episode:"There is no sequence for this episode",no_shot_for_production:"There is no shot for this production",select_shot:"Please select a shot in the right column",select_playlist:"Please select a playlist in the left column",select_task_type:"Change task type for all shots",title:"Playlists",updated_at:"Updated at:",remove:"remove",fields:{name:"Name",created_at:"Creation date",updated_at:"Update date",for_entity:"Select entity to display",for_client:"To be shared with"},actions:{annotation:"Annotation",annotation_draw:"Draw annotations",annotation_text:"Double click on the preview to add some text",annotation_delete:"Delete annotation",annotation_redo:"Redo annotation",annotation_undo:"Undo annotation",annotation_big:"Big",annotation_medium:"Medium",annotation_small:"Small",change_task_type:"Change task type",current_time:"Position in the video",comments:"Show/Hide comments",delete:"Delete playlist",display_revision:"Display revision",download:"Download playlist",download_file:"Download file",edit:"Edit playlist",entity_list:"Show/Hide entity list",entity_index:"Index of current entity in the playlist",entities_number:"Number of entities in the playlist",frame_number:"Frame number",files_add:"Add a file to the revision",files_delete:"Delete and remove file from the revision",files_next:"Next file for this revision",files_position:"File index for this revision",files_previous:"Previous file for this revision",fullscreen:"See file in full screen",looping:"Loop on current video",mute:"Mute",overlay:"Overlay",unmute:"Unmute",next_frame:"Next frame",next_shot:"Next entity",number_of_files:"Number of files for this revision",max_duration:"Video duration",pause:"Pause",play:"Play",previous_frame:"Previous frame",previous_shot:"Previous entity",save_playlist:"Save playlist",see_original_file:"Open original file in a new tab",side_by_side:"Side by side",speed:"Change speed",split_screen:"Compare with other task types"}},productions:{current:"Selected production",delete_text:"Are you sure you want to remove {name} from your database? Please, confirm by typing the name of the project you want to delete in the text field.",delete_error:"An error occurred while deleting this production. There are probably data linked to it. Are you sure this production has no task, shot or asset linked to it? Kitsu doesn't allow production deletion. If you don't want to see the production anymore, you can close it instead.",edit_error:"An error occurred while editing production. Please contact our support team.",edit_title:"Edit production",new_production:"Add a production",number:"production | productions",open_productions:"My productions",picture:"Change picture",title:"Productions",home:{create_new:"Create a new production",empty:"You don't have open productions. What about creating a new one?",no_task:"You have no task assigned. See your supervisor to see what you can do!",no_prod_for_client:"You don't have access to any production. Contact your contractor to obtain an access.",title:"Running Productions",welcome:"Welcome to Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type",start_date:"Start date",end_date:"End date",nb_episodes:"Number of episodes",episode_span:"Episode spacing"},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occurred while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occurred while deleting this metadata column.",error:"An error occurred while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},brief:{title:"Brief",empty:"There is not brief yet. What about creating one?"},parameters:{title:"Parameters",save:{button:"Confirm"}},status:{closed:"Closed",open:"Open",active:"Open",archived:"Closed"},type:{short:"Short",featurefilm:"Feature Film",tvshow:"TV Show"}},profile:{change_avatar:"Change avatar",info_title:"Information",language:"Language",notifications_enabled:"Email notifications enabled",notifications_slack_enabled:"Slack notifications enabled",notifications_slack_user:"Slack username",password_title:"Change password",timezone:"Timezone",title:"Your Profile",avatar:{title:"Change avatar",error_upload:"There was an error while uploading picture."},change_password:{button:"Change password",error:"An error occurred while changing password. Please verify your current password.",success:"Your password was successfully changed!",unvalid:"Your new password confirmation doesn't match or your password is too short (7 chars, at least, is expected)."},save:{button:"Save changes",error:"An error occurred while saving changes"}},settings:{change_logo:"Change logo",integrations:"Integrations",logo:"Studio logo",no_logo:"There is no logo set.",set_logo:"Set studio logo",title:"Settings",fields:{name:"Studio name",hours_by_day:"Hours by day",slack_token:"Slack Token (Optional)",use_original_name:"Use original file name for downloads"},production:{empty_list:"The list is currently empty. It means that all data from the main settings are available to users. Add some entries to limit choices for this production."},save:{button:"Save settings",error:"A server error occurred while saving settings"}},task_status:{create_error:"An error occurred while saving this task status. Are you sure there is no task status with similar name?",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occurred while deleting this task status. There are probably data linked to it. Are you sure this task status has no task linked to it?",edit_title:"Edit task status",name:"task status",number:"task status | task status",new_task_status:"Add a task status",title:"Task Status",fields:{color:"Color",is_artist_allowed:"Is artist allowed",is_client_allowed:"Is client allowed",is_done:"Is done",is_reviewable:"Is reviewable",is_retake:"Has retake value",name:"Name",short_name:"Short name"}},task_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occurred while deleting this task type. There are probably data linked to it. Are you sure this task type has no task linked to it?",edit_title:"Edit task type",create_error:"An error occurred while creating the task type. Please, check that there is no task type with similar name.",new_task_type:"Add a task type",number:"task type | task types",title:"Task Types",fields:{dedicated_to:"For",color:"Color",name:"Name",allow_timelog:"Timelog",priority:"Priority"}},sequences:{all_sequences:"All sequences",edit_error:"An error occurred while saving this sequence. Are you sure there is no sequence with similar name?",delete_text:"Are you sure you want to remove {name} from your database? Every related shots and previews will be deleted. Please confirm by typing the sequence name below.",delete_error:"An error occurred while deleting this sequence. There are probably data linked to it. Are you sure this sequence has no shot linked to it?",edit_title:"Edit sequence",empty_list:"There is no sequence in the production. What about creating some?",empty_list_client:"There is no sequence in this production.",new_sequence:"New sequence",number:"sequence | sequences",title:"Sequence Stats",fields:{name:"name",description:"description"}},schedule:{title:"Schedule",title_main:"Main Schedule",overall_man_days:"Man-days",md:"md",zoom_level:"Zoom level",milestone:{add_milestone:"Add milestone for",edit_milestone:"Edit milestone for",name:"Name",error:"An error occurred while adding or editing the milestone. Please try again."}},quota:{average:"Average",count_label:"Count mode",detail_label:"Detail level",details_name:"Name",details_seconds:"Seconds",details_frames:"Frames",month_label:"Month",no_quota:"There is no quota for this task type.",name:"Name",quota_day:"Quota per day",quota_week:"Quota per week",quota_month:"Quota per month",year_label:"Year",title:"Quota",type_label:"Type"},shots:{casting:"Shot casting",creation_explaination:"To add shots you need first to create an episode and a sequence. Type an episode name in the bottom of the left column then click on add to create a new episode. Select this episode and repeat the same operation for sequence. Finally select a sequence and type a shot name in the field in the bottom of the right column. Click on the add button below. Your first shot was created. You can now add many more! If it's not a TV Show, you have to directly create a sequence.",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occurred while deleting this shot. There are probably data linked to it. Are you sure this shot has no task linked to it?",edit_success:"Shot {name} successfully edited.",edit_fail:"Creation or edition failed, an error occurred. Make sure that you are not renaming the shot with a name already listed for given sequence.",edit_title:"Edit shot",empty_list:"There is no shot in the production. What about creating some?",empty_list_client:"There is no shot in this production.",episodes:"Episodes",history:"Shot values history",new_shot:"Add a shot",new_shots:"Add shots",new_sequences:"Add sequences",new_episodes:"Add episodes",no_casting:"The shot casting is empty.",number:"shot | shots",manage:"Create shots",new_success:"Shot {name} successfully created.",padding:"Shot Padding",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occurred while restoring this shot.",sequences:"Sequences",tasks:"Shot Tasks",title:"Shots",fields:{description:"Description",nb_frames:"Frames",episode:"Episode",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Name",person:"Modifier",production:"Prod",sequence:"Sequence",time_spent:"Time"}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},statistics:{count:"Counts",count_mode:"Count",data_mode:"Data",display_mode:"Display",frames:"Frames",pie:"Pie charts",retakes:"Retakes",status:"Status",shots:"Shots"},tasks:{add_preview:"Add preview",add_preview_error:"An error occurred while adding preview.",assign:"Assign one task to: | Assign {nbSelectedTasks} tasks to:",assignation_warning:"Warning: you won't see the result because you are hiding assignations",back_to_list:"back to list",bigger:"Widen task panel",change_status_to:"Change task status to:",change_preview:"Change preview",change_priority:"Change priority to:",clear_assignations:"clear assignations",comment_image:"Attach a file to your comment",create_for_selection:"Create task for each empty cell:",create_tasks:"Add tasks",create_tasks_shot:"Add tasks for current shots",create_tasks_shot_explaination:"You are going to create a new task for each shot of current project for the given task type. Do you want to continue?",create_tasks_shot_failed:"A server error occurred while proceeding creations.",create_tasks_asset:"Add tasks for current assets",create_tasks_asset_explaination:"You are going to create a new task for each asset of current project for the given task type. Do you want to continue?",create_tasks_asset_failed:"A server error occurred while proceeding creations.",current:"Task to do",current_status:"Current status :",delete_all_text:"Are you sure you want to delete all tasks for given {name}? Please, confirm by typing the task type name of the tasks you want to delete in the text field.",delete_all_error:"Deleting all tasks for given task type failed.",delete_error:"An error occurred while deleting task.",delete_comment:"Are you sure you want to delete comment?",delete_comment_error:"An error occurred while deleting comment.",delete_for_selection:"Delete selected tasks:",delete_preview:"Are you sure you want to delete this preview?",delete_preview_error:"An error occurred while deleting preview.",edit_comment:"Edit comment",done:"Done",download_pdf_file:"Download .{extension} file",feedback:"feedback",full_screen:"Display in full screen",for_selection:"For current list and filters",for_project:"For project",hide_assignations:"Hide assignations",hide_infos:"Hide additional information",my_tasks:"My tasks",next:"next task",no_assignation_right:"You are not allowed to manage assignations",no_comment:"There is currently no comment for this task.",no_preview:"There is currently no preview for this task.",no_task_selected:"No task selected",number:"task | tasks",preview:"Previews",previous:"previous task",unsubscribe_notifications:"Unsubscribe from notifications",set_estimations:"Set estimations for selected tasks:",set_preview:"Set this preview as thumbnail",set_preview_error:"An error occurred while setting preview as thumbnail",set_preview_done:"This preview is used as thumbnail for the current entity.",select_preview_file:"Please select a file (picture, movie or others) from your hard drive to be used as a preview for the current task:",show_assignations:"Show assignations",show_infos:"Show additional information",subscribe_notifications:"Subscribe to notifications",select_file:"Please select the file from your hard drive you want to attach to your comment:",tasks:"Tasks",validation:"Validation",with_comment:"With a comment...",fields:{asset_type:"Asset type",assignees:"Assignees",count:"Count",due_date:"Due date",duration:"Duration",end_date:"Validation date",entity:"Entity",entity_name:"Name",estimated_quota:"Avg. Quota",estimation:"Estimation",frames:"Fram.",last_comment:"Last comment",last_comment_date:"Last comment",priority:"Priority",production:"Prod",real_end_date:"Validation date",real_start_date:"WIP date",retake_count:"Retakes",seconds:"Seconds",sequence:"Sequence",start_date:"Start date",task_status:"Status",task_status_short_name:"Status",task_type:"Type"},colors:{title:"Coloring",neutral:"Neutral",status:"Status color",late:"Late in red"},priority:{emergency:"Emergency",normal:"Normal",high:"High",very_high:"Very High"}},timesheets:{confirm_day_off:"Setting this day as a day off will erase all time filled for the current day. Are you sure you want to continue?",day_off:"Day Off",detail_level:"Detail level",done_tasks:"Done tasks",export_timesheet:"Export Timesheet",export_timespents:"Export time spents for open projects as a list",hours:"hours",month:"Month",time_spents:"Time Spent (hours)",title:"Timesheets",year:"Year"},wrong_browser:{title:"Your browser is not supported by Kitsu",text:"Kitsu can only be used with Firefox and Chrome browsers."}},k={assets:{cast_in:"Eingießen",delete_error:"Beim Löschen dieses Assets ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Anlagentyp keine Aufgabe hat, die mit ihm verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten.",edit_success:"Anlage {name} erfolgreich bearbeitet.",edit_title:"Anlage bearbeiten",empty_list:"In der Produktion gibt es keine Anlage. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Anlage in dieser Produktion.",new_asset:"Hinzufügen einer Anlage",new_assets:"Assets hinzufügen",new_success:"Anlage {name} erfolgreich erstellt.",no_cast_in:"Dieser Gegenstand wird in keinem Schuss geworfen.",number:"Vermögenswerte",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen möchten?",restore_error:"Bei der Wiederherstellung dieses Assets ist ein Fehler aufgetreten.",tasks:"Asset-Aufgaben",title:"Vermögenswerte",fields:{description:"Beschreibung",episode:"Ep.",hidden_from_client:"Vor dem Kunden verborgen",name:"Name",production:"Produkt",time_spent:"Zeit",type:"Typ"}},asset_types:{all_asset_types:"Alle asset typen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Anlagentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Anlageart keine Anlage mit ihr verbunden hat?",edit_title:"Anlagenart bearbeiten",new_asset_type:"Hinzufügen einer Anlagenart",number:"asset type | asset types",title:"Vermögensarten",production_title:"Vermögensarten Statistiken",fields:{name:"Name"}},breakdown:{all_assets:"Alle verfügbaren Vermögenswerte",edit_label:"Etikett bearbeiten",empty:"Leerguss",label:"Etikett",title:"Aufschlüsselung",options:{fixed:"festgelegt",animate:"animierte"}},comments:{add_attachment:"Anhang hinzufügen",add_comment:"Einen Kommentar hinzufügen...",add_checklist:"Checkliste hinzufügen",add_preview:"Vorschau anhängen",comment_from_client:"Kommentar von die Kunde",change_preview:"Änderungsvorschau",empty_text:"Dieser Kommentar ist leer",edit_title:"Bearbeiten Sie, wie",error:"Beim Posten von Kommentaren ist ein Fehler aufgetreten.",no_file_attached:"Keine Datei angehängt",post_status:"Veröffentlichen Sie, wie",retake:"Wiederaufnahme",pin:"Pin",pinned:"Pinned",revision:"Überarbeitung",task_placeholder:"Neuer Artikel",text:"Text",unpin:"Unbekannt",validated:"Validiert!",validation_required:"Validierung erforderlich",set_status_to:"Status auf setzen",fields:{text:"Text"}},custom_actions:{delete_text:"Sind Sie sicher, dass Sie benutzerdefinierte Aktionen {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser benutzerdefinierten Aktion ist ein Fehler aufgetreten.",edit_title:"Bearbeiten einer benutzerdefinierten Aktion",new_custom_action:"Hinzufügen einer benutzerdefinierten Aktion",number:"benutzerdefinierte Aktion | benutzerdefinierte Aktionen",run_for_selection:"Benutzerdefinierte Aktion für ausgewählte Aufgaben ausführen:",title:"Benutzerdefinierte Aktionen",fields:{name:"Name",url:"URL",entity_type:"Entitätstyp",is_ajax:"AJAX verwenden"},entity_types:{all:"Alle",shot:"Erschossen",asset:"Vermögen"}},entities:{build_filter:{assignation:"Zuweisung",assignation_exists_for:"Zuordnungen existieren für",assigned_to:"Zugewiesen an",descriptor:"Metadaten",equal:"Gleich",no_assignation_for:"Keine Zuordnung vorhanden für",no_filter:"Kein Filter",not_equal:"Nicht gleich",not_assigned_to:"Nicht zugeordnet zu",status:"Aufgabenstatus",thumbnail:"Anwesenheit von Miniaturbildern",Titel:"Filter an...",with_thumbnail:"Mit Vorschaubild",without_thumbnail:"Ohne Miniaturansicht",title:"Filter on..."},thumbnails:{error:"Beim Hochladen von Miniaturbildern ist ein Fehler aufgetreten",explaination:"Das Hinzufügen einer Miniaturansicht erfordert die Einstellung einer neuen Vorschau. Um mehrere Miniaturansichten gleichzeitig festzulegen, müssen Sie zunächst einen Aufgabentyp auswählen, der für die Erstellung der neuen Vorschauen verwendet wird. Die Miniaturansichten werden von dieser neuen Vorschau aus eingestellt.",explaination_two:"Dann müssen Sie die Dateien auswählen, die Sie hochladen möchten. Um die richtigen Entitäten zu finden, müssen die Dateinamen dem folgenden Muster entsprechen:",shots_pattern:'SequenceName ShotName" z.B. SQ01_SH01',assets_pattern:'AssetType AssetName" z.B. Umgebung_Wald',select_files:"Dateien auswählen",selected_files:"Ausgewählte Dateien",select_task_type:"Aufgabentyp auswählen",title:"Thumbnails hinzufügen",undefined:"Unbestimmt",undefined_pattern:"Undefiniert",upload:"Thumbnails hinzufügen"}},episodes:{all_episodes:"Alle Episoden",delete_error:"Beim Löschen dieser Episode ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Episode keine Sequenz hat, die mit ihr verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit_title:"Episode bearbeiten",empty_list:"Es gibt keine Episode in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Episode in dieser Produktion.",new_episode:"Neue Episode",number:"episode | episoden",title:"Episodenstatistiken",fields:{name:"Name",description:"Beschreibung"}},keyboard:{altdown:"Verschiebt die Auswahl einer Aufgabe nach unten",altj:"Vorherige vorschau auswählen",altk:"Nächste vorschau auswählen",altleft:"Verschiebt die Auswahl einer Aufgabe nach links",altright:"Verschiebt die Auswahl einer Aufgabe nach rechts",altup:"Verschiebt die Auswahl einer Aufgabe nach oben",annotations:"Anmerkungen",draw:"Zeichnungsmodus einschalten",navigation:"Navigation",playlist_navigation:"Playlist navigation",redo:"Redo",remove_annotation:"Annotation entfernen",undo:"Undo",shortcuts:"Tastaturkürzel"},login:{back_to_login:"Zurück zum Login",forgot_password:"Passwort vergessen?",login:"Einloggen",login_failed:"Die Anmeldung ist fehlgeschlagen, bitte überprüfen Sie Ihre Zugangsdaten.",login_page:"Abbrechen",redirecting:"Umleitung",reset_change_password:"Passwort ändern",reset_change_password_form_failed:"Es gibt ein Problem mit dem von dir angegebenen Passwort. Bitte überprüfen Sie, ob es mindestens 7 Zeichen lang ist und ob beide Passwörter übereinstimmen.",reset_change_password_failed:"Die Änderung des Passworts ist fehlgeschlagen. Bitte starten Sie den gesamten Vorgang erneut.",reset_change_password_succeed:"Dein Passwort wurde erfolgreich geändert. Bitte gehen Sie zurück zur Login-Seite, um sie zu verwenden.",reset_change_password_title:"Geben Sie ein neues Passwort ein",reset_password:"Passwort zurücksetzen",reset_password_failed:"Passwort zurücksetzen fehlgeschlagen. Bitte überprüfen Sie Ihre E-Mail-Adresse.",reset_password_succeed:"Passwort zurücksetzen erfolgreich. Bitte überprüfen Sie Ihren Posteingang.",reset_password_title:"Gib deine E-Mail-Adresse ein, um dein Passwort zurückzusetzen.",title:"Einloggen bei Kitsu",fields:{email:"E-Mail",password:"Passwort",password2:"Passwort wiederholen"}},main:{about:"Über",add:"hinzufügen",all:"Alle",all_assets:"Alle assets",admin:"Admin",cancel:"Abbrechen",clear_selection:"Aktuelle Auswahl löschen",documentation:"Dokumentation",close:"Schließen",confirmation:"Bestätigen",confirmation_and_stay:"Bestätigen und bleiben",date:"Datum",dark_theme:"Dunkles Thema",days_spent:"Tag verbracht | Tage verbracht",delete:"Löschen",delete_all:"Alle löschen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit:"Bearbeiten",empty_comment:"Leerer Kommentar",end_date:"Enddatum",files_selected:"Ausgewählte dateien",for:"Für",go_productions:"Zu den Produktionen",history:"Historie",info:"Informationen",or:"oder",no:"Nein",loading:"Laden...",loading_data:"Laden von Daten",loading_error:"Beim Laden von Daten ist ein Fehler aufgetreten.",logout:"Abmeldung",modify:"Modify",minimize:"Minimieren",maximize:"Maximieren",nb_frames:"frame | frames",profile:"Profil",production:"Produktion",remove:"Entfernen",save:"Speichern",start_date:"Startdatum",sort_by:"Sortierent",sorted_by:"Sortiert nach",studio:"Studio",tutorials:"Tutorials",user:"Benutzer",white_theme:"Weißes Thema",yes:"Ja",csv:{choose:"Auswählen",unknown:"Unbekannte Spalte",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten",export_file:"Exportieren",import_file:"Importieren",import_title:"Daten aus einem CSV importieren",legend:"Legende",legend_ok:"Erkannte Daten",legend_ignored:"Ignorierte Daten",legend_missing:"Fehlende Daten",legend_disabled:"Daten, die nicht aktualisiert oder erstellt werden",legend_overwrite:"Daten, die aktualisiert werden",paste:"Einfügen",paste_code:"Bitte fügen Sie hier Ihre CSV-Daten ein:",preview:"Vorschau",preview_episode_name:"Episodenname",preview_title:"Vorschau Ihrer importierten Daten",preview_description:"Laden Sie eine .csv-Datei hoch, um Ihr Forum mit Beiträgen zu füllen",preview_required:"NB: Kopfzeilen müssen als erste Zeile eingefügt werden",preview_reupload:"CSV-Datei erneut hochladen",required_fields:"Ihr CSV erfordert die folgenden Spalten",select_file:"Bitte wählen Sie eine Datei aus einem Ihrer Ordner:",tab_select_file:"Laden Sie eine CSV-Datei hoch",tab_paste_code:"CSV-Daten einfügen",upload_file:"Durchsuchen",options:{title:"Optionen",update:"Bestehende Daten aktualisieren"}}},menu:{assign_tasks:"Aufgaben zuweisen",change_priority:"Priorität ändern",change_status:"Status ändern",create_tasks:"Aufgaben erstellen",delete_tasks:"Aufgaben löschen",generate_playlists:"Wiedergabelisten generieren",run_custom_action:"Benutzerdefinierte Aktion ausführen",set_estimations:"Schätzungen festlegen"},news:{all:"Alle",commented_on:"kommentiert",infos:"Infos",no_news:"Es gibt keine Neuigkeiten für diese Produktion oder für diesen Filter.",only_comments:"Nur Kommentare",only_previews:"Nur Vorschauen",set_preview_on:"Vorschau einstellen auf",task_status:"Aufgabenstatus",task_type:"Aufgabentyp",title:"News Feed"},not_found:{text:"Mit dem Link, auf den du geklickt hast, war etwas nicht in Ordnung, wir empfehlen dir, auf der Homepage wieder vorbeizuschauen.",title:"Seite nicht gefunden.... suchen Sie nach etwas, das Sie gelöscht haben?"},notifications:{and_change_status:"und änderte den Status auf",assigned_you:"die Sie zugeordnet haben",commented_on:"kommentiert",mention_you_on:"hat dich erwähnt",no_notifications:"Für Ihre aktuellen Projekte gibt es derzeit keine Benachrichtigung für Sie.",title:"Benachrichtigungen",with_preview:"mit einer Vorschau"},people:{active:"Aktiv",add_member_to_team:"Füge ein Mitglied zum Team hinzu:",create_invite:"Einladung erstellen und versenden",delete_error:"Beim Löschen dieser Person ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Person keine Zuordnung hat oder keinen Kommentar geschrieben hat?",delete_text:"Sind Sie sicher, dass Sie {personName} aus Ihrer Datenbank entfernen möchten?",edit_title:"Person bearbeiten",empty_team:"Im Projektteam ist niemand gelistet.",invite:"Einladung senden",invite_error:"Beim Senden der Einladung ist ein Fehler aufgetreten.",invite_success:"Einladung wurde erfolgreich versendet",new_person:"Einen neuen Mitarbeiter hinzufügen",no_task_assigned:"Es gibt keine laufenden Aufgaben, die Ihnen zugeordnet sind.",persons:"Person | Personen",running_tasks:"Laufende Aufgaben",select_person:"Eine Person auswählen.....",team:"Team",title:"Menschen",unactive:"Inaktiv",csv:{import_file:"Importieren einer.csv-Datei",export_file:"Als.csv-Datei herunterladen",import_title:"Daten aus einer CSV-Datei importieren",required_fields:"Ihre CSV-Datei benötigt die folgenden Spalten",select_file:"Bitte wählen Sie eine Datei aus einem Ihrer Ordner aus:",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten."},fields:{first_name:"Vorname",last_name:"Nachname",email:"E-Mail",phone:"Phone",role:"Rolle",old_password:"Aktuelles Passwort",password:"Neues Passwort",password_2:"Neues Passwort (wiederholen)",active:"Aktiv"},list:{name:"Name",email:"E-Mail",phone:"Phone",role:"Rolle",active:"Aktiv"},role:{admin:"Studio-Manager",client:"Client",manager:"Vorgesetzter",undefined:"",user:"CG Artist",vendor:"Anbieter"}},playlists:{add_assets:"Assets hinzufügen",add_selection:"Auswahl hinzufügen",add_shots:"Shots hinzufügen",add_episode:"Ganze episode hinzufügen",add_movie:"Ganze film hinzufügen",add_sequence:"Ganze sequenz hinzufügen",apply_task_type_change:"Dadurch wird die letzte Revision für den gegebenen Aufgabentyp auf allen shots positioniert.",available_build:"Verfügbare Builds",building:"Gebäude",build_daily:"Täglich ausstehend",build_weekly:"Alle ausstehend",build_mp4:"Build .mp4",client_playlist:"Kunde Playlist",created_at:"Erstellen Sie die:",create_for_selection:"Zur Auswahl erstellen",create_title:"Playlist erstellen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Playlist ist ein Fehler aufgetreten.",download_zip:"Download.zip",edit_title:"Wiedergabeliste bearbeiten",failed:"Fehlgeschlagen",for_client:"Der Kunde",for_studio:"Das Studio",last_creation:"Neueste kreationen",last_modification:"Neueste änderungen",loading_error:"Es ist ein Serverfehler aufgetreten. Wiedergabelisten können nicht geladen werden.",new_playlist:"Eine Wiedergabeliste hinzufügen",no_build:"Kein Build",no_playlist:"Für dieses Projekt gibt es derzeit keine Playlist.",no_preview:"Keine Vorschau für diese Aufnahme",no_selection:"Bitte wählen Sie links eine Playlist aus.",no_sequence_for_episode:"Es gibt keine Sequenz für diese Episode.",no_shot_for_production:"Für diese Produktion gibt es keine Chance.",no_shot_for_sequence:"Es gibt keinen Schuss für diese Sequenz.",select_shot:"Bitte wählen Sie einen Schuss in der rechten Spalte aus.",select_playlist:"Bitte wählen Sie eine Playlist in der linken Spalte aus.",select_task_type:"Ändern Sie den Aufgabentyp für alle shots",title:"Wiedergabelisten",updated_at:"Geändert am",remove:"entfernen",actions:{edit:"Playliste bearbeiten",delete:"Playliste löschen",fullscreen:"Vollbild",download:"Herunterladen...",entity_list:"Entity-Liste anzeigen/verbergen",comments:"Kommentare anzeigen/verbergen",annotation:"Anmerkung",annotation_text:"Doppelklicken Sie auf die Vorschau, um etwas Text hinzuzufügen",annotation_delete:"Annotation löschen",annotation_redo:"Annotation wiederholen",annotation_undo:"Annotation rückgängig machen",annotation_big:"Groß",annotation_medium:"Medium",annotation_small:"Klein",change_task_type:"Aufgabentyp ändern",split_screen:"Geteilter Bildschirm",next_shot:"Nächster shot",previous_shot:"Vorherige shot",next_frame:"Nächstes Bild",previous_frame:"Vorheriges Bild",play:"Spielen",pause:"Pause"},fields:{created_at:"Erstellt bei",for_client:"Zum teilen mit",for_entity:"Für Entität",name:"Name",updated_at:"Aktualisiert bei"}},productions:{current:"Ausgewählte Produktion",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Produktion ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Produktion keine Aufgabe, keinen Schuss oder Vermögenswert hat, der mit ihr verbunden ist? Kitsu erlaubt es nicht, die Produktion zu löschen. Wenn du die Produktion nicht mehr sehen willst, kannst du sie stattdessen schließen.",edit_title:"Produktion bearbeiten",new_production:"Eine Produktion hinzufügen",number:"Produktion | Produktionen",open_productions:"Meine Produktionen",picture:"Bild ändern",title:"Produktionen",home:{create_new:"Erstellen Sie eine neue Produktion",empty:"Du hast keine offene Produktion. Wie wäre es mit der Erstellung eines neuen?",no_task:"Du hast keine Aufgabe zugewiesen. Wenden Sie sich an Ihren Vorgesetzten, um zu sehen, was Sie tun können!",no_prod_for_client:"Du hast keinen Zugang zu einer Produktion. Wenden Sie sich an Ihren Auftragnehmer, um einen Zugang zu erhalten.",title:"Laufende Produktionen",welcome:"Willkommen bei Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Auflösung",status:"Status",type:"Typ"},metadata:{add_explaination:"Fügen Sie spezifische Daten hinzu, die für dieses Projekt erforderlich sind.",add_failed:"Beim Hinzufügen von Metadaten zu Ihrem Projekt ist ein Fehler aufgetreten.",add_new_values:"Es sind derzeit keine Werte verfügbar.",available_values:"Verfügbare Werte",choices:"Liste der Werte",delete_text:"Sind Sie sicher, dass Sie diese Spalte und die zugehörigen Daten für alle Anlagen dieser Produktion löschen möchten?",delete_error:"Beim Löschen dieser Metadatenspalte ist ein Fehler aufgetreten.",error:"Beim Hinzufügen der Metadatenspalte ist ein Fehler aufgetreten. Stellen Sie sicher, dass es keine Spalte mit ähnlichem Namen gibt und dass alle Felder ausgefüllt sind. Wenn das Problem weiterhin besteht, wenden Sie sich bitte an das Support-Team.",free:"Freier Wert",title:"Metadatenspalte hinzufügen"},status:{closed:"Geschlossen",open:"Offen",active:"Offen",archived:"Geschlossen"},type:{short:"Kurz",featurefilm:"Spielfilm",tvshow:"TV-Show"}},profile:{change_avatar:"Avatar ändern",info_title:"Informationen",language:"Sprache",notifications_enabled:"E-Mail-Benachrichtigungen aktiviert",notifications_slack_enabled:"Slack-Benachrichtigungen aktiviert",notifications_slack_user:"Slack-Benutzername",password_title:"Passwort ändern",timezone:"Zeitzone",title:"Dein Profil",avatar:{title:"Avatar ändern",error_upload:"Beim Hochladen des Bildes ist ein Fehler aufgetreten."},change_password:{button:"Passwort ändern",error:"Beim Ändern des Passworts ist ein Fehler aufgetreten. Bitte überprüfen Sie Ihr aktuelles Passwort.",success:"Dein Passwort wurde erfolgreich geändert!",unvalid:"Deine neue Passwort-Bestätigung stimmt nicht oder dein Passwort ist zu kurz (es werden mindestens 7 Zeichen erwartet)."},save:{button:"Änderungen speichern",error:"Beim Speichern von Änderungen ist ein Fehler aufgetreten."}},quota:{average:"Durchschnitt",count_label:"Zählmodus",detail_label:"Detaillierungsgrad",details_name:"Name",details_seconds:"Sekunden",details_frames:"Frames",month_label:"Monat",no_quota:"Für diese Art von Aufgaben gibt es keine Quote.",name:"Nom",quota_day:"Quote pro Tag",quota_week:"Quote pro Woche",quota_month:"Quote pro Monat",year_label:"Jahr",title:"Quoten",type_label:"Typ"},settings:{change_logo:"Logo ändern",integrations:"Integrationen",logo:"Logo-Studio",no_logo:"Es gibt kein Logo-Set.",set_logo:"Logo Studio-Set",title:"Einstellungen",fields:{name:"Studio-Name",hours_by_day:"Stunden am Tag",slack_token:"Slack Token (Optional)",use_original_name:"Original-Dateinamen für Downloads verwenden"},production:{empty_list:"Die Liste ist derzeit leer. Das bedeutet, dass den Benutzern alle Daten aus den Haupteinstellungen zur Verfügung stehen. Fügen Sie einige Einträge hinzu, um die Auswahl für diese Produktion einzuschränken."},save:{button:"Einstellungen speichern",error:"Beim Speichern von Einstellungen ist ein Serverfehler aufgetreten."}},task_status:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Aufgabenstatus ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Aufgabenstatus keine Aufgabe zugeordnet hat?",edit_title:"Aufgabenstatus bearbeiten",number:"Aufgabenstatus | Aufgabenstatus",new_task_status:"Hinzufügen eines Aufgabenstatus",title:"Aufgabenstatus",fields:{is_artist_allowed:"Ist der Künstler erlaubt",is_client_allowed:"Ist der Kunde erlaubt",color:"Farbe",is_done:"Ist erledigt",is_reviewable:"Ist überprüfbar",is_retake:"Hat Wiederholungswert",name:"Name",short_name:"Kurzname"}},task_types:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Aufgabentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Aufgabentyp keine Aufgabe hat, die mit ihm verknüpft ist?",edit_title:"Aufgabentyp bearbeiten",new_task_type:"Hinzufügen eines Aufgabentyps",number:"Aufgabentyp | Aufgabentypen",title:"Aufgabentypen",fields:{dedicated_to:"Für",color:"Farbe",name:"Name",allow_timelog:"Zeiterfassung",priority:"Priorität"}},sequences:{all_sequences:"Alle Sequenzen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Sequenz ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Sequenz keinen Schuss damit zu tun hat?",edit_title:"Sequenz bearbeiten",empty_list:"Es gibt keine Reihenfolge in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Reihenfolge.",new_sequence:"Neue Sequenz",number:"Sequenz | Sequenzen",title:"Sequenz-Statistiken",fields:{name:"Name",description:"Beschreibung"}},schedule:{title:"Zeitplan",title_main:"Hauptterminplan",overall_man_days:"Manntage",md:"md",zoom_level:"Zoomstufe",milestone:{add_milestone:"Meilenstein hinzufügen für",edit_milestone:"Meilenstein bearbeiten für",name:"Name",error:"Beim Hinzufügen oder Bearbeiten des Meilensteins ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut."}},shots:{casting:"Druckguss",creation_explaination:"Um Aufnahmen hinzuzufügen, musst du zuerst eine Episode und eine Sequenz erstellen. Geben Sie unten in der linken Spalte einen Episodennamen ein und klicken Sie dann auf Hinzufügen, um eine neue Episode zu erstellen. Wählen Sie diese Episode aus und wiederholen Sie den gleichen Vorgang für die Sequenz. Wählen Sie schließlich eine Sequenz aus und geben Sie einen Schussnamen in das Feld unten in der rechten Spalte ein. Klicken Sie auf die Schaltfläche Hinzufügen unten. Dein erster Schuss wurde erstellt. Du kannst jetzt viel mehr hinzufügen! Wenn es sich nicht um eine TV-Show handelt, müssen Sie direkt eine Sequenz erstellen.",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Schusses ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Aufnahme keine Aufgabe hat?",edit_success:"Shot {name} erfolgreich bearbeitet.",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten. Achte darauf, dass du den Schuss nicht mit einem Namen umbenennst, der bereits für eine bestimmte Sequenz vergeben wurde.",edit_title:"Schuss bearbeiten",empty_list:"Es gibt keinen Schuss in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Aufnahme.",episodes:"Episoden",history:"Filmaufnahme werte historie",new_shot:"Einen Schuss hinzufügen",new_shots:"Schüsse hinzufügen",new_sequences:"Sequenzen hinzufügen",new_episodes:"Episoden hinzufügen",no_casting:"Der Schuss ist leer.",number:"Schuss | Schüsse",manage:"Schüsse erstellen",new_success:"Schuss {name} erfolgreich erstellt.",padding:"Schusspolsterung",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen möchten?",restore_error:"Bei der Wiederherstellung dieser Aufnahme ist ein Fehler aufgetreten.",sequences:"Sequenzen",tasks:"Schuss-Aufgaben",title:"Shots",fields:{description:"Beschreibung",nb_frames:"Rahmen",episode:"Episode",frame_in:"In",frame_out:"Aus",fps:"FPS",name:"Name",production:"Produkt",sequence:"Sequenz",time_spent:"Zeit"}},server_down:{text:"Bitte wenden Sie sich an Ihren Lieferantensupport, Ihren Systemadministrator oder Ihre IT-Abteilung, um zu erfahren, was schief läuft.",title:"Kitsu ist beim Erreichen seiner Daten-API auf einen Fehler gestoßen."},statistics:{count:"Zählt",count_mode:"Zählmodus",display_mode:"Anzeigemodus",frames:"Rahmen",pie:"Kreisdiagramme",shots:"Shots"},tasks:{add_preview:"Vorschau hinzufügen",add_preview_error:"Beim Hinzufügen einer Vorschau ist ein Fehler aufgetreten.",assign:"Weisen Sie eine Aufgabe zu: | Aufgaben zuweisen {nbSelectedTasks} Aufgaben zu:",back_to_list:"zurück zur Liste",bigger:"Erweitern Sie das Aufgabenfeld",change_status_to:"Ändern des Aufgabenstatus in:",change_preview:"Änderungsvorschau",change_priority:"Ändern Sie die Priorität auf:",clear_assignations:"klare Zuordnungen",comment_image:"Ihrem Kommentar ein Bild anhängen",create_for_selection:"Erstellen Sie eine Aufgabe für jede leere Zelle:",create_tasks:"Aufgaben hinzufügen",create_tasks_shot:"Aufgaben für aktuelle Aufnahmen hinzufügen",create_tasks_shot_explaination:"Du wirst eine neue Aufgabe für jeden Schuss der aktuellen Liste für den angegebenen Aufgabentyp erstellen. Willst du fortfahren?",create_tasks_shot_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",create_tasks_asset:"Hinzufügen von Aufgaben für aktuelle Assets",create_tasks_asset_explaination:"Sie werden für jede Kühlstelle der aktuellen Liste für den angegebenen Aufgabentyp eine neue Aufgabe erstellen. Willst du fortfahren?",create_tasks_asset_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",current:"Zu erledigende Aufgabe",current_status:"Aktueller Status :",delete_all_text:"Sind Sie sicher, dass Sie alle Aufgaben für bestimmte {name}} löschen möchten? Bitte bestätigen Sie dies, indem Sie den Namen des Aufgabentyps der zu löschenden Aufgaben in das Textfeld eingeben.",delete_all_error:"Das Löschen aller Aufgaben für einen bestimmten Aufgabentyp ist fehlgeschlagen.",delete_error:"Beim Löschen der Aufgabe ist ein Fehler aufgetreten.",delete_comment:"Sind Sie sicher, dass Sie den letzten Kommentar löschen möchten?",delete_comment_error:"Beim Löschen eines Kommentars ist ein Fehler aufgetreten.",delete_for_selection:"Löschen Sie ausgewählte Aufgaben:",delete_preview:"Sind Sie sicher, dass Sie diese Vorschau löschen möchten?",delete_preview_error:"Beim Löschen der Vorschau ist ein Fehler aufgetreten.",edit_comment:"Bearbeiten Sie, wie",done:"Erledigt",download_pdf_file:"Datei herunterladen .{extension} Datei",feedback:"Rückmeldung",full_screen:"Anzeige im Vollbildmodus",hide_assignations:"Zuordnungen ausblenden",hide_infos:"Zusätzliche Informationen ausblenden",my_tasks:"Meine Aufgaben",next:"nächste Aufgabe",no_assignation_right:"Sie dürfen keine Zuordnungen verwalten.",no_comment:"Zu dieser Aufgabe gibt es derzeit keinen Kommentar.",no_preview:"Für diese Aufgabe gibt es derzeit keine Vorschau.",no_task_selected:"Keine Aufgabe ausgewählt",number:"Aufgabe | Aufgaben",preview:"Vorschauen",previous:"vorherige Aufgabe",unsubscribe_notifications:"Abmeldung von Benachrichtigungen",set_estimations:"Setzt Schätzungen für ausgewählte Aufgaben:",select_image_file:"Bitte wählen Sie das Bild von Ihrer Festplatte aus, das Sie Ihrem Kommentar beifügen möchten",set_preview:"Diese Vorschau als Miniaturansicht festlegen",set_preview_error:"Bei der Einstellung der Vorschau als Miniaturansicht ist ein Fehler aufgetreten.",set_preview_done:"Diese Vorschau wird als Miniaturansicht für das aktuelle Objekt verwendet.",select_preview_file:"Bitte wählen Sie ein Bild von Ihrer Festplatte aus, das Sie als Vorschau für die aktuelle Aufgabe verwenden möchten:",show_assignations:"Zuordnungen anzeigen",show_infos:"Zusätzliche Informationen anzeigen",subscribe_notifications:"Benachrichtigungen abonnieren",validation:"Validierung",tasks:"Aufgaben",with_comment:"Mit einem Kommentar...",fields:{asset_type:"Anlagenart",assignees:"Zessionare",end_date:"Enddatum",due_date:"Zwei Termine",duration:"Dauer",entity:"Entität",entity_name:"Name",estimation:"Schätzung",frames:"Fram.",last_comment:"Letzter Kommentar",last_comment_date:"Letzter Kommentar",priority:"Priorität",production:"Produkt",real_end_date:"Validierungsdatum",real_start_date:"WIP-Datum",retake_count:"Wiederholungen",sequence:"Sequenz",start_date:"Startdatum",task_status:"Status",task_status_short_name:"Status",task_type:"Typ"},colors:{title:"Einfärbung",neutral:"Neutral",status:"Statusfarbe",late:"Spät in Rot"},priority:{emergency:"Notfall",normal:"Normal",high:"Hoch",very_high:"Sehr hoch"}},timesheets:{detail_level:"Detaillierungsgrad",done_tasks:"Erledigte Aufgaben",export_timesheet:"Zeiterfassung exportieren",hours:"Stunden",month:"Monat",time_spents:"Zeitaufwand (Stunden)",title:"Stundenzettel",year:"Jahr"},wrong_browser:{title:"Dein Browser wird von Kitsu nicht unterstützt.",text:"Kitsu kann nur mit Firefox und Chrome-Browsern verwendet werden."}},w=s("a625"),C=s("a306"),S={assets:{cast_in:"عوامل",delete_error:"خطایی در زمان حذف کردن این منبع رخ داده. آیا مطمئن هستید که برای این منبع وظیفه ای تعریف نشده؟",delete_text:"آیا مطمئن هستید که {name} را میخواهید حذف کنید؟",edit_fail:"در سرور مشکلی به وجود آمده.",edit_success:"منبع {name} باموفقیت اصلاح شد.",edit_title:"اصلاح منبع",empty_list:"منبعی وجود ندارد آیا مایل هستید منبع جدیدی ایجاد کنید؟",empty_list_client:"در این پروژه منبعی وجود ندارد.",new_asset:"اضافه کردن منبع",new_assets:"اضافه کردن منابع",new_success:"منبع {name} با موفقیت ایجاد شد.",no_cast_in:"این منبع در هیچ شاتی به کسی محول نشده.",number:"منبع | منابع",restore_text:"آیا میخواهید {name}  را بازگردانی کنید؟",restore_error:"در زمان بازگردانی این منبع خطایی رخ داده",tasks:"وظایف منبع",title:"منابع",fields:{description:"توضیحات",episode:"قسمت",name:"نام",production:"تولید",time_spent:"زمان",type:"نوع",hidden_from_client:"نمایش داده شده به مشتری"}},asset_types:{all_asset_types:"انواع منابع",delete_text:"آیا مطمئن هستید که {name} را میخواهید حذف کنید؟",delete_error:"خطایی در زمان حذف کردن این منبع رخ داده. آیا مطمئن هستید این منبع به منبع دیگری متصل نیست؟",edit_title:"اصلاح نوع منبع",new_asset_type:"اضافه کردن نوع منبع",number:"نوع منبع | انواع منبع",title:"انواع منبع",production_title:"آمار تمام منابع",fields:{name:"نام"}},breakdown:{all_assets:"همه منابع موجود",edit_label:"تغییر برچسب منبع",empty:"خالی کردن عوامل",label:"برچسپ",text_mode:"تغییر به حالت متن",title:"مراحل انجام",options:{fixed:"ثابت",animate:"متحرک"}},comments:{add_comment:"اضافه کردن نظر...",add_checklist:"اضافه کردن چک لیست",add_attachment:"اضافه کردن پیوست",add_preview:"پیوست پیش نمایش",task_placeholder:"آیتم جدید...",change_preview:"تغییر پیش نمایش",comment_from_client:"نظر مشتری",empty_text:"فاقد نظر",edit_title:"اصلاح نظر",error:"هنگام ارسال نظر مشکلی رخ داده.",no_file_attached:"هیچ فایلی پیوست نشده",post_status:"ارسال نظر",retake:"برداشت مجدد",pin:"سنجاق کردن",pinned:"سنجاق شده",revision:"بازنگری",unpin:"خروج از سنجاق کردن",validated:"تایید شده!",validation_required:"نیازمند تایید شدن",text:"متن",set_status_to:"تغییر وضعیت به",fields:{text:"متن"}},custom_actions:{delete_text:"آیا مطمئن هستید که میخوا هید عمل سفارشی {name} را حذف کنید؟",delete_error:"هنگام حذف این کار سفارشی خطایی رخ داده.",edit_title:"اصلاح یک کار سفارشی",new_custom_action:"اضافه کردن یک کار سفارشی",number:"کار سفارشی | کارهای سفارشی",run_for_selection:"اجرای کار سفارشی برای وظیفه انتخاب شده:",title:"کارهای سفارشی",fields:{name:"نام",url:"لینک",entity_type:"متعلق",is_ajax:"استفاده از AJAX"},entity_types:{all:"همه",shot:"شات",asset:"منبع"}},entities:{build_filter:{asset_type:"نوع منبع",all_types:"تمام انواع منابع",assignation:"واگذاری",assignation_exists_for:"واگذاری وجود دارد برای",assigned_to:"واگذارشده به",descriptor:"Metadata",equal:"برابر",in:"در",no_assignation_for:"واگذاری وجود ندارد برای",no_filter:"بدون فیلتر",not_equal:"برابر نیست",not_assigned_to:"واگذار نشده به",status:"وضعیت وظیفه",thumbnail:"بندانگشتی دارد",title:"فیلتر روشن ...",with_thumbnail:"با بندانگشتی",without_thumbnail:"بدون بند انگشتی"},thumbnails:{error:"در هنگام بارگذاری بندانگشتی خطایی رخ داده.",explaination:"اضافه کردن بندانگشتی نیازمند یک پیش نمایش است. در صورتی که مایلید چندین بندانگشتی تعیین کنید باید ابتدا یک نوع وظیفه ای را که برای ایجاد پیش نمایش جدید استفاده خواهد شد انتخاب کنید.",explaination_two:"سپس می بایست فایلی که میخواهید بارگذاری کنید را انتخاب کنید. برای پیدا کرد متعلقات درست ، فایل باید با الگوی تعریف شده مطابقت کند :",shots_pattern:'"نام سکانس  نام شات" eg. SQ01_SH01.',assets_pattern:'"نوع منبع  نام منبع" eg. Environment_Forest.',select_files:"انتخاب فایل ها",selected_files:"فایل های انتخاب شده",select_task_type:"انتخاب نوع وظیفه",title:"اضافه کردن بندانگشتی ها",undefined:"تعریف نشده",undefined_pattern:"تعریف نشده",upload:"اضافه کردن بندانگشتی ها"}},estimation:{title:"برآورد"},episodes:{all_episodes:"تمام قسمت ها",delete_error:"به هنگام حذف کردن این قسمت خطایی رخ داد. احتمالا داده ای به ان متصل است. آیا مطمئنید  این قسمت به هیچ سکانسی لینک نشده؟",delete_text:"آیا میخواهید {name} را از پایگاه داده حذف کنید؟ هر شات یا پیش نمایشی وابسته حذف خواهد شد. لطفا با تایپ نام قسمت در زیر این عمل را تایید کنید?",edit_title:"اصلاح قسمت",empty_list:"در این پروژه قسمتی تعرف نشده. آیا میخواهید یک قسمت ایجاد کنید؟",empty_list_client:"در این پروژه هیچ قسمتی وجود ندارد.",new_episode:"قسمت جدید",number:"قسمت | قسمت ها",title:"قسمت ها ",fields:{name:"نام",description:"توضیحات"}},keyboard:{altdown:"جابجایی وظایف انتخاب شده به پایین",altj:"انتخاب پیش نمایش قبلی",altk:"انتخاب پیش نمایش بعدی",altleft:"جابجایی وظایف انتخاب شده به چپ",altright:"جابجایی وظایف انتخاب شده به راست",altup:"جابجایی وظایف انتخاب شده به بالا",annotations:"حاشیه نویسی",draw:"حالت طراحی روشن",navigation:"ناوبری",redo:"انجام دوباره",undo:"برگشت",playlist_navigation:"ناوبری لیست پخش",remove_annotation:"حذف حاشیه نویسی",shortcuts:"میانبر ها"},login:{back_to_login:"به صفحه ورود برگردید",forgot_password:"رمز ورود را فراموش کرده اید؟",login:"ورود",login_failed:"خطا در ورود، لطفا مشخصات خود را بررسی کنید.",login_page:"لغو",redirecting:"هدایت در {secondsLeft} ثانیه...",reset_change_password:"تغییر رمز ورود",reset_change_password_form_failed:"رمز وارد شده معتبر نیست. رمز وارد شده باید حداقل 7 کاراکتر و هردو باهم تطابق داشته باشند.",reset_change_password_failed:"تغییر رمز انجام نشد. کل فرایند را مجدد انجام دهید.",reset_change_password_succeed:"رمز ورود شما با موفقیت تغییر کرد. لطفا به صفحه ورود برگردید وبا رمز جدید وارد شوید.",reset_change_password_title:"رمز جدید را وارد کنید",reset_password:"بازگردانی رمز ورود",reset_password_failed:"بازیابی رمز ورود انجام نشد. لطفا ایمیل خود را چک کنید.",reset_password_succeed:"بازیابی رمز ورود با موفقیت انجام شد. ایمیل خود را چک کنید.",reset_password_title:"برای بازیابی رمز ورود، ایمیل خود را وارد کنید.",title:"ورود به Kitsu",fields:{email:"ایمیل",password:"رمز جدید",password2:"تایپ مجدد رمز جدید"}},main:{about:"درباره",add:"اضافه کردن",all:"همه",all_assets:"تمام منابع",admin:"مدیر",cancel:"لغو",clear_selection:"عدم انتخاب",close:"خروج",confirmation:"تایید",confirmation_and_stay:"تایید و ماندن",date:"تاریخ",dark_theme:"تم مشکی",days_spent:"روز/روزهای برآورد شده",days_estimated:"روز/روزهای برآورد شده",delete:"حذف",delete_all:"حذف همه",delete_text:"آیا مطمئن هستید که میخواهید {name} را حذف کنید؟",documentation:"مستندات",edit:"اصلاح",empty_comment:"پاک کردن نظر",end_date:"تاریخ پایان",files_selected:"فایل های انتخاب شده",for:"برای",go_productions:"به پروژه ها بروید",history:"تاریخچه",info:"اطلاعات",or:"یا",no:"نه",loading:"بارگذاری...",loading_data:"بارگذاری داده ها",loading_error:"خطایی هنگام بارگذاری داده ها رخ داد.",logout:"خروج",modify:"تغییر دادن",minimize:"کوچک کردن",main_pack:"بسته اصلی",maximize:"تمام صفحه",nb_frames:"فریم | فریم ها",person:"شخص",profile:"پروفایل",production:"پروژه",remove:"حذف",save:"ذخیره",sort_by:"مرتب بر اساس",sorted_by:"مرتب شده بر اساس",start_date:"تاریخ شروع",studio:"استودیو",tutorials:"آموزش ها",user:"کاربر",white_theme:"تم سفید",yes:"بله",csv:{choose:"انتخاب",error_upload:"هنگام بارگذاری CSV خطایی رخ داد.",export_file:"صادر",import_file:"وارد",import_title:"وارد کردن داده ها از CSV",legend:"راهنما",legend_ok:"داده ها تایید شد",legend_ignored:"داده ها رد شد",legend_missing:"عدم وجود داده ها",legend_disabled:"داده ها ایجاد یا برزورسانی نخواهند شد.",legend_overwrite:"داده ها بروزرسانی خواهند شد",paste:"چسباندن",paste_code:"لطفا داده های CSV خود را اینجا بچسبانید.:",preview:"پیش نمایش",preview_episode_name:"نام قسمت",preview_title:"پیش نمایش داده های که وارد شده",preview_description:"Upload a .csv file to populate your board with posts.",preview_required:"NB: Headers must be included as first row.",preview_reupload:"بارگذاری مجدد فایل .CSV",required_fields:"فایل CSV شما نیاز مند ستون های ذیل است.",select_file:"لطفا فایل CSV را انتخاب کنید :",tab_select_file:"بارگذاری فایل CSV",tab_paste_code:"چسباندن داده های CSV",unknown:"ستون ناشناخته",upload_file:"گزینش",options:{title:"گزینه ها",update:"بروزرسانی داده های موجود"}}},menu:{assign_tasks:"محول کردن وظایف",change_priority:"تغییر اولویت",change_status:"تغییر وضعیت",create_tasks:"ایجاد وظایف",delete_tasks:"حذف وظایف",generate_playlists:"ساخت لیست پخش",run_custom_action:"اجرای کار سفارشی",set_estimations:"تعیین برآورد"},news:{all:"همه",commented_on:"نظر داده شده در",infos:"اطلاعات",no_news:"خبری برای این پروژه یا فیلتر وجود ندارد.",only_comments:"تنها نظرات",only_previews:"تنها پیش نمایش ها",set_preview_on:"روشن کردن پیش نمایش",task_status:"وضعیت وظیفه",task_type:"نوع وظیفه",title:"خوراک خبری"},not_found:{text:"لینکی که بر روی آن کلیک کرده اید مشکل دارد یا چیزی نادرست است . لطفه به صفحه اصلی برگردید.",title:"صفحه مورد نظر پیدا مشد... آیا به دنبال چیزی که حذف کرده اید میگردید؟"},notifications:{and_change_status:"و وضعیت تغییر کرد به",assigned_you:"محول شده به شما در",commented_on:"نظر داده شده در",mention_you_on:"از شما نام برده شده در",no_notifications:"در حال حاظر اعلانی برای شما در پروژه های جاریوجود ندارد.",unread_notifications:"اعلان|اعلان های خوانده نشده",title:"اعلانات",with_preview:"همراه پیش نمایش"},people:{active:"فعال",active_persons:"شخص | اشخاص فعال",add_member_to_team:"اضافه کردن عضو به تیم : ",create_invite:"ایجاد و فرستادن دعوت نامه",delete_error:"خطایی در زمان حذف کردن شخص رخ داد. احتمالا داده های به این شخص متصل است. آیا مطمئن هستید به این شخص کاری محول یا نظری توسطش نوشته نشده است؟",delete_text:"آیا مطمئن هستید که میخواهید {personName} راحذف کنید؟ تمای داده های متصل حذف خواهد شد. برای تایید اسم کامل فرد را تایپ کنید.",edit_title:"اصلاح شخص",empty_team:"کسی در تیم این پروژه وجود ندارد",invite:"ارسال دعوت نامه",invite_error:"هنگام ارسال دعوت نامه خطایی رخ داد.",invite_success:"دعوت نامه با موفقیت ارسال شد.",new_person:"اضافه کردن کارمند جدید",no_task_assigned:"هیچ وظیفه ای که به شما محول شده باشد، وجود ندارد.",persons:"شخص | اشخاص",running_tasks:"وظایف در حا اجرا",select_person:"انتخاب شخص...",team:"تیم",title:"افراد",unactive:"غیرفعال",csv:{import_file:"وارد کردن فایل .csv",export_file:"دانلود به عنوان فایل .csv",import_title:"وارد کردن داده هااز فایل csv",required_fields:"فایل csv شما نیازمند ستون های ذیل است:",select_file:"لطفا فایل مرود نظر خود را انتخاب کنید:",error_upload:"به هنگام بارگذاری فایل خطایی رخ داده."},fields:{first_name:"نام",last_name:"نام خانوادگی",email:"ایمیل",phone:"همراه",role:"نقش",old_password:"رمز جاری",password:"رمز جدید",password_2:"رمز جدید ( تکرار)",active:"فعال"},list:{name:"نام",email:"ایمیل",phone:"همراه",role:"نقش",active:"فعال"},role:{admin:"مدیر استودیو",client:"مشتری",manager:"سوپروایزر",user:"هنرمند",undefined:"",vendor:"فروشنده"}},playlists:{add_assets:"اضافه کردن منابع",add_selection:"اضافه کردن انتخاب",add_shots:"اضافه کردن شات ها",add_sequence:"اضافه کردن کل سکانس",add_episode:"اضافه کردن کل قسمت ها",add_movie:"اضافه کردن کل ویدئوها",apply_task_type_change:"این کار نوع وظیفه را در تمام شات ها تغییر خواهد داد.",available_build:"ساخته های دردسترس",build_daily:"دردست انجام روزانه",build_weekly:"تمام دردست انجام ها",build_mp4:"Build .mp4 (beta)",building:"در حال ساختن...",client_playlist:"لیست پخش مشتری",create_for_selection:"ایجاد لیست پخش برای شات های انتخابی",create_title:"ساخت لیست پخش",created_at:"ساخته شده در :",delete_text:"آیا مطمئنید که می خواهید {name} را حذف کنید؟",delete_error:"هنگام حذف این لیست پخش خطایی رخ داد.",download_zip:"Download .zip",failed:"ناموفق",for_client:"مشتری",for_studio:"استودیو",edit_title:"اصلاح لیست پخش",last_creation:"آخرین ساخته ها",last_modification:"آخرین تغییرات",loading_error:"خطا در سرور. لیست پخش نمی تواند بارگذاری شود.",new_playlist:"اضافه کردن لیست پخش",no_build:"بدون ساخت",no_playlist:"در حال حاظر هیچ لیست پخشی برای این پروژه یا قسمت وجود ندارد.",no_preview:"بدون پیش نمایش",no_selection:"لطفا از سمت چپ یک لیست پخش انتخاب کنید.",no_sequence_for_episode:"هیچ سکانسی برای این قسمت وجود ندارد.",no_shot_for_production:"هیچ شاتی برای این پروژه وجود ندارد.",select_shot:"لطفا از ستون سمت راست  یک شات انتخاب کنید.",select_playlist:"لطفا از ستون سمت چپ یک لیست پخش انتخاب کنید.",select_task_type:"تغییر وظیفه برای تمام شات ها",title:"لسیت پخش",updated_at:"بروزرسانی شده در :",remove:"حذف",fields:{name:"نام",created_at:"تاریخ ساخت",updated_at:"تاریخ بروزرسانی",for_entity:"موجودیتی را برای نمایش انتخاب کنید.",for_client:"برای اشتراک گذاری با"},actions:{edit:"اصلاح لیست پخش",delete:"حذف کردن لیست پخش",fullscreen:"تمام صفحه",download:"دانلود...",entity_list:"نمایش/مخفی لیست موجودیت",comments:"نمایش/مخفی نظرات",annotation:"حاشیه نویسی",annotation_text:"برای ایجاد متن دوبار کلیلک کنید.",annotation_delete:"حذف حاشیه نویسی",annotation_redo:"انجام دوباره",annotation_undo:"برگشت به قبل",annotation_big:"بزرگ",annotation_medium:"متوسط",annotation_small:"کوچک",change_task_type:"تغییر نوع وظیفه",split_screen:"جدا کردن صفح نمایش",next_shot:"شات بعدی",previous_shot:"شات قبلی",next_frame:"فریم بعدی",previous_frame:"فریم قبلی",play:"پخش",pause:"توقف"}},productions:{current:"پروژه انتخاب شده",delete_text:"آیا مطمئنید که می خواهید {name} را حذف کنید؟ لطفا برای تایید این عمل در فیلد بعدی اسم پروژه را تایپ کنید.",delete_error:"هنگام حذف این پروژه خطایی رخ داده. آیا مطمئن هستید که وظیفه،شات ویا منبعی به این پروژه متصل نیست؟ Kitsu اجازه حذف پروژه را ندارد. اگر نمیخواهید این پروژه را ببینید میتوانید آن را ببندید.",edit_title:"اصلاح پروژه",new_production:"اضافه کردن پروژه",number:"پروژه | پروژه ها",open_productions:"پروژه های من",picture:"تغییر تصویر",title:"پروژه ها",home:{create_new:"ایجاد پروژه جدید",empty:"شما هیچ پروژه ای  بازی ندارید. آیا مایلید پروژه ای جدید ایجاد کنید؟",no_task:"به شما کاری محول نشده. با سوپروایزر خود تماس وببیند چه کاری میتوانید انجام دهید.",no_prod_for_client:"شما به هیچ پروژه ای دسترسی ندارید. با تهیه کننده و یا مدیر خود تماس بگیرید.",title:"پروژه های در حال انجام",welcome:"به Kitsu خوش آمدید."},fields:{fps:"FPS",name:"نام",ratio:"نسبت تصویر",resolution:"ابعاد تصویر",status:"وضعیت",type:"نوع"},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occured while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occured while deleting this metadata column.",error:"An error occured while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},status:{closed:"بسته شده",open:"باز",active:"باز",archived:"بسته شده"},type:{short:"فیلم کوتاه",featurefilm:"فیلم بلند",tvshow:"سریال"}},profile:{change_avatar:"تغییرآواتار",info_title:"اطلاعات",language:"زبان",notifications_enabled:"اعلانات ایمیل فعال",notifications_slack_enabled:"اعلانات اسلک فعال",notifications_slack_user:"نام کاربری اسلک",password_title:"تغییر رمز ورود",timezone:"موقعیت زمانی",title:"پروفایل شما",avatar:{title:"تغییر آواتار",error_upload:"در زمان بارگذاری تصویر خطایی رخ داد."},change_password:{button:"تغییر رمز ورود",error:"هنگام تغییر رمز خطایی رخ داد. لطفا رمز پیشین خود را بررسی کنید.",success:"رمز شما با موفقیت تغییر کرد!",unvalid:"رمز جدید شما یا باهم مطابقت ندارد ویا کوتاه است (رمز باید حداقل 7 کاراکتر باشد)."},save:{button:"ذخیره تغییرات",error:"هنگام ذخیره تغییرات خطایی رخ داد."}},settings:{change_logo:"تغییر لوگو",integrations:"ادغام",logo:"لوگو استودیو",no_logo:"هیچ لوگوی تعیین نشده.",set_logo:"تعیین لوگوی استودیو",title:"تنظیمات",fields:{name:"نام استودیو",hours_by_day:"ساعت در روز",slack_token:"Slack Token (Optional)",use_original_name:"استفاده از اسم اصلی فایل برای دانلود."},save:{button:"ذخیره تغییرات",error:"هنگام ذخیره تغییرات خطایی رخ داد."}},task_status:{delete_text:"آیا مطمئنید که می خواهید {name} را حذف کنید؟",delete_error:"هنگام حذف وضعیت این وظیفه خطایی رخ داده. آیا مطمئنید این وضعیت وظیفه به هیچ وظیفه ای متصل نیست؟",edit_title:"اصلاح وضعیت وظیفه",number:"وضعیت | وضعیت های وظیفه",new_task_status:"اضافه کردن وضعیت وظیفه",title:"وضعیت وظیفه",fields:{is_artist_allowed:"این هنرمند اجازه دارد",is_client_allowed:"این مشتری اجازه دارد",color:"رنگ",is_done:"انجام شده",is_reviewable:"قابل بررسی",is_retake:"بازنگری",name:"نام",short_name:"اسم کوتاه"}},task_types:{delete_text:"آیا مطمئنید که می خواهید {name} را حذف کنید؟",delete_error:"هنگام حذف نوع این وظیفه خطایی رخ داده. آیا مطمئنید این نوع وظیفه به هیچ وظیفه ای متصل نیست؟",edit_title:"اصلاح نوع وظیفه",new_task_type:"اضافه کردن نوع وظیفه",number:"نوع | انواع وظیفه",title:"انواع وظیفه",fields:{dedicated_to:"برای",color:"رنگ",name:"نام",allow_timelog:"ضبط زمان",priority:"اولویت"}},sequences:{all_sequences:"تمام سکانس ها",delete_text:"آیا مطمئنید که می خواهید {name} را حذف کنید؟ تمام شات ها و پیش نمایش های مرتبط حذف خواهد شد. لطفا برای تایید اسم کامل سکانس را تایپ کنید.",delete_error:"هنگام حذف این سکانس خطایی رخ داده. آیا مطمئنید این سکانس به شاتی لینک نشده؟",edit_title:"اصلاح سکانس",empty_list:"هیچ سکانسی در این پروژه وجود ندارد.آیا میلید سکانسی ایجاد کنید؟",empty_list_client:"هیچ سکانسی در این پروژه وجود ندارد.",new_sequence:"سکانس جدید",number:"سکانس | سکانس ها",title:"وضعیت سکانس ها",fields:{name:"نام",description:"توضیحات"}},schedule:{title:"برنامه ریزی",title_main:"برنامه ریزی اصلی",overall_man_days:"فرد-روز",md:"md",zoom_level:"سطح بزرگنمایی",milestone:{add_milestone:"اضافه کردن نقطه عطف برای",edit_milestone:"اصلاح نقطه عطف برای",name:"نام",error:"خطایی هنگام اضافه کردن یا اصلاح کردن نقطه عطف رخ داد. لطفا مجدد تاش کنید."}},quota:{average:"میانگین",count_label:"حالت شمارش",detail_label:"سطح جزئیات",details_name:"نام",details_seconds:"ثانیه",details_frames:"فریم",month_label:"ماه",no_quota:"برای این نوع وظیفه سهمیه یا میزانی وجود ندارد.",name:"نام",quota_day:"سهم بر روز",quota_week:"سهم بر هفته",quota_month:"سهم بر ماه",year_label:"سال",title:"سهم/ میزان",type_label:"نوع"},shots:{casting:"محول کردن شات",creation_explaination:"برای اضافه کردن شات ها ابتدا نیاز دارید یک قسمت و یک سکانس ایجاد کنید. اسم یک قسمت را در پایین ستون چپ وارد سپس کلیک کنید تا ایجاد شود. این قسمت راانتخاب و سپس همین کار را برای سکانس نیزانجام دهید. در آخر یک سکانس انتخاب ودر پایین فیلد در ستون سمت راست اسم شات را وارد کنید. روی کلید اضافه زیر کلیک کنید. اولین شات شما ایجا شد و حالا میتوانید تعدا بیشتری بسازید. اگر این یک سریال نیست شما مستقیما باید یک سکانس بسازید.",delete_text:"آیا مطمئنید که می خواهید {name} را حذف کنید؟",delete_error:"هنگام حذف این شات خطایی رخ داده. آیا مطمئنید این شات به وظیفه ای لینک نشده؟",edit_success:"شات {name} با موفقیت اصلاح شد.",edit_fail:"ایجاد یا اصلاح انجام نشد. خطایی رخ داد. مطمئن شوید که شاتی را که به سکانس داده اید ودر حال حاظر لیست شده را تغییر اسم نمی دهید.",edit_title:"اصلاح شات",empty_list:"هیچ شاتی در این پروژه وجود ندارد.آیا میلید یک شات ایجاد کنید؟",empty_list_client:"هیچ شاتی در این پروژه وجود ندارد.",episodes:"قسمت ها",history:"Shot values history",new_shot:"اضافه کردن شات",new_shots:"اضافه کردن شات ها",new_sequences:"اضافه کردن سکانس ها",new_episodes:"اضافه کردن قسمت ها",no_casting:"شات به کسی محول نشده.",number:"شات | شات ها",manage:"ایجاد شات ها",new_success:"شات {name}  با موفقیت ایجاد شد.",padding:"شات دردست انجام",restore_text:"آیا مطمئنید که می خواهید {name} را بازگردانی کنید؟",restore_error:"هنگام بازگردانی این شات خطایی رخ داد.",sequences:"سکانس ها",tasks:"وظایف شات",title:"شات ها",fields:{description:"توضیحات",nb_frames:"فریم",episode:"قسمت",frame_in:"وارد",frame_out:"خارج",fps:"FPS",name:"نام",production:"پروژه",sequence:"سکانس",time_spent:"زمان"}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},statistics:{count:"شمارش",count_mode:"حالت شمارش",display_mode:"حالت نمایش",frames:"فریم",pie:"نمودار pie",shots:"شات ها"},tasks:{add_preview:"اضافه کردن پیش نمایش",add_preview_error:"هنگام اضافه کردن پیش نمایش خطایی رخ داد.",assign:"محول کردن وظیفه به : | محول کردن وظایف {nbSelectedTasks} به :",back_to_list:"برگشت به لیست",bigger:"گسترش پنل وظیفه",change_status_to:"تغییر وضعیت کار به :",change_preview:"تغییر پیش نمایش",change_priority:"تغییر اولویت به :",clear_assignations:"عدم محول کردن وظیفه",comment_image:"به نظر خود تصویری پیوست کنید.",create_for_selection:"برای هر سلول خالی یک وظیفه ایجا کن :",create_tasks:"اضافه کردن وظایف",create_tasks_shot:"اضافه کردن وضایف به شات های جاری",create_tasks_shot_explaination:"شما میخواهید برای هر شات جاری وظیفه جدیدی ایجاد کنید. مایلید ادامه دهید؟",create_tasks_shot_failed:"خطایی سرور هنگام اجرای عملیات ساخت رخ داد.",create_tasks_asset:"اضافه کردن وظایف برای منابع جاری",create_tasks_asset_explaination:"شما میخواهید وظیفه جدیدی برای هر منبع در پروژه جاری ایجاد کنید. مایلید ادامه دهید؟",create_tasks_asset_failed:"خطایی سرور هنگام اجرای عملیات ساخت رخ داد.",current:"وظیفه برای انجام",current_status:"وضعیت جاری :",delete_all_text:"آیا مطمئنید که میخواهید تمام وظایفی که به {name} داده اید را حذف کنید؟ برای تایید این کار اسم نوع وظیفه ای که مخواهید در فیلد تایپ کنید.",delete_all_error:"حذف کردن تمام وظایف برای دادن به نوع وظیفه با شکست مواجه شد.",delete_error:"خطایی هنگام حذف کردن وظیفه رخ داد.",delete_comment:"آیا مطمئنید که میخواهید آخرین نظر راحذف کنید؟",delete_comment_error:"خطایی هنگام حذف کردن نظر رخ داد.",delete_for_selection:"حذف وظایف انتخاب شده :",delete_preview:"آیا مطمئنید که میخواهید این پیش نمایش را حذف کنید؟",delete_preview_error:"خطایی هنگام حذف کردن پیش نمایش رخ داد.",edit_comment:"اصلاح نظر",done:"انجام شد",download_pdf_file:"Download .{extension} file",feedback:"بازخورد",full_screen:"نمایش در حالت تمام صفحه",hide_assignations:"مخفی کردن وظایف محول شده",hide_infos:"مخفی کردن اطلاعات اضافی",my_tasks:"وظایف من",next:"وظیفه بعدی",no_assignation_right:"شما اجازه مدیریت محول کردن وظایف را ندارید.",no_comment:"در حال حاظر نظری برای این وظیفه وجود ندارد.",no_preview:"در حال حاظر پیش نمایشی برای این وظیفه وجود ندارد.",no_task_selected:"وظیفه ای انتخاب نشده",number:"وظیفه | وظایف",preview:"پیش نمایش ها",previous:"وظیفه قبلی",unsubscribe_notifications:"عدم اشتراک برای اعلانات",set_estimations:"تعیین برآورد برای وضایف انتخاب شده:",set_preview:"تنظیم این پیش نمایش به عنوان بند انگشتی",set_preview_error:"خطایی هنگام تنظیم پیش نمایش به عنوان بند انگشتی رخ داد.",set_preview_done:"این پیش نمایش به عنوان بندانگشتی موجودیت جاری استفاده شده.",select_preview_file:"لطفا تصویری برای پیش نمایش وضیفه جاری انتخاب کنید.",show_assignations:"نمایش کارهای محول شده",show_infos:"نمایش اطلاعات اضافی",subscribe_notifications:"اشتراک برای اعلانات",select_image_file:"لطفا تصویری که میخواهید به نظر خود پیوست کنید را انتخاب کنید.",tasks:"وظایف",validation:"تایید",with_comment:"همراه یک نظر...",fields:{asset_type:"نوع منبع",assignees:"عامل",count:"تعداد",due_date:"تاریخ انجام",duration:"مدت",end_date:"تاریخ تایید",entity:"ماهیت",entity_name:"نام",estimated_quota:"Avg. Quota",estimation:"برآورد",frames:"فریم.",last_comment:"آخرین نظر",last_comment_date:"آخرین نظر",priority:"اولویت",production:"پروژه",real_end_date:"تاریخ تایید",real_start_date:"تاریخ در حال انجام",retake_count:"برداشت مجدد",seconds:"ثانیه",sequence:"سکانس",start_date:"تاریخ شروع",task_status:"وضعیت",task_status_short_name:"وضعیت",task_type:"نوع"},colors:{title:"رنگ بندی",neutral:"خنثی",status:"وضعیت رنگ",late:"تاخیر به رنگ قرمز"},priority:{emergency:"اورژانسی",normal:"عادی",high:"ضروری",very_high:"خیلی ضروری"}},timesheets:{detail_level:"سطح جزئیات",done_tasks:"وظایف انجام شده",export_timesheet:"صادر کردن جدول زمانی",hours:"ساعت",month:"ماه",time_spents:"زمان صرف شده ( ساعت )",title:"جداول زمانی",year:"سال"},wrong_browser:{title:"Kitsu توسط مرورگر شما پشتیبانی نمی شود.",text:"Kitsu میتواند با مرورگر فایرفاکس یا کروم به درستی کار کنند."}},T=s("f693"),x=s("5d67"),E={assets:{cast_in:"Используется в",delete_error:"Ошибка при удалении ассета. Скорее всего к нему привязаны какие-то данные. Вы уверены что этот ассет не связан с существующей задачей?",delete_text:"Уверены, что хотите удалить {name} из базы данных?",edit_fail:"Не удалось сохранить. Возможно, что ассет с таким же именем уже существует.",edit_success:"Ассет {name} успешно изменён.",edit_title:"Редактировать ассет",empty_list:"В проекте нет ни одного ассета. Создать?",empty_list_client:"В этом проекте нет ни одного ассета.",new_asset:"Создать ассет",new_assets:"Добавить ассеты",new_success:"Ассет {name} успешно создан.",no_cast_in:"Этот ассет не используется ни в одном шоте.",number:"ассет | ассеты",restore_text:"Вы уверены, что хотите восстановить {name} в базу данных?",restore_error:"Ошибка при восстановлении ассета.",tasks:"Задачи по ассету",title:"Ассеты",fields:{description:"Описание",episode:"Эпизод",name:"Название",production:"Проект",time_spent:"Время",type:"Тип",hidden_from_client:"Отображается клиенту"}},asset_types:{all_asset_types:"Все типы ассетов",create_error:"Ошибка при сохранении этого типа ассетов. Вы уверены, что нет типа ассетов с таким же названием?",delete_text:"Вы уверены, что хотите удалить {name} из базы данных?",delete_error:"Ошибка при удалении этого типа ассетов. Скорее всего к нему привязаны какие-то данные. Вы уверены, что к этому типу не привязан какой-либо ассет?",edit_title:"Редактировать тип ассетов",new_asset_type:"Добавить тип ассетов",number:"тип ассетов | типов ассетов",title:"Типы Ассетов",production_title:"Статистика по Типам Ассетов",fields:{name:"Название"}},breakdown:{all_assets:"Доступные ассеты",edit_label:"Изменить лейбл ассета",empty:"Не используется",label:"Лейбл",picture_mode:"Перепключиться в режим картинок",text_mode:"Перепключиться в текстовый режим",title:"Брейкдаун",options:{fixed:"зафиксирован",animate:"анимировать"}},comments:{add_attachment:"Прикрепить вложение",add_checklist:"Добавить чеклист",add_comment:"Оставить комментарий...",add_preview:"Добавить превью",change_preview:"Изменить превью",comment_from_client:"Комментарий клиента",edit_title:"Редактировать комментарий",empty_text:"Пустой комментарий",edit_error:"Ошибка при редактировании комментария. Пожалуйста, обратитесь в поддержку.",error:"Ошибка при создании комментария",no_file_attached:"Файл не прикреплён",pin:"Закрепить",pinned:"Закреплён",post_status:"Опубликовать комментарий",retake:"Переделать",revision:"Версия",set_status_to:"Установить статус",task_placeholder:"Новый объект...",text:"Текст",unpin:"Открепить",validated:"Проверено!",validation_required:"Необходима Проверка",fields:{text:"текст"}},custom_actions:{create_error:"Ошибка при сохранении специального действия. Вы уверены, что нет действия с таким же названием?",delete_text:"Уверены, что хотите удалить специальное действие {name} из базы данных?",delete_error:"Ошибка при удалении этого специального действия",edit_title:"Редактировать специальное действие",new_custom_action:"Добавить специальное действие",number:"специальное действие | специальные действия",run_for_selection:"Выполнять специальное действие для следующих задач:",title:"Специальные Действия",fields:{name:"Название",url:"URL",entity_type:"Тип Объекта",is_ajax:"Использовать AJAX"},entity_types:{all:"Все",shot:"Шот",asset:"Ассет"}},entities:{build_filter:{asset_type:"Тип ассетов",all_types:"Все типы ассетов",assignation:"Назначение",assignation_exists_for:"Назначения для",assigned_to:"Назначен",descriptor:"Метаданные",equal:"Равно",in:"В",no_assignation_for:"Нет назначений для",no_filter:"Нет фильтра",not_equal:"Не равно",not_assigned_to:"Не назначен",status:"Статус задачи",thumbnail:"Есть ярлык",title:"Фильтр...",union_and:"Применить все указанные фильтры",union_or:"Применить один из указанных фильтров",with_thumbnail:"С ярлыком",without_thumbnail:"Без ярлыка"},thumbnails:{error:"Ошибка при загрузке ярлыков",explaination:"Для добавления ярлыка нужно новое превью. Чтобы сделать сразу несколько ярлыков, необходимо сначала выбрать тип задачи для создания новых превью. Ярлыки будут сделаны на основании этого нового превью.",explaination_two:"Далее выберите файлы для загрузки. Чтобы найти правильные объекты, имена файлов должны соответсвовать маске:",shots_pattern:'"SequenceName_ShotName" пр. SQ01_SH01.',assets_pattern:'"AssetType_AssetName" пр. Окружение_Лес.',select_files:"Выбрать Файлы",selected_files:"Выбранные Файлы",select_task_type:"Выбрать Тип Задачи",title:"Добавить Ярлыки",undefined:"Неопределён",undefined_pattern:"Неопределён",upload:"Добавить Ярлыки"}},estimation:{title:"Оценка"},episodes:{all_episodes:"Все эпизоды",edit_error:"Ошибка при сохранении этого эпизода. Вы уверены, что нет эпизода с таким же названием?",delete_error:"Ошибка при удалении этого эпизода. Вероятнее всего к нему привязаны какие-то данные. Вы уверены, что этот тип ассетов не связан с какой-либо секвенция?",delete_text:"Уверены, что хотите удалить {name} из базы данных? Каждый связаный шот и превью будет удален. Пожалуйста, введите название эпизода для подтверждения.",edit_title:"Редактировать эпизод",empty_list:"В проекте нет ни одного эпизода. Создать?",empty_list_client:"В этом проекте нет ни одного эпизода.",new_episode:"Новый эпизод",number:"эпизод | эпизоды",title:"Статистика эпизодов",fields:{name:"Название",description:"Описание"}},keyboard:{altdown:"Подвинуть выбранные задачи вниз",altj:"Выбрать предыдущее превью ",altk:"Выбрать следующее превью",altleft:"Подвинуть выбранные задачи влево",altright:"Подвинуть выбранные задачи вправо",altup:"Подвинуть выбранные задачи вверх",annotations:"Аннотации",draw:"Включить режим рисования",navigation:"Навигация",redo:"Повторить",undo:"Отменить",playlist_navigation:"Навигация по плейлисту",remove_annotation:"Убрать аннотацию",shortcuts:"Хоткеи"},login:{back_to_login:"Вернуться к странице логина",forgot_password:"Забыли пароль?",login:"Войти",login_failed:"Ошибка входа. Пожалуйста, проверьте ваши имя пользователя и пароль",login_page:"Отмена",redirecting:"Перенаправление через {secondsLeft} секунд...",reset_change_password:"Сменить пароль",reset_change_password_form_failed:"С паролем, который вы дали, возникла проблема. Убедитесь в том, что он состоит как минимум из 7 знаков и что оба пароля совпадают",reset_change_password_failed:"Не удалось изменить пароль. Пожалуйста, пройдите процедуру ещё раз.",reset_change_password_succeed:"Ваш пароль успешно изменён. Пожалуйста вернитесь на страницу логина, чтобы использовать его.",reset_change_password_title:"Введите новый пароль",reset_password:"Сбросить Пароль",reset_password_failed:"Ошибка при сбросе пароля. Проверьте правильность указанной почты.",reset_password_succeed:"Пароль успешно сброшен. Пожалуйста, проверьте вашу почту.",reset_password_title:"Введите вашу почту, чтобы сбросить пароль",title:"Войти в Kitsu",fields:{email:"Почта",password:"Пароль",password2:"Пароль повторно"}},main:{about:"О системе",add:"Добавить",all:"Все",all_assets:"Все ассеты",admin:"Администратор",cancel:"Отмена",clear_selection:"Очистить выбранное",close:"Закрыть",confirmation:"Подтвердить",confirmation_and_stay:"Подтвердить и прододжить",date:"Дата",dark_theme:"Тёмная Тема",days_spent:"день затрачен | дней затрачено",days_estimated:"день ожидается | дней ожидается",delete:"Удалить",delete_all:"Удалить все",delete_text:"Уверены, что хотите удалить {name} из базы данных?",documentation:"Документация",edit:"Редактировать",empty_comment:"Пустой комментарий",end_date:"Дата окончания",files_selected:"выбранные файлы",for:"Для",go_productions:"Перейти к проектам",history:"История",info:"Информация",or:"или",no:"Нет",loading:"Загрузка...",loading_data:"Загрузка данных",loading_error:"Ошибка при загрузке данных",logout:"Выйти",modify:"Изменить",minimize:"Свернуть",main_pack:"Main Pack",maximize:"Развернуть",nb_frames:"Кадр | Кадры",person:"Человек",profile:"Профиль",production:"Проект",remove:"Удалить",save:"Схранить",sort_by:"Сортировать по",sorted_by:"Отсортировано по",start_date:"Дата начала",studio:"Студия",tutorials:"Туториалы",user:"Пользователь",white_theme:"Светлая Тема",yes:"Да",csv:{choose:"Выбрать",error_upload:"Ошибка при загрузке CSV.",export_file:"Экспортировать",import_file:"Импортировать",import_title:"импортировать данные с CSV",legend:"Легенда",legend_ok:"Опознанные данные",legend_ignored:"Пропущенные данные",legend_missing:"Недостающие данные",legend_disabled:"Данные не получится создать или обновить",legend_overwrite:"Данные будут обновлены",paste:"Вставить",paste_code:"Вставьте сюда данные из CSV:",preview:"Превью",preview_episode_name:"Название эпизода",preview_title:"Посмотреть импортированные данные",preview_description:"Загрузить .csv файл чтобы наполнить доску записями.",preview_required:"NB: Заголовки должны быть на первой строчке.",preview_reupload:"Загрузить .CSV файл заново",required_fields:"Вашему CSV нужны следующие столбцы",select_file:"Выберите файл:",tab_select_file:"Загрузить файл CSV",tab_paste_code:"Вставить данные CSV",unknown:"Неизвестный столбец",upload_file:"Найти",options:{title:"Опции",update:"Обновить существующие данные"}}},menu:{assign_tasks:"Назначить задачи",change_priority:"Изменить приоритет",change_status:"Изменить статус",create_tasks:"Создать задачи",delete_tasks:"Удалить задачи",generate_playlists:"Создать плейлист",run_custom_action:"Выполнить специальное действие",set_estimations:"Оценить задачу"},news:{all:"Все",commented_on:"прокомментировал(а)",infos:"Информация",no_news:"Для этого проекта или для этого фильтра нет новостей.",only_comments:"Только комментарии",only_previews:"Только превью",set_preview_on:"Включить превью",task_status:"Статус задачи",task_type:"Тип задачи",title:"Лента новостей"},not_found:{text:"Что-то не так с этой ссылкой. Рекомендуем вернуться на главную страницу.",title:"Страница не найдена...  вы ищете что-то, что уже удалили?"},notifications:{and_change_status:"и изменил(а) статус на",assigned_you:"назначил(а) вас на",commented_on:"прокомментировал(а)",mention_you_on:"упомянул(а) вас в",no_notifications:"Сейчас нет комментариев по вашим текущим проектам",unread_notifications:"непрочитанное уведомление | непрочитанные уведомления",title:"Уведомления",with_preview:"с превью"},people:{active:"Активный",active_persons:"активный пользователь | активные пользователи",add_member_to_team:"Добавить человека в команду",create_invite:"Создать и отправить приглашение",create_error:"Произошла ошибка при создании этого пользователя. Свяжитесь с поддержкой.",delete_error:"Произошла ошибка при удалении этого пользователя. Скорее всего с ним связаны какие-то данные. Вы уверены что этого пользователь не участвует в задачах или не оставлял комментариев?",delete_text:"Вы уверены что хотите удалить {personName} из базы данных? Каждый связанный комментарий и превью будет удален. Пожалуйста, для подтверждения введите полное имя пользователя.",edit_title:"Редактировать пользователя",empty_team:"В команде проекта никто не указан.",invite:"Отправить приглашение",invite_error:"Произошла ошибка при отправке приглашения",invite_success:"Приглашение успешно отправлено",new_person:"Добавить нового сотрудника",no_task_assigned:"Для вас не назначено текущих задач",persons:"пользователь | пользователи",running_tasks:"Текущие задачи",select_person:"Выберите пользователя...",team:"Команда",title:"Команда",unactive:"Неактивный",csv:{import_file:"Импортироать .csv файл",export_file:"Сохранить как .csv файл",import_title:"Импортировать данные из CSV",required_fields:"Вашему файлу CSV нужны седующие столбцы",select_file:"Выберите файл:",error_upload:"При загрузке CSV произошла ошибка."},fields:{first_name:"Имя",last_name:"Фамилия",email:"Почта",phone:"Телефон",role:"Роль",old_password:"Текущий пароль",password:"Новый пароль",password_2:"Новый пароль (повторно)",active:"Активный"},list:{name:"Имя",email:"Почта",phone:"Телефон",role:"Роль",active:"Активный"},role:{admin:"Администратор",client:"Клиент",manager:"Супервайзер",user:"Художник",undefined:"Не определён",vendor:"Вендор"}},playlists:{add_assets:"Добавить ассеты",add_selection:"Добавить selection",add_shots:"Добавить шоты",add_sequence:"Добавить секвенцию",add_episode:"Добавить эпизод",add_movie:"Добавить фильм",apply_task_type_change:"Выбрать последнюю версию для типа задачи на всех шотах.",available_build:"Доступные сборки",build_daily:"Дейли собирается",build_weekly:"Все собираются",build_mp4:"Собрать .mp4 (beta)",building:"Собираю...",client_playlist:"Клиентский Плейлист",create_for_selection:"Создать плейлист для выбранных шотов",create_title:"Создать плейлист",created_at:"Создан в:",delete_text:"Уверены, что хотите удалить {name} из базы данных?",delete_error:"Ошибка при удалении плейлиста.",edit_error:"Ошибка при сохранении плейлиста.",download_zip:"Скачать .zip",failed:"Облом",for_client:"Клиент",for_studio:"Студия",edit_title:"Редактировать плейлист",last_creation:"Последнее создание",last_modification:"Последняя модификация",loading_error:"На сервере произошла ошибка. Не получилось загрузить плейлисты.",new_playlist:"Добавить плейлист",no_build:"Нет сборки",no_playlist:"Для этого проекта или эпизода сейчас нет плейлиста",no_preview:"Нет превью",no_selection:"Выберите плейлист слева.",no_sequence_for_episode:"Для этого эпизода нет секвенций",no_shot_for_production:"Для этого проекта нет шотов",select_shot:"Веыберите шот из правого столбца",select_playlist:"Выберите плейлист из левого столбца",select_task_type:"Изменить тип задачи для всех шотов",title:"Плейлисты",updated_at:"Обновлен:",remove:"удалить",fields:{name:"Название",created_at:"Дата создания",updated_at:"Дата обновления",for_entity:"Выбрать объект для отображения",for_client:"Поделиться с"},actions:{annotation:"Аннотация",annotation_text:"Чтобы добавить текст сделайте двойной клик по превью",annotation_delete:"Удалить аннотацию",annotation_redo:"Повторить аннотацию",annotation_undo:"Отменить аннотацию",annotation_big:"Большой",annotation_medium:"Средний",annotation_small:"Маленький",change_task_type:"Изменить тип задачи",comments:"Показать/Скрыть комментарии",delete:"Удалить плейлист",download:"Скачать...",edit:"Редактировать плейлист",entity_list:"Показать/Скрыть список объектов",fullscreen:"Полный экран",next_frame:"Следующий кадр",next_shot:"Следующий шот",pause:"Пауза",play:"Пуск",previous_frame:"Предыдущий кадр",previous_shot:"Предыдущий шот",save_playlist:"Сохранить плейлист",speed:"Изменить скорость",split_screen:"Двойной экран"}},productions:{current:"Выбраный проект",delete_text:"Вы уверены что хотите удалить {name} из базы данных? Пожалуйста, для подтверждения введите название проекта в текстовом поле.",delete_error:"Возникла ошибка при удалении проекта. Скорее всего к нему привязаны какие-то данные. Вы уведомления что к этому проекту не привязаны задачи, шоты или ассеты? Kitsu не позволяет удалять не пустые проекты. Если вы больше не хотите видеть это проект, можете закрыть его вместо удаления.",edit_error:"Возникла ошибка при редактировании проекта. Обратитесь в поддержку.",edit_title:"Редактировать проект",new_production:"Добавить проект",number:"проект | проекты",open_productions:"Мои проекты",picture:"Изменить картинку",title:"Проекты",home:{create_new:"Создать новый проект",empty:"У вас нет проектов в работе. Создать?",no_task:"Вам не назначено задач. Попросите задачу у супервайзера",no_prod_for_client:"У вас нет доступа к проектам. Обратитесь к заказчику для получения доступа.",title:"Проекты в работе",welcome:"Добро пожаловать в Kitsu"},fields:{fps:"FPS",name:"Название",ratio:"Соотношение сторон",resolution:"Разрешение",status:"Статус",type:"Тип"},metadata:{add_explaination:"Добавить данные специально для этого проекта.",add_failed:"Ошибка при добавлении метаданных в ваш проект.",add_new_values:"В настоящий момент нет доступных значений.",available_values:"Доступные значения",choices:"Доступные значения",delete_text:"Уверены, что хотите удалить этот столбец и связанные данные для всех ассетов этого проекта?",delete_error:"Ошибка при удалении этого столбца метаданных.",error:"Ошибка при добавлении столбца метаданных. Убедитесь, нет ли уже столбца с таким названием и что все строки заполнены. Если проблема осталась, обратитесь в поддержку.",free:"Свободные значения",title:"Добавить столбец метаданных"},status:{closed:"Закрыт",open:"Открыт",active:"Открыт",archived:"Закрыт"},type:{short:"Видео",featurefilm:"Фильм",tvshow:"ТВ шоу"}},profile:{change_avatar:"Изменить аватар",info_title:"Информация",language:"Язык",notifications_enabled:"Отправлять уведомления на почту?",notifications_slack_enabled:"Отправлять уведомления в Slack?",notifications_slack_user:"Имя пользователя в Slack",password_title:"Изменить пароль",timezone:"Часовой пояс",title:"Профиль",avatar:{title:"Изменить аватар",error_upload:"Ошибка при загрузке изображения"},change_password:{button:"Изменить пароль",error:"Ошибка при смене пароля. Подтвердите ваш текущий пароль.",success:"Ваш пароль успешно изменён!",unvalid:"Введенные пароли не совпадают или пароль слишком короткий (нужно не менее 7-ми символов)."},save:{button:"Сохранить изменения",error:"Ошибка при сохраниении изменений"}},settings:{change_logo:"Изменить логотип",integrations:"Интеграции",logo:"Логотип студии",no_logo:"Нет логотипа",set_logo:"Добавить логотип студии",title:"Настройки",fields:{name:"Название студии",hours_by_day:"Часов в день",slack_token:"Токен Slack (Опционально)",use_original_name:"Использовать оригинальное название файла при скачивании"},production:{empty_list:"Список пуст. Это значит, что все данные основных настроек доступны пользователям. Внесите изменения, чтобы ограничить доступ к этому проекту."},save:{button:"Сохранить настройки",error:"При сохранении настроек на сервере произошла ошибка"}},task_status:{create_error:"Ошибка при сохранении этого статуса задачи. Вы уверены, что нет статуса с таким же названием?",delete_text:"Уверены, что хотите удалить {name} из базы данных?",delete_error:"Ошибка при удалении статуса задачи. Вероятнее всего к нему привязаны какие-то данные. Вы уверены, что этот статус не связан с какой-либо задачей?",edit_title:"Редактировать статус задачи",number:"статус задачи | статус задачи",new_task_status:"Добавить статус задачи",title:"Статус Задачи",fields:{color:"Цвет",is_artist_allowed:"Видна художнику",is_client_allowed:"Видна клиенту",is_done:"Готово",is_reviewable:"Можно проверить",is_retake:"Отправлялся на доработку",name:"Название",short_name:"Краткое название"}},task_types:{delete_text:"Уверены, что хотите удалить {name} из базы данных?",delete_error:"Ошибка при удалении этого типа задач. Вероятнее всего к нему привязаны какие-то данные. Вы уверены, что этот статус не связан с какой-либо задачей?",edit_title:"Редактировать тип задачи",create_error:"Ошибка при создании типа задач. Убедитесь, нет ли уже типа задач с таким же названием.",new_task_type:"Добавить тип задачи",number:"тпип задачи | типы задач",title:"типы Задач",fields:{dedicated_to:"Для",color:"Цвет",name:"Название",allow_timelog:"Лог времени",priority:"Приоритет"}},sequences:{all_sequences:"Все секвенции",edit_error:"Ошибка при сохранении этой секвенции. Вы уверены, что нет секвенции с таким же названием?",delete_text:"Уверены, что хотите удалить {name} из базы данных? Все связанные шоты и превью будут удалены. Для подтверждения введите название секвенции.",delete_error:"Ошибка при удалении секвенции. Вероятнее всего к нему привязаны какие-то данные. Вы уверены, что эта секвенция не связана с каким-либо шотом?",edit_title:"Редактировать секвенцию",empty_list:"В проекте нет ни одной секвенции. Создать?",empty_list_client:"В этом проекте нет ни одной секвенции.",new_sequence:"Новая секвенция",number:"секвенция | секвенции",title:"Статистика Севенции",fields:{name:"назв.",description:"описание"}},schedule:{title:"График",title_main:"Основной график",overall_man_days:"Человеко-дни",md:"ч/д",zoom_level:"Зум",milestone:{add_milestone:"Добавить этапы для",edit_milestone:"Редактировать этапы для",name:"Назв",error:"Ошибка при добавлении или редактировании этапа. Повторите попытку."}},quota:{average:"Средний",count_label:"Счет",detail_label:"Уровень детализации",details_name:"Название",details_seconds:"Секунд",details_frames:"Кадры",month_label:"Месяц",no_quota:"Нет оценки трудозатрат для этого типа задачи",name:"Название",quota_day:"Трудозатраты в день",quota_week:"Трудозатраты в неделю",quota_month:"Трудозатраты в месяц",year_label:"Год",title:"Трудозатраны",type_label:"Тип"},shots:{casting:"Использование шота",creation_explaination:'Чтобы добавить шоты вам необходиме сначала создать эпизод и секвенции. Впишите имя эпизода внизу левого столбца и нажмите "добавить", чтобы создать новый эпизод. Выберите этот эпизод и повторите то же самое для секвенции. В конце выдерите секвенцию и в поле внизу правого столбца впишите имя шота. Нажмите "добавить" внизу. Вы создали ваш первый шот. Вы можете создать ещё! Если это не ТВ шоу, вам необходимо создать дополнительную секвенцию.',delete_text:"Уверены, что хотите удалить {name} из базы данных?",delete_error:"Ошибка при удалении шота. Вероятнее всего к нему привязаны какие-то данные. Вы уверены, что этот шот не связан с какой-либо задачей?",edit_success:"Шот {name} отредактирован.",edit_fail:"Ошибка: не удалось создать или отредактировать. Убедитесь, что вы не называете шот именем, которое уже в списке данной секвенции.",edit_title:"Редактировать шот",empty_list:"В проекте нет ни одного шота. Создать?",empty_list_client:"В этом проекте нет ни одного шота.",episodes:"Эпизоды",history:"История шота",new_shot:"Добавить шот",new_shots:"Добавить шоты",new_sequences:"Добавить секвенции",new_episodes:"Добавить эпизоды",no_casting:"Шот нигде не используется",number:"шот | шоты",manage:"Создать шоты",new_success:"Шот {name} успешно создан.",padding:"Shot Padding",restore_text:"Вы уверены, что хотите восстановить {name} в базе данных?",restore_error:"Ошибка при восстановлении шота",sequences:"Секвенции",tasks:"Задачи по Шотам",title:"Шоты",fields:{description:"Описание",nb_frames:"Кадры",episode:"Эпизод",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Название",production:"Проект",sequence:"Секвенция",time_spent:"Время"}},server_down:{text:"Обратитесь к вашему вендору, системному администратору или отделу ИТ, чтобы определить причину проблем.",title:"Ошибка при получении данных из Kitsu."},statistics:{count:"Счет",count_mode:"Тип счета",display_mode:"Тип отображения",frames:"Кадры",pie:"Круговые диаграммы",shots:"Шоты"},tasks:{add_preview:"Добавить превью",add_preview_error:"Ошибка при добавлении превью.",assign:"Назначить задачу: | Назначить {nbSelectedTasks} задач:",back_to_list:"Назад к списку",bigger:"Расширить панель задач",change_status_to:"Изменить статус задачи на:",change_preview:"Изменить превью",change_priority:"Изменить приоритет на:",clear_assignations:"Очистить назначения",comment_image:"Прикрепить изображение к комментарию",create_for_selection:"Создать задачу для пустых ячеек:",create_tasks:"Добавить задачи",create_tasks_shot:"Добавть задачи для текущих шотов",create_tasks_shot_explaination:"Вы хотите создать новые задачи данного типа для каждого шота текущего проекта. Продолжить?",create_tasks_shot_failed:"Ошибка сервера при создании задач для шотов.",create_tasks_asset:"Добавить задачи для текущих ассетов",create_tasks_asset_explaination:"Вы создадите новые задачи данного типа для каждого ассета текущего проекта. Продолжить?",create_tasks_asset_failed:"Ошибка сервера при создании задач для ассетов.",current:"Текущая задача",current_status:"Текущий статус:",delete_all_text:"Уверены, что хотите удалить все задачи типа {name}? Для подтверждения введите названия типа задач, которые хотите удалить.",delete_all_error:"Не удалось удалить все задачи данного типа.",delete_error:"Ошибка при удалении задачи",delete_comment:"Уверены, что хотите удалить последний комментарий?",delete_comment_error:"Ошибка при удалении комментария.",delete_for_selection:"Удалить выбранные задачи:",delete_preview:"Уверены, что хотите удалить это превью? ",delete_preview_error:"Ошибка при удалении превью.",edit_comment:"Редактировать комментарий",done:"Готово",download_pdf_file:"Скачать .{extension} файл",feedback:"обратная связь",full_screen:"Открыть на весь экран",hide_assignations:"Скрыть назначения",hide_infos:"Скрыть дополнительную информацию",my_tasks:"Мои задачи",next:"Следующая задача",no_assignation_right:"Вы не можете управлять назначениями",no_comment:"В настоящий момент у этой задачи нет комментариев.",no_preview:"В настоящий момент у этой задачи нет превью.",no_task_selected:"Задачи не выбраны",number:"задача | задачи",preview:"Превью",previous:"Предыдущая задача",unsubscribe_notifications:"Отписаться от уведомлений",set_estimations:"Оценить выбранные задачи:",set_preview:"Установить это превью как ярлык",set_preview_error:"Ошибка при установлении превью как ярлыка",set_preview_done:"Это превью используется как ярлык для текущего объекта",select_preview_file:"Выберите изображение с диска для использования в качестве превью текущей задачи",show_assignations:"Показать назначения",show_infos:"Показать дополнитеьную информацию",subscribe_notifications:"Подписаться на уведомления",select_image_file:"Выберите изображение с диска, которе вы хотите прикрепить к комментарию.",tasks:"Задачи",validation:"Валидация",with_comment:"С комменарием...",fields:{asset_type:"Тип ассета",assignees:"Назначенные",count:"Кол-во",due_date:"Крайний срок",duration:"Длительность",end_date:"Дата валидации",entity:"Объект",entity_name:"Название",estimated_quota:"Оценка трудозатрат",estimation:"Оценка",frames:"Кадр",last_comment:"Последний комментарий",last_comment_date:"Последний комментарий",priority:"Приоритет",production:"Проект",real_end_date:"Дата валидации",real_start_date:"WIP дата",retake_count:"Повторы",seconds:"Секунды",sequence:"Секвенция",start_date:"Дата начала",task_status:"Статус",task_status_short_name:"Статус",task_type:"Тип"},colors:{title:"Цвет",neutral:"Нейтральный",status:"Цвет стауса",late:"КРАСНЫЙ!"},priority:{emergency:"СРОЧНО!",normal:"Нормальный",high:"Высокий",very_high:"Очень высокий"}},timesheets:{detail_level:"Уровень детализации",done_tasks:"Выполненные задачи",export_timesheet:"Экспортировать План",hours:"часы",month:"Месяц",time_spents:"Затраченное время (часы)",title:"План",year:"Год"},wrong_browser:{title:"Kitsu не поддерживает ваш браузер",text:"Kitsu поддерживает только Firefox и Chrome"}},P=s("3504"),O={de:k,nl:w.default,en:b,es:C.default,fa:S,fr:T.default,pt:x.default,zh:P,ru:E};n.a.use(y["a"]);var A=new y["a"]({locale:"en",fallbackLocale:"en",messages:O}),j=A,D=(s("a630"),s("3ca3"),s("99af"),s("159b"),{install:function(e){e.directive("columns-resizable",{componentUpdated:function(e){if(e.id){e.classList.contains("resizable")||(e.className+=" resizable");var t=Array.from(e.getElementsByClassName("name")),s=Array.from(e.getElementsByClassName("metadata-descriptor")),i=t.concat(s),n=function(t,s){var i,n,a;s.addEventListener("mousedown",(function(s){n=s.target.parentElement,i=s.pageX,a=n.offsetWidth,document.addEventListener("mousemove",(function(s){if(n){var o=s.pageX-i,r=a+o+"px";n.style.minWidth=r,n.style.width=r,localStorage.setItem("".concat(e.id,"-").concat(t.textContent),r)}}))})),document.addEventListener("mouseup",(function(e){n=void 0,i=void 0,a=void 0,document.onmousemove=null}))};i.forEach((function(t){if(!t.getElementsByClassName("resizable-knob").length>0){var s=document.createElement("div");s.className="resizable-knob",t.appendChild(s),n(t,s)}var i=localStorage.getItem("".concat(e.id,"-").concat(t.textContent));i&&(t.style.minWidth=i,t.style.width=i)}))}else console.error("Resizable headers must be in a thead with an id")}})}}),M=s("8c4f"),I=(s("d3b7"),s("ddb0"),s("337f")),$=s.n(I),L=s("48c6"),F=s("7f45"),q=s.n(F),N=s("4360"),z={setLocale:function(){var e=N["a"].state.user.user.locale;j.locale=e.substring(0,2),"zh_Hans_CN"===e?q.a.locale("zh_CN"):q.a.locale(e.substring(0,2))}},R=z,V={setTimezone:function(){var e=N["a"].state.user.user.timezone||q.a.tz.guess();q.a.tz.setDefault(e)}},B=s("9fb0"),U=function(e){N["a"].commit(B["ab"]),N["a"].dispatch("loadContext").then((function(){N["a"].commit(B["Z"]),e()})).catch((function(e){console.error("An init operation failed: ",e)}))},H=U,G=s("0f9a"),K=s("ef8b"),W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"assets page"},[s("div",{staticClass:"asset-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("div",{staticClass:"flexrow"},[s("search-field",{ref:"asset-search-field",staticClass:"flexrow-item",attrs:{"can-save":!0,placeholder:"ex: props modeling=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.build_filter.title"),icon:"funnel"},on:{click:function(t){e.modals.isBuildFilterDisplayed=!0}}})],1)])]),s("div",{staticClass:"level-right flexrow"},[e.isCurrentUserClient?e._e():s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.thumbnails.title"),icon:"image"},on:{click:e.showAddThumbnailsModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload"},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:e.$t("assets.new_asset"),icon:"plus"},on:{click:e.showNewModal}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isAssetsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.assetSearchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1)]),s("sorting-info",{attrs:{label:e.$t("main.sorted_by"),sorting:e.assetSorting},on:{"clear-sorting":function(t){return e.onChangeSortClicked(null)}}}),s("asset-list",{ref:"asset-list",attrs:{"displayed-assets":e.displayedAssetsByType,"is-loading":e.isAssetsLoading||e.initialLoading,"is-error":e.isAssetsLoadingError,"validation-columns":e.assetValidationColumns},on:{"change-sort":e.onChangeSortClicked,"create-tasks":e.showCreateTasksModal,"delete-all-tasks":e.onDeleteAllTasksClicked,"new-clicked":e.showNewModal,"edit-clicked":e.onEditClicked,"delete-clicked":e.onDeleteClicked,"restore-clicked":e.onRestoreClicked,"add-metadata":e.onAddMetadataClicked,"edit-metadata":e.onEditMetadataClicked,"delete-metadata":e.onDeleteMetadataClicked,"metadata-changed":e.onMetadataChanged,"field-changed":e.onFieldChanged,scroll:e.saveScrollPosition}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-loading-stay":e.loading.stay,"is-error":e.errors.edit,"is-success":e.success.edit,"asset-to-edit":e.assetToEdit},on:{confirm:e.confirmEditAsset,confirmAndStay:e.confirmNewAssetStay,cancel:function(t){e.modals.isNewDisplayed=!1}}}),s("delete-modal",{ref:"delete-asset-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.loading.delete,"is-error":e.errors.delete,text:e.deleteText(),"error-text":e.$t("assets.delete_error")},on:{confirm:e.confirmDeleteAsset,cancel:function(t){e.modals.isDeleteDisplayed=!1}}}),s("delete-modal",{ref:"restore-asset-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.loading.restore,"is-error":e.loading.delete,text:e.restoreText(),"error-text":e.$t("assets.restore_error")},on:{confirm:e.confirmRestoreAsset,cancel:function(t){e.modals.isRestoreDisplayed=!1}}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText,"selection-option":!0},on:{confirm:e.confirmDeleteAllTasks,cancel:function(t){e.modals.isDeleteAllTasksDisplayed=!1}}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{confirm:e.confirmDeleteMetadata,cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1}}}),s("import-render-modal",{attrs:{active:e.modals.isImportRenderDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"import-error":e.errors.importingError,"parsed-csv":e.parsedCSV,"form-data":e.assetsCsvFormData,columns:e.columns,"data-matchers":e.dataMatchers,database:e.filteredAssets},on:{reupload:e.resetImport,confirm:e.uploadImportFile,cancel:e.hideImportRenderModal}}),s("import-modal",{ref:"import-modal",attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.assetsCsvFormData,columns:e.columns},on:{confirm:e.renderImport,cancel:e.hideImportModal}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.taskStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_asset"),text:e.$t("tasks.create_tasks_asset_explaination"),"error-text":e.$t("tasks.create_tasks_asset_failed")},on:{confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay,cancel:e.hideCreateTasksModal}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{confirm:e.confirmAddMetadata,cancel:function(t){e.modals.isAddMetadataDisplayed=!1}}}),s("add-thumbnails-modal",{ref:"add-thumbnails-modal",attrs:{parent:"assets",active:e.modals.isAddThumbnailsDisplayed,"is-loading":e.loading.addThumbnails,"is-error":e.errors.addThumbnails},on:{confirm:e.confirmAddThumbnails,cancel:e.hideAddThumbnailsModal}}),s("build-filter-modal",{ref:"build-filter-modal",attrs:{active:e.modals.isBuildFilterDisplayed},on:{confirm:e.confirmBuildFilter,cancel:function(t){e.modals.isBuildFilterDisplayed=!1}}})],1)},Y=[],Q=s("2909"),X=(s("841c"),s("ac1f"),s("b64b"),s("b0c0"),s("7db0"),s("a434"),s("a15b"),s("4de4"),s("c1df")),J=s.n(X),Z=s("3455"),ee=s("d359"),te=s("2229"),se=s("8c97"),ie={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{changeSearch:function(e){this.searchField.setValue(e.search_query),this.searchField.$emit("change",e.search_query),this.resizeHeaders&&this.resizeHeaders()},focusSearchField:function(){this.searchField&&this.searchField.focus()},setSearchFromUrl:function(){var e=this.searchField.getValue(),t=this.$route.query.search;!e&&t&&this.searchField.setValue(t)},setSearchInUrl:function(){var e=this.searchField.getValue();this.$route.query.search!==e&&this.$router.push({query:{search:e}})}}},ne={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{showImportModal:function(){this.modals.isImportDisplayed=!0},hideImportModal:function(){this.modals.isImportDisplayed=!1},showImportRenderModal:function(){this.modals.isImportRenderDisplayed=!0},hideImportRenderModal:function(){this.modals.isImportRenderDisplayed=!1},showCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!0},hideCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!1},showAddThumbnailsModal:function(){this.modals.isAddThumbnailsDisplayed=!0},hideAddThumbnailsModal:function(){this.modals.isAddThumbnailsDisplayed=!1}}},ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()},"sort-by-clicked":function(t){return e.onSortByTaskTypeClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()},"sort-by-clicked":function(t){return e.onSortByMetadataClicked()}}}),s("table",{staticClass:"datatable"},[s("thead",{directives:[{name:"columns-resizable",rawName:"v-columns-resizable"}],staticClass:"datatable-head",attrs:{id:"datatable-asset"}},[s("tr",[e.isTVShow?s("th",{ref:"th-episode",staticClass:"episode",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.episode"))+" ")]):e._e(),s("th",{ref:"th-name",staticClass:"name datatable-row-header",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.$t("assets.fields.name"))+" ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow-item",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetDescription?s("th",{ref:"th-description",staticClass:"description",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.description"))+" ")]):e._e(),e._l(e.assetMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item descriptor-name"},[e._v(" "+e._s(t.name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("th",{ref:"th-spent",staticClass:"time-spent",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.time_spent"))+" ")]):e._e(),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetEstimation?s("th",{ref:"th-spent",staticClass:"estimation",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("main.estimation_short"))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},attrs:{scope:"col"}},[s("div",{staticClass:"flexrow validation-content",style:e.getValidationStyle(t)},[e.isCurrentUserClient?s("span",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]):s("router-link",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions",attrs:{scope:"col"}},[e.isCurrentUserManager&&e.displayedAssets.length>0&&!e.isLoading?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)]),e._l(e.displayedAssets,(function(t,i){return!e.isLoading&&e.isListVisible?s("tbody",{key:e.getGroupKey(t,i,"asset_type_id"),staticClass:"datatable-body"},[s("tr",{staticClass:"datatable-type-header"},[s("th",{attrs:{scope:"rowgroup",colspan:e.visibleColumns}},[s("span",{staticClass:"datatable-row-header"},[e._v(" "+e._s(t[0]?t[0].asset_type_name:"")+" ")])])]),e._l(t,(function(t,n){return s("tr",{key:t.id,staticClass:"datatable-row",class:{canceled:t.canceled},attrs:{scope:"row"}},[e.isTVShow?s("td",{staticClass:"episode"},[e._v(" "+e._s(e.episodeMap[t.episode_id]?e.episodeMap[t.episode_id].name:"MP")+" ")]):e._e(),s("th",{class:{"datatable-row-header":!0,name:!0,bold:!t.canceled}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{entity:t,"empty-height":32}}),s("router-link",{staticClass:"asset-link asset-name",attrs:{tabindex:"-1",to:e.assetPath(t.id),title:t.full_name}},[e._v(" "+e._s(t.name)+" ")])],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetDescription?s("description-cell",{staticClass:"description",attrs:{editable:e.isCurrentUserManager,entry:t},on:{"description-changed":function(s){return e.onDescriptionChanged(t,s)}}}):e._e(),e._l(e.assetMetadataDescriptors,(function(a,o){return e.isShowInfos?s("td",{key:t.id+"-"+a.id,staticClass:"metadata-descriptor",attrs:{title:t.data?t.data[a.field_name]:""}},[0===a.choices.length&&e.isCurrentUserManager?s("input",{ref:"editor-"+e.getIndex(n,i)+"-"+o,refInFor:!0,staticClass:"input-editor",domProps:{value:e.getMetadataFieldValue(a,t)},on:{input:function(s){return e.onMetadataFieldChanged(t,a,s)},keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),o)}(t):null}}}):e.isCurrentUserManager?s("span",{staticClass:"select"},[s("select",{ref:"editor-"+e.getIndex(n,i)+"-"+o,refInFor:!0,staticClass:"select-input",on:{keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),o)}(t):null},change:function(s){return e.onMetadataFieldChanged(t,a,s)}}},e._l(e.getDescriptorChoicesOptions(a),(function(i,n){return s("option",{key:t.id+"-"+a.id+"-"+n+"-"+i.label+"-"+i.value,domProps:{value:i.value,selected:e.getMetadataFieldValue(a,t)==i.value}},[e._v(" "+e._s(i.label)+" ")])})),0)]):s("span",{staticClass:"metadata-value"},[e._v(" "+e._s(e.getMetadataFieldValue(a,t))+" ")])]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("td",{staticClass:"time-spent"},[e._v(" "+e._s(e.formatDuration(t.timeSpent))+" ")]):e._e(),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetEstimation?s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(n,i)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],selected:e.assetSelectionGrid[e.getIndex(n,i)][o],rowX:e.getIndex(n,i),columnY:o,minimized:e.hiddenColumns[a],"is-static":!0,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions-cell",{attrs:{entry:t},on:{"edit-clicked":function(s){return e.$emit("edit-clicked",t)},"delete-clicked":function(s){return e.$emit("delete-clicked",t)},"restore-clicked":function(s){return e.$emit("restore-clicked",t)}}}):s("td",{staticClass:"actions"})],2)}))],2):e._e()}))],2)],1),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list")))]),s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("assets.new_assets")},on:{click:function(t){return e.$emit("new-clicked")}}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list_client")))])]):e._e(),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-assets"},[e._v(" "+e._s(e.displayedAssetsLength)+" "+e._s(e.$tc("assets.number",e.displayedAssetsLength))+" ("+e._s(e.formatDuration(e.displayedAssetsTimeSpent))+" "+e._s(e.$tc("main.days_spent",e.displayedAssetsTimeSpent))+", "+e._s(e.formatDuration(e.displayedAssetsEstimation))+" "+e._s(e.$tc("main.man_days",e.displayedAssetsEstimation))+") ")])],1)},oe=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])}],re=s("0a35"),ce=s("bd69"),le=s("5097"),de=s("31f2"),ue=s("35bb"),pe=s("0fcb"),me=s("de40"),he=s("bb21"),fe=s("14b2"),_e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[s("div",{on:{click:function(t){return e.$emit("minimize-clicked")}}},[e.isMinimized?s("span",[e._v(" "+e._s(e.$t("main.maximize"))+" ")]):s("span",[e._v(e._s(e.$t("main.minimize")))])]),s("div",{on:{click:function(t){return e.$emit("sort-by-clicked")}}},[e._v(" "+e._s(e.$t("main.sort_by"))+" ")]),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-all-clicked")}}},[e._v(" "+e._s(e.$t("main.delete_all"))+" ")]):e._e()])},ve=[],ge={name:"table-header-menu",props:{isMinimized:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(c["a"])({},Object(l["c"])([])),methods:Object(c["a"])({},Object(l["b"])([]))},ye=ge,be=(s("7369"),Object(_["a"])(ye,_e,ve,!1,null,"9fb3cb4a",null)),ke=be.exports,we=s("e60b"),Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[e.isCurrentUserAdmin?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v(" "+e._s(e.$t("main.edit"))+" ")]):e._e(),s("div",{on:{click:function(t){return e.$emit("sort-by-clicked")}}},[e._v(" "+e._s(e.$t("main.sort_by"))+" ")]),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v(" "+e._s(e.$t("main.delete"))+" ")]):e._e()])},Se=[],Te={name:"table-metadata-header-menu",props:{isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(c["a"])({},Object(l["c"])([])),methods:Object(c["a"])({},Object(l["b"])([]))},xe=Te,Ee=(s("de95"),Object(_["a"])(xe,Ce,Se,!1,null,"49d47fdd",null)),Pe=Ee.exports,Oe=s("cb0e"),Ae={name:"asset-list",mixins:[le["a"],ce["a"],de["a"],ue["a"]],components:{ButtonSimple:me["a"],DescriptionCell:pe["a"],EntityThumbnail:he["a"],ChevronDownIcon:re["i"],RowActionsCell:fe["a"],TableInfo:we["a"],TableHeaderMenu:ke,TableMetadataHeaderMenu:Pe,ValidationCell:Oe["a"]},props:{displayedAssets:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},isError:{type:Boolean,default:!0},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assets","assetFilledColumns","assetMetadataDescriptors","assetSearchText","assetSelectionGrid","episodeMap","currentEpisode","currentProduction","displayedAssetsLength","displayedAssetsTimeSpent","displayedAssetsEstimation","nbSelectedTasks","isAssetDescription","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isShowAssignations","isShowInfos","isAssetEstimation","isAssetTime","isTVShow","selectedTasks","taskMap","taskTypeMap"])),{},{createTasksPath:function(){return this.getPath("create-asset-tasks")},isEmptyList:function(){return 0===this.displayedAssetsLength&&!this.isLoading&&!this.isError&&(!this.assetSearchText||0===this.assetSearchText.length)},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedAssetsLength>0},visibleColumns:function(){var e=1;return e+=this.isTVShow?1:0,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isAssetDescription?1:0,e+=this.assetMetadataDescriptors.length,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isAssetTime?1:0,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isAssetEstimation?1:0,e+=this.displayedValidationColumns.length,e},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.assetFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["displayMoreAssets"])),{},{onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreAssets()},loadMoreAssets:function(){this.displayMoreAssets()},getIndex:function(e,t){return this.getEntityLineNumber(this.displayedAssets,e,t)},newAssetPath:function(){return this.getPath("new-asset")},assetPath:function(e){return this.getPath("asset",e)},taskTypePath:function(e){var t={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"assets"}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-task-type",t.params.episode_id=this.currentEpisode.id),t},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.asset_id=t),s},onInputKeyUp:function(e,t,s){var i=this.assetMetadataDescriptors.length,n=this.displayedAssetsLength;this.keyMetadataNavigation(i,n,t,s,e.key)}}),watch:{displayedAssets:function(){this.$options.lineIndex={}},validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},je=Ae,De=(s("3581"),Object(_["a"])(je,ae,oe,!1,null,"7e0a2988",null)),Me=De.exports,Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.metadata.title"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("combobox",{directives:[{name:"focus",rawName:"v-focus"}],ref:"typeField",attrs:{label:e.$t("assets.fields.type"),options:e.typeOptions},on:{enter:e.confirm},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),s("combobox-boolean",{directives:[{name:"focus",rawName:"v-focus"}],ref:"hiddenField",attrs:{label:e.$t("assets.fields.hidden_from_client")},on:{enter:e.confirm},model:{value:e.form.for_client,callback:function(t){e.$set(e.form,"for_client",t)},expression:"form.for_client"}}),"choices"===e.type?s("div",[s("p",{staticClass:"strong"},[e._v(" "+e._s(e.$t("productions.metadata.available_values"))+" ")]),e.form.values.length>0?s("div",{ref:"valueList",staticClass:"choice-value-wrapper"},e._l(e.form.values,(function(t){return s("p",{key:t,staticClass:"choice-value"},[s("span",[e._v(" "+e._s(t)+" ")]),s("span",{staticClass:"remove-button pull-right",on:{click:function(s){return e.removeValue(t)}}},[e._v(" x ")])])})),0):s("div",[e._v(" "+e._s(e.$t("productions.metadata.add_new_values"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"addChoiceField",attrs:{"button-label":e.$t("Add value")},on:{enter:e.addValue},model:{value:e.valueToAdd,callback:function(t){e.valueToAdd=t},expression:"valueToAdd"}})],1):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("productions.metadata.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},$e=[],Le=s("d065"),Fe=s("66e7"),qe=s("992f"),Ne=s("4636"),ze=s("d5c9"),Re=s("7bf8"),Ve={name:"add-metadata-modal",mixins:[Le["a"]],components:{Combobox:qe["a"],ComboboxBoolean:Ne["a"],ModalFooter:ze["a"],TextField:Re["a"]},props:{active:{type:Boolean,default:!1},descriptorToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:"",for_client:"false",values:[]},valueToAdd:"",type:"free",typeOptions:[{label:this.$t("productions.metadata.free"),value:"free"},{label:this.$t("productions.metadata.choices"),value:"choices"}]}},mounted:function(){this.reset()},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])([])),{},{isFormFilled:function(){return this.form.name.length>0&&(this.form.values.length>0||"free"===this.type)},valueList:function(){return this.$refs.valueList}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])([])),{},{addValue:function(){var e=this,t=this.$refs.addChoiceField.value;return!this.form.values.find((function(e){return e===t}))&&t&&(this.form.values.push(t),this.valueToAdd="",this.$nextTick((function(){e.valueList.scrollTop=e.valueList.scrollHeight}))),t},confirm:function(){return"free"===this.type&&(this.form.values=[]),this.$emit("confirm",this.form)},removeValue:function(e){this.form.values=Object(Fe["f"])(this.form.values,e)},reset:function(){this.form={name:"",values:[]},this.valueToAdd="",this.descriptorToEdit.name&&(this.form={id:this.descriptorToEdit.id,name:"".concat(this.descriptorToEdit.name),values:Object(Q["a"])(this.descriptorToEdit.choices),for_client:this.descriptorToEdit.for_client?"true":"false"}),this.type=this.form.values.length>0?"choices":"free"}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},Be=Ve,Ue=(s("66c0"),Object(_["a"])(Be,Ie,$e,!1,null,"e4740810",null)),He=Ue.exports,Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{modal:!0,"is-active":e.active}},[i("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),i("div",{staticClass:"modal-content"},[i("div",{staticClass:"box content"},[i("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("entities.thumbnails.title"))+" ")]),i("p",[e._v(" "+e._s(e.$t("entities.thumbnails.explaination"))+" ")]),i("combobox-task-type",{attrs:{label:e.$t("entities.thumbnails.select_task_type"),"task-type-list":e.taskTypeList},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),i("p",[e._v(" "+e._s(e.$t("entities.thumbnails.explaination_two"))+" "+e._s(e.$t("entities.thumbnails."+e.parent+"_pattern"))+" ")]),i("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("entities.thumbnails.select_files"))+" ")]),i("file-upload",{ref:"preview-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.thumbnailList.length>0?i("label",{staticClass:"label mt2"},[e._v(" "+e._s(e.$t("entities.thumbnails.selected_files"))+" ")]):e._e(),e._l(e.thumbnailList,(function(t){return i("div",{key:t.id,staticClass:"thumbnail-line flexrow"},[t.src?e._e():i("img",{staticClass:"flexrow-item",attrs:{src:s("10de"),width:"150",height:"100"}}),t.src?i("img",{staticClass:"flexrow-item",attrs:{src:t.src,width:"150",height:"100"}}):e._e(),i("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.parentName)+" / "+e._s(t.name)+" ")]),e.loading[t.id]?i("spinner",{attrs:{size:10}}):e._e(),e.uploaded[t.id]?i("check-icon"):e._e()],1)})),i("modal-footer",{attrs:{"error-text":e.$t("entities.thumbnails.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],2)])])},Ke=[],We=(s("d81d"),s("2ca0"),s("2b3d"),s("7d26")),Ye=s("0263"),Qe=s("e4fd"),Xe=s("4085"),Je={name:"add-thumbnails-modal",mixins:[Le["a"]],components:{CheckIcon:re["g"],ComboboxTaskType:Qe["a"],FileUpload:Xe["a"],ModalFooter:ze["a"],Spinner:d["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},parent:{type:String,required:!0}},data:function(){return{extensions:".png,.jpg,.mp4,.mov",forms:[],loading:{},taskTypeId:null,uploaded:{},thumbnailList:[]}},mounted:function(){this.reset()},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetValidationColumns","shotValidationColumns","taskTypeMap","taskMap"])),{},{isFormFilled:function(){return this.thumbnailList.length>0},taskTypeList:function(){var e=this;return this.isAssets?this.assetValidationColumns.map((function(t){return e.taskTypeMap[t]})):this.shotValidationColumns.map((function(t){return e.taskTypeMap[t]}))},isAssets:function(){return this.$route.path.indexOf("assets")>-1}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])([])),{},{reset:function(){this.taskTypeList.length>0&&(this.taskTypeId=this.taskTypeList[0].id),this.$refs["preview-field"].reset&&this.$refs["preview-field"].reset(),this.thumbnailList=[],this.loading={},this.uploaded={}},confirm:function(){return this.$emit("confirm",this.forms.map(this.addTaskInformation))},addEntityToEntityMap:function(e){var t="";return t=this.isAssets?se["a"].slugify("".concat(e.asset_type_name,"_").concat(e.name)):se["a"].slugify("".concat(e.sequence_name,"_").concat(e.name)),this.entityMap[t]=e,this.entityMap},addTaskInformation:function(e){var t=this.slugifyFilename(e),s=this.entityMap[t],i=this.taskMap[s.validations[this.taskTypeId]];return e.task=i,e},onFileSelected:function(e){return this.entityMap={},this.uploaded={},this.isAssets?We["a"].cache.assets.forEach(this.addEntityToEntityMap):Ye["a"].cache.shots.forEach(this.addEntityToEntityMap),this.forms=this.filterForms(e),this.buildThumbnailList()},filterForms:function(e){var t=this;return e.filter((function(e){var s=t.slugifyFilename(e),i=t.entityMap[s];return i&&i.validations[t.taskTypeId]}))},buildThumbnailList:function(){var e=this;return this.thumbnailList=this.forms.map((function(t){var s=e.entityMap[e.slugifyFilename(t)],i=e.prepareImagePreview(t),n=e.isAssets?s.asset_type_name:s.sequence_name;return t.asset=s,{parentName:n,name:s.name,id:s.id,src:i}})),this.thumbnailList},slugifyFilename:function(e){var t=e.get("file").name;return se["a"].slugify(t.substring(0,t.length-3))},prepareImagePreview:function(e){return e.get("file").type.startsWith("image")?window.URL.createObjectURL(e.get("file")):""},markLoading:function(e){this.loading={},this.loading[e]=!0},markUploaded:function(e){this.uploaded[e]=!0}}),watch:{active:function(){this.active&&this.reset()}}},Ze=Je,et=(s("6c25"),Object(_["a"])(Ze,Ge,Ke,!1,null,"78132146",null)),tt=et.exports,st=s("c31e"),it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("page-title",{attrs:{text:e.title}}),s("p",[e._v(e._s(e.text))]),s("form",{staticClass:"widden",on:{submit:function(e){e.preventDefault()}}},[s("combobox-task-type",{attrs:{"task-type-list":e.isAssetTasks?e.assetTaskTypes:e.shotTaskTypes},model:{value:e.form.task_type_id,callback:function(t){e.$set(e.form,"task_type_id",t)},expression:"form.task_type_id"}})],1),s("div",{staticClass:"flexrow"},[s("div",{staticClass:"filler"}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.selectionOptions,"with-margin":!1},model:{value:e.selectionOnly,callback:function(t){e.selectionOnly=t},expression:"selectionOnly"}}),s("a",{class:{button:!0,"flexrow-item":!0,"is-primary":!0,"is-loading":e.isLoadingStay},on:{click:e.confirmAndStayClicked}},[e._v(" "+e._s(e.$t("main.confirmation_and_stay"))+" ")]),s("a",{class:{button:!0,"flexrow-item":!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])],1),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.errorText)+" ")]):e._e()],1)])])},nt=[],at=s("8d07"),ot={name:"create-task-modal",mixins:[Le["a"]],components:{Combobox:qe["a"],ComboboxTaskType:Qe["a"],PageTitle:at["a"]},props:{active:{type:Boolean,default:!1},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLoadingStay:{type:Boolean,default:!1},isSuccess:{type:Boolean,default:!1},text:{type:String,default:""},title:{type:String,default:""}},data:function(){return{form:{task_type_id:""},selectionOnly:"false",selectionOptions:[{label:this.$t("tasks.for_selection"),value:"true"},{label:this.$t("tasks.for_project"),value:"false"}]}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["taskTypes","assetTaskTypes","shotTaskTypes"])),{},{isAssetTasks:function(){return this.$route.path.indexOf("assets")>=0}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])([])),{},{confirmClicked:function(){this.$emit("confirm",{form:this.form,selectionOnly:"true"===this.selectionOnly})},confirmAndStayClicked:function(){this.$emit("confirm-and-stay",{form:this.form,selectionOnly:"true"===this.selectionOnly})}}),mounted:function(){this.isAssetTasks?this.assetTaskTypes.length>0&&(this.form.task_type_id=this.assetTaskTypes[0].id):this.shotTaskTypes.length>0&&(this.form.task_type_id=this.shotTaskTypes[0].id)}},rt=ot,ct=(s("2254"),Object(_["a"])(rt,it,nt,!1,null,"d28c3902",null)),lt=ct.exports,dt=s("5f48"),ut=s("813f"),pt=s("440f"),mt=s("4918"),ht=s("2c1a"),ft=s("4d04"),_t=s("55ce"),vt=function(e,t){var s=t._c;return t.props.sorting.length>0?s("div",{staticClass:"has-text-right"},[t._v(" "+t._s(t.props.label)+" "+t._s(t.props.sorting[0].name)+" "),s("a",{on:{click:function(e){return t.listeners["clear-sorting"]()}}},[t._v("x")])]):t._e()},gt=[],yt={name:"sorting-info",functional:!0,props:{label:{default:"Sorted by",type:String},sorting:{default:function(){return[]},type:Array}}},bt=yt,kt=Object(_["a"])(bt,vt,gt,!0,null,null,null),wt=kt.exports,Ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowAssignations},attrs:{title:e.$t(e.isShowAssignations?"tasks.hide_assignations":"tasks.show_assignations")},on:{click:e.toggleAssignations}},[s("users-icon",{staticClass:"icon is-small"})],1)},St=[],Tt={name:"show-assignations-button",components:{UsersIcon:re["Z"]},props:{},computed:Object(c["a"])({},Object(l["c"])(["isShowAssignations"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["showAssignations","hideAssignations"])),{},{toggleAssignations:function(){this.isShowAssignations?this.hideAssignations():this.showAssignations()}}),mounted:function(){"false"===localStorage.getItem("show-assignations")?this.hideAssignations():this.showAssignations()},watch:{isShowAssignations:function(){localStorage.setItem("show-assignations",this.isShowAssignations,{expires:"1M"})}}},xt=Tt,Et=Object(_["a"])(xt,Ct,St,!1,null,null,null),Pt=Et.exports,Ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowInfos},attrs:{title:e.$t(e.isShowInfos?"tasks.hide_infos":"tasks.show_infos")},on:{click:e.toggleInfos}},[s("database-icon",{staticClass:"icon is-small"})],1)},At=[],jt={name:"show-infos-button",components:{DatabaseIcon:re["p"]},props:{},computed:Object(c["a"])({},Object(l["c"])(["isShowInfos"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["showInfos","hideInfos"])),{},{toggleInfos:function(){this.isShowInfos?this.hideInfos():this.showInfos()}}),mounted:function(){"false"===localStorage.getItem("show-infos")?this.hideInfos():this.showInfos()},watch:{isShowInfos:function(){localStorage.setItem("show-infos",this.isShowInfos,{expires:"1M"})}}},Dt=jt,Mt=Object(_["a"])(Dt,Ot,At,!1,null,null,null),It=Mt.exports,$t=s("9d94"),Lt={name:"assets",mixins:[ie,ne],components:{AssetList:Me,AddMetadataModal:He,AddThumbnailsModal:tt,BuildFilterModal:st["a"],ButtonSimple:me["a"],CreateTasksModal:lt,DeleteModal:dt["a"],EditAssetModal:ut["a"],HardDeleteModal:ht["a"],ImportModal:pt["a"],ImportRenderModal:mt["a"],SearchField:ft["a"],SearchQueryList:_t["a"],ShowAssignationsButton:Pt,ShowInfosButton:It,SortingInfo:wt,TaskInfo:$t["a"]},data:function(){return{assetToDelete:{},assetToRestore:{},assetToEdit:{},assetFilters:[{type:"Type",value:{name:"open"}}],assetFilterTypes:["Type"],columns:["Type","Name","Description"],deleteAllTasksLockText:null,descriptorToEdit:{},errors:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,delete:!1,deleteMetadata:!1,edit:!1,restore:!1,importing:!1,importingError:null},initialLoading:!0,loading:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,deleteAllTasks:!1,deleteMetadata:!1,delete:!1,edit:!1,importing:!1,restore:!1,stay:!1,taskStay:!1},modals:{isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isBuildFilterDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isImportRenderDisplayed:!1,isNewDisplayed:!1},parsedCSV:[],success:{edit:!1}}},created:function(){this.setLastProductionScreen("assets")},mounted:function(){var e=this,t="";this.assetSearchText.length>0&&this.searchField.setValue(this.assetSearchText),this.$route.query.search&&this.$route.query.search.length>0&&(t=""+this.$route.query.search),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition),this.onSearchChange(),this.resetCsvColumns(),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition);var s=function(){e.$refs["asset-list"]&&(e.$refs["asset-search-field"].setValue(t),e.onSearchChange(),e.resetCsvColumns(),e.$refs["asset-list"].setScrollPosition(e.assetListScrollPosition))};Object.keys(this.assetMap).length<2||this.assetValidationColumns.length>0&&!Object.keys(this.assetMap)[0].validations?setTimeout((function(){e.loadAssets().then((function(){setTimeout((function(){e.initialLoading=!1,s()}),500)}))}),0):(this.isAssetsLoading||(this.initialLoading=!1),s())},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","assetsPath","assetListScrollPosition","assetsCsvFormData","assetSearchText","assetSearchQueries","assetTypes","assetValidationColumns","currentEpisode","currentProduction","displayedAssetsByType","episodeMap","openProductions","isAssetsLoading","isAssetsLoadingError","isCurrentUserClient","isCurrentUserManager","isAssetEstimation","isAssetTime","isTVShow","nbSelectedTasks","selectedTasks","assetSorting","taskTypeMap","taskTypes"])),{},{newAssetPath:function(){return this.getPath("new-asset")},addThumbnailsModal:function(){return this.$refs["add-thumbnails-modal"]},searchField:function(){return this.$refs["asset-search-field"]},filteredAssets:function(){var e=this,t={};return this.displayedAssetsByType.forEach((function(s){s.forEach((function(s){var i="";e.isTVShow&&s.episode_id&&(i+=e.episodeMap[s.episode_id].name),i+="".concat(s.asset_type_name).concat(s.name),t[i]=!0}))})),t},tvShowPageTitle:function(){var e=this.currentProduction?this.currentProduction.name:"",t="";return this.currentEpisode&&(t=this.currentEpisode.name,"all"===this.currentEpisode.id&&(t=this.$t("main.all")),"main"===this.currentEpisode.id&&(t="Main Pack")),"".concat(e," - ").concat(t)+" | ".concat(this.$t("assets.title")," - Kitsu")},shortPageTitle:function(){var e=this.currentProduction?this.currentProduction.name:"";return"".concat(e," ").concat(this.$t("assets.title")," - Kitsu")},dataMatchers:function(){return this.isTVShow?["Episode","Type","Name"]:["Type","Name"]}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["addMetadataDescriptor","changeAssetSort","commentTaskWithPreview","createTasks","deleteAllAssetTasks","deleteAsset","deleteMetadataDescriptor","editAsset","getAssetsCsvLines","loadAssets","loadEpisodes","newAsset","removeAssetSearch","restoreAsset","saveAssetSearch","setLastProductionScreen","setAssetSearch","setPreview","uploadAssetFile"])),{},{showNewModal:function(){this.assetToEdit={},this.modals.isNewDisplayed=!0},onEditClicked:function(e){this.assetToEdit=e,this.modals.isNewDisplayed=!0},onDeleteClicked:function(e){this.assetToDelete=e,this.modals.isDeleteDisplayed=!0},onRestoreClicked:function(e){this.assetToRestore=e,this.modals.isRestoreDisplayed=!0},confirmNewAssetStay:function(e){var t=this;this.loading.stay=!0,this.success.edit=!1,this.newAsset(e).then((function(){t.loading.stay=!1,t.loading.edit=!1,t.resetLightEditModal(),t.$refs["edit-asset-modal"].focusName(),t.success.edit=!0})).catch((function(e){console.error(e),t.loading.stay=!1,t.loading.edit=!1,t.success.edit=!1,t.errors.edit=!0}))},confirmEditAsset:function(e){var t=this,s="newAsset";this.loading.edit=!0,this.errors.edit=!1,this.assetToEdit&&this.assetToEdit.id&&(s="editAsset",e.id=this.assetToEdit.id),this[s](e).then((function(e){t.loading.edit=!1,t.modals.isNewDisplayed=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},confirmDeleteAsset:function(){var e=this;this.loading.delete=!0,this.errors.delete=!1,this.deleteAsset(this.assetToDelete).then((function(t){e.loading.delete=!1,e.modals.isDeleteDisplayed=!1})).catch((function(t){console.error(t),e.loading.delete=!1,e.errors.delete=!0}))},confirmRestoreAsset:function(){var e=this;this.loading.restore=!0,this.errors.restore=!1,this.restoreAsset(this.assetToRestore).then((function(t){e.loading.restore=!1,e.modals.isRestoreDisplayed=!1})).catch((function(t){console.error(t),e.loading.restore=!1,e.errors.restore=!0}))},confirmBuildFilter:function(e){this.modals.isBuildFilterDisplayed=!1,this.$refs["asset-search-field"].setValue(e),this.onSearchChange()},confirmCreateTasks:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.creatingTasks=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.hideCreateTasksModal(),t.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.taskStay=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.loading.taskStay=!1}))},runTasksCreation:function(e,t){var s=this;return this.errors.creatingTasks=!1,this.createTasks({type:"assets",task_type_id:e.task_type_id,project_id:this.currentProduction.id,selectionOnly:t}).catch((function(e){s.errors.creatingTasks=!0,console.error(e)}))},confirmDeleteAllTasks:function(e){var t=this,s=this.taskTypes.find((function(e){return e.name===t.deleteAllTasksLockText})).id,i=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllAssetTasks({projectId:i,taskTypeId:s,selectionOnly:e}).then((function(){t.loading.deleteAllTasks=!1,e||t.loadAssets(),t.modals.isDeleteAllTasksDisplayed=!1})).catch((function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0}))},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},resetLightEditModal:function(){var e={name:"",entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id};this.assetToEdit=e},resetEditModal:function(){var e={name:""};this.assetTypes.length>0&&(e.asset_type_id=this.assetTypes[0].id),e.production_id=this.currentProduction.id,this.assetToEdit=e},deleteText:function(){var e=this.assetToDelete;return e?this.$t("assets.delete_text",{name:e.name}):""},deleteAllTasksText:function(){return this.$t("tasks.delete_all_text",{name:this.deleteAllTasksLockText})},restoreText:function(){var e=this.assetToRestore;return e?this.$t("assets.restore_text",{name:e.name}):""},renderImport:function(e,t){var s=this;this.loading.importing=!0,this.errors.importing=!1,this.formData=e,"file"===t&&(e=e.get("file")),Z["a"].processCSV(e).then((function(e){s.parsedCSV=e,s.hideImportModal(),s.loading.importing=!1,s.showImportRenderModal()}))},uploadImportFile:function(e,t){var s=this,i=new FormData,n="import.csv",a=Z["a"].turnEntriesToCsvString(e),o=new File([a],n,{type:"text/csv"});i.append("file",o),this.loading.importing=!0,this.errors.importing=!1,this.$store.commit("ASSET_CSV_FILE_SELECTED",i),this.uploadAssetFile(t).then((function(){s.hideImportRenderModal(),s.loading.importing=!1,s.loadEpisodes().catch(console.error),s.loadAssets()})).catch((function(e){s.loading.importing=!1,s.errors.importing=!0,s.errors.importingError=e}))},resetImport:function(){this.errors.importing=!1,this.hideImportRenderModal(),this.$store.commit("ASSET_CSV_FILE_SELECTED",null),this.$refs["import-modal"].reset(),this.showImportModal()},onSearchChange:function(){var e=this.$refs["asset-search-field"].getValue();1!==e.length&&(this.setAssetSearch(e),this.setSearchInUrl())},saveSearchQuery:function(e){this.saveAssetSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},removeSearchQuery:function(e){this.removeAssetSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},saveScrollPosition:function(e){this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",e)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},onDeleteAllTasksClicked:function(e){var t=this.taskTypeMap[e];this.deleteAllTasksLockText=t.name,this.modals.isDeleteAllTasksDisplayed=!0},confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Asset",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},confirmAddThumbnails:function(e){var t=this,s=function(e){return t.addThumbnailsModal.markLoading(e.task.entity_id),t.commentTaskWithPreview({taskId:e.task.id,commentText:"",taskStatusId:e.task.task_status_id,form:e}).then((function(s){s.newComment;var i=s.preview;return t.setPreview({taskId:e.task.id,entityId:e.task.entity_id,previewId:i.id})})).then((function(){return t.addThumbnailsModal.markUploaded(e.task.entity_id),Promise.resolve()}))};this.loading.addThumbnails=!0,ee["a"].runPromiseMapAsSeries(e,s).then((function(){t.loading.addThumbnails=!1,t.modals.isAddThumbnailsDisplayed=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},onExportClick:function(){var e=this;this.getAssetsCsvLines().then((function(t){var s=[J()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("assets.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var i=se["a"].slugify(s.join("_")),n=e.isTVShow?["Episode"]:[];n=n.concat([e.$t("assets.fields.type"),e.$t("assets.fields.name"),e.$t("assets.fields.description")]),Object(te["d"])(Object(Q["a"])(e.currentProduction.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(e){n.push(e.name)})),e.isAssetTime&&n.push(e.$t("assets.fields.time_spent")),e.isAssetEstimation&&n.push(e.$t("main.estimation_short")),e.assetValidationColumns.forEach((function(t){n.push(e.taskTypeMap[t].name)})),Z["a"].buildCsvFile(i,[n].concat(t))}))},resetCsvColumns:function(){var e=this.isTVShow?["Episode"]:[];this.columns=e.concat(["Type","Name","Description"])},onChangeSortClicked:function(e){this.changeAssetSort(e)},onFieldChanged:function(e){var t=e.entry,s=e.fieldName,i=e.value,n={id:t.id};n[s]=i,this.editAsset(n)},onMetadataChanged:function(e){var t=e.entry,s=e.descriptor,i=e.value,n=Object(c["a"])({},t.data);n[s.field_name]=i;var a={id:t.id,source_id:t.episode_id,episode_id:t.episode_id,data:n};this.editAsset(a)},reset:function(){var e=this;this.initialLoading=!0,this.loadAssets().then((function(){e.initialLoading=!1,e.setSearchFromUrl(),e.onSearchChange()}))}}),watch:{$route:function(){if(this.$route.query){var e=this.$route.query.search,t=this.$refs["asset-search-field"].getValue();e!==t&&(this.searchField.setValue(e),this.onSearchChange())}},currentProduction:function(){this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.resetCsvColumns(),this.initialLoading=!0,this.isTVShow||this.reset()},currentEpisode:function(){this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow&&this.currentEpisode&&this.reset(),this.resetCsvColumns()},displayedAssets:function(){}},metaInfo:function(){return this.isTVShow?{title:this.tvShowPageTitle}:{title:this.shortPageTitle}}},Ft=Lt,qt=(s("021e"),Object(_["a"])(Ft,W,Y,!1,null,"22f7551c",null)),Nt=qt.exports,zt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login hero is-fullheight"},[s("div",{staticClass:"container has-text-centered"},[s("div",{staticClass:"box has-text-left"},[e._m(0),s("form",[s("div",{staticClass:"field mt1"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:e.$t("login.fields.email")},on:{input:e.updateEmail,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("mail-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icon"},[s("input",{staticClass:"input is-medium password",attrs:{type:"password",placeholder:e.$t("login.fields.password")},on:{input:e.updatePassword,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("lock-icon",{attrs:{width:"20",height:"20"}})],1)])])]),s("p",{staticClass:"control"},[s("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":e.isLoginLoading},on:{click:e.confirmLogIn}},[e._v(" "+e._s(e.$t("login.login"))+" ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isLoginError,expression:"isLoginError"}],staticClass:"control error"},[e._v(" "+e._s(e.$t("login.login_failed"))+" ")]),s("p",{staticClass:"has-text-centered"},[s("router-link",{attrs:{to:{name:"reset-password"}}},[e._v(" "+e._s(e.$t("login.forgot_password"))+" ")])],1)])])])},Rt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"has-text-centered login-header"},[i("img",{attrs:{src:s("ad6c")}}),i("h1",{staticClass:"title"},[e._v(" Kitsu ")])])}],Vt={name:"login",components:{MailIcon:re["D"],LockIcon:re["B"]},computed:Object(c["a"])({},Object(l["c"])(["isLoginLoading","isLoginError"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["logIn"])),{},{updateEmail:function(e){this.$store.dispatch("changeEmail",e.target.value)},updatePassword:function(e){this.$store.dispatch("changePassword",e.target.value)},confirmLogIn:function(){var e=this;this.logIn((function(t,s){t&&(t.default_password?e.$router.push({name:"reset-change-password",params:{token:t.token}}):console.error(t)),s&&e.$router.push("/")}))}}),metaInfo:function(){return{title:this.$t("login.title")}}},Bt=Vt,Ut=(s("ca1b"),Object(_["a"])(Bt,zt,Rt,!1,null,"813ef5c6",null)),Ht=Ut.exports,Gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("topbar"),s("action-topbar"),s("sidebar"),s("router-view")],1)},Kt=[],Wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topbar"},[s("div",{class:{"is-active":!e.isUserMenuHidden},attrs:{id:"c-mask-user-menu"},on:{click:function(t){return e.toggleUserMenu()}}}),s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-left"},[e.isCurrentUserClient?e._e():s("a",{staticClass:"nav-item sidebar-button",class:{selected:!e.isSidebarHidden},attrs:{id:"toggle-menu-button"},on:{click:function(t){return e.toggleSidebar()}}},[e._v(" ≡ ")]),e.isProductionContext?s("div",{class:{"nav-item":!0}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("combobox",{staticClass:"context-selector",attrs:{options:e.openProductionOptions,"is-top":!0},model:{value:e.currentProductionId,callback:function(t){e.currentProductionId=t},expression:"currentProductionId"}}),s("strong",[e._v(" > ")]),s("combobox",{staticClass:"context-selector",attrs:{options:e.sectionOptions,"is-top":!0},model:{value:e.currentProjectSection,callback:function(t){e.currentProjectSection=t},expression:"currentProjectSection"}}),e.isEpisodeContext?s("strong",[e._v(" > ")]):e._e(),e.isEpisodeContext?s("combobox",{staticClass:"context-selector",attrs:{options:e.currentEpisodeOptions,"is-top":!0},model:{value:e.currentEpisodeId,callback:function(t){e.currentEpisodeId=t},expression:"currentEpisodeId"}}):e._e()],1)])]):e.lastProduction&&"/open-productions"!==e.$route.path?s("div",{staticClass:"nav-item"},[s("router-link",{staticClass:"flexrow",attrs:{to:e.lastSectionPath}},[s("chevron-left-icon"),e._v(" "+e._s(e.$t("main.go_productions"))+" ")],1)],1):e._e()]),s("div",{staticClass:"nav-right"},[e.isCurrentUserArtist?s("router-link",{staticClass:"nav-item",attrs:{to:{name:"todos-tab",params:{tab:"todos"}}}},[e._v(" "+e._s(e.$t("tasks.my_tasks"))+" ")]):e._e(),e.isCurrentUserArtist?s("router-link",{staticClass:"nav-item",attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[e._v(" "+e._s(e.$t("timesheets.title"))+" ")]):e._e(),s("div",{staticClass:"nav-item"},[s("button",{staticClass:"changelog-button",attrs:{"data-canny-changelog":""}},[s("zap-icon")],1)]),s("notification-bell"),s("div",{ref:"user-name",class:{"nav-item":!0,"user-nav":!0,active:!e.isUserMenuHidden},on:{click:e.toggleUserMenu}},[s("people-avatar",{ref:"avatar",staticClass:"avatar",attrs:{"no-cache":!0,person:e.user,"is-link":!1}})],1)],1)]),s("nav",{ref:"user-menu",staticClass:"user-menu",style:{top:e.isUserMenuHidden?"-460px":"60px"}},[s("ul",[s("li",[s("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(t){return e.toggleUserMenu()}}},[e._v(" "+e._s(e.$t("main.profile"))+" ")])],1),s("li",{on:{click:e.toggleDarkTheme}},[e.isDarkTheme?s("span",[e._v(" "+e._s(e.$t("main.white_theme"))+" ")]):s("span",[e._v(" "+e._s(e.$t("main.dark_theme"))+" ")])]),s("hr"),s("li",[s("a",{attrs:{href:"https://kitsu.cg-wire.com",target:"_blank"}},[e._v(" "+e._s(e.$t("main.documentation"))+" ")])]),s("li",[s("a",{attrs:{href:"https://www.youtube.com/playlist?list=PLp_1gB5ZBHXqnQgZ4TCrAt7smxesaDo29",target:"_blank"}},[e._v(" "+e._s(e.$t("main.tutorials"))+" ")])]),s("li",[s("a",{on:{click:function(t){e.display.shortcutModal=!0}}},[e._v(" "+e._s(e.$t("keyboard.shortcuts"))+" ")])]),s("hr"),e._m(0),e._m(1),s("hr"),s("li",[s("a",{attrs:{href:"https://cg-wire.com/en/about.html",target:"_blank"}},[e._v(" "+e._s(e.$t("main.about"))+" ")])]),s("li",{staticClass:"version"},[e._v(" Kitsu "+e._s(e.kitsuVersion)+" ")]),s("hr"),s("li",{staticClass:"flexrow",on:{click:e.onLogoutClicked}},[s("log-out-icon",{staticClass:"flexrow-item",attrs:{size:"1x"}}),s("span",{staticClass:"flexrow-item"},[e._v(e._s(e.$t("main.logout")))])],1)])]),s("shortcut-modal",{attrs:{active:e.display.shortcutModal},on:{cancel:function(t){e.display.shortcutModal=!1}}})],1)},Yt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://discord.gg/VbCxtKN",target:"_blank"}},[e._v(" Discord ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://cgwire.canny.io",target:"_blank"}},[e._v(" Roadmap / Feedback ")])])}],Qt=(s("caad"),s("2532"),s("1276"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"notification-bell nav-item"},[s("router-link",{attrs:{to:{name:"notifications"}}},[s("bell-icon",{class:e.notificationBellClass}),e.isNewNotification?s("span",{staticClass:"number",attrs:{title:e.notificationCount+" "+e.$tc("notifications.unread_notifications",e.notificationCount)}},[e._v(" "+e._s(e.notificationCount)+" ")]):e._e()],1)],1)}),Xt=[],Jt={name:"notification-bell",components:{BellIcon:re["d"]},props:{isWhite:{type:Boolean,default:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["isNewNotification","notificationCount"])),{},{notificationBellClass:function(){return this.isNewNotification?{"has-notifications":!0}:this.isWhite?{"has-no-notifications":!0,white:!0}:{"has-no-notifications":!0}}})},Zt=Jt,es=(s("fa22"),Object(_["a"])(Zt,Qt,Xt,!1,null,"f0b947d2",null)),ts=es.exports,ss=s("eb8c"),is=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("keyboard.shortcuts"))+" ")]),e._l(e.shortcutGroups,(function(t){return s("div",{key:t.label,staticClass:"mt2"},[s("h3",[e._v(" "+e._s(e.$t(t.label))+" ")]),e._l(t.shortcuts,(function(t,i){return s("div",{key:"shortcut-"+i,staticClass:"shortcut"},[s("div",{staticClass:"shortcut-key-wrapper"},e._l(t.keys,(function(n,a){return s("div",{key:"shortcut-key-"+i+"-"+a},[s("span",{staticClass:"shortcut-key"},[e._v(e._s(n))]),a!==t.keys.length-1?s("span",{staticClass:"shortcut-plus"},[e._v("+ ")]):e._e()])})),0),s("span",{staticClass:"shortcut-text"},[e._v(e._s(t.text))])])}))],2)})),s("div",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],2)])])},ns=[],as={name:"shot-history-modal",mixins:[Le["a"]],components:{},props:{active:{type:Boolean,default:!1}},data:function(){return{shortcutGroups:[{label:"keyboard.navigation",shortcuts:[{keys:["Alt","←"],text:this.$t("keyboard.altleft")},{keys:["Alt","↑"],text:this.$t("keyboard.altup")},{keys:["Alt","→"],text:this.$t("keyboard.altright")},{keys:["Alt","↓"],text:this.$t("keyboard.altdown")},{keys:["Ctrl","←"],text:this.$t("keyboard.ctrlleft")},{keys:["Ctrl","↑"],text:this.$t("keyboard.ctrlup")},{keys:["Ctrl","→"],text:this.$t("keyboard.ctrlright")},{keys:["Ctrl","↓"],text:this.$t("keyboard.ctrldown")}]},{label:"keyboard.playlist_navigation",shortcuts:[{keys:["Alt","j"],text:this.$t("keyboard.altj")},{keys:["Alt","k"],text:this.$t("keyboard.altk")}]},{label:"keyboard.annotations",shortcuts:[{keys:["Ctrl","z"],text:this.$t("keyboard.undo")},{keys:["Alt","r"],text:this.$t("keyboard.redo")},{keys:["Alt","d"],text:this.$t("keyboard.draw")},{keys:["Suppr"],text:this.$t("keyboard.remove_annotation")}]}]}},mounted:function(){this.reset()},computed:Object(c["a"])({},Object(l["c"])([])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadShotHistory"])),{},{reset:function(){},formatDate:function(e){}})},os=as,rs=(s("6601"),Object(_["a"])(os,is,ns,!1,null,"64b002a2",null)),cs=rs.exports,ls=s("9224"),ds={name:"topbar",components:{Combobox:qe["a"],ChevronLeftIcon:re["j"],LogOutIcon:re["C"],NotificationBell:ts,PeopleAvatar:ss["a"],ShortcutModal:cs,ZapIcon:re["db"]},data:function(){return{currentProductionId:this.$route.params.production_id,currentEpisodeId:this.$route.params.episode_id,currentProjectSection:this.isCurrentUserClient?"playlists":"assets",kitsuVersion:ls["a"],silent:!0,display:{shortcutModal:!1}}},mounted:function(){Canny("initChangelog",{appID:"5db968118d1a9c132c168d54",position:"bottom",align:"right"}),this.currentProjectSection=this.getCurrentSectionFromRoute(),this.setProductionFromRoute()},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetsPath","currentEpisode","currentProduction","episodes","episodeOptions","isCurrentUserArtist","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserVendor","isDarkTheme","isSidebarHidden","isUserMenuHidden","isTVShow","isNewNotification","lastProductionScreen","lastProductionViewed","openProductions","openProductionOptions","productionMap","user"])),{},{assetSections:function(){return["assets","assetTypes","playlists"]},currentEpisodeOptions:function(){return this.assetSections.includes(this.currentProjectSection)||["playlists"].includes(this.currentProjectSection)?[{label:this.$t("main.all_assets"),value:"all"},{label:"Main Pack",value:"main"}].concat(this.episodeOptions):this.episodeOptions},isShotPage:function(){return this.$route.params.episode_id},isProductionContext:function(){return void 0!==this.$route.params.production_id||this.$route.path.indexOf("tasks")>0},isEpisodeContext:function(){return this.isTVShow&&this.isShotPage&&this.episodes.length>0},lastProduction:function(){var e=this.productionMap[this.lastProductionViewed];return e||(e=this.currentProduction),e},lastSectionPath:function(){var e=this.lastProduction,t=this.lastProductionScreen,s={name:t,params:{production_id:e.id}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id=e.first_episode_id),s},sectionOptions:function(){var e=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"},{label:this.$t("playlists.title"),value:"playlists"}];if(this.isCurrentUserClient){var t=e.pop();e=[t].concat(e)}else e=e.concat([{label:this.$t("news.title"),value:"newsFeed"},{label:this.$t("breakdown.title"),value:"breakdown"},{label:this.$t("schedule.title"),value:"schedule"},{label:this.$t("quota.title"),value:"quota"},{label:this.$t("people.team"),value:"team"}]),this.isCurrentUserAdmin&&(e=e.concat([{label:this.$t("settings.title"),value:"production-settings"}]));return this.isCurrentUserVendor&&(e=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"}]),this.isTVShow||this.isCurrentUserClient?this.isTVShow||e.splice(4,1):e.splice(3,1),e}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["clearEpisodes","loadEpisodes","loadMilestones","incrementNotificationCounter","logout","setProduction","setCurrentEpisode","toggleDarkTheme","toggleSidebar","toggleUserMenu"])),{},{onLogoutClicked:function(){var e=this;this.logout((function(t,s){e.$socket.disconnect(),t&&console.error(t),e.toggleUserMenu(),s&&e.$router.push("/login")}))},getCurrentSectionFromRoute:function(){var e="",t=this.$route.path.split("/");return this.isTVShow&&(e=t[5]),e||(e=t[3],"episodes"===e&&6===t.length&&(e=t[5])),"asset-types"===e&&(e="assetTypes"),"news-feed"===e&&(e="newsFeed"),e},updateContext:function(e){e?this.setProductionFromRoute():this.clearContext()},clearContext:function(){this.silent=!0,this.currentProductionId=null,this.currentProjectSection=null,this.isTVShow||(this.setCurrentEpisode(null),this.currentEpisodeId=null),this.setProduction(null),this.silent=!1},setProductionFromRoute:function(){var e=this.$route.params.production_id,t=this.$route.params.episode_id;this.isProductionChanged(e)?this.configureProduction(e):this.isEpisodeChanged(t)?this.configureEpisode(t):this.updateCombosFromRoute()},configureProduction:function(e){var t=this;this.setProduction(e),this.isTVShow?this.loadEpisodes().then((function(e){t.updateCombosFromRoute()})).catch(console.error):(this.clearEpisodes(),this.updateCombosFromRoute())},configureEpisode:function(e){var t=this;this.episodes.length<2?this.loadEpisodes().then((function(e){t.setEpisodeFromRoute(),t.updateCombosFromRoute()})).catch(console.error):(this.setEpisodeFromRoute(),this.updateCombosFromRoute())},isProductionChanged:function(e){return!this.currentProduction||this.currentProductionId!==e||this.currentProduction.id!==e},isEpisodeChanged:function(e){return this.isTVShow&&(!this.currentEpisode||this.currentEpisodeId!==e||this.currentEpisode.id!==e)},setEpisodeFromRoute:function(){var e=this.$route.params.episode_id;this.isEpisodeChanged(e)?e&&this.isTVShow&&this.setCurrentEpisode(e):e||(this.silent=!0,this.clearEpisodes(),this.currentEpisodeId=null,this.silent=!1)},updateCombosFromRoute:function(){var e=this,t=this.$route.params.production_id,s=this.$route.params.episode_id,i=this.getCurrentSectionFromRoute();this.silent=!0,this.currentProductionId=t,this.currentProjectSection=i,this.$nextTick((function(){e.currentProjectSection=null,e.$nextTick((function(){e.currentProjectSection=i,e.$nextTick((function(){e.currentEpisodeId=null,e.$nextTick((function(){e.currentEpisodeId=s,e.$nextTick((function(){e.silent=!1}))}))}))}))}))},updateRoute:function(){if(!this.silent){var e=this.$route.params.production_id,t=this.$route.params.episode_id,s=this.getCurrentSectionFromRoute(),i=this.currentProjectSection,n=i&&this.$route.path.indexOf("manage")<0,a=i!==s||e!==this.currentProductionId||this.currentEpisodeId&&t&&t!==this.currentEpisodeId;n&&a&&("newsFeed"===i&&(i="news-feed"),"assetTypes"===i&&(i="production-asset-types"),this.pushContextRoute(i))}},pushContextRoute:function(e){var t=this.assetSections.includes(e),s=this.productionMap[this.currentProductionId],i="tvshow"===s.production_type,n=this.currentEpisodeId;!n&&i&&(n=t?"all":this.episodes.length>0?this.episodes[0].id:s.first_episode_id);var a={name:e,params:{production_id:this.currentProductionId}};a=this.episodifyRoute(a,e,n,i),["assets","shots"].includes(e)&&(a.query={search:""}),a&&a.params.production_id&&this.$router.push(a).catch((function(e){console.error(e)}))},episodifyRoute:function(e,t,s,i){var n=i&&"team"!==t&&"news-feed"!==t&&"schedule"!==t&&"production-settings"!==t&&"episodes"!==t;return n?(e.name="episode-".concat(t),e.params.episode_id=s):"episodes"!==t||i||(e.name=this.isCurrentUserClient?"playlists":"assets"),e},resetEpisodeForTVShow:function(){var e=this.currentProjectSection||this.getCurrentSectionFromRoute(),t=this.assetSections.includes(e),s=["all","main"].includes(this.currentEpisodeId),i=this.productionMap[this.currentProductionId];if(i){var n="tvshow"===i.production_type;s&&(t||(this.currentEpisodeId=this.episodes.length>0?this.episodes[0].id:null)),n?t&&!this.currentEpisodeId?(this.currentEpisodeId="all",this.setCurrentEpisode(this.currentEpisodeId)):this.currentEpisode?!this.currentEpisodeId&&this.currentEpisode&&(this.currentEpisodeId=this.currentEpisode.id):(this.currentEpisodeId||(this.episodes.length>0?this.currentEpisodeId=this.episodes[0].id:this.currentEpisodeId=i.first_episode_id),this.setCurrentEpisode(this.currentEpisodeId)):this.currentEpisodeId=null}}}),watch:{$route:function(){var e=this.$route.params.production_id;e&&this.updateContext(e)},currentProductionId:function(){this.updateRoute(),this.resetEpisodeForTVShow(),this.isTVShow&&this.loadEpisodes().catch(console.error)},currentProjectSection:function(){this.silent||(this.resetEpisodeForTVShow(),this.updateRoute())},currentEpisodeId:function(){this.silent||this.updateRoute()},currentEpisode:function(){var e=this;this.silent=!0,this.currentEpisode?this.currentEpisodeId!==this.currentEpisode.id&&(this.currentEpisodeId=this.currentEpisode.id):this.currentEpisodeId=null,this.$nextTick((function(){e.silent=!1}))},currentProduction:function(){var e=this;this.$nextTick((function(){e.loadMilestones()}))}},socket:{events:{"notification:new":function(e){this.user.id===e.person_id&&"notifications"!==this.$route.name&&this.incrementNotificationCounter()},"person:update":function(e){this.user.id===e.person_id&&this.$refs.avatar.reloadAvatar()}}}},us=ds,ps=(s("f4f1"),Object(_["a"])(us,Wt,Yt,!1,null,"4e12b49a",null)),ms=ps.exports,hs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:{"action-topbar":!0,hidden:e.isHidden}},[s("div",{staticClass:"flexrow action-bar"},[s("div",{staticClass:"flexrow-item more-menu-icon",on:{click:e.toggleMenu}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.currentMenuLabel)+" ")]),s("chevron-down-icon",{staticClass:"flexrow-item"})],1)]),"assignation"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"assignation flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$tc("tasks.assign",e.nbSelectedTasks,{nbSelectedTasks:e.nbSelectedTasks}))+" ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("people-field",{ref:"assignation-field",attrs:{people:e.currentTeam},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}})],1),e.isAssignationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0,size:25}})],1):e._e(),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmAssign}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$t("main.or"))+" ")]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[s("button",{staticClass:"button is-link clear-assignation-button hide-small-screen",on:{click:e.clearAssignation}},[e._v(" "+e._s(e.$t("tasks.clear_assignations"))+" ")])]),e.isShowAssignations?e._e():s("div",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.$t("tasks.assignation_warning"))+" ")])]):s("div",{staticStyle:{"padding-left":"1em"}},[e._v(" "+e._s(e.$t("tasks.no_assignation_right"))+" ")])]):e._e(),"change-status"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.change_status_to"))+" ")]),s("div",{staticClass:"flexrow-item"},[s("combobox-status",{attrs:{"task-status-list":e.taskStatusForCurrentUser},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}})],1),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskStatusChange}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isChangeStatusLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e(),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.statusComment,expression:"statusComment"}],staticClass:"comment-text input",attrs:{type:"text",placeholder:e.$t("tasks.with_comment")},domProps:{value:e.statusComment},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.confirmTaskStatusChange(t):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.confirmTaskStatusChange(t):null}],input:function(t){t.target.composing||(e.statusComment=t.target.value)}}})])])]):e._e(),"priorities"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.change_priority"))+" ")]),s("div",{staticClass:"flexrow-item priority-combobox"},[s("combobox",{attrs:{options:e.priorityOptions},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e.isChangePriorityLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmPriorityChange}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isChangePriorityLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])]):e._e(),"tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.create_for_selection"))+" ")]),e.isCreationLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskCreation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),"playlists"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("playlists.create_for_selection"))+" ")]),s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmPlaylistGeneration}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),"delete-tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.delete_for_selection"))+" ")]),e.isDeletionLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-danger confirm-button",on:{click:e.confirmTaskDeletion}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.errors.deleteTask?s("div",{staticClass:"flexrow-item error"},[e._v(" "+e._s(e.$t("tasks.delete_error"))+" ")]):e._e()])]):e._e(),"custom-actions"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("custom_actions.run_for_selection"))+" ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox-model",{attrs:{models:e.customActions},model:{value:e.customAction,callback:function(t){e.customAction=t},expression:"customAction"}})],1),e.customAction&&!e.customAction.is_ajax?s("div",{staticClass:"flexrow-item"},[s("form",{attrs:{target:"_blank",method:"POST",action:e.customAction.url}},[s("input",{attrs:{type:"hidden",id:"personid",name:"personid"},domProps:{value:e.user.id}}),s("input",{attrs:{type:"hidden",id:"personemail",name:"personemail"},domProps:{value:e.user.email}}),s("input",{attrs:{type:"hidden",id:"projectid",name:"projectid"},domProps:{value:e.currentProduction?e.currentProduction.id:null}}),s("input",{attrs:{type:"hidden",id:"currentpath",name:"currentpath"},domProps:{value:e.currentUrl}}),s("input",{attrs:{type:"hidden",id:"currentserver",name:"currentserver"},domProps:{value:e.currentHost}}),s("input",{attrs:{type:"hidden",id:"selection",name:"selection"},domProps:{value:e.selectedTaskIds}}),s("input",{attrs:{type:"hidden",id:"entitytype",name:"entitytype"},domProps:{value:e.currentEntityType}}),s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])]):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success",on:{click:e.runCustomAction}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),s("div",{staticClass:"flexrow-item clear-selection-container has-text-right"},[s("div",{staticClass:"flexrow has-text-right"},[s("div",{staticStyle:{flex:"1"}}),s("notification-bell",{staticClass:"flexrow-item",attrs:{"is-white":!0}}),s("div",{staticClass:"clear-selection flexrow flexrow-item",on:{click:e.clearSelectedTasks}},[s("x-icon",{staticClass:"flexrow-item"}),s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$t("main.clear_selection"))+" ")])],1)],1)])]),s("div",{ref:"moreMenu",class:{"more-menu":!0,"is-hidden":e.isMoreMenuDisplayed}},[(e.isCurrentViewAsset||e.isCurrentViewShot)&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("assignation")}}},[e._v(" "+e._s(e.$t("menu.assign_tasks"))+" ")]):e._e(),e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("change-status")}}},[e._v(" "+e._s(e.$t("menu.change_status"))+" ")]):e._e(),(e.isCurrentViewAsset||e.isCurrentViewShot||e.isCurrentViewPerson)&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("priorities")}}},[e._v(" "+e._s(e.$t("menu.change_priority"))+" ")]):e._e(),(e.isCurrentViewAsset||e.isCurrentViewShot)&&!e.isCurrentViewTaskType&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("tasks")}}},[e._v(" "+e._s(e.$t("menu.create_tasks"))+" ")]):e._e(),e.isCurrentViewAsset||e.isCurrentViewShot||e.isCurrentViewTaskType?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("playlists")}}},[e._v(" "+e._s(e.$t("menu.generate_playlists"))+" ")]):e._e(),(e.isCurrentViewAsset||e.isCurrentViewShot)&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("delete-tasks")}}},[e._v(" "+e._s(e.$t("menu.delete_tasks"))+" ")]):e._e(),!e.isCurrentViewTaskType&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("custom-actions")}}},[e._v(" "+e._s(e.$t("menu.run_custom_action"))+" ")]):e._e()])]),s("div",{class:{"menu-mask":!0,"is-hidden":e.isMoreMenuDisplayed},on:{click:e.toggleMenu}}),s("view-playlist-modal",{attrs:{active:e.modals.playlist,"task-ids":e.selectedTaskIds},on:{cancel:e.hidePlaylistModal}})],1)},fs=[],_s=(s("a9e3"),s("c740"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.modelOptions,value:e.currentModelId},on:{input:e.emitValue,enter:e.emitEnter}})}),vs=[],gs={name:"combobox-model",components:{Combobox:qe["a"]},props:{label:{default:"",type:String},value:{default:function(){},type:Object},models:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{currentModelId:"",modelMap:{},modelOptions:[]}},mounted:function(){this.reset()},computed:{},methods:{emitValue:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("input",t)},emitEnter:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("enter",t)},reset:function(){var e=this;this.models.length>0&&(this.currentModelId=this.models[0].id,this.modelMap={},this.modelOptions=this.models.map((function(e){return{label:e.name,value:e.id}})),this.models.forEach((function(t){e.modelMap[t.id]=t})))}},watch:{models:function(){this.reset()}}},ys=gs,bs=Object(_["a"])(ys,_s,vs,!1,null,"59a9579e",null),ks=bs.exports,ws=s("56a0"),Cs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{dark:!0,modal:!0,"is-active":e.active},attrs:{id:"temp-playlist-modal"}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content wide"},[s("div",{staticClass:"box"},[e.isPlaylistPage?e._e():s("playlist-player",{ref:"playlist-player",attrs:{playlist:e.currentPlaylist,entities:e.currentEntities,"is-loading":e.isLoading,"temp-mode":!0,"is-asset-playlist":e.isAssetPlaylist},on:{"save-clicked":e.onSaveClicked,annotationchanged:e.onAnnotationChanged}})],1)]),s("edit-playlist-modal",{attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"playlist-to-edit":e.playlistToEdit,"type-disabled":!0},on:{confirm:e.savePlaylist,cancel:function(t){e.modals.edit=!1}}})],1)},Ss=[],Ts=(s("07ac"),s("d49e")),xs=s("1ea9"),Es={name:"view-playlist-modal",mixins:[Le["a"]],components:{EditPlaylistModal:Ts["a"],PlaylistPlayer:xs["a"]},props:{active:{default:!1,type:Boolean}},data:function(){return{currentEntities:{},currentPlaylist:{id:"temp",name:"Temporary playlist",shots:[],for_entity:"shot"},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1},playlistToEdit:{},isLoading:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentEpisode","currentProduction","isTVShow","selectedTasks","shotMap","taskMap"])),{},{isPlaylistPage:function(){return this.$route.path.indexOf("playlist")>0},taskIds:function(){return Object.keys(this.selectedTasks)},playlistPlayer:function(){return this.$refs["playlist-player"]},isAssetPlaylist:function(){return this.currentPlaylist.shots.length>0&&void 0===this.currentPlaylist.shots[0].sequence_name}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["editPlaylist","loadPlaylists","loadTempPlaylist","newPlaylist","updatePreviewAnnotation"])),{},{onAnnotationChanged:function(e){var t=e.preview,s=e.annotations,i=t.task_id;this.updatePreviewAnnotation({taskId:i,preview:t,annotations:s})},setupEntities:function(e){var t={};e.forEach((function(e){t[e.id]=e})),this.currentPlaylist.shots=Object.values(t),this.currentEntities=t},initPlaylistPlayer:function(){this.playlistPlayer.setupFabricCanvas()},onSaveClicked:function(){this.errors.editPlaylist=!1,this.playlistToEdit={for_entity:this.isAssetPlaylist?"asset":"shot"},this.modals.edit=!0},savePlaylist:function(e){var t=this,s={name:e.name,production_id:this.currentProduction.id,for_client:e.for_client,for_entity:e.for_entity,is_for_all:e.is_for_all};this.isTVShow&&this.currentEpisode&&(s.episode_id=this.currentEpisode.id),this.errors.edit=!1,this.loading.edit=!0,this.newPlaylist(s).then((function(e){Object.assign(t.currentPlaylist,{id:e.id,name:e.name,for_client:e.for_client,for_entity:e.for_entity,is_for_all:e.is_for_all}),t.editPlaylist({data:t.currentPlaylist,callback:function(e){e?t.errors.edit=!0:t.modals.edit=!1,t.loading.edit=!1,t.loadPlaylists()}})})).catch((function(e){console.error(e),t.errors.edit=!0}))}}),watch:{active:function(){var e=this;this.active?(this.currentEntities={},this.initPlaylistPlayer(),this.isLoading=!0,this.loadTempPlaylist(this.taskIds).then((function(t){e.setupEntities(t),e.isLoading=!1,e.isAssetPlaylist?e.currentPlaylist.for_entity="asset":e.currentPlaylist.for_entity="shot"})).catch(console.error)):(this.playlistPlayer.pause(),this.currentEntities={})}}},Ps=Es,Os=(s("5c0c"),Object(_["a"])(Ps,Cs,Ss,!1,null,"6ed0cf16",null)),As=Os.exports,js=s("9616"),Ds={name:"action-topbar",components:{ChevronDownIcon:re["i"],Combobox:qe["a"],ComboboxModel:ks,ComboboxStatus:ws["a"],NotificationBell:ts,PeopleField:js["a"],Spinner:d["a"],XIcon:re["cb"],ViewPlaylistModal:As},data:function(){return{currentTeam:[],customAction:{},customActions:[],isAssignationLoading:!1,isChangePriorityLoading:!1,isChangeStatusLoading:!1,isCreationLoading:!1,isDeletionLoading:!1,isMoreMenuDisplayed:!0,person:null,priority:"0",selectedBar:"assignation",selectedTaskIds:[],taskStatusId:"",statusComment:"",modals:{playlist:!1},priorityOptions:[{label:this.$t("tasks.priority.normal"),value:"0"},{label:this.$t("tasks.priority.high"),value:"1"},{label:this.$t("tasks.priority.very_high"),value:"2"},{label:this.$t("tasks.priority.emergency"),value:"3"}],errors:{deleteTask:!1}}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["allCustomActions","assetMap","assetCustomActions","currentProduction","getPersonOptions","isCurrentUserManager","isShowAssignations","nbSelectedTasks","nbSelectedValidations","organisation","people","personMap","selectedTasks","shotCustomActions","taskStatusForCurrentUser","user"])),{},{isHidden:function(){return 0===this.nbSelectedTasks&&0===this.nbSelectedValidations||!(this.isCurrentViewAsset||this.isCurrentViewTodos||this.isCurrentViewShot)},currentUrl:function(){return this.$route.path},currentHost:function(){return window.location.host},currentEntityType:function(){return this.isCurrentViewAsset?"asset":"shot"},defaultCustomAction:function(){return this.customActions.length>0?this.customActions[0]:{}},isCurrentViewAsset:function(){return this.$route.path.indexOf("asset")>0&&!this.$route.params.asset_id},isCurrentViewShot:function(){return this.$route.path.indexOf("shot")>0&&!this.$route.params.shot_id},isCurrentViewTodos:function(){return this.$route.path.indexOf("todos")>0||this.$route.path.indexOf("people/")>0},isCurrentViewPerson:function(){return this.$route.path.indexOf("people/")>0},isCurrentViewPersonTasks:function(){return this.$route.path.indexOf("todos")>0},isCurrentViewTaskType:function(){return this.$route.path.indexOf("task-type")>0},isList:function(){return this.isCurrentViewAsset||this.isCurrentViewShot},selectedPersonId:function(){return this.person?this.person.id:null},currentProductionTeam:function(){return this.currentProduction?this.currentProduction.team:[]},currentMenuLabel:function(){var e={assignation:"menu.assign_tasks","change-status":"menu.change_status",priorities:"menu.change_priority",playlists:"menu.generate_playlists",tasks:"menu.create_tasks","delete-tasks":"menu.delete_tasks","custom-actions":"menu.run_custom_action"};return this.$t(e[this.selectedBar])},storagePrefix:function(){var e="todos-";return(this.isCurrentViewAsset||this.isCurrentViewShot)&&(e="entities-"),this.isCurrentViewTaskType&&(e="tasks-"),e}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["assignSelectedTasks","createSelectedTasks","deleteSelectedTasks","unassignSelectedTasks","changeSelectedTaskStatus","changeSelectedPriorities","clearSelectedTasks","postCustomAction"])),{},{confirmAssign:function(){var e=this;this.selectedPersonId&&(this.isAssignationLoading=!0,this.assignSelectedTasks({personId:this.selectedPersonId,callback:function(){e.isAssignationLoading=!1}}))},confirmTaskStatusChange:function(){var e=this;this.isChangeStatusLoading=!0,this.taskStatusId||(this.taskStatusId=this.taskStatusForCurrentUser[0].id),this.changeSelectedTaskStatus({taskStatusId:this.taskStatusId,comment:this.statusComment}).then((function(){e.statusComment="",e.isChangeStatusLoading=!1})).catch((function(t){console.error(t),e.isChangeStatusLoading=!1}))},confirmPriorityChange:function(){var e=this;this.isChangePriorityLoading=!0,this.changeSelectedPriorities({priority:Number(this.priority),callback:function(){e.isChangePriorityLoading=!1}})},confirmTaskCreation:function(){var e=this,t=this.$route.path.indexOf("shots")>0?"shots":"assets";this.isCreationLoading=!0,this.createSelectedTasks({type:t,projectId:this.currentProduction.id}).then((function(){e.isCreationLoading=!1})).catch((function(t){e.isCreationLoading=!1,console.error(t)}))},confirmTaskDeletion:function(){var e=this;this.isDeletionLoading=!0,this.errors.deleteTask=!1,this.deleteSelectedTasks().then((function(){e.isDeletionLoading=!1})).catch((function(t){console.error(t),e.isDeletionLoading=!1,e.errors.deleteTask=!0}))},confirmPlaylistGeneration:function(){this.modals.playlist=!0},hidePlaylistModal:function(){this.modals.playlist=!1},clearAssignation:function(){var e=this;this.isAssignationLoading=!0,this.unassignSelectedTasks({callback:function(){e.isAssignationLoading=!1}})},selectBar:function(e){localStorage.setItem("".concat(this.storagePrefix,"-selected-bar"),e,{expires:"1M"}),this.selectedBar=e,this.toggleMenu()},toggleMenu:function(){this.isMoreMenuDisplayed=!this.isMoreMenuDisplayed},setCurrentTeam:function(){var e=this;return this.people.length>10&&this.currentProduction?this.currentTeam=Object(te["f"])(this.currentProduction.team.map((function(t){return e.personMap[t]}))):this.currentTeam=this.people,this.currentTeam},runCustomAction:function(){this.postCustomAction({data:{entitytype:this.currentEntityType,originurl:this.currentUrl,originserver:this.currentHost,selection:this.selectedTaskIds,productionid:this.currentProduction.id,userid:this.user.id,useremail:this.user.email},url:this.customAction.url})},onKeyDown:function(e){27===e.keyCode&&(this.modals.playlist||this.$store.commit("CLEAR_SELECTED_TASKS"))}}),mounted:function(){this.customAction=this.defaultCustomAction,this.setCurrentTeam()},watch:{isHidden:function(){if(this.isHidden)window.removeEventListener("keydown",this.onKeyDown);else{window.addEventListener("keydown",this.onKeyDown);var e=this.storagePrefix,t=localStorage.getItem("".concat(e,"-selected-bar"));t?this.selectedBar=t:this.isCurrentViewAsset||this.isCurrentViewShot?this.selectedBar="assignation":this.selectedBar="change-status"}},nbSelectedTasks:function(){var e=this;if(this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0){for(var t=!1,s=!1,i=0,n=Object.keys(this.selectedTasks);i<n.length;i++){var a=n[i],o=this.selectedTasks[a];o.sequence_name?t=!0:s=!0}if(this.customActions=t&&s?this.allCustomActions:t?this.shotCustomActions:this.assetCustomActions,this.customActions.length>0){var r=this.customAction.url&&this.customActions.findIndex((function(t){return t.id===e.customAction.id}))>=0;r||(this.customAction=this.customActions[0])}}},selectedBar:function(){var e=this;"assignation"===this.selectedBar&&this.$nextTick((function(){e.$refs["assignation-field"].focus()}))},currentProduction:function(){this.setCurrentTeam()},currentProductionTeam:function(){this.setCurrentTeam()},people:function(){this.setCurrentTeam()},$route:function(){this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0&&this.clearSelectedTasks()}}},Ms=Ds,Is=(s("2bf4"),Object(_["a"])(Ms,hs,fs,!1,null,"40afb99c",null)),$s=Is.exports,Ls=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navbar"},[i("aside",{class:{"hidden-bar":e.isSidebarHidden}},[i("div",[i("router-link",{staticClass:"home-link",attrs:{to:"/"},on:{click:function(t){return e.toggleSidebar()}}},[i("div",{staticClass:"company-logo has-text-centered"},[e.organisation&&e.organisation.has_avatar?i("img",{attrs:{src:e.logoPath}}):i("img",{attrs:{src:s("ad6c")}})])]),i("section",[e.isCurrentUserClient?e._e():i("div",[i("h2",[e._v(e._s(e.$t("main.workspace")))]),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"todos"}}},[i("check-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("tasks.my_tasks"))+" ")],1)],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"open-productions"}}},[i("film-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("productions.open_productions"))+" ")],1)],1)]),e.isCurrentUserClient||e.isCurrentUserVendor?e._e():i("div",[i("h2",[e._v(e._s(e.$t("main.studio")))]),e.isCurrentUserAdmin?i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"productions"}}},[i("film-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("productions.title"))+" ")],1)],1):e._e(),e.isCurrentUserAdmin?i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"people"}}},[i("users-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("people.title"))+" ")],1)],1):e._e(),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"timesheets"}}},[i("clock-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("timesheets.title"))+" ")],1)],1),e.isCurrentUserAdmin?i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"main-schedule"}}},[i("calendar-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("schedule.title_main"))+" ")],1)],1):e._e()]),e.isCurrentUserAdmin?i("div",[i("h2",[e._v(e._s(e.$t("main.admin")))]),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:"/task-types"}},[i("copy-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("task_types.title"))+" ")],1)],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{staticClass:"task-status-link",attrs:{to:"/task-status"}},[i("award-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("task_status.title"))+" ")],1)],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:"/asset-types"}},[i("box-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("asset_types.title"))+" ")],1)],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"custom-actions"}}},[i("git-pull-request-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("custom_actions.title"))+" ")],1)],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"settings"}}},[i("settings-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("settings.title"))+" ")],1)],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"logs"}}},[i("list-icon",{attrs:{size:"0.9x"}}),e._v(" "+e._s(e.$t("logs.title"))+" ")],1)],1)]):e._e()])],1)]),i("div",{class:{"is-active":!e.isSidebarHidden},attrs:{id:"c-mask"},on:{click:function(t){return e.toggleSidebar()}}})])},Fs=[],qs={name:"sidebar",components:{AwardIcon:re["c"],BoxIcon:re["e"],CopyIcon:re["m"],CalendarIcon:re["f"],CheckIcon:re["g"],ClockIcon:re["l"],FilmIcon:re["v"],GitPullRequestIcon:re["x"],ListIcon:re["A"],SettingsIcon:re["Q"],UsersIcon:re["Z"]},data:function(){return{title:"",logoPath:""}},mounted:function(){this.reset()},computed:Object(c["a"])({},Object(l["c"])(["isSidebarHidden","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isCurrentUserVendor","organisation"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["toggleSidebar"])),{},{reset:function(){this.title=this.organisation.name,this.logoPath="/api/pictures/thumbnails/organisations/"+"".concat(this.organisation.id,".png?t=")+(new Date).toISOString()}}),watch:{organisation:function(){this.reset()}}},Ns=qs,zs=(s("5c68"),Object(_["a"])(Ns,Ls,Fs,!1,null,"03b3aa19",null)),Rs=zs.exports,Vs={name:"main-wrapper",components:{ActionTopbar:$s,Topbar:ms,Sidebar:Rs},mounted:function(){this.$socket.connect()}},Bs=Vs,Us=(s("c266"),Object(_["a"])(Bs,Gt,Kt,!1,null,null,null)),Hs=Us.exports,Gs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"notifications page"},[e.loading.notifications||e.notifications&&0!==e.notifications.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v(" "+e._s(e.$t("notifications.no_notifications"))+" ")]),e.loading.notifications?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e(),e._l(e.notifications,(function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading.notifications,expression:"!loading.notifications"}],key:t.id,class:{notification:!0,unread:!t.read,selected:t.id===e.currentNotificationId},on:{click:function(s){return e.onNotificationSelected(t)}}},[s("div",{staticClass:"flexrow notification-line"},[s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[e.isMention(t)?s("at-sign-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isComment(t)?s("message-square-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isAssignation(t)?s("user-icon",{staticClass:"icon flexrow-item"}):e._e(),s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNotification(t),"production-id":t.project_id}})],1),s("div",{staticClass:"mt1"},[t.change?s("validation-tag",{staticClass:"validation-tag flexrow-item mt1",attrs:{task:e.buildTaskFromNotification(t)}}):e._e()],1)]),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"notification-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30}}):e._e(),s("router-link",{staticClass:"person-name flexrow-item",attrs:{to:{name:"person",params:{person_id:t.author_id}}}},[e._v(" "+e._s(e.personName(t))+" ")]),e.isComment(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.commented_on"))+" ")]):e._e(),e.isAssignation(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.assigned_you"))+" ")]):e._e(),e.isMention(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.mention_you_on"))+" ")]):e._e(),s("router-link",{staticClass:" flexrow-item",attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.project_name)+" / "+e._s(t.full_entity_name)+" ")])],1)]),(e.isComment(t)||e.isMention(t))&&t.comment_text?s("div",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(t.comment_text,t.mentions,e.personMap))}}):e._e(),t.preview_file_id?s("div",{staticClass:"flexrow"},[s("paperclip-icon",{staticClass:"icon flexrow-item"}),t.preview_file_id?s("div",{staticClass:"thumbnail-picture-wrapper flexrow-item"},[s("entity-thumbnail",{attrs:{entity:{preview_file_id:t.preview_file_id},height:40}})],1):e._e()],1):e._e(),!e.isComment(t)&&!e.isMention(t)||t.comment_text?e._e():s("div",{staticClass:"comment-text"},[e._v(" "+e._s(e.$t("comments.empty_text"))+" ")]),s("div",{staticClass:"date flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")])])])])])}))],2)]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},Ks=[],Ws=(s("fb6a"),s("0e54")),Ys=s.n(Ws),Qs=s("66be"),Xs=s("274f"),Js=s("fe13"),Zs={name:"notification-page",components:{AtSignIcon:re["b"],EntityThumbnail:he["a"],PaperclipIcon:re["H"],PeopleAvatar:ss["a"],MessageSquareIcon:re["F"],Spinner:d["a"],TaskInfo:$t["a"],TaskTypeName:Xs["a"],UserIcon:re["Y"],ValidationTag:Js["a"]},data:function(){return{loading:{more:!1,notifications:!1,currentTask:!0},errors:{notifications:!1},currentTask:null,currentNotificationId:null}},created:function(){this.clearNotifications()},mounted:function(){var e=this;this.loading.notifications=!0,this.errors.notifications=!1,this.currentTask=null,this.loadNotifications().then((function(){e.loading.notifications=!1})).catch((function(t){console.error(t),e.errors.notifications=!0}))},computed:Object(c["a"])({},Object(l["c"])(["notifications","personMap","taskTypeMap","taskStatusMap","personMap","user"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["clearNotifications","loadMoreNotifications","loadNotification","loadNotifications","loadTask","markAllNotificationsAsRead"])),{},{onBodyScroll:function(e,t){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadFollowingNotifications()},loadFollowingNotifications:function(){var e=this;this.loading.more||this.loading.notifications||(this.loading.more=!0,this.loadMoreNotifications().then((function(){e.loading.more=!1})))},entityPath:function(e){var t=this.taskTypeMap[e.task_type_id],s=t.for_shots?"shot":"asset",i={name:"task",params:{production_id:e.project_id,task_id:e.task_id,type:s}};return e.episode_id&&(i.name="episode-task",i.params.episode_id=e.episode_id),i},formatDate:function(e){var t=q.a.tz(e,"UTC");return e=q()(t.format()).fromNow(),e[0].toUpperCase()+e.slice(1)},compileMarkdown:function(e){return Ys()(e||"")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNotification:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNotification:function(e){return Object(c["a"])(Object(c["a"])({},this.taskTypeMap[e.task_type_id]),{},{episode_id:e.episode_id})},onNotificationSelected:function(e){var t=this;this.loading.currentTask=!0,this.loadTask({taskId:e.task_id}).then((function(s){t.loading.currentTask=!1,t.currentTask=s,t.currentNotificationId=e.id})).catch(console.error)},renderComment:Qs["b"],isComment:function(e){return!e.notification_type||"comment"===e.notification_type},isMention:function(e){return"mention"===e.notification_type},isAssignation:function(e){return"assignation"===e.notification_type}}),socket:{events:{"notification:new":function(e){if(this.user.id===e.person_id){var t=e.notification_id;this.loadNotification(t).catch(console.error)}},"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id;this.$store.commit("NOTIFICATION_ADD_PREVIEW",{previewId:s,commentId:t})}}},beforeDestroy:function(){this.markAllNotificationsAsRead()},metaInfo:function(){return{title:"".concat(this.$t("notifications.title")," - Kitsu")}}},ei=Zs,ti=(s("a1c5"),Object(_["a"])(ei,Gs,Ks,!1,null,"54486440",null)),si=ti.exports,ii=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"open-productions page"},[e.isOpenProductionsLoading?i("div",{staticClass:"has-text-centered"},[i("spinner")],1):e._e(),!e.isOpenProductionsLoading&&e.openProductions.length>0?i("div",{staticClass:"flexrow open-productions-header"},[i("h1",{staticClass:"title flexrow-item"},[i("img",{attrs:{src:s("ad6c"),width:"23"}}),e._v(" "+e._s(e.$t("productions.home.title"))+" ")]),i("div",{staticClass:"filler"}),e.isCurrentUserAdmin?i("div",{staticClass:"button flexrow-item"},[i("a",{on:{click:e.showNewModal}},[e._v(" "+e._s(e.$t("productions.home.create_new"))+" ")])]):e._e()]):e._e(),!e.isOpenProductionsLoading&&e.openProductions.length>0?i("div",{staticClass:"open-productions-box"},[i("img",{attrs:{src:""}}),i("div",{class:{"open-productions-list":!0,"is-grid":e.openProductions&&e.openProductions.length>4}},e._l(e.openProductions,(function(t){return i("div",{key:t.id,staticClass:"open-production has-text-centered"},[i("router-link",{attrs:{to:e.getPath(t)}},[i("div",{staticClass:"avatar has-text-centered",style:{background:e.getAvatarColor(t)}},[t.has_avatar?i("img",{attrs:{src:e.getThumbnailPath(t)}}):i("span",[e._v(" "+e._s(e.generateAvatar(t))+" ")])]),i("div",{staticClass:"production-name"},[e._v(" "+e._s(t.name)+" ")])])],1)})),0)]):i("div",{staticClass:"has-text-centered welcome"},[e._m(0),e.isCurrentUserAdmin?i("div",[i("p",{staticClass:"has-text-centered info"},[e._v(" "+e._s(e.$t("productions.home.empty"))+" ")]),i("p",{staticClass:"has-text-centered mt1"},[i("button",{staticClass:"button big-button",on:{click:e.showNewModal}},[e._v(" "+e._s(e.$t("productions.home.create_new"))+" ")])])]):e.isCurrentUserClient?i("div",[i("p",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.no_prod_for_client"))+" ")])]):e.isCurrentUserManager?e._e():i("div",[i("p",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.no_task"))+" ")])])]),i("edit-production-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-error":e.errors.edit},on:{confirm:e.confirmEditProduction,cancel:e.hideNewModal}})],1)},ni=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"kitsu-logo info"},[i("img",{attrs:{src:s("18ab")}})])}],ai=s("7930"),oi=s("1d3d"),ri={name:"open-productions",components:{EditProductionModal:oi["a"],Spinner:d["a"]},data:function(){return{errors:{edit:!1},loading:{edit:!1},modals:{isNewDisplayed:!1}}},computed:Object(c["a"])({},Object(l["c"])(["isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isOpenProductionsLoading","lastProductionScreen","openProductions"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["newProduction"])),{},{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return ai["a"].fromString(e.name)},getPath:function(e){return this.sectionPath(e,this.lastProductionScreen)},sectionPath:function(e,t){var s={name:t,params:{production_id:e.id},query:{}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id="assets"!==t?e.first_episode_id:"all"),["assets","shots"].includes(t)&&(s.query.search=""),s},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")},confirmEditProduction:function(e){var t=this;this.errors.edit=!1,this.loading.edit=!0,this.newProduction(e).then((function(){t.modals.isNewDisplayed=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},showNewModal:function(){this.modals.isNewDisplayed=!0},hideNewModal:function(){this.modals.isNewDisplayed=!1}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("productions.home.title")," - Kitsu")}}},ci=ri,li=(s("8f4d"),Object(_["a"])(ci,ii,ni,!1,null,"7e450aff",null)),di=li.exports,ui=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"news page"},[s("div",{staticClass:"timeline-wrapper"},[s("div",{staticClass:"has-text-right filler filter-button"},[s("span",{on:{click:e.toggleFilters}},[e.isFiltersDisplayed?[e._v(" "+e._s(e.$t("main.less_filters"))+" ")]:[e._v(" "+e._s(e.$t("main.more_filters"))+" ")]],2),e._v(" • "),s("span",{on:{click:e.toggleStats}},[e.isStatsDisplayed?[e._v(" "+e._s(e.$t("news.hide_stats"))+" ")]:[e._v(" "+e._s(e.$t("news.show_stats"))+" ")]],2)]),s("div",{staticClass:"filters flexrow"},[s("combobox-status",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_status"),"task-status-list":e.taskStatusList},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}}),s("combobox-task-type",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_type"),"task-type-list":e.taskTypeList},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("div",{staticClass:"field flexrow-item selector"},[s("label",{staticClass:"label person-label"},[e._v(" "+e._s(e.$t("main.person"))+" ")]),s("people-field",{attrs:{people:e.team,big:!0},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isFiltersDisplayed,expression:"isFiltersDisplayed"}],staticClass:"filters flexrow mt1"},[s("date-field",{staticClass:"flexrow-item",attrs:{"disabled-dates":{from:e.today},label:e.$t("main.from"),"with-margin":!1},model:{value:e.after,callback:function(t){e.after=t},expression:"after"}}),s("date-field",{staticClass:"flexrow-item",attrs:{label:e.$t("main.to"),"disabled-dates":{from:e.today},"with-margin":!1},model:{value:e.before,callback:function(t){e.before=t},expression:"before"}}),s("combobox",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.infos"),options:e.previewOptions},model:{value:e.previewMode,callback:function(t){e.previewMode=t},expression:"previewMode"}})],1),e.isStatsDisplayed?s("div",{staticClass:"stats mt1"},[s("span",{staticClass:"news-number"},[e._v(" "+e._s(e.newsTotal)+" "+e._s(e.$t("news.news"))+" ")]),e._l(e.renderedStats,(function(t){return[s("span",{key:"stat-value-"+t.name.toLowerCase(),staticClass:"tag stat-tag",style:{background:t.color,color:"TODO"===t.name?"#666":"white"},attrs:{title:t.name+": "+t.value}},[e._v(" "+e._s(t.name)+" : "+e._s(t.value)+" ")])]}))],2):e._e(),s("div",{staticClass:"timeline"},[e.loading.news||e.newsList&&0!==e.newsList.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v(" "+e._s(e.$t("news.no_news"))+" ")]),e.loading.news?s("div",{staticClass:"has-text-centered mt2"},[s("spinner")],1):e._e(),e._l(e.newsListByDay,(function(t){return s("div",{key:t.length>0?t[0].created_at:""},[s("div",{staticClass:"has-text-centered subtitle timeline-entry"},[s("span",{staticClass:"big-dot"}),e._v(" "+e._s(t.length>0?e.formatDay(t[0].created_at):"")+" ")]),e._l(t,(function(t){return s("div",{key:"news-"+t.id,ref:"news-"+t.id,refInFor:!0},["comments"===e.previewMode?s("div",[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v(" "+e._s(e.formatTime(t.created_at))+" ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id,"is-static":!0}})],1),s("div",{staticClass:"flexrow-item validation-wrapper"},[s("validation-tag",{staticClass:"validation-tag",attrs:{task:e.buildTaskFromNews(t),"is-static":!0,thin:!t.change}})],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"font-size":14,"is-link":!1}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v(" "+e._s(e.personName(t))+" ")]),s("span",[e._v(" "+e._s(e.$t("news.commented_on"))+" ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)],1)])])])]):e._e(),t.preview_file_id&&"previews"===e.previewMode?s("div",{staticClass:"preview"},[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v(" "+e._s(e.formatTime(t.created_at))+" ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"no-link":!0}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v(" "+e._s(e.personName(t))+" ")]),s("span",[e._v(" "+e._s(e.$t("news.set_preview_on"))+" ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)],1)])])]),"previews"==e.previewMode?s("div",{staticClass:"has-text-centered"},[s("preview-player",{attrs:{previews:[{id:t.preview_file_id,extension:t.preview_file_extension}],"read-only":!0,light:!0,big:!0}})],1):e._e()]):e._e()])}))],2)}))],2)])])]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},pi=[],mi=s("3657"),hi=s("d37c"),fi=s("6aac"),_i={name:"news-page",components:{Combobox:qe["a"],ComboboxStatus:ws["a"],ComboboxTaskType:Qe["a"],DateField:hi["a"],EntityThumbnail:he["a"],PeopleAvatar:ss["a"],PeopleField:js["a"],TaskTypeName:Xs["a"],ValidationTag:Js["a"],Spinner:d["a"],TaskInfo:$t["a"],PreviewPlayer:fi["a"]},data:function(){return{after:null,before:null,currentNewsId:null,currentPage:1,currentTask:null,isFiltersDisplayed:!1,isStatsDisplayed:!1,errors:{news:!1},loading:{more:!1,news:!1,currentTask:!0},person:null,previewMode:"comments",previewOptions:[{label:this.$t("news.only_comments"),value:"comments"},{label:this.$t("news.only_previews"),value:"previews"}],taskStatusId:"",taskTypeId:""}},mounted:function(){this.$options.silent=!0,this.previewMode=localStorage.getItem("news:preview-mode")||"comments",this.taskTypeId=localStorage.getItem("news:task-type-id")||"",this.taskStatusId=localStorage.getItem("news:task-status-id")||"",this.$options.silent=!1,window.addEventListener("keydown",this.onKeyDown,!1),(0===this.newsList.length||this.currentProduction&&this.newsList[0].project_id!==this.currentProduction.id)&&!this.loading.news&&this.init()},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentProduction","newsList","newsTotal","newsStats","newsListByDay","personMap","productionTaskStatuses","productionTaskTypes","taskStatusMap","taskTypeMap","taskStatusMap","taskStatus","taskTypes","user"])),{},{params:function(){var e={productionId:this.currentProduction.id,only_preview:"previews"===this.previewMode,page_size:"previews"===this.previewMode?6:50,task_type_id:""!==this.taskTypeId?this.taskTypeId:void 0,task_status_id:""!==this.taskStatusId?this.taskStatusId:void 0,person_id:this.person?this.person.id:void 0,page:this.currentPage,before:Object(mi["e"])(this.before),after:Object(mi["e"])(this.after)};return e},taskStatusList:function(){return[{id:"",color:"#999",short_name:this.$t("news.all")}].concat(Object(te["d"])(Object(Q["a"])(this.productionTaskStatuses)))},taskTypeList:function(){return[{id:"",color:"#999",name:this.$t("news.all")}].concat(Object(te["d"])(Object(Q["a"])(this.productionTaskTypes)))},team:function(){var e=this;return this.currentProduction.team.map((function(t){return e.personMap[t]})).sort((function(e,t){return e.full_name.localeCompare(t.full_name)}))},timezone:function(){return this.user.timezone||q.a.tz.guess()},today:function(){return q()().toDate()},renderedStats:function(){var e=this;return this.newsStats?Object.keys(this.newsStats).map((function(t){var s=e.taskStatusMap[t].short_name.toUpperCase(),i=e.taskStatusMap[t].color;return{name:s,color:i,value:e.newsStats[t]}})).sort((function(e,t){return e.name.localeCompare(t.name)})):""}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadNews","loadSingleNews","loadMoreNews","loadTask"])),{},{onKeyDown:function(e){if(this.newsList&&this.newsList.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.newsList.length-1:t-1,this.onNewsSelected(this.newsList[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.newsList.length?t=0:t+1,this.onNewsSelected(this.newsList[t]))}},loadFollowingNews:function(){var e=this;this.loading.more||this.loading.news||(this.loading.more=!0,this.currentPage+=1,this.loadMoreNews(this.params).then((function(){e.loading.more=!1})))},formatDay:function(e){var t=q.a.tz(e,"UTC").tz(this.timezone);return t.format("LL")},formatTime:function(e){var t=q.a.tz(e,"UTC").tz(this.timezone);return t.format("HH:mm")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNews:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNews:function(e){return Object(c["a"])(Object(c["a"])({},this.taskTypeMap[e.task_type_id]),{},{episode_id:e.episode_id})},onNewsSelected:function(e){var t=this;this.loading.currentTask=!0;var s=this.newsList.findIndex((function(t){return t.id===e.id}));this.lastSelection!==s?(this.lastSelection=s,this.loadTask({taskId:e.task_id}).then((function(s){t.loading.currentTask=!1,t.currentTask=s,t.currentNewsId=e.id})).catch(console.error),this.scrollToLine(e)):(this.lastSelection=-1,this.currentTask=null,this.currentNewsId="")},scrollToLine:function(e){var t=this.$refs["news-".concat(e.id)];if(t&&this.$refs.body){var s=30,i=t[0].getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),a=i.bottom>n.bottom-s,o=i.top<n.top+s;if(a){var r=i.bottom-n.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=n.top-i.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},init:function(){var e=this;this.$options.silent||(this.currentPage=1,this.loading.news=!0,this.errors.news=!1,this.currentTask=null,this.loadNews(this.params).then((function(){e.loading.news=!1})).catch((function(t){console.error(t),e.loading.news=!1,e.errors.news=!0})))},onBodyScroll:function(e,t){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&(this.newsList.length%50===0&&"comments"===this.previewMode||this.newsList.length%6===0&&"previews"===this.previewMode)&&this.loadFollowingNews()},getPreviewPath:function(e){var t=e.preview_file_id,s=e.preview_file_extension;return"/api/pictures/originals/preview-files/".concat(t,".").concat(s)},getPreviewDlPath:function(e){var t=e.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,"/download")},hasRetakeValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_retake)},hasDoneValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_done)},toggleFilters:function(){this.isFiltersDisplayed=!this.isFiltersDisplayed},toggleStats:function(){this.isStatsDisplayed=!this.isStatsDisplayed}}),socket:{events:{"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id,i=e.extension;this.$store.commit("NEWS_ADD_PREVIEW",{previewId:s,commentId:t,extension:i})},"news:new":function(e){e.project_id!==this.currentProduction.id||this.taskTypeId&&this.taskTypeId!==e.task_type_id||this.taskStatusId&&this.taskStatusId!==e.task_status_id||this.loadSingleNews({productionId:this.currentProduction.id,newsId:e.news_id})}}},watch:{currentProduction:function(){this.loading.news||this.init()},previewMode:function(){localStorage.setItem("news:preview-mode",this.previewMode),this.init()},taskTypeId:function(){localStorage.setItem("news:task-type-id",this.taskTypeId),this.init()},taskStatusId:function(){localStorage.setItem("news:task-status-id",this.taskStatusId),this.init()},person:function(){this.init()},before:function(){this.init()},after:function(){this.init()}},metaInfo:function(){return this.currentProduction?{title:"".concat(this.currentProduction.name," ").concat(this.$t("news.title")," - Kitsu")}:{title:"".concat(this.$t("news.title")," - Kitsu")}}},vi=_i,gi=(s("e962"),Object(_["a"])(vi,ui,pi,!1,null,"7681bb70",null)),yi=gi.exports,bi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"shots page"},[s("div",{staticClass:"shot-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("div",{staticClass:"flexrow"},[s("search-field",{ref:"shot-search-field",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.build_filter.title"),icon:"funnel"},on:{click:function(){return e.modals.isBuildFilterDisplayed=!0}}})],1)])]),s("div",{staticClass:"level-right"},[e.isCurrentUserClient?e._e():s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.thumbnails.title"),icon:"image"},on:{click:e.showAddThumbnailsModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload"},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:e.$t("shots.manage"),icon:"plus"},on:{click:e.showManageShots}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isShotsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.shotSearchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1)]),s("sorting-info",{attrs:{label:e.$t("main.sorted_by"),sorting:e.shotSorting},on:{"clear-sorting":function(t){return e.onChangeSortClicked(null)}}}),s("shot-list",{ref:"shot-list",attrs:{"displayed-shots":e.displayedShotsBySequence,"is-loading":e.isShotsLoading||e.initialLoading,"is-error":e.isShotsLoadingError,"validation-columns":e.shotValidationColumns},on:{"add-metadata":e.onAddMetadataClicked,"add-shots":e.showManageShots,"change-sort":e.onChangeSortClicked,"create-tasks":e.showCreateTasksModal,"delete-all-tasks":e.onDeleteAllTasksClicked,"delete-clicked":e.onDeleteClicked,"delete-metadata":e.onDeleteMetadataClicked,"edit-clicked":e.onEditClicked,"edit-metadata":e.onEditMetadataClicked,"field-changed":e.onFieldChanged,"metadata-changed":e.onMetadataChanged,"restore-clicked":e.onRestoreClicked,scroll:e.saveScrollPosition,"shot-history":e.showShotHistoryModal,"sequence-clicked":e.onSequenceClicked}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("manage-shots-modal",{attrs:{active:e.modals.isManageDisplayed,"is-loading":e.loading.manage,"is-error":!1,"is-success":!1},on:{cancel:e.hideManageShots}}),s("edit-shot-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-error":e.errors.edit,"shot-to-edit":e.shotToEdit},on:{cancel:function(t){e.modals.isNewDisplayed=!1},confirm:e.confirmEditShot}}),s("delete-modal",{ref:"delete-shot-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.loading.del,"is-error":e.errors.del,text:e.deleteText(),"error-text":e.$t("shots.delete_error")},on:{cancel:function(t){e.modals.isDeleteDisplayed=!1},confirm:e.confirmDeleteShot}}),s("delete-modal",{ref:"restore-shot-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.loading.restore,"is-error":e.errors.restore,text:e.restoreText(),"error-text":e.$t("shots.restore_error")},on:{cancel:function(t){e.modals.isDeleteDisplayed=!1},confirm:e.confirmRestoreShot}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1},confirm:e.confirmDeleteMetadata}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText,"selection-option":!0},on:{cancel:function(t){e.modals.isDeleteAllTasksDisplayed=!1},confirm:e.confirmDeleteAllTasks}}),s("import-render-modal",{attrs:{active:e.modals.isImportRenderDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"import-error":e.errors.importingError,"parsed-csv":e.parsedCSV,"form-data":e.shotsCsvFormData,columns:e.columns,dataMatchers:e.dataMatchers,database:e.filteredShots},on:{reupload:e.resetImport,cancel:e.hideImportRenderModal,confirm:e.uploadImportFile}}),s("import-modal",{ref:"import-modal",attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.shotsCsvFormData,columns:e.columns},on:{cancel:e.hideImportModal,confirm:e.renderImport}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.creatingTasksStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_shot"),text:e.$t("tasks.create_tasks_shot_explaination"),"error-text":e.$t("tasks.create_tasks_shot_failed")},on:{cancel:e.hideCreateTasksModal,confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{cancel:e.closeMetadataModal,confirm:e.confirmAddMetadata}}),s("add-thumbnails-modal",{ref:"add-thumbnails-modal",attrs:{parent:"shots",active:e.modals.isAddThumbnailsDisplayed,"is-loading":e.loading.addThumbnails,"is-error":e.errors.addThumbnails},on:{cancel:e.hideAddThumbnailsModal,confirm:e.confirmAddThumbnails}}),s("shot-history-modal",{attrs:{active:e.modals.isShotHistoryDisplayed,shot:e.historyShot},on:{cancel:e.hideShotHistoryModal}}),s("build-filter-modal",{ref:"build-filter-modal",attrs:{active:e.modals.isBuildFilterDisplayed,"entity-type":"shot"},on:{cancel:function(t){e.modals.isBuildFilterDisplayed=!1},confirm:e.confirmBuildFilter}})],1)},ki=[],wi=(s("a4d3"),s("e01a"),s("162b")),Ci=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("page-title",{staticClass:"title",attrs:{text:e.$t("shots.manage")}}),s("div",{staticClass:"explaination"},[e._v(e._s(e.$t("shots.creation_explaination")))]),s("div",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{ref:"shot-padding",staticClass:"shot-padding flexrow-item",attrs:{label:e.$t("shots.padding"),options:e.shotPaddingOptions},model:{value:e.shotPadding,callback:function(t){e.shotPadding=t},expression:"shotPadding"}})],1)]),s("div",{staticClass:"shot-columns"},[e.isTVShow?s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.episodes")))]),s("div",{staticClass:"list"},e._l(e.episodes,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedEpisodeId},on:{click:function(s){return e.selectEpisode(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.episode,expression:"names.episode"},{name:"focus",rawName:"v-focus"}],ref:"addEpisodeInput",staticClass:"input",attrs:{placeholder:"EP01",type:"text"},domProps:{value:e.names.episode},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddSequence(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addEpisode(t)}],input:function(t){t.target.composing||e.$set(e.names,"episode",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addEpisode},attrs:{disabled:!e.isAddEpisodeAllowed},on:{click:e.addEpisode}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])]):e._e(),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.sequences")))]),s("div",{staticClass:"list"},e._l(e.displayedSequences,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedSequenceId},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddShot(t)},click:function(s){return e.selectSequence(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.sequence,expression:"names.sequence"}],ref:"addSequenceInput",staticClass:"input",attrs:{placeholder:"SQ01",type:"text"},domProps:{value:e.names.sequence},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSequence(t)},input:function(t){t.target.composing||e.$set(e.names,"sequence",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addSequence},attrs:{disabled:!e.isAddSequenceAllowed},on:{click:e.addSequence}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.title")))]),s("div",{staticClass:"list"},e._l(e.displayedShots,(function(t){return s("div",{key:t.id,staticClass:"entity-line"},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.shot,expression:"names.shot"}],ref:"addShotInput",staticClass:"input",attrs:{placeholder:"SH01",type:"text"},domProps:{value:e.names.shot},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addShot(t)},input:function(t){t.target.composing||e.$set(e.names,"shot",t.target.value)}}})]),s("div",{staticClass:"field"},[s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addShot},attrs:{disabled:!e.isAddShotAllowed||e.loading.addShot},on:{click:e.addShot}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])])]),s("p",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.close"))+" ")])])],1)])])},Si=[],Ti={name:"manage-shot-modal",mixins:[Le["a"]],components:{Combobox:qe["a"],PageTitle:at["a"]},props:{active:{default:!0,type:Boolean}},data:function(){return{names:{episode:"",sequence:"",shot:""},loading:{addEpisode:!1,addSequence:!1,addShot:!1},displayedSequences:[],displayedShots:[],selectedEpisodeId:null,selectedSequenceId:null,shotPaddingOptions:[{label:"1",padding:"1"},{label:"2",padding:"2"},{label:"10",padding:"10"}],shotPadding:"1"}},watch:{active:function(){var e=this;this.active&&(this.shotPadding="1",setTimeout((function(){e.isTVShow?e.$refs.addEpisodeInput.focus():e.$refs.addSequenceInput.focus()}),100))},sequences:function(){this.displayedSequences=this.sequences,this.displayedShots=[]}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentProduction","episodes","isTVShow","sequences","shotMap"])),{},{isAddEpisodeAllowed:function(){var e=this,t=""===this.names.episode,s=this.episodes.find((function(t){return e.names.episode===t.name}));return!t&&!s},isAddSequenceAllowed:function(){var e=this,t=""===this.names.sequence,s=this.displayedSequences.find((function(t){return e.names.sequence===t.name}));return!t&&!s&&(this.selectedEpisodeId||!this.isTVShow)},isAddShotAllowed:function(){var e=this,t=""===this.names.shot,s=this.displayedShots.find((function(t){return e.names.shot===t.name}));return!t&&!s&&this.selectedSequenceId}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["newEpisode","newSequence","newShot","setCurrentEpisode"])),{},{focusAddSequence:function(){this.$refs.addSequenceInput.focus()},focusAddShot:function(){this.$refs.addShotInput.focus()},selectEpisode:function(e){this.isTVShow?(this.selectedEpisodeId=e,this.$router.push({name:"episode-shots",params:{production_id:this.currentProduction.id,episode_id:e}})):(this.selectedEpisodeId=e,this.displayedSequences=this.sequences.filter((function(t){return t.parent_id===e})),this.displayedShots=[])},selectSequence:function(e){this.selectedSequenceId=e,this.displayedShots=Object.values(this.shotMap).filter((function(t){return t.sequence_id===e}))},addEpisode:function(){var e=this;if(this.isAddEpisodeAllowed){var t=this.names.episode;if(t.length>0){this.loading.addEpisode=!0;var s={name:this.names.episode,project_id:this.currentProduction.id};this.newEpisode(s).then((function(t){e.loading.addEpisode=!1,e.selectEpisode(t.id),e.names.episode=se["a"].generateNextName(t.name)})).catch(console.error)}}},addSequence:function(){var e=this;if(this.isAddSequenceAllowed){var t=this.names.sequence;if(t.length>0&&(this.selectedEpisodeId||!this.isTVShow)){this.loading.addSequence=!0;var s={name:this.names.sequence,episode_id:this.selectedEpisodeId,project_id:this.currentProduction.id};this.newSequence(s).then((function(t){e.loading.addSequence=!1,e.selectEpisode(e.selectedEpisodeId),e.selectSequence(t.id),e.names.sequence=se["a"].generateNextName(t.name)})).catch(console.error)}}},addShot:function(){var e=this;if(this.isAddShotAllowed&&!this.loading.addShot){var t=this.names.shot;if(this.loading.addShot=!0,t.length>0&&this.selectedSequenceId){var s={name:this.names.shot,sequence_id:this.selectedSequenceId,project_id:this.currentProduction.id};this.newShot(s).then((function(t){e.loading.addShot=!1,e.selectSequence(e.selectedSequenceId),e.names.shot=se["a"].generateNextName(t.name,parseInt(e.shotPadding))})).catch(console.error)}}}})},xi=Ti,Ei=(s("1b99"),Object(_["a"])(xi,Ci,Si,!1,null,"812a5366",null)),Pi=Ei.exports,Oi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.history"))+" ")]),s("table",{ref:"headerWrapper",staticClass:"table"},[s("thead",{staticClass:"table-header"},[s("tr",[s("th",{staticClass:"date"},[e._v(e._s(e.$t("main.date")))]),s("th",{staticClass:"name"},[e._v(e._s(e.$t("shots.fields.name")))]),s("th",{staticClass:"frame-in"},[e._v(e._s(e.$t("shots.fields.frame_in")))]),s("th",{staticClass:"frame-out"},[e._v(e._s(e.$t("shots.fields.frame_out")))]),s("th",{staticClass:"person table-filler"},[e._v(e._s(e.$t("shots.fields.person")))])])])]),e.isLoading?e._e():s("div",{staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{staticClass:"table-body"},e._l(e.versions,(function(t){return s("tr",{key:t.id,staticClass:"shot-version"},[s("td",{staticClass:"date"},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(t.name)+" ")]),s("td",{staticClass:"frame-in"},[e._v(" "+e._s(t.data.frame_in)+" ")]),s("td",{staticClass:"frame-out"},[e._v(" "+e._s(t.data.frame_out)+" ")]),s("td",{staticClass:"person table-filler"},[e._v(" "+e._s(e.getPersonFullName(t.person_id))+" ")])])})),0)])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),s("div",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},Ai=[],ji={name:"shot-history-modal",mixins:[Le["a"]],components:{TableInfo:we["a"]},props:{active:{type:Boolean,default:!1},shot:{type:Object,default:function(){}}},data:function(){return{isError:!1,isLoading:!1,versions:[]}},mounted:function(){this.reset()},computed:Object(c["a"])({},Object(l["c"])(["personMap"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadShotHistory"])),{},{formatDate:function(e){return Object(mi["c"])(e)},getPersonFullName:function(e){var t=this.personMap[e];return t?t.full_name:""},loadData:function(){var e=this;return this.isError=!1,this.isLoading=!0,this.loadShotHistory(this.shot.id).then((function(t){e.versions=t,e.isLoading=!1})).catch((function(t){console.error(t),e.isLoading=!1,e.isError=!0}))},reset:function(){this.versions=[],this.isError=!1,this.isLoading=!1}}),watch:{active:function(){this.active&&(this.reset(),this.loadData())}}},Di=ji,Mi=(s("5f18"),Object(_["a"])(Di,Oi,Ai,!1,null,"75ba8e42",null)),Ii=Mi.exports,$i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()},"sort-by-clicked":function(t){return e.onSortByTaskTypeClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()},"sort-by-clicked":function(t){return e.onSortByMetadataClicked()}}}),s("table",{staticClass:"datatable"},[s("thead",{directives:[{name:"columns-resizable",rawName:"v-columns-resizable"}],staticClass:"datatable-head",attrs:{id:"datatable-shot"}},[s("tr",[s("th",{ref:"th-shot",staticClass:"name shot-name datatable-row-header",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.$t("shots.fields.name"))+" ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotDescription?s("th",{staticClass:"description",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.description"))+" ")]):e._e(),e._l(e.shotMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item datatable-dropdown"},[e._v(" "+e._s(t.name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),e.isFrames&&e.isShowInfos?s("th",{staticClass:"frames",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.nb_frames"))+" ")]):e._e(),e.isFrameIn&&e.isShowInfos?s("th",{staticClass:"framein",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.frame_in"))+" ")]):e._e(),e.isFrameOut&&e.isShowInfos?s("th",{staticClass:"frameout",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.frame_out"))+" ")]):e._e(),e.isFps&&e.isShowInfos?s("th",{staticClass:"fps",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.fps"))+" ")]):e._e(),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotTime?s("th",{ref:"th-spent",staticClass:"time-spent",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.time_spent"))+" ")]):e._e(),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotEstimation?s("th",{ref:"th-spent",staticClass:"estimation",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("main.estimation_short"))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},attrs:{scope:"col"}},[s("div",{staticClass:"flexrow validation-content",style:e.getValidationStyle(t)},[e.isCurrentUserClient?s("span",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]):s("router-link",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions",attrs:{scope:"col"}},[e.isCurrentUserManager?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)]),e._l(e.displayedShots,(function(t,i){return!e.isLoading&&e.isListVisible?s("tbody",{key:e.getGroupKey(t,i,"sequence_id"),staticClass:"datatable-body"},[s("tr",{staticClass:"datatable-type-header"},[s("th",{attrs:{scope:"rowgroup",colspan:e.visibleColumns}},[s("span",{staticClass:"datatable-row-header",on:{click:function(s){return e.$emit("sequence-clicked",t[0].sequence_name)}}},[e._v(" "+e._s(t[0]?t[0].sequence_name:"")+" ")])])]),e._l(t,(function(t,n){return s("tr",{key:t.id,staticClass:"datatable-row",class:{canceled:t.canceled}},[s("th",{class:{"datatable-row-header":!0,"shot-name":!0,name:!0,bold:!t.canceled},attrs:{scope:"row"}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{entity:t,"empty-height":32}}),s("router-link",{attrs:{tabindex:"-1",title:t.full_name,to:e.shotPath(t.id)}},[e._v(" "+e._s(t.name)+" ")])],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotDescription?s("description-cell",{staticClass:"description",attrs:{entry:t,editable:e.isCurrentUserManager},on:{"description-changed":function(s){return e.onDescriptionChanged(t,s)}}}):e._e(),e._l(e.shotMetadataDescriptors,(function(a,o){return e.isShowInfos?s("td",{key:t.id+"-"+a.id,staticClass:"metadata-descriptor"},[0===a.choices.length&&e.isCurrentUserManager?s("input",{ref:"editor-"+e.getIndex(n,i)+"-"+o,refInFor:!0,staticClass:"input-editor",domProps:{value:e.getMetadataFieldValue(a,t)},on:{input:function(s){return e.onMetadataFieldChanged(t,a,s)},keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),o)}(t):null}}}):e.isCurrentUserManager?s("span",{staticClass:"select"},[s("select",{ref:"editor-"+e.getIndex(n,i)+"-"+o,refInFor:!0,staticClass:"select-input",on:{keydown:function(t){return t.ctrlKey?e.pauseEvent(t):null},keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),o)}(t):null},change:function(s){return e.onMetadataFieldChanged(t,a,s)}}},e._l(e.getDescriptorChoicesOptions(a),(function(i,n){return s("option",{key:t.id+"-"+a.id+"-"+n+"-"+i.label+"-"+i.value,domProps:{value:i.value,selected:e.getMetadataFieldValue(a,t)==i.value}},[e._v(" "+e._s(i.label)+" ")])})),0)]):s("span",{staticClass:"metadata-value"},[e._v(" "+e._s(e.getMetadataFieldValue(a,t))+" ")])]):e._e()})),e.isFrames&&e.isShowInfos?s("td",{staticClass:"frames"},[e.isCurrentUserManager?s("input",{ref:"editor-"+e.getIndex(n,i)+"-"+e.descriptorLength,refInFor:!0,staticClass:"input-editor",attrs:{step:"1",type:"number",min:"0"},domProps:{value:t.nb_frames},on:{input:function(s){return e.onNbFramesChanged(t,s.target.value)},keydown:e.onNumberFieldKeyDown,keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),e.descriptorLength)}(t):null}}}):s("span",{staticClass:"metadata-value"},[e._v(" "+e._s(t.nb_frames)+" ")])]):e._e(),e.isFrameIn&&e.isShowInfos?s("td",{staticClass:"framein"},[e.isCurrentUserManager?s("input",{ref:"editor-"+e.getIndex(n,i)+"-"+(e.descriptorLength+1),refInFor:!0,staticClass:"input-editor",attrs:{step:"1",type:"number",min:"0"},domProps:{value:e.getMetadataFieldValue({field_name:"frame_in"},t)},on:{input:function(s){return e.onMetadataFieldChanged(t,{field_name:"frame_in"},s)},keydown:e.onNumberFieldKeyDown,keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),e.descriptorLength+1)}(t):null}}}):s("span",{staticClass:"metadata-value"},[e._v(" "+e._s(e.getMetadataFieldValue({field_name:"frame_in"},t))+" ")])]):e._e(),e.isFrameOut&&e.isShowInfos?s("td",{staticClass:"frameout"},[e.isCurrentUserManager?s("input",{ref:"editor-"+e.getIndex(n,i)+"-"+(e.descriptorLength+2),refInFor:!0,staticClass:"input-editor",attrs:{step:"1",type:"number",min:"0"},domProps:{value:e.getMetadataFieldValue({field_name:"frame_out"},t)},on:{keydown:e.onNumberFieldKeyDown,input:function(s){return e.onMetadataFieldChanged(t,{field_name:"frame_out"},s)},keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),e.descriptorLength+2)}(t):null}}}):s("span",{staticClass:"metadata-value"},[e._v(" "+e._s(e.getMetadataFieldValue({field_name:"frame_out"},t))+" ")])]):e._e(),e.isFps&&e.isShowInfos?s("td",{staticClass:"fps"},[e.isCurrentUserManager?s("input",{ref:"editor-"+e.getIndex(n,i)+"-"+(e.descriptorLength+3),refInFor:!0,staticClass:"input-editor",attrs:{step:"1",type:"number"},domProps:{value:e.getMetadataFieldValue({field_name:"fps"},t)},on:{keydown:e.onNumberFieldKeyDown,input:function(s){return e.onMetadataFieldChanged(t,{field_name:"fps"},s)},keyup:function(t){return t.ctrlKey?function(t){return e.onInputKeyUp(t,e.getIndex(n,i),e.descriptorLength+3)}(t):null}}}):s("span",{staticClass:"metadata-value"},[e._v(" "+e._s(e.getMetadataFieldValue({field_name:"fps"},t))+" ")])]):e._e(),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotTime?s("td",{staticClass:"time-spent"},[e._v(" "+e._s(e.formatDuration(t.timeSpent))+" ")]):e._e(),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotEstimation?s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(n,i)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],minimized:e.hiddenColumns[a],selected:e.shotSelectionGrid[e.getIndex(n,i)][o],rowX:e.getIndex(n,i),columnY:o,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions-cell",{attrs:{entry:t,"hide-history":!1},on:{"delete-clicked":function(s){return e.$emit("delete-clicked",t)},"edit-clicked":function(s){return e.$emit("edit-clicked",t)},"history-clicked":function(s){return e.$emit("shot-history",t)},"restore-clicked":function(s){return e.$emit("restore-clicked",t)}}}):s("td",{staticClass:"actions"})],2)}))],2):e._e()}))],2)],1),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list")))]),s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("shots.new_shots")},on:{click:function(t){return e.$emit("add-shots")}}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list_client")))])]):e._e(),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-shots"},[e._v(" "+e._s(e.displayedShotsLength)+" "+e._s(e.$tc("shots.number",e.displayedShotsLength))+" ("+e._s(e.formatDuration(e.displayedShotsTimeSpent))+" "+e._s(e.$tc("main.days_spent",e.displayedShotsTimeSpent))+", "+e._s(e.formatDuration(e.displayedShotsEstimation))+" "+e._s(e.$tc("main.man_days",e.displayedShotsEstimation))+", "+e._s(e.displayedShotsFrames)+" "+e._s(e.$tc("main.nb_frames",e.displayedShotsFrames))+") ")])],1)},Li=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])}],Fi=s("eb23"),qi={name:"shot-list",mixins:[ce["a"],Fi["a"],de["a"],le["a"],ue["a"]],props:{displayedShots:{type:Array,default:function(){return[]}},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonSimple:me["a"],ChevronDownIcon:re["i"],DescriptionCell:pe["a"],EntityThumbnail:he["a"],RowActionsCell:fe["a"],TableHeaderMenu:ke,TableMetadataHeaderMenu:Pe,TableInfo:we["a"],ValidationCell:Oe["a"]},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentProduction","currentEpisode","displayedShotsEstimation","displayedShotsLength","displayedShotsTimeSpent","displayedShotsFrames","isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isFps","isFrames","isFrameIn","isFrameOut","isSingleEpisode","isShotDescription","isShotEstimation","isShotTime","isShowAssignations","isShowInfos","isTVShow","nbSelectedTasks","shotFilledColumns","shotMap","shotMetadataDescriptors","shotSearchText","shotSelectionGrid","taskMap","taskTypeMap"])),{},{isEmptyList:function(){return this.displayedShots&&0===this.displayedShots[0].length&&!this.isLoading&&!this.isError&&(!this.shotSearchText||0===this.shotSearchText.length)},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedShotsLength>0},visibleColumns:function(){var e=2;return e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isShotDescription?1:0,e+=this.shotMetadataDescriptors.length,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isShotTime?1:0,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isShotEstimation?1:0,e+=this.isShowInfos?1:0,e+=this.isShowInfos&&this.isFrameIn?1:0,e+=this.isShowInfos&&this.isFrameOut?1:0,e+=this.isShowInfos&&this.isFps?1:0,e+=this.displayedValidationColumns.length,e},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.shotFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["displayMoreShots"])),{},{onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreShots()},loadMoreShots:function(){this.displayMoreShots()},taskTypePath:function(e){return this.isTVShow&&this.currentEpisode?{name:"episode-task-type",params:{production_id:this.currentProduction.id,episode_id:this.currentEpisode.id,task_type_id:e,type:"shots"}}:{name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"shots"}}},shotPath:function(e){return this.getPath("shot",e)},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.shot_id=t),s},onInputKeyUp:function(e,t,s){var i=this.shotMetadataDescriptors.length+4,n=this.displayedShotsLength;return this.keyMetadataNavigation(i,n,t,s,e.key),this.pauseEvent(e)},onNbFramesChanged:function(e,t){this.$emit("field-changed",{entry:e,fieldName:"nb_frames",value:this.sanitizeInteger(t)})},getIndex:function(e,t){return this.getEntityLineNumber(this.displayedShots,e,t)}}),watch:{displayedShots:function(){this.$options.lineIndex={}},validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},Ni=qi,zi=(s("67c2"),Object(_["a"])(Ni,$i,Li,!1,null,"e643dc8c",null)),Ri=zi.exports,Vi={name:"shots",mixins:[ie,ne],components:{AddMetadataModal:He,AddThumbnailsModal:tt,BuildFilterModal:st["a"],ButtonSimple:me["a"],CreateTasksModal:lt,DeleteModal:dt["a"],EditShotModal:wi["a"],ImportModal:pt["a"],HardDeleteModal:ht["a"],ManageShotsModal:Pi,ImportRenderModal:mt["a"],SearchField:ft["a"],SearchQueryList:_t["a"],SortingInfo:wt,ShotHistoryModal:Ii,ShowAssignationsButton:Pt,ShowInfosButton:It,ShotList:Ri,TaskInfo:$t["a"]},data:function(){return{initialLoading:!0,deleteAllTasksLockText:null,descriptorToEdit:{},formData:null,historyShot:{},parsedCSV:[],shotToDelete:null,shotToEdit:null,taskTypeForTaskDeletion:null,modals:{isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isBuildFilterDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isDeleteAllTasksDisplayed:!1,isImportRenderDisplayed:!1,isImportDisplayed:!1,isManageDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1,isShotHistoryDisplayed:!1},loading:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,creatingTasksStay:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,del:!1,importing:!1,restore:!1,stay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,importing:!1,importingError:null}}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentEpisode","currentProduction","displayedShotsBySequence","episodeMap","episodes","isCurrentUserClient","isCurrentUserManager","isFrames","isFrameIn","isFrameOut","isFps","isShotDescription","isShotEstimation","isShotTime","isShotsLoading","isShotsLoadingError","isShowAssignations","isTVShow","nbSelectedTasks","openProductions","sequences","selectedTasks","shotMap","shotFilledColumns","shotsCsvFormData","shotSearchQueries","shotSearchText","shotsPath","shotValidationColumns","shotListScrollPosition","shotSorting","taskTypeMap"])),{},{searchField:function(){return this.$refs["shot-search-field"]},addThumbnailsModal:function(){return this.$refs["add-thumbnails-modal"]},columns:function(){var e=["Sequence","Name","Description","Nb Frames","FPS","Frame In","Frame Out"];return this.isTVShow&&e.unshift("Episode"),e},dataMatchers:function(){var e=["Sequence","Name"];return this.isTVShow&&e.unshift("Episode"),e},filteredShots:function(){var e=this,t={};return this.displayedShotsBySequence.forEach((function(s){s.forEach((function(s){var i="".concat(s.sequence_name).concat(s.name);e.isTVShow&&(i=s.episode_name+i),t[i]=!0}))})),t}}),created:function(){this.setLastProductionScreen("shots")},mounted:function(){var e=this,t="";this.$route.query.search.length>0&&(t=""+this.$route.query.search),this.$refs["shot-search-field"].setValue(t);var s=function(){e.loadShots((function(t){setTimeout((function(){e.initialLoading=!1}),200),t||setTimeout((function(){e.onSearchChange(),e.$refs["shot-list"].setScrollPosition(e.shotListScrollPosition)}),500)}))};Object.keys(this.shotMap).length<2||this.shotValidationColumns.length>0&&!Object.keys(this.shotMap)[0].validations?setTimeout((function(){e.currentProduction&&e.episodes.length>0&&e.episodes[0].project_id!==e.currentProduction.id?e.loadEpisodes().then((function(){return s()})).catch(console.error):s()}),100):(this.isShotsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["shot-list"].setScrollPosition(this.shotListScrollPosition))},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["addMetadataDescriptor","createTasks","changeShotSort","commentTaskWithPreview","deleteAllShotTasks","deleteShot","deleteMetadataDescriptor","editShot","getShotsCsvLines","hideAssignations","loadEpisodes","loadShots","removeShotSearch","restoreShot","saveShotSearch","setLastProductionScreen","setPreview","setShotSearch","showAssignations","uploadShotFile"])),{},{confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Shot",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},closeMetadataModal:function(){this.modals.isAddMetadataDisplayed=!1},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onDeleteClicked:function(e){this.shotToDelete=e,this.modals.isDeleteDisplayed=!0},onEditClicked:function(e){this.shotToEdit=e,this.modals.isNewDisplayed=!0},onRestoreClicked:function(e){this.shotToRestore=e,this.modals.isRestoreDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},confirmEditShot:function(e){var t=this;e.id=this.shotToEdit.id,this.loading.edit=!0,this.errors.edit=!1,this.editShot(e).then((function(){t.loading.edit=!1,t.modals.isNewDisplayed=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},confirmDeleteAllTasks:function(e){var t=this,s=this.taskTypeForTaskDeletion.id,i=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllShotTasks({projectId:i,taskTypeId:s,selectionOnly:e}).then((function(){t.loading.deleteAllTasks=!1,t.modals.isDeleteAllTasksDisplayed=!1})).catch((function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0}))},confirmDeleteShot:function(){var e=this;this.loading.del=!0,this.errors.del=!1,this.deleteShot(this.shotToDelete).then((function(){e.loading.del=!1,e.modals.isDeleteDisplayed=!1})).catch((function(t){console.error(t),e.loading.del=!1,e.errors.del=!0}))},confirmRestoreShot:function(){var e=this;this.loading.restore=!0,this.errors.restore=!1,this.restoreShot(this.shotToRestore).then((function(){e.loading.restore=!1,e.modals.isRestoreDisplayed=!1})).catch((function(t){console.error(t),e.loading.restore=!1,e.errors.restore=!0}))},confirmAddThumbnails:function(e){var t=this,s=function(e){return t.addThumbnailsModal.markLoading(e.task.entity_id),t.commentTaskWithPreview({taskId:e.task.id,commentText:"",taskStatusId:e.task.task_status_id,form:e}).then((function(s){s.newComment;var i=s.preview;return t.setPreview({taskId:e.task.id,entityId:e.task.entity_id,previewId:i.id})})).then((function(){return t.addThumbnailsModal.markUploaded(e.task.entity_id),Promise.resolve()}))};this.loading.addThumbnails=!0,ee["a"].runPromiseMapAsSeries(e,s).then((function(){t.loading.addThumbnails=!1,t.modals.isAddThumbnailsDisplayed=!1}))},confirmCreateTasks:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.creatingTasks=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.hideCreateTasksModal(),t.loading.creatingTasks=!1})).catch((function(e){t.errors.creatingTasks=!0,console.errror(e)}))},confirmCreateTasksAndStay:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.creatingTasksStay=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.loading.creatingTasksStay=!1})).catch((function(e){t.errors.creatingTasks=!0,console.errror(e)}))},runTasksCreation:function(e,t){return this.errors.creatingTasks=!1,this.createTasks({task_type_id:e.task_type_id,project_id:this.currentProduction.id,type:"shots",selectionOnly:t})},reset:function(){var e=this;this.initialLoading=!0,this.loadShots((function(t){t&&console.error(t),e.initialLoading=!1}))},resetEditModal:function(){var e={name:""};this.sequences.length>0&&(e.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(e.production_id=this.openProductions[0].id),this.shotToEdit=e},deleteText:function(){var e=this.shotToDelete;return e?this.$t("shots.delete_text",{name:e.name}):""},deleteAllTasksText:function(){var e=this.taskTypeForTaskDeletion;return e?this.$t("tasks.delete_all_text",{name:e.name}):""},restoreText:function(){var e=this.shotToRestore;return e?this.$t("shots.restore_text",{name:e.name}):""},renderImport:function(e,t){var s=this;this.loading.importing=!0,this.errors.importing=!1,this.formData=e,"file"===t&&(e=e.get("file")),Z["a"].processCSV(e).then((function(e){s.parsedCSV=e,s.hideImportModal(),s.loading.importing=!1,s.showImportRenderModal()}))},uploadImportFile:function(e,t){var s=this,i=new FormData,n="import.csv",a=Z["a"].turnEntriesToCsvString(e),o=new File([a],n,{type:"text/csv"});i.append("file",o),this.loading.importing=!0,this.errors.importing=!1,this.$store.commit("SHOT_CSV_FILE_SELECTED",i),this.uploadShotFile(t).then((function(){s.loading.importing=!1,s.loadEpisodes().catch(console.error),s.hideImportRenderModal(),s.loadShots()})).catch((function(e){console.error(e),s.loading.importing=!1,s.loading.importingError=e,s.errors.importing=!0}))},resetImport:function(){this.errors.importing=!1,this.hideImportRenderModal(),this.$store.commit("SHOT_CSV_FILE_SELECTED",null),this.$refs["import-modal"].reset(),this.showImportModal()},onDeleteAllTasksClicked:function(e){var t=this.taskTypeMap[e];this.taskTypeForTaskDeletion=t,this.deleteAllTasksLockText=t.name,this.modals.isDeleteAllTasksDisplayed=!0},onSequenceClicked:function(e){this.searchField.setValue("".concat(this.shotSearchText," ").concat(e)),this.onSearchChange()},onSearchChange:function(){if(this.searchField){var e=this.searchField.getValue();1!==e.length&&(this.setShotSearch(e),this.setSearchInUrl())}},saveScrollPosition:function(e){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",e)},saveSearchQuery:function(e){this.saveShotSearch(e).catch(console.error)},removeSearchQuery:function(e){this.removeShotSearch(e).catch(console.error)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},showManageShots:function(){this.modals.isManageDisplayed=!0},hideManageShots:function(){this.modals.isManageDisplayed=!1},showShotHistoryModal:function(e){this.historyShot=e,this.modals.isShotHistoryDisplayed=!0},hideShotHistoryModal:function(){this.modals.isShotHistoryDisplayed=!1},onExportClick:function(){var e=this;this.getShotsCsvLines().then((function(t){var s=[J()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("shots.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var i=se["a"].slugify(s.join("_")),n=[e.$t("shots.fields.sequence"),e.$t("shots.fields.name"),e.$t("shots.fields.description")];e.currentEpisode&&n.splice(0,0,"Episode"),Object(te["d"])(Object(Q["a"])(e.currentProduction.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(e){n.push(e.name)})),e.isShotTime&&n.push(e.$t("shots.fields.time_spent")),e.isShotEstimation&&n.push(e.$t("main.estimation_short")),e.isFrames&&n.push("Nb Frames"),e.isFrameIn&&n.push("Frame In"),e.isFrameOut&&n.push("Frame Out"),e.isFps&&n.push("FPS"),e.shotValidationColumns.forEach((function(t){n.push(e.taskTypeMap[t].name),n.push("Assignations")})),Z["a"].buildCsvFile(i,[n].concat(t))}))},onChangeSortClicked:function(e){this.changeShotSort(e)},confirmBuildFilter:function(e){this.modals.isBuildFilterDisplayed=!1,this.$refs["shot-search-field"].setValue(e),this.onSearchChange()},onFieldChanged:function(e){var t=e.entry,s=e.fieldName,i=e.value,n={id:t.id,nb_frames:t.nb_frames,description:t.description};n[s]=i,this.editShot(n)},onMetadataChanged:function(e){var t=e.entry,s=e.descriptor,i=e.value,n=Object(c["a"])({},t.data);n[s.field_name]=i;var a={id:t.id,nb_frames:t.nb_frames,description:t.description,data:n};this.editShot(a)}}),watch:{$route:function(){if(this.$route.query){var e=this.$route.query.search,t=this.$refs["shot-search-field"].getValue();e!==t&&(this.searchField.setValue(e),this.onSearchChange())}},currentProduction:function(){var e=this;this.$refs["shot-search-field"].setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.initialLoading=!0,this.isTVShow||this.loadShots((function(){e.initialLoading=!1,e.setSearchFromUrl(),e.onSearchChange()}))},currentEpisode:function(){var e=this,t=function(){e.initialLoading=!0,e.loadShots((function(){e.setSearchFromUrl(),e.onSearchChange(),e.initialLoading=!1}))};this.isTVShow&&this.currentEpisode&&(this.currentProduction&&this.episodes.length>0&&this.episodes[0].project_id!==this.currentProduction.id?this.loadEpisodes().then((function(){return t()})).catch(console.error):t())}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("shots.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("shots.title")," - Kitsu")}}},Bi=Vi,Ui=(s("782c"),Object(_["a"])(Bi,bi,ki,!1,null,"4db8940e",null)),Hi=Ui.exports,Gi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"task-type columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{ref:"page",staticClass:"task-type page"},[s("div",{ref:"header",staticClass:"task-type-header page-header flexrow-item"},[s("div",{staticClass:"flexcolumn-item flexrow"},[s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:e.backPath}},[s("chevron-left-icon")],1),s("task-type-name",{staticClass:"flexrow-item",attrs:{"task-type":e.currentTaskType}}),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item"},[e.isActiveTab("schedule")?e._e():s("button-simple",{attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}})],1)],1),s("div",{staticClass:"tabs mt1"},[s("ul",[s("li",{class:{"is-active":e.isActiveTab("tasks")}},[s("router-link",{attrs:{to:e.tasksPath}},[e._v(" "+e._s(e.$t("tasks.tasks"))+" ")])],1),s("li",{class:{"is-active":e.isActiveTab("schedule")}},[s("router-link",{attrs:{to:e.schedulePath}},[e._v(" "+e._s(e.$t("schedule.title"))+" ")])],1),s("li",{class:{"is-active":e.isActiveTab("estimation")}},[s("router-link",{attrs:{to:e.estimationPath}},[e._v(" "+e._s(e.$t("estimation.title"))+" ")])],1)])]),s("div",{staticClass:"flexcolumn-item flexrow"},[s("div",{staticClass:"flexrow-item"},[s("search-field",{ref:"task-search-field",attrs:{"can-save":!0,placeholder:"ex: retake chara"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1),s("div",{staticClass:"filler"}),e.isActiveTab("tasks")?s("div",{staticClass:"flexrow-item"},[s("combobox",{attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1):e._e(),e.isActiveTab("schedule")&&e.isCurrentUserManager?s("div",{staticClass:"flexrow-item field"},[s("date-field",{staticClass:"flexrow-item",attrs:{"disabled-dates":e.startDisabledDates,"with-margin":!1,label:e.$t("main.start_date")},model:{value:e.schedule.selectedStartDate,callback:function(t){e.$set(e.schedule,"selectedStartDate",t)},expression:"schedule.selectedStartDate"}})],1):e._e(),e.isActiveTab("schedule")&&e.isCurrentUserManager?s("div",{staticClass:"flexrow-item field"},[s("date-field",{staticClass:"flexrow-item",attrs:{"disabled-dates":e.endDisabledDates,"with-margin":!1,label:e.$t("main.end_date")},model:{value:e.schedule.selectedEndDate,callback:function(t){e.$set(e.schedule,"selectedEndDate",t)},expression:"schedule.selectedEndDate"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item color-option"},[s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("tasks.colors.title"),options:e.schedule.colorOptions,"locale-key-prefix":"tasks.colors."},model:{value:e.schedule.currentColor,callback:function(t){e.$set(e.schedule,"currentColor",t)},expression:"schedule.currentColor"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item zoom-level"},[e.isActiveTab("schedule")?s("combobox-number",{attrs:{label:e.$t("schedule.zoom_level"),options:e.schedule.zoomOptions},model:{value:e.schedule.zoomLevel,callback:function(t){e.$set(e.schedule,"zoomLevel",t)},expression:"schedule.zoomLevel"}}):e._e()],1):e._e()])]),s("div",{staticClass:"query-list"},[e.loading.entities?e._e():s("search-query-list",{attrs:{queries:e.searchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1),e.isActiveTab("tasks")?s("task-list",{ref:"task-list",attrs:{tasks:e.tasks,"is-assets":e.isAssets,"is-loading":e.loading.entities,"is-error":e.errors.entities},on:{"task-selected":e.onTaskSelected}}):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"task-type-schedule flexrow-item"},[s("schedule",{ref:"schedule-widget",attrs:{"start-date":e.schedule.startDate,"end-date":e.schedule.endDate,hierarchy:e.schedule.scheduleItems,"zoom-level":e.schedule.zoomLevel,height:e.schedule.scheduleHeight,"is-loading":e.loading.entities,"is-estimation-linked":!0},on:{"item-changed":e.saveTaskScheduleItem,"root-element-expanded":e.expandPersonElement,"estimation-changed":e.updateEstimation}})],1):e._e(),e.isActiveTab("estimation")?s("div",{staticClass:"task-type-estimation flexrow-item"},[s("estimation-helper",{ref:"estimation-widget",attrs:{"is-assets":e.isAssets,tasks:e.tasks},on:{"estimation-changed":e.updateEstimation}})],1):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},Ki=[],Wi=(s("498a"),s("2430")),Yi=s("ceca"),Qi=s.n(Yi),Xi=s("2017"),Ji=s("ca76"),Zi=s("1e4c"),en=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"estimation-wrapper"},[s("div",{staticClass:"estimation-helper columns"},[s("div",{ref:"body",staticClass:"task-list column datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),s("th",{staticClass:"thumbnail"}),e.isAssets?s("th",{staticClass:"asset-type"},[e._v(" "+e._s(e.$t("tasks.fields.asset_type"))+" ")]):s("th",{staticClass:"sequence"},[e._v(" "+e._s(e.$t("tasks.fields.sequence"))+" ")]),s("th",{staticClass:"name"},[e._v(" "+e._s(e.$t("tasks.fields.entity_name"))+" ")]),e.isAssets?e._e():s("th",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.frames"))+" ")]),e.isAssets?e._e():s("th",{staticClass:"seconds numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.seconds").substring(0,3))+". ")]),s("th",{staticClass:"estimation numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"empty"})])]),s("tbody",{staticClass:"datatable-body"},e._l(e.tasksByPerson,(function(t,i){return s("tr",{key:t.id,ref:"task-"+t.id,refInFor:!0,class:{"datatable-row":!0,selected:e.selectionGrid[t.id],"task-line":!0}},[s("td",{staticClass:"assignees flexrow"},e._l(t.assignees,(function(i){return t.assignees.length>1?s("people-avatar",{key:t.id+"-"+i,staticClass:"flexrow-item",attrs:{person:e.personMap[i],size:30,"font-size":17}}):e._l(t.assignees,(function(i){return s("span",{key:t.id+"-"+i,staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[i],size:30,"font-size":17}}),s("people-name",{staticClass:"flexrow-item",attrs:{person:e.personMap[i]}})],1)}))})),1),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e.getEntity(t.entity.id),width:50,height:33,"empty-width":50,"empty-height":31}})],1),e.isAssets?s("td",{staticClass:"asset-type"},[e._v(" "+e._s(e.getEntity(t.entity.id).asset_type_name)+" ")]):s("td",{staticClass:"sequence"},[e._v(" "+e._s(e.getEntity(t.entity.id).sequence_name)+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(e.getEntity(t.entity.id).name)+" ")]),e.isAssets?e._e():s("td",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.getEntity(t.entity.id).nb_frames)+" ")]),e.isAssets?e._e():s("td",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.getSeconds(t))+" ")]),s("td",{staticClass:"estimation numeric-cell",on:{click:function(s){return e.selectTask(s,t,i)}}},[e.isCurrentUserManager?s("input",{ref:t.id+"-estimation",refInFor:!0,staticClass:"input stylehidden",domProps:{value:e.formatDuration(t.estimation)},on:{blur:e.onInputBlur,change:function(s){return e.estimationUpdated(s,t,i)},keydown:e.onKeyDown,mouseout:e.onInputMouseOut,mouseover:e.onInputMouseOver}}):s("span",[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")])]),s("td")])})),0)])]),s("div",{staticClass:"person-list column datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{ref:"thead",staticClass:"datatable-head"},[s("tr",[s("th",{staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),s("th",{staticClass:"count numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.count"))+" ")]),s("th",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.frames"))+" ")]),s("th",{staticClass:"seconds numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.seconds").substring(0,3))+". ")]),s("th",{staticClass:"estimation numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"quota numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.estimated_quota"))+". ")]),s("th",{staticClass:"empty"})])]),s("tbody",{staticClass:"datatable-body"},e._l(e.assignees,(function(t){return s("tr",{key:t.id,ref:"person-"+t.id,refInFor:!0,class:{"datatable-row":!0,"task-line":!0}},[s("td",{staticClass:"person flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t,size:30,"font-size":17}}),s("people-name",{staticClass:"flexrow-item",attrs:{person:t}})],1),s("td",{staticClass:"count numeric-cell"},[e._v(" "+e._s(t.count)+" ")]),s("td",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(t.frames)+" ")]),s("td",{staticClass:"seconds numeric-cell"},[e._v(" "+e._s(t.seconds)+" ")]),s("td",{staticClass:"estimation numeric-cell"},[e._v(" "+e._s(t.estimation)+" ")]),s("td",{staticClass:"quota numeric-cell"},[e._v(" "+e._s(t.quota)+" ")]),s("td")])})),0)])])])])},tn=[],sn=(s("6062"),s("4ec9"),s("b680"),s("0073")),nn=s("bcd2"),an={name:"estimation-helper",mixins:[Fi["a"],de["a"]],components:{EntityThumbnail:he["a"],PeopleAvatar:ss["a"],PeopleName:sn["a"]},props:{isAssets:{type:Boolean,default:!0},tasks:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:0,lastShiftSelection:0,selectionGrid:{}}},mounted:function(){},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","currentProduction","isCurrentUserManager","organisation","personMap","shotMap"])),{},{assignees:function(){var e=this,t=new Set,s=new Map,i=new Map,n=new Map,a=new Map,o=[];return this.tasks.forEach((function(o){var r=e.getEntity(o.entity_id);o.assignees.forEach((function(c){if(t.add(c),s.set(c,(s.get(c)||0)+1),a.set(c,(a.get(c)||0)+o.estimation),!e.isAssets){var l=r.nb_frames||0,d=Object(nn["c"])(l,e.currentProduction,r);i.set(c,(i.get(c)||0)+d),n.set(c,(n.get(c)||0)+l)}}))})),t.forEach((function(t,s){return o.push(e.personMap[s])})),o.sort(Qi()("name")).map((function(t){var o=a.get(t.id)||0,r=i.get(t.id)||0,l=n.get(t.id)||0,d=Object(mi["o"])(e.organisation,o),u=o>0?r/d:0;return Object(c["a"])(Object(c["a"])({},t),{},{count:s.get(t.id)||0,estimation:e.formatDuration(o),frames:l,quota:u.toFixed(2),seconds:r.toFixed(2)})}))},tasksByPerson:function(){return Object(Q["a"])(this.tasks).sort(Qi()(this.compareFirstAssignees))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["updateTask"])),{},{frameToSeconds:nn["c"],getEntity:function(e){return this.isAssets?this.assetMap[e]:this.shotMap[e]},compareFirstAssignees:function(e,t){if(e.assignees.length>0&&t.assignees.length>0){var s=this.personMap[e.assignees[0]],i=this.personMap[t.assignees[0]];return s.name.localeCompare(i.name)}return e.assignees.length>0?-1:t.assignees.length>0?1:-1},getSeconds:function(e){var t=this.getEntity(e.entity_id);return Object(nn["c"])(t.nb_frames,this.currentProduction,t)},estimationUpdated:function(e,t){var s=e.target.value;if(s&&s.length>0){var i=parseFloat(e.target.value);this.saveEstimations(i,t)}},saveEstimations:function(e,t){var s=this,i=Object.keys(this.selectionGrid);i.length>1?i.forEach((function(t){s.$emit("estimation-changed",{taskId:t,days:e})})):this.$emit("estimation-changed",{taskId:t.id,days:e})},onKeyDown:function(e){"Tab"===e.key?(this.pauseEvent(e),e.shiftKey?this.selectPrevious():this.selectNext()):"ArrowDown"===e.key?(this.pauseEvent(e),this.selectNext(e.shiftKey)):"ArrowUp"===e.key&&(this.pauseEvent(e),this.selectPrevious(e.shiftKey))},clearSelection:function(){this.selectionGrid={}},addToSelection:function(e){n.a.set(this.selectionGrid,e,!0)},selectTask:function(e,t,s){e.shiftKey?(e.ctrlKey||e.metaKey||this.clearSelection(),this.selectTaskRange(s)):(e.ctrlKey||e.metaKey||this.clearSelection(),this.selectSingleTask(s)),this.isCurrentUserManager&&this.focusInput(this.$refs[this.tasksByPerson[s].id+"-estimation"][0])},selectPrevious:function(e){var t=this.lastSelection;t=t-1<0?this.tasksByPerson.length-1:t-1,this.selectTask({shiftKey:e},this.tasksByPerson[t],t)},selectNext:function(e){var t=this.lastSelection;t=t+1>=this.tasksByPerson.length?0:t+1,this.selectTask({shiftKey:e},this.tasksByPerson[t],t)},selectSingleTask:function(e){var t=this.tasksByPerson[e];this.addToSelection(t.id),this.lastSelection=e,this.lastShiftSelection=e},selectTaskRange:function(e){var t=this,s=[];this.lastSelection=e,s=this.lastShiftSelection>e?Object(mi["s"])(e,this.lastShiftSelection):Object(mi["s"])(this.lastShiftSelection,e);var i=s.map((function(e){return t.tasksByPerson[e].id}));i.forEach((function(e){t.addToSelection(e)}))}})},on=an,rn=(s("3b25"),Object(_["a"])(on,en,tn,!1,null,"2db0665f",null)),cn=rn.exports,ln=s("d7c7"),dn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{ref:"thead",staticClass:"datatable-head"},[s("tr",[s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),e.isAssets?s("th",{ref:"th-type",staticClass:"asset-type"},[e._v(" "+e._s(e.$t("tasks.fields.asset_type"))+" ")]):s("th",{ref:"th-type",staticClass:"sequence"},[e._v(" "+e._s(e.$t("tasks.fields.sequence"))+" ")]),s("th",{ref:"th-name",staticClass:"name"},[e._v(" "+e._s(e.$t("tasks.fields.entity_name"))+" ")]),s("th",{ref:"th-status",staticClass:"status"},[e._v(" "+e._s(e.$t("tasks.fields.task_status"))+" ")]),s("th",{ref:"th-assignees",staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),e.isAssets?e._e():s("th",{ref:"th-frames",staticClass:"frames"},[e._v(" "+e._s(e.$t("tasks.fields.frames"))+" ")]),s("th",{ref:"th-estimation",staticClass:"estimation"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{ref:"th-duration",staticClass:"duration"},[e._v(" "+e._s(e.$t("tasks.fields.duration").substring(0,3))+". ")]),s("th",{ref:"th-retake-count",staticClass:"retake-count"},[e._v(" "+e._s(e.$t("tasks.fields.retake_count"))+" ")]),s("th",{ref:"th-estimation",staticClass:"start-date"},[e._v(" "+e._s(e.$t("tasks.fields.start_date"))+" ")]),s("th",{ref:"th-estimation",staticClass:"due-date"},[e._v(" "+e._s(e.$t("tasks.fields.due_date"))+" ")]),s("th",{ref:"th-status",staticClass:"real-start-date"},[e._v(" "+e._s(e.$t("tasks.fields.real_start_date"))+" ")]),s("th",{ref:"th-status",staticClass:"real-end-date"},[e._v(" "+e._s(e.$t("tasks.fields.real_end_date"))+" ")]),s("th",{ref:"th-status",staticClass:"last-comment-date"},[e._v(" "+e._s(e.$t("tasks.fields.last_comment_date"))+" ")]),s("th",{ref:"",staticClass:"empty"})])]),s("tbody",{staticClass:"datatable-body"},e._l(e.displayedTasks,(function(t,i){return s("tr",{key:t.id,ref:"task-"+t.id,refInFor:!0,class:{"task-line":!0,"datatable-row":!0,selected:e.selectionGrid[t.id]},on:{click:function(s){return e.selectTask(s,i,t)}}},[s("td",{staticClass:"thumbnail flexrow"},[s("entity-thumbnail",{staticClass:"flexrow-item",attrs:{entity:e.getEntity(t.entity.id),width:50,height:33,"empty-width":50,"empty-height":33}})],1),e.isAssets?s("td",{staticClass:"asset-type"},[e._v(" "+e._s(e.getEntity(t.entity.id).asset_type_name)+" ")]):s("td",{staticClass:"sequence"},[e._v(" "+e._s(e.getEntity(t.entity.id).sequence_name)+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(e.getEntity(t.entity.id).name)+" ")]),s("validation-cell",{staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!1,"is-static":!0}}),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},e._l(t.assignees,(function(i){return s("people-avatar",{key:t.id+"-"+i,staticClass:"flexrow-item",attrs:{person:e.personMap[i],size:30,"font-size":17}})})),1)]),e.isAssets?e._e():s("td",{staticClass:"frames"},[e._v(" "+e._s(e.getEntity(t.entity.id).nb_frames)+" ")]),s("td",{staticClass:"estimation"},[e.selectionGrid[t.id]?s("input",{ref:t.id+"-estimation",refInFor:!0,staticClass:"input",domProps:{value:e.formatDuration(t.estimation)},on:{change:function(t){return e.updateEstimation(t.target.value)}}}):s("span",[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")])]),s("td",{class:{duration:!0,error:e.isEstimationBurned(t)}},[e._v(" "+e._s(e.formatDuration(t.duration))+" ")]),s("td",{staticClass:"retake-count"},e._l(t.retake_count,(function(t){return s("span",{key:t},[e._v(" • ")])})),0),s("td",{staticClass:"start-date"},[e.selectionGrid[t.id]?s("date-field",{staticClass:"flexrow-item",attrs:{"with-margin":!1,value:e.getDate(t.start_date)},on:{input:e.updateStartDate}}):s("span",[e._v(" "+e._s(e.formatDate(t.start_date))+" ")])],1),s("td",{staticClass:"due-date"},[e.selectionGrid[t.id]?s("date-field",{staticClass:"flexrow-item",attrs:{"with-margin":!1,value:e.getDate(t.due_date)},on:{input:e.updateDueDate}}):s("span",[e._v(" "+e._s(e.formatDate(t.due_date))+" ")])],1),s("td",{staticClass:"real-start-date"},[e._v(" "+e._s(e.formatDate(t.real_start_date))+" ")]),s("td",{staticClass:"real-end-date"},[e._v(" "+e._s(e.formatDate(t.end_date))+" ")]),s("td",{staticClass:"last-comment-date"},[e._v(" "+e._s(e.formatDate(t.last_comment_date))+" ")]),s("td")],1)})),0)]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}})],1),e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-tasks"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.number",e.tasks.length))+" ("+e._s(e.formatDuration(e.timeEstimated))+" "+e._s(e.$tc("main.days_estimated",e.isTimeEstimatedPlural))+", "+e._s(e.formatDuration(e.timeSpent))+" "+e._s(e.$tc("main.days_spent",e.isTimeSpentPlural))),e.isAssets?e._e():s("span",[e._v(", "+e._s(e.nbFrames)+" "+e._s(e.$tc("main.nb_frames",e.nbFrames)))]),e._v(") ")])])},un=[],pn=(s("13d5"),{name:"task-list",mixins:[Fi["a"],de["a"]],components:{DateField:hi["a"],EntityThumbnail:he["a"],PeopleAvatar:ss["a"],TableInfo:we["a"],ValidationCell:Oe["a"]},data:function(){return{lastSelection:null,page:1,selectionGrid:{},selectedDate:q()().toDate()}},props:{isAssets:{type:Boolean,default:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}},taskType:{type:Object,default:function(){}}},mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","nbSelectedTasks","personMap","user","selectedTasks","shotMap","taskMap"])),{},{timeSpent:function(){return this.tasks.reduce((function(e,t){return e+t.duration}),0)},isTimeSpentPlural:function(){return Math.floor((this.timeSpent?this.timeSpent:0)/60/8)<=1},timeEstimated:function(){return this.tasks.reduce((function(e,t){return e+t.estimation}),0)},isTimeEstimatedPlural:function(){return Math.floor((this.timeEstimated?this.timeEstimated:0)/60/8)<=1},nbFrames:function(){var e=this,t=0;return this.tasks.forEach((function(s){var i=e.shotMap[s.entity.id];i&&i.nb_frames&&(t+=i.nb_frames)})),t},displayedTasks:function(){return this.tasks&&this.tasks.length>0?this.tasks.slice(0,60*this.page):[]}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["addSelectedTask","addSelectedTasks","clearSelectedTasks","updateTask","removeSelectedTask"])),{},{isTaskChanged:function(e,t){var s=e.start_date?e.start_date.substring(0,10):"",i=e.due_date?e.due_date.substring(0,10):"";return t.start_date&&s!==t.start_date||t.due_date&&i!==t.due_date||t.estimation&&e.estimation!==t.estimation},getDate:function(e){return e?q()(e,"YYYY-MM-DD").toDate():null},updateEstimation:function(e){var t=Object(mi["b"])(this.organisation,e);this.updateTasksEstimation({estimation:t})},updateStartDate:function(e){var t=this;Object.keys(this.selectionGrid).forEach((function(s){var i=t.taskMap[s],n=q()(e);if(!i.start_date||i.start_date.substring(0,10)!==Object(mi["e"])(n)){var a=i.due_date?q()(i.due_date):null,o={start_date:null,due_date:null};e&&(o=Object(mi["g"])(n,a,Object(mi["o"])(t.organisation,i.estimation))),t.isTaskChanged(i,o)&&t.updateTask({taskId:s,data:o}).catch(console.error)}}))},updateDueDate:function(e){var t=this;Object.keys(this.selectionGrid).forEach((function(s){var i=t.taskMap[s],n=i.start_date?q()(i.start_date):null,a=q()(e);if(!i.due_date||i.due_date.substring(0,10)!==Object(mi["e"])(a)){var o={start_date:null,due_date:null};e&&(o=Object(mi["f"])(n,a,Object(mi["o"])(t.organisation,i.estimation))),t.isTaskChanged(i,o)&&t.updateTask({taskId:s,data:o}).catch(console.error)}}))},updateTasksEstimation:function(e){var t=this,s=e.estimation;Object.keys(this.selectionGrid).forEach((function(e){var i=t.taskMap[e],n={estimation:s};if(i.start_date){var a=q()(i.start_date),o=i.due_date?q()(i.due_date):null;n=Object(mi["g"])(a,o,Object(mi["o"])(t.organisation,s)),n.estimation=s}t.isTaskChanged(i,n)&&t.updateTask({taskId:e,data:n}).catch(console.error)}))},formatDate:function(e){return e?q()(e).format("YYYY-MM-DD"):""},isEstimationBurned:function(e){return e.estimation&&e.estimation>0&&e.duration>e.estimation},onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},getEntity:function(e){return this.isAssets?this.assetMap[e]:this.shotMap[e]},onKeyDown:function(e){if(this.tasks.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.tasks.length-1:t-1,this.selectTask({},t,this.tasks[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.tasks.length?t=0:t+1,this.selectTask({},t,this.tasks[t]))}},selectTask:function(e,t,s){var i=this;if(!(e&&e.target&&(["INPUT"].includes(e.target.nodeName)||e.target.parentNode&&["HEADER"].includes(e.target.parentNode.nodeName)||["cell day selected"].includes(e.target.className)))){var a=this.selectionGrid[s.id],o=Object.keys(this.selectionGrid).length>1;if(e.ctrlKey||e.metaKey||e.shiftKey||(this.clearSelectedTasks({task:s}),this.resetSelection()),e.shiftKey){this.selectionGrid={};var r=[];r=this.lastSelection>t?Object(mi["s"])(t,this.lastSelection):Object(mi["s"])(this.lastSelection,t);var c=r.map((function(e){return{task:i.tasks[e]}}));c.forEach((function(e){n.a.set(i.selectionGrid,e.task.id,!0)})),this.addSelectedTasks(c)}else this.selectionGrid[s.id]?(this.removeSelectedTask({task:s}),n.a.set(this.selectionGrid,s.id,void 0)):a&&!o||(this.addSelectedTask({task:s}),this.$emit("task-selected",s),n.a.set(this.selectionGrid,s.id,!0),this.lastSelection=t);this.scrollToLine(s.id)}},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},scrollToLine:function(e){var t=this.$refs["task-"+e];if(t&&this.$refs.body){var s=30,i=t[0].getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),a=i.bottom>n.bottom-s,o=i.top<n.top+s;if(a){var r=i.bottom-n.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=n.top-i.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},resetSelection:function(){this.selectionGrid={},this.lastSelection=null},getTableData:function(){var e=this,t=[this.isAssets?this.$t("tasks.fields.asset_type"):this.$t("tasks.fields.sequence"),this.$t("tasks.fields.entity_name"),this.$t("tasks.fields.task_status"),this.$t("tasks.fields.assignees"),this.$t("tasks.fields.estimation"),this.$t("tasks.fields.duration"),this.$t("tasks.fields.retake_count"),this.$t("tasks.fields.start_date"),this.$t("tasks.fields.due_date"),this.$t("tasks.fields.real_start_date"),this.$t("tasks.fields.real_end_date"),this.$t("tasks.fields.last_comment_date")];this.isAssets||t.splice(4,0,"otot");var s=[t];return this.tasks.forEach((function(t){var i=t.assignees.map((function(t){var s=e.personMap[t];return s?s.name:""})).join(", "),n=[e.isAssets?e.getEntity(t.entity.id).asset_type_name:e.getEntity(t.entity.id).sequence_name,e.getEntity(t.entity.id).name,t.task_status_short_name,i,e.formatDuration(t.estimation),e.formatDuration(t.duration),t.retake_count,e.formatDate(t.start_date),e.formatDate(t.due_date),e.formatDate(t.real_start_date),e.formatDate(t.end_date),e.formatDate(t.last_comment_date)];if(!e.isAssets){var a=e.getEntity(t.entity.id).nb_frames;n.splice(4,0,a)}s.push(n)})),s}}),watch:{tasks:function(){this.page=1,this.resetSelection()},nbSelectedTasks:function(){0===this.nbSelectedTasks&&this.resetSelection()}}}),mn=pn,hn=(s("8e46"),Object(_["a"])(mn,dn,un,!1,null,"dd128294",null)),fn=hn.exports,_n={name:"task-type-page",mixins:[de["a"],ie],components:{ButtonSimple:me["a"],ChevronLeftIcon:re["j"],Combobox:qe["a"],ComboboxNumber:Zi["a"],DateField:hi["a"],EstimationHelper:cn,Schedule:ln["a"],SearchField:ft["a"],SearchQueryList:_t["a"],TaskList:fn,TaskInfo:$t["a"],TaskTypeName:Xs["a"]},entityListCache:[],data:function(){return{activeTab:"tasks",currentSort:"entity_name",currentScheduleItem:null,currentTask:null,isAssets:!0,tasks:[],selection:{},errors:{entities:!1},loading:{entities:!1},schedule:{currentColor:"status",endDate:J()().add(3,"months"),scheduleItems:[],scheduleHeight:800,selectedEndDate:J()().add(3,"months").toDate(),selectedStartDate:J()().add(-1,"months").toDate(),startDate:J()().add(-1,"months"),zoomLevel:1,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],colorOptions:[{label:"Neutral",value:"neutral"},{label:"Status",value:"status"},{label:"Late",value:"late"}]}}},created:function(){if(this.currentProduction){var e={productionId:this.currentProduction.id};this.currentEpisode&&(e.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",e)}else this.setProduction(this.$route.params.production_id)},mounted:function(){var e=this;this.isAssets=this.$route.path.includes("assets"),this.updateActiveTab(),setTimeout((function(){e.initData(!1),e.$refs["schedule-widget"]&&e.$refs["schedule-widget"].scrollToToday()}),100),window.addEventListener("resize",this.resetScheduleHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.resetScheduleHeight)},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","assetsPath","currentEpisode","currentProduction","currentTaskType","isCurrentUserManager","isTVShow","nbSelectedTasks","organisation","personMap","selectedTasks","sequenceSubscriptions","shotsByEpisode","shotMap","shotsPath","taskSearchQueries","taskStatusMap","taskMap","user"])),{},{entityMap:function(){return this.isAssets?this.assetMap:this.shotMap},locale:function(){return"fr_FR"===this.user.locale?Wi["fr"]:Wi["en"]},startDisabledDates:function(){return{to:Object(mi["q"])(this.currentProduction.start_date).toDate(),from:this.schedule.endDate.toDate(),days:[6,0]}},endDisabledDates:function(){return{to:this.schedule.startDate.toDate(),from:Object(mi["q"])(this.currentProduction.end_date).toDate(),days:[6,0]}},assetTasks:function(){return this.getTasks(Object.values(this.assetMap))},shotTasks:function(){return this.getTasks(Object.values(this.shotMap))},title:function(){return this.currentProduction?this.isTVShow&&this.currentEpisode?"".concat(this.currentProduction.name," / ")+"".concat(this.currentEpisode.name," / ")+"".concat(this.currentTaskType.name):"".concat(this.currentProduction.name," / ").concat(this.currentTaskType.name):"Loading..."},backPath:function(){var e={};return e=this.isActiveTab("schedule")?{name:"schedule",params:{production_id:this.currentProduction.id},query:{search:""}}:this.currentTaskType.for_shots?this.shotsPath:this.assetsPath,Object(c["a"])(Object(c["a"])({},e),{},{query:{search:""}})},tasksPath:function(){return this.getRoute("task-type")},schedulePath:function(){return this.getRoute("task-type-schedule")},estimationPath:function(){return this.getRoute("task-type-estimation")},sortOptions:function(){return["entity_name","task_status_short_name","priority","estimation","duration","retake_count","due_date","real_start_date","end_date","last_comment_date"].map((function(e){return{label:e,value:e}}))},searchQueries:function(){return this.isAssets?this.taskSearchQueries.filter((function(e){return"Asset"===e.entity_type})):this.taskSearchQueries},scheduleTeam:function(){var e=this,t=this.currentProduction.team.map((function(t){return e.personMap[t]}));return Object(te["f"])(t)},scheduleWidget:function(){return this.$refs["schedule-widget"]},searchField:function(){return this.$refs["task-search-field"]}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["clearSelectedTasks","initTaskType","loadEpisodeScheduleItems","loadScheduleItems","removeTaskSearch","saveScheduleItem","saveTaskSearch","setProduction","subscribeToSequence","updateTask","unsubscribeFromSequence"])),{},{initData:function(e){var t=this;this.resetTasks(),this.focusSearchField(),0===this.tasks.length?(this.loading.entities=!0,this.errors.entities=!1,this.initTaskType(e).then(this.setCurrentScheduleItem).then((function(){t.loading.entities=!1,t.resetTasks(),t.focusSearchField();var e=t.searchField?t.searchField.getValue():"";e&&t.onSearchChange(e),setTimeout((function(){t.setSearchFromUrl()}),200),t.isActiveTab("schedule")&&(t.resetScheduleItems(),t.$refs["schedule-widget"]&&t.$refs["schedule-widget"].scrollToToday())})).catch((function(e){console.error(e),t.loading.entities=!1,t.errors.entities=!0}))):(this.loading.entities=!0,this.setCurrentScheduleItem().then((function(){t.loading.entities=!1,t.isActiveTab("schedule")&&(t.resetScheduleItems(),t.$refs["schedule-widget"]&&t.$refs["schedule-widget"].scrollToToday())})))},setCurrentScheduleItem:function(){var e=this;return this.isTVShow?this.loadEpisodeScheduleItems({production:this.currentProduction,taskType:this.currentTaskType}).then((function(t){t?(e.currentScheduleItem=t.find((function(t){return t.task_type_id===e.currentTaskType.id&&t.object_id===e.currentEpisode.id})),Promise.resolve(e.currentScheduleItem)):Promise.resolve([])})):this.loadScheduleItems(this.currentProduction).then((function(t){t?(e.currentScheduleItem=t.find((function(t){return t.task_type_id===e.currentTaskType.id})),Promise.resolve(e.currentScheduleItem)):Promise.resolve([])}))},isActiveTab:function(e){return this.activeTab===e},updateActiveTab:function(){this.$route.path.indexOf("schedule")>0?this.activeTab="schedule":this.$route.path.indexOf("estimation")>0?this.activeTab="estimation":this.activeTab="tasks"},getRoute:function(e){var t=this.$route.params.task_type_id,s=this.currentTaskType?this.currentTaskType.id:t,i={name:e,params:{production_id:this.currentProduction.id,task_type_id:s}};return this.isTVShow&&this.currentEpisode&&(i.name="episode-".concat(i.name),i.params.episode_id=this.currentEpisode.id),i},onSearchChange:function(e){var t=this;if(e&&1!==e.length){e=e.toLowerCase().trim();var s=this.currentProduction.descriptors.filter((function(e){return e.entityType===t.isAssets?"Asset":"Shot"})),i=Object(Ji["e"])(e)||[],n=Object(Ji["c"])(e)||[],a=Object(Ji["b"])(s,e);if(i.length>0||n.length>0||a.length>0){var o=[],r=Object(Ji["f"])(this.$options.taskIndex,e).concat(a);i.length>0?o=Object(Xi["j"])(this.$options.taskIndex,i):(this.resetTasks(),o=this.tasks),o=Object(Ji["a"])(o,r,this.taskMap),this.tasks=this.sortTasks(o),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems();this.setSearchInUrl(),this.clearSelectedTasks()},saveSearchQuery:function(e){var t=this.isAssets?"Asset":"Shot";this.saveTaskSearch({searchQuery:e,entityType:t}).then((function(){})).catch((function(e){console.error(e)}))},removeSearchQuery:function(e){this.removeTaskSearch(e).then((function(){})).catch((function(e){console.error(e)}))},onTaskSelected:function(e){this.currentTask=e},resetTasks:function(){var e=this,t=this.assetTasks;this.isAssets||(t=this.shotTasks),t=t.filter((function(t){var s=e.entityMap[t.entity_id];return!s.canceled})),this.tasks=this.sortTasks(t),this.resetTaskIndex()},resetTaskIndex:function(){this.$options.taskIndex=Object(Xi["f"])(this.tasks,this.personMap),this.$options.taskIndex.me=Object(Xi["j"])(this.$options.taskIndex,this.user.full_name.split(" "))},getTasks:function(e){var t=this,s=[];return e.forEach((function(e){e.tasks.forEach((function(i){var n=t.taskMap[i];n&&(n.data=e.data,n.task_type_id===t.currentTaskType.id&&s.push(n))}))})),s},sortTasks:function(e){e||(e=this.tasks);var t=["task_status_short_name","entity_name","due_date"].includes(this.currentSort);return e.sort(Qi()(this.currentSort,t?1:-1).thenBy("entity_name"))},onExportClick:function(){var e=this.$refs["task-list"].getTableData(),t=[Object(mi["e"])(J()()),this.currentProduction.name,this.currentTaskType.name,"tasks"];this.currentEpisode&&t.splice(1,0,this.currentEpisode.name);var s=se["a"].slugify(t.join("_"));Z["a"].buildCsvFile(s,e)},updateEstimation:function(e){var t=e.taskId,s=e.days,i=e.item,n=Object(mi["b"])(this.organisation,s),a=this.taskMap[t],o={estimation:n};a.start_date||(a.start_date=Object(mi["e"])(J()()));var r=Object(mi["q"])(a.start_date),c=a.due_date?Object(mi["q"])(a.due_date):null;o=Object(mi["g"])(r,c,Object(mi["o"])(this.organisation,n)),o.estimation=n,i&&!i.startDate&&(i.startDate=Object(mi["q"])(o.end_date)),i&&!i.endDate&&(i.endDate=Object(mi["q"])(o.end_date)),i&&i.startDate&&i.endDate&&(i.parentElement.startDate=this.getMinDate(i.parentElement),i.parentElement.endDate=this.getMaxDate(i.parentElement)),this.updateTask({taskId:t,data:o}).catch(console.error)},resetScheduleItems:function(){var e=this,t=this.buildAssignationMap(),s=this.scheduleTeam.map((function(s){return e.buildPersonElement(s,t)})).filter((function(e){return e})).filter((function(e){return e.children.length>0}));0!==t.unassigned.length&&(s=s.concat([this.buildPersonElement({id:"unassigned"},t)])),this.schedule.scheduleItems=s},buildAssignationMap:function(){var e={unassigned:[]};return this.scheduleTeam.forEach((function(t){t&&(e[t.id]=[])})),this.tasks.forEach((function(t){t.assignees.length>0?t.assignees.forEach((function(s){e[s]||(e[s]=[]),e[s].push(t)})):e.unassigned.push(t)})),e},buildPersonElement:function(e,t){var s=this;if(!e)return null;var i,n,a,o=0,r=t[e.id];a="unassigned"===e.id?{avatar:!1,id:e.id,name:"Unassigned",color:"#888",for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1}:{avatar:!0,has_avatar:e.has_avatar,avatarPath:e.avatarPath,uniqueHash:e.uniqueHash,initials:e.initials,id:e.id,name:e.full_name,color:e.color,for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1};var l=r.map((function(e){var t,r=e.estimation,l=J()();if(e.start_date?l=Object(mi["q"])(e.start_date):e.real_start_date&&(l=Object(mi["q"])(e.real_start_date)),e.due_date?t=Object(mi["q"])(e.due_date):e.end_date?t=Object(mi["q"])(e.end_date):e.estimation&&(t=l.add(r,"days")),!t||t.isSameOrBefore(l)){var d=5===l.isoWeekday()?3:1;t=l.add(d,"days")}if(l||(l=J()()),!t.isSameOrAfter(l)){var u=5===l.isoWeekday()?3:1;t=l.clone().add(u,"days")}return r&&(o+=r),i&&!i.isAfter(l)||(i=l.clone()),n&&!n.isBefore(t)||(n=t.clone()),Object(c["a"])(Object(c["a"])({},e),{},{name:e.entity_name,startDate:l,endDate:t,expanded:!1,loading:!1,man_days:r,editable:s.isCurrentUserManager,unresizable:r>0,parentElement:a,color:s.getTaskElementColor(e,t),children:[]})}));return Object.assign(a,{children:l,startDate:i,endDate:n,man_days:o}),a},getTaskElementColor:function(e,t){if("status"===this.schedule.currentColor){var s=this.taskStatusMap[e.task_status_id].color;return"#f5f5f5"===s&&(s="#999"),s}if("late"===this.schedule.currentColor){var i=!this.taskStatusMap[e.task_status_id].is_done&&t.isBefore(J()());return i?"#FF3860":"#999"}return null},saveTaskScheduleItem:function(e){var t=this;this.$options.savingBuffer||(this.$options.savingBuffer={}),this.$options.savingBuffer[e.id]?this.$options.savingBuffer[e.id]=e:(this.$options.savingBuffer[e.id]=e,setTimeout((function(){e=Object(c["a"])({},t.$options.savingBuffer[e.id]),e.startDate&&e.endDate&&(e.parentElement.startDate=t.getMinDate(e.parentElement),e.parentElement.endDate=t.getMaxDate(e.parentElement),t.updateTask({taskId:e.id,data:{start_date:e.startDate.format("YYYY-MM-DD"),due_date:e.endDate.format("YYYY-MM-DD")}})),t.$options.savingBuffer[e.id]=void 0}),1e3))},getMinDate:function(e){var t=this.schedule.endDate.clone();return e.children.forEach((function(e){e.startDate&&e.startDate.isBefore(t)&&(t=e.startDate)})),t.clone()},getMaxDate:function(e){var t=this.schedule.startDate.clone();return e.children.forEach((function(e){e.endDate&&e.endDate.isAfter(t)&&(t=e.endDate)})),t.clone()},expandPersonElement:function(e){e.expanded=!e.expanded},resetScheduleHeight:function(){var e=this;this.$nextTick((function(){if(e.isActiveTab("schedule")){var t=e.$refs.page.offsetHeight,s=e.$refs.header.offsetHeight;e.schedule.scheduleHeight=t-s+20,e.$refs["schedule-widget"].resetScheduleSize()}}))}}),watch:{$route:function(){this.updateActiveTab()},currentProduction:function(){this.initData(!0)},currentSort:function(){this.sortTasks(),this.$refs["task-list"].resetSelection(),this.clearSelectedTasks()},"schedule.currentColor":function(){this.resetScheduleItems()},activeTab:function(){var e=this;this.isActiveTab("schedule")&&(this.resetScheduleItems(),this.resetScheduleHeight(),this.$nextTick((function(){e.$refs["schedule-widget"]&&e.$refs["schedule-widget"].scrollToToday()})))},currentScheduleItem:function(){this.currentScheduleItem&&(this.schedule.startDate=Object(mi["q"])(this.currentScheduleItem.start_date),this.schedule.endDate=Object(mi["q"])(this.currentScheduleItem.end_date),this.schedule.selectedStartDate=this.schedule.startDate.toDate(),this.schedule.selectedEndDate=this.schedule.endDate.toDate())},"schedule.selectedStartDate":function(){var e=Object(mi["e"])(this.schedule.selectedStartDate);e!==this.currentScheduleItem.start_date&&(this.schedule.startDate=Object(mi["q"])(e),this.currentScheduleItem.startDate=this.schedule.startDate,this.currentScheduleItem.endDate=this.schedule.endDate,this.saveScheduleItem(this.currentScheduleItem))},"schedule.selectedEndDate":function(){var e=Object(mi["e"])(this.schedule.selectedEndDate);e!==this.currentScheduleItem.end_date&&(this.schedule.endDate=Object(mi["q"])(e),this.currentScheduleItem.startDate=this.schedule.startDate,this.currentScheduleItem.endDate=this.schedule.endDate,this.saveScheduleItem(this.currentScheduleItem))}},socket:{events:{"task:update":function(e){this.taskMap[e.task_id]&&setTimeout(this.resetTaskIndex,1e3)}}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},vn=_n,gn=(s("95d5"),Object(_["a"])(vn,Gi,Ki,!1,null,"f4c6e78a",null)),yn=gn.exports,bn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"todos page"},[s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":e.isTabActive("todos")}},[s("router-link",{attrs:{to:{name:"todos"}}},[e._v(" "+e._s(e.$t("tasks.current"))+" ")])],1),s("li",{class:{"is-active":e.isTabActive("done")},on:{click:function(t){return e.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"done"}}}},[e._v(" "+e._s(e.$t("tasks.done"))+" ("+e._s(e.displayedDoneTasks.length)+") ")])],1),s("li",{class:{"is-active":e.isTabActive("timesheets")},on:{click:function(t){return e.selectTab("timesheets")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[e._v(" "+e._s(e.$t("timesheets.title"))+" ")])],1)])]),s("div",{staticClass:"flexrow"},[e.isTabActive("done")?e._e():s("search-field",{ref:"todos-search-field",class:{"search-field":!0,"flexrow-item":!0},attrs:{"can-save":!0},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("span",{staticClass:"flexrow-item push-right"}),s("span",{staticClass:"flexrow-item"}),s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1),e.isTabActive("todos")||e.isTabActive("timesheets")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:e.todoSearchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1):e._e(),e.isTabActive("todos")?s("todos-list",{ref:"todo-list",attrs:{tasks:e.sortedTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"selection-grid":e.todoSelectionGrid},on:{scroll:e.setTodoListScrollPosition}}):e._e(),e.isTabActive("done")?s("div"):e._e(),e.isTabActive("done")?s("todos-list",{ref:"done-list",attrs:{tasks:e.displayedDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,done:!0}}):e._e(),e.isTabActive("timesheets")?s("timesheet-list",{ref:"timesheet-list",attrs:{tasks:e.loggableTodos,"done-tasks":e.loggableDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"time-spent-map":e.timeSpentMap,"time-spent-total":e.timeSpentTotal,"hide-done":e.todosSearchText.length>0||0===e.loggableDoneTasks.length},on:{"date-changed":e.onDateChanged,"time-spent-change":e.onTimeSpentChange,"set-day-off":e.onSetDayOff,"unset-day-off":e.onUnsetDayOff}}):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},kn=[],wn=s("b11e"),Cn=s("e739"),Sn={name:"todos",components:{Combobox:qe["a"],SearchField:ft["a"],SearchQueryList:_t["a"],TaskInfo:$t["a"],TimesheetList:wn["a"],TodosList:Cn["a"]},data:function(){return{activeTab:"todos",currentSort:"priority",selectedDate:q()().format("YYYY-MM-DD"),sortOptions:["entity_name","priority","task_status_short_name","due_date","estimation","last_comment_date"].map((function(e){return{label:e,value:e}}))}},mounted:function(){var e=this;this.updateActiveTab(),this.todosSearchText.length>0&&this.$refs["todos-search-field"].setValue(this.todosSearchText),this.$nextTick((function(){e.loadTodos({date:e.selectedDate,callback:function(){e.todoList&&e.$nextTick((function(){e.todoList.setScrollPosition(e.todoListScrollPosition)})),e.resizeHeaders()}})}))},afterDestroy:function(){this.$store.commit("USER_LOAD_TODOS_END",{tasks:[],userFilters:{},taskTypeMap:this.taskTypeMap})},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["displayedDoneTasks","displayedTodos","isTodosLoading","isTodosLoadingError","nbSelectedTasks","selectedTasks","taskMap","taskTypeMap","todosSearchText","timeSpentMap","timeSpentTotal","todoListScrollPosition","todoSelectionGrid","todoSearchQueries","user"])),{},{loggableTodos:function(){var e=this;return this.sortedTasks.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},loggableDoneTasks:function(){var e=this;return this.displayedDoneTasks.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},todoList:function(){return this.$refs["todo-list"]},haveDoneList:function(){return this.$refs["done-list"]},sortedTasks:function(){var e="entity_name"===this.currentSort,t="priority"===this.currentSort,s="due_date"===this.currentSort,i=Object(Q["a"])(this.displayedTodos);return e?i.sort(Qi()("project_name").thenBy("task_type_name").thenBy("full_entity_name")):t?i.sort(Qi()("priority",-1).thenBy((function(e,t){return e.due_date?t.due_date?e.due_date.localeCompare(t.due_date):-1:1})).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name")):s?i.sort(Qi()((function(e,t){return e.due_date?t.due_date?e.due_date.localeCompare(t.due_date):-1:1})).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name")):i.sort(Qi()(this.currentSort,-1).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name"))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadTodos","loadOpenProductions","removeTodoSearch","saveTodoSearch","setDayOff","setTodoListScrollPosition","setTodosSearch","setTimeSpent","unsetDayOff"])),{},{isTabActive:function(e){return this.activeTab===e},resizeHeaders:function(){var e=this;this.$nextTick((function(){e.todoList&&e.todoList.resizeHeaders(),e.haveDoneList&&e.haveDoneList.resizeHeaders()}))},selectTab:function(e){var t=this;this.activeTab=e,this.resizeHeaders(),setTimeout((function(){t.$refs["todos-search-field"]&&t.$refs["todos-search-field"].focus()}),300)},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onSearchChange:function(e){this.setTodosSearch(e)},changeSearch:function(e){this.$refs["todos-search-field"].setValue(e.search_query),this.$refs["todos-search-field"].$emit("change",e.search_query)},saveSearchQuery:function(e){this.saveTodoSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},removeSearchQuery:function(e){this.removeTodoSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},onDateChanged:function(e){this.selectedDate=q()(e).format("YYYY-MM-DD"),this.loadTodos({date:this.selectedDate,forced:!0})},onSetDayOff:function(){var e={personId:this.user.id,date:this.selectedDate};this.setDayOff(e)},onUnsetDayOff:function(){var e={personId:this.user.id,date:this.selectedDate};this.unsetDayOff(e),this.loadTodos({forced:!0,date:this.selectedDate})},onTimeSpentChange:function(e){e.personId=this.user.id,e.date=this.selectedDate,this.setTimeSpent(e)},onAssignation:function(e){var t=this;this.user.id===e.person_id&&this.loadOpenProductions((function(){t.loadTodos({forced:!0,date:t.selectedDate,callback:function(){t.todoList&&t.$nextTick((function(){t.todoList.setScrollPosition(t.todoListScrollPosition)})),t.resizeHeaders()}})}))}}),socket:{events:{"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e)}}},watch:{$route:function(){this.updateActiveTab()}},metaInfo:function(){return{title:"".concat(this.$t("tasks.my_tasks")," - Kitsu")}}},Tn=Sn,xn=(s("91a5"),Object(_["a"])(Tn,bn,kn,!1,null,"43416286",null)),En=xn.exports,Pn=function(){return s.e("chunk-33595ba2").then(s.bind(null,"319f"))},On=function(){return s.e("chunk-a7a54222").then(s.bind(null,"0dd7"))},An=function(){return s.e("chunk-83efa44c").then(s.bind(null,"fd5f"))},jn=function(){return s.e("chunk-5ffd6bb0").then(s.bind(null,"38fe"))},Dn=function(){return s.e("chunk-825718d2").then(s.bind(null,"a591"))},Mn=function(){return s.e("chunk-6e2b0e55").then(s.bind(null,"33f5"))},In=function(){return s.e("chunk-4557dc8a").then(s.bind(null,"f79b"))},$n=function(){return s.e("chunk-1f21b49d").then(s.bind(null,"a01b"))},Ln=function(){return s.e("chunk-c57c15e6").then(s.bind(null,"6893"))},Fn=function(){return s.e("chunk-458f2823").then(s.bind(null,"d1e3"))},qn=function(){return s.e("chunk-b318697c").then(s.bind(null,"4e82"))},Nn=function(){return s.e("chunk-252889e4").then(s.bind(null,"d46a"))},zn=function(){return s.e("chunk-159a993a").then(s.bind(null,"9633"))},Rn=function(){return s.e("chunk-1ce5f58f").then(s.bind(null,"cd92"))},Vn=function(){return s.e("chunk-75a7536b").then(s.bind(null,"8bb6"))},Bn=function(){return s.e("chunk-3ac1d238").then(s.bind(null,"421c"))},Un=function(){return s.e("chunk-2d21082e").then(s.bind(null,"b7cf"))},Hn=function(){return s.e("chunk-2d0dacb1").then(s.bind(null,"6cb0"))},Gn=function(){return s.e("chunk-73eac616").then(s.bind(null,"e186"))},Kn=function(){return s.e("chunk-cd99eafc").then(s.bind(null,"6522"))},Wn=function(){return s.e("chunk-405200c6").then(s.bind(null,"2e31"))},Yn=function(){return s.e("chunk-24f48247").then(s.bind(null,"d214"))},Qn=function(){return s.e("chunk-57e668be").then(s.bind(null,"de06"))},Xn=function(){return s.e("chunk-28fe89dc").then(s.bind(null,"99a3"))},Jn=function(){return s.e("chunk-277136e8").then(s.bind(null,"24d0"))},Zn=function(){return s.e("chunk-1e746b6e").then(s.bind(null,"129d"))},ea=function(){return s.e("chunk-199f9e08").then(s.bind(null,"9f1e"))},ta=function(){return s.e("chunk-1e3739e4").then(s.bind(null,"56b8"))},sa=function(){return s.e("chunk-2d0c7360").then(s.bind(null,"503b"))},ia=[{path:"",component:Hs,beforeEnter:function(e,t,s){var i=$.a.getParser(window.navigator.userAgent),n=i.satisfies({chrome:">20.1.1432",firefox:">31",vivaldi:">2.8",opera:">22",edge:">87",electron:">11"});if(!n)return s({name:"wrong-browser"});L["a"].requireAuth(e,t,(function(e){e?s(e):(V.setTimezone(),R.setLocale(),0===N["a"].state.productions.openProductions.length?H((function(e){e?s({name:"server-down"}):G["a"].getters.isCurrentUserArtist(G["a"].state)?s({name:"todos"}):s({name:"open-productions"})})):G["a"].getters.isCurrentUserArtist(G["a"].state)?(N["a"].commit("DATA_LOADING_END"),s({name:"todos"})):(N["a"].commit("DATA_LOADING_END"),s({name:"open-productions"})))}))}},{path:"/",component:Hs,beforeEnter:function(e,t,s){L["a"].requireAuth(e,t,(function(e){e?s(e):(V.setTimezone(),R.setLocale(),0===K["a"].state.taskTypes.length?H((function(){N["a"].commit("DATA_LOADING_END"),s()})):(N["a"].commit("DATA_LOADING_END"),s()))}))},children:[{path:"",name:"home"},{path:"asset-types",component:Pn,children:[{path:"new",component:Pn},{name:"edit-asset-type",path:"edit/:asset_type_id",component:Pn},{name:"delete-asset-type",path:"delete/:asset_type_id",component:Pn}]},{name:"custom-actions",path:"custom-actions",component:jn,children:[{name:"custom-actions-new",path:"new",component:jn},{name:"edit-custom-action",path:"edit/:custom_action_id",component:jn},{name:"delete-custom-action",path:"delete/:custom_action_id",component:jn}]},{name:"notifications",path:"notifications",component:si},{path:"open-productions",component:di,name:"open-productions"},{path:"people",component:Ln,name:"people",children:[{path:"new",component:Ln,name:"new-people"},{path:"edit/:person_id",component:Ln,name:"edit-person"},{name:"delete-person",path:"delete/:person_id",component:Ln}]},{path:"people/:person_id",component:$n,name:"person",children:[{path:":tab",component:$n,name:"person-tab"}]},{path:"/main-schedule",component:Mn,name:"main-schedule"},{path:"/timesheets",component:Zn,name:"timesheets",children:[{path:"year/:year",component:Zn,name:"timesheets-year"},{path:"year/:year/persons/:person_id",component:Zn,name:"timesheets-year-person"},{path:"month/:year",component:Zn,name:"timesheets-month"},{path:"month/:year/:month/persons/:person_id",component:Zn,name:"timesheets-month-person"},{path:"week/:year",component:Zn,name:"timesheets-week"},{path:"week/:year/:week/persons/:person_id",component:Zn,name:"timesheets-week-person"},{path:"day/:year/:month",component:Zn,name:"timesheets-day"},{path:"day/:year/:month/:day/persons/:person_id",component:Zn,name:"timesheets-day-person"}]},{path:"/logs",component:Gn,name:"logs"},{path:"profile",component:Bn,name:"profile",children:[{path:"change-avatar",component:Bn,name:"change-avatar"}]},{path:"settings",component:Wn,name:"settings"},{name:"task-types",path:"task-types",component:ta,children:[{path:"new",component:ta},{name:"edit-task-type",path:"edit/:task_type_id",component:ta},{name:"delete-task-type",path:"delete/:task_type_id",component:ta}]},{name:"task-status",path:"task-status",component:ea,children:[{name:"new-task-status",path:"new",component:ea},{name:"edit-task-status",path:"edit/:task_status_id",component:ea},{name:"delete-task-status",path:"delete/:task_status_id",component:ea}]},{path:"todos",component:En,name:"todos",children:[{path:":tab",component:En,name:"todos-tab"}]},{path:"productions",component:qn,name:"productions",children:[{path:"new",component:qn,name:"productions-new"},{path:"edit/:production_edit_id",component:qn,name:"edit-production"},{path:"delete/:production_delete_id",component:qn,name:"delete-production"}]},{path:"productions/:production_id/team",component:Jn,name:"team"},{path:"productions/:production_id/news-feed",component:yi,name:"news-feed"},{path:"productions/:production_id/schedule",component:zn,name:"schedule"},{path:"productions/:production_id/production-settings",component:Vn,name:"production-settings"},{path:"productions/:production_id/quota",component:Rn,name:"quota",children:[{path:"month/:year",component:Rn,name:"quota-month"},{path:"month/:year/:month/persons/:person_id",component:Rn,name:"quota-month-person"},{path:"week/:year",component:Rn,name:"quota-week"},{path:"week/:year/:week/persons/:person_id",component:Rn,name:"quota-week-person"},{path:"day/:year/:month",component:Rn,name:"quota-day"},{path:"day/:year/:month/:day/persons/:person_id",component:Rn,name:"quota-day-person"}]},{path:"productions/:production_id/episodes/:episode_id/quota",component:Rn,name:"episode-quota",children:[{path:"month/:year",component:Rn,name:"episode-quota-month"},{path:"month/:year/:month/persons/:person_id",component:Rn,name:"episode-quota-month-person"},{path:"week/:year",component:Rn,name:"episode-quota-week"},{path:"week/:year/:week/persons/:person_id",component:Rn,name:"episode-quota-week-person"},{path:"day/:year/:month",component:Rn,name:"episode-quota-day"},{path:"day/:year/:month/:day/persons/:person_id",component:Rn,name:"episode-quota-day-person"}]},{path:"productions/:production_id/playlists",component:Fn,name:"playlists",children:[{name:"playlist",path:":playlist_id",component:Fn},{name:"delete-playlist",path:":playlist_id/delete",component:Fn},{name:"edit-playlist",path:":playlist_id/edit",component:Fn}]},{path:"productions/:production_id/breakdown",component:An,name:"breakdown",children:[{path:"sequences/:sequence_id",component:An,name:"breakdown-sequence"},{path:"asset-types/:asset_type_id",component:An,name:"breakdown-asset-type"}]},{path:"productions/:production_id/assets",component:Nt,name:"assets",children:[{path:"new",component:Nt,name:"new-asset"},{path:"edit/:asset_id",component:Nt,name:"edit-asset"},{path:"delete/:asset_id",component:Nt,name:"delete-asset"},{path:"restore/:asset_id",component:Nt,name:"restore-asset"},{path:"delete-all-tasks/:task_type_id",component:Nt,name:"delete-all-asset-tasks"}]},{path:"productions/:production_id/assets/:asset_id",component:On,name:"asset"},{path:"productions/:production_id/shots",component:Hi,name:"shots",children:[{path:"delete-all-tasks/:task_type_id",component:Hi,name:"delete-all-shot-tasks"},{path:"edit/:shot_id",component:Hi,name:"edit-shot"},{path:"delete/:shot_id",component:Hi,name:"delete-shot"},{path:"restore/:shot_id",component:Hi,name:"restore-shot"}]},{path:"productions/:production_id/shots/:shot_id",component:Qn,name:"shot"},{path:"productions/:production_id/sequences",component:Yn,name:"sequences",children:[{path:"edit/:sequence_id",component:Yn,name:"edit-sequence"},{path:"delete/:sequence_id",component:Yn,name:"delete-sequence"}]},{path:"productions/:production_id/asset-types",component:Nn,name:"production-asset-types"},{path:"productions/:production_id/:type/task-types/:task_type_id",component:yn,name:"task-type",children:[{name:"task-type-schedule",path:"schedule",component:yn},{name:"task-type-estimation",path:"estimation",component:yn}]},{name:"task",path:"productions/:production_id/:type/tasks/:task_id",component:Xn,children:[{name:"task-delete",path:"delete",component:Xn},{name:"task-change-preview",path:"comments/:comment_id/change-preview",component:Xn},{name:"task-preview",path:"previews/:preview_id",component:Xn},{name:"task-edit-comment",path:"comments/:comment_id/edit",component:Xn},{name:"task-delete-comment",path:"comments/:comment_id/delete",component:Xn}]},{path:"productions/:production_id/episodes",component:Dn,name:"episodes",children:[{path:"edit/:episode_id",component:Dn,name:"edit-episode"},{path:"delete/:episode_id",component:Dn,name:"delete-episode"}]},{path:"productions/:production_id/episodes/:episode_id/schedule",component:zn,name:"episode-schedule"},{path:"productions/:production_id/episodes/:episode_id/playlists",component:Fn,name:"episode-playlists",children:[{name:"episode-playlist",path:":playlist_id",component:Fn},{name:"episode-delete-playlist",path:":playlist_id/delete",component:Fn},{name:"episode-edit-playlist",path:":playlist_id/edit",component:Fn}]},{path:"productions/:production_id/episodes/:episode_id/breakdown",component:An,name:"episode-breakdown",children:[{path:"sequences/:sequence_id",component:An,name:"episode-breakdown-sequence"},{path:"asset-types/:asset_type_id",component:An,name:"episode-breakdown-asset-type"}]},{path:"productions/:production_id/episodes/:episode_id/assets",component:Nt,name:"episode-assets",children:[{path:"new",component:Nt,name:"episode-new-asset"},{path:"edit/:asset_id",component:Nt,name:"episode-edit-asset"},{path:"delete/:asset_id",component:Nt,name:"episode-delete-asset"},{path:"restore/:asset_id",component:Nt,name:"episode-restore-asset"},{path:"delete-all-tasks/:task_type_id",component:Nt,name:"episode-delete-all-asset-tasks"}]},{path:"productions/:production_id/episodes/:episode_id/assets/:asset_id",component:On,name:"episode-asset"},{path:"productions/:production_id/episodes/:episode_id/shots",component:Hi,name:"episode-shots",children:[{path:"shots/manage",component:Hi,name:"episode-manage-shots"},{path:"delete-all-tasks/:task_type_id",component:Hi,name:"episode-delete-all-shot-tasks"},{path:"edit/:shot_id",component:Hi,name:"episode-edit-shot"},{path:"delete/:shot_id",component:Hi,name:"episode-delete-shot"},{path:"shots/restore/:shot_id",component:Hi,name:"episode-restore-shot"}]},{path:"productions/:production_id/episodes/:episode_id/shots/:shot_id",component:Qn,name:"episode-shot"},{path:"productions/:production_id/episodes/:episode_id/asset-types",component:Nn,name:"episode-production-asset-types"},{path:"productions/:production_id/episodes/:episode_id/sequences",component:Yn,name:"episode-sequences",children:[{path:"edit/:sequence_id",component:Yn,name:"episode-edit-sequence"},{path:"delete/:sequence_id",component:Yn,name:"episode-delete-sequence"}]},{path:"productions/:production_id/episodes/:episode_id/:type/task-types/:task_type_id",component:yn,name:"episode-task-type",children:[{name:"episode-task-type-schedule",path:"schedule",component:yn},{name:"episode-task-type-estimation",path:"estimation",component:yn}]},{path:"productions/:production_id/episodes/:episode_id/:type/tasks/:task_id",name:"episode-task",component:Xn,children:[{name:"episode-task-delete",path:"delete",component:Xn},{name:"episode-task-change-preview",path:"comments/:comment_id/change-preview",component:Xn},{name:"episode-task-preview",path:"previews/:preview_id",component:Xn},{name:"episode-task-edit-comment",path:"comments/:comment_id/edit",component:Xn},{name:"episode-task-delete-comment",path:"comments/:comment_id/delete",component:Xn}]}]},{path:"/login",component:Ht,name:"login"},{path:"/reset-password",component:Un,name:"reset-password"},{path:"/reset-change-password/:token",component:Hn,name:"reset-change-password"},{path:"/server-down",component:Kn,name:"server-down"},{path:"/wrong-browser",component:sa,name:"wrong-browser"},{path:"/*",component:In,name:"not-found"}];n.a.use(M["a"]);var na=function(e,t,s){return s||{x:0,y:0}},aa=new M["a"]({mode:"history",scrollBehavior:na,routes:ia}),oa=s("d051"),ra=s.n(oa),ca=s("30ef"),la=s.n(ca),da=s("58ca"),ua=s("d842"),pa=s("00e7"),ma=s.n(pa),ha=s("df76"),fa=s.n(ha),_a=s("caf9"),va=s("b9dd"),ga=s("3f9d"),ya=s("e37d"),ba=s("6c34"),ka=s.n(ba);s("a507");n.a.use(ka.a,"/events"),n.a.config.productionTip=!1,n.a.use(ra.a),n.a.use(da["a"]),n.a.use(D),n.a.use(ya["a"]),n.a.use(ua["a"],{adapter:la.a}),n.a.use(ma.a),n.a.use(_a["a"]),n.a.use(va["a"]),n.a.use(fa.a),n.a.use(ga["a"]),Object(a["sync"])(N["a"],aa),n.a.directive("focus",{inserted:function(e){e.focus()}}),n.a.prototype.$locale={change:function(e){j.locale=e},current:function(){return j.locale}},new n.a({el:"#app",components:{App:g},template:"<App/>",i18n:j,router:aa,store:N["a"]}),n.a.config.keyCodes.backspace=8},"587c":function(e,t,s){"use strict";s("085a")},"58f5":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"name"},[s("task-type-name",{attrs:{"task-type":e.taskType,"production-id":e.productionId}})],1)},n=[],a=s("5530"),o=s("2f62"),r=s("274f"),c={name:"task-type-cell",components:{TaskTypeName:r["a"]},props:{taskType:{type:Object,default:null},productionId:{type:String,default:null}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{color:function(){return"#000000"===this.entry.color.toUpperCase()?"$grey-strong":this.entry.color}}),methods:Object(a["a"])({},Object(o["b"])([]))},l=c,d=(s("6767"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"7b0f7d82",null);t["a"]=u.exports},"5a10":function(e,t,s){},"5b23":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.commentToEdit&&e.commentToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("comments.edit_title"))+" ")]):e._e(),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combo-box-status",{attrs:{label:e.$t("task_status.title"),"task-status-list":e.taskStatusForCurrentUser},model:{value:e.form.task_status_id,callback:function(t){e.$set(e.form,"task_status_id",t)},expression:"form.task_status_id"}}),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("comments.text"))+" ")]),s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:"2"},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.item.full_name)+" ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.text,expression:"form.text"},{name:"focus",rawName:"v-focus"}],ref:"textField",staticClass:"input",domProps:{value:e.form.text},on:{keyup:[function(t){return t.ctrlKey?e.runConfirmation(t):null},function(t){return t.metaKey?e.runConfirmation(t):null}],input:function(t){t.target.composing||e.$set(e.form,"text",t.target.value)}}})])],1),s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("comments.checklist"))+" ")]),s("checklist",{attrs:{checklist:e.form.checklist},on:{"add-item":e.onAddChecklistItem,"remove-task":e.removeTask}})],1),s("modal-footer",{attrs:{"error-text":e.$t("comments.edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=s("2909"),o=s("5530"),r=(s("498a"),s("2f62")),c=s("d065"),l=s("66e7"),d=s("53ff"),u=s.n(d),p=s("4ce0"),m=s("56a0"),h=s("d5c9"),f=s("eb8c"),_={name:"edit-comment-modal",mixins:[c["a"]],components:{AtTa:u.a,Checklist:p["a"],ComboBoxStatus:m["a"],ModalFooter:h["a"],PeopleAvatar:f["a"]},props:["active","cancelRoute","isLoading","isError","commentToEdit","team"],data:function(){return{form:{text:"",task_status_id:null,checklist:[{checked:!1,text:""}]}}},computed:Object(o["a"])({},Object(r["c"])(["taskStatusForCurrentUser"])),methods:{runConfirmation:function(e){e&&13!==e.keyCode&&e.keyCode||this.$emit("confirm",Object(o["a"])({id:this.commentToEdit.id},this.form))},removeTask:function(e){this.form.checklist=Object(a["a"])(Object(l["f"])(this.form.checklist,e))},reset:function(){this.commentToEdit&&this.commentToEdit.id?this.form={text:this.commentToEdit.text,task_status_id:this.commentToEdit.task_status_id,checklist:Object(a["a"])(this.commentToEdit.checklist)}:this.form={text:"",task_status_id:null,checklist:[{checked:!1,text:""}]}},onAddChecklistItem:function(e){this.form.checklist[e.index].text=this.form.checklist[e.index].text.trim(),delete e.index,this.form.checklist.push(e)}},watch:{commentToEdit:function(){this.reset()},active:function(){var e=this;this.active&&setTimeout((function(){e.reset(),e.$refs.textField.focus()}),100)}}},v=_,g=(s("587c"),s("2877")),y=Object(g["a"])(v,i,n,!1,null,"2e49b30f",null);t["a"]=y.exports},"5bf3":function(e,t,s){"use strict";s("82ea")},"5c0b":function(e,t,s){"use strict";s("9c0c")},"5c0c":function(e,t,s){"use strict";s("e4c2")},"5c3d":function(e,t,s){e.exports=s.p+"img/spinner.b926fef9.svg"},"5c68":function(e,t,s){"use strict";s("952a")},"5d67":function(e){e.exports=JSON.parse('{"default":{"assets":{"cast_in":"Estreia em","delete_error":"Ocorreu um erro ao excluir este ativo. Provavelmente há dados vinculados a ele. Tem certeza de que este tipo de ativo não possui nenhuma tarefa vinculada a ele?","delete_text":"Tem certeza de que deseja remover {name} de seu banco de dados?","edit_fail":"Falha ao salvar, pode ser devido ao fato de que já existe um asset com um nome semelhante","edit_success":"Asset {name} editado com sucesso","edit_title":"Editar asset","empty_list":"Não há nenhum asset na produção. Que tal criar alguns?","empty_list_client":"Não há nenhum asset nesta produção.","new_asset":"Criar um asset","new_assets":"Adicionar assets","new_success":"Asset {name} criado com sucesso.","no_cast_in":"Este asset não é lançado em nenhuma cena.","number":"asset | assets","restore_text":"Tem certeza de que deseja restaurar {name} em seu banco de dados?","restore_error":"Ocorreu um erro ao restaurar este asset.","tasks":"Tarefas do asset","title":"Assets","fields":{"description":"Descrição","episode":"Ep.","name":"Nome","production":"Prod","time_spent":"Tempo","type":"Tipo","hidden_from_client":"Exibido para o cliente"}},"asset_types":{"all_asset_types":"Todos os tipos de assets","create_error":"Ocorreu um erro ao salvar este tipo de asset. Tem certeza de que não há nenhum tipo de asset com nome semelhante?","delete_text":"Tem certeza de que deseja remover {name} de seu banco de dados?","delete_error":"Ocorreu um erro ao excluir este tipo de ativo. Provavelmente há dados vinculados a ele. Tem certeza de que este tipo de ativo não possui nenhum ativo vinculado a ele?","edit_title":"Editar tipo de asset","new_asset_type":"Adicionar um tipo de asset","number":"tipo de asset | tipo de assets","title":"Tipos de Asset","production_title":"Status Tipos de Assets","fields":{"name":"Nome"}},"breakdown":{"all_assets":"Todos os assets disponíveis","edit_label":"Alterar o rótulo do asset","empty":"Elenco vazio","label":"Rótulo","picture_mode":"Mudar para o modo de imagem","text_mode":"Mudar para o modo de texto","title":"Breakdown","options":{"fixed":"corrigido","animate":"animado"}},"comments":{"add_attachment":"Adicionar anexo","add_checklist":"Adicionar checklist","add_comment":"Adicionar comentário...","add_preview":"Anexar preview","change_preview":"Alterar preview","comment_from_client":"Comentário do cliente","edit_title":"Editar comentário","empty_text":"Este comentário está vazio","edit_error":"Ocorreu um erro ao editar o comentário. Entre em contato com nossa equipe de suporte.","error":"Ocorreu um erro ao postar o comentário","no_file_attached":"Nenhum arquivo anexado","pin":"Fixar","pinned":"Fixado","post_status":"Postar comentário","retake":"Retomar","revision":"revisão","set_status_to":"Setar status para","task_placeholder":"Novo item...","text":"Texto","unpin":"Desafixar","validated":"Validado!","validation_required":"Validação Obrigatória","fields":{"text":"texto"}},"custom_actions":{"create_error":"Ocorreu um erro ao salvar esta ação personalizada personalizada. Tem certeza de que não há outra ação com o mesmo nome?","delete_text":"Tem certeza de que deseja remover a ação personalizada {name} de seu banco de dados?","delete_error":"Ocorreu um erro ao excluir esta ação personalizada personalizada.","edit_title":"Editar uma ação personalizada","new_custom_action":"Adicionar uma ação personalizada","number":"ação original | ações personalizadas","run_for_selection":"Execute ações personalizadas para tarefas selecionadas:","title":"Ações personalizadas","fields":{"name":"Nome","url":"URL","entity_type":"Tipo de entidade","is_ajax":"Usar AJAX"},"entity_types":{"all":"Tudo","shot":"Shot","asset":"Asset"}},"entities":{"build_filter":{"asset_type":"Tipo de Asset","all_types":"Todos tipos de asset","assignation":"Atribuição","assignation_exists_for":"Existem atribuições para","assigned_to":"Atribuído a","descriptor":"Metadados","equal":"Igual","in":"Em","no_assignation_for":"Não existe atribuição para","no_filter":"Sem filtro","not_equal":"Não igual","not_assigned_to":"Não atribuído a","status":"Status da tarefa","thumbnail":"Existência de thumbnail","title":"Filtrar em ...","union_and":"Combine todos os seguintes filtros","union_or":"Corresponde a um dos seguintes filtros","with_thumbnail":"Com thumbnail","without_thumbnail":"Sem thumbnail"},"thumbnails":{"error":"Ocorreu um erro ao enviar thumbnails","explaination":"Adicionar uma thumbnail requer a definição de uma nova visualização. Para definir várias miniaturas ao mesmo tempo, você deve escolher primeiro um tipo de tarefa que será usado para criar as novas visualizações. As thumbnails serão definidas a partir desta nova visualização.","explaination_two":"Então você tem que selecionar os arquivos que deseja carregar. Para encontrar as entidades certas, os nomes dos arquivos devem corresponder ao seguinte padrão:","shots_pattern":"\\"NomeDaSequence NomeDoShot\\" por exemplo. SQ01_SH01.","assets_pattern":"\\"TipoDeAsset NomeDoAsset\\" eg. Environment_Forest.","select_files":"Selecionar Arquivos","selected_files":"Arquivos Selecionados","select_task_type":"Selecionar Tipo de Tarefa","title":"Adicionar Thumbnails","undefined":"Não definido","undefined_pattern":"Não definido","upload":"Adicionar thumbnails"}},"estimation":{"title":"Estimativa"},"episodes":{"all_episodes":"Todos episódios","edit_error":"Ocorreu um erro ao salvar este episódio. Tem certeza de que não há episódio com nome semelhante?","delete_error":"Ocorreu um erro ao excluir este episódio. Provavelmente há dados vinculados a ele. Tem certeza que este episódio não tem nenhuma sequência ligada a ele?","delete_text":"Tem certeza de que deseja remover {name} de seu banco de dados? Todas as fotos e visualizações relacionadas serão excluídas. Por favor, confirme digitando o nome do episódio abaixo.","edit_title":"Editar episódio","empty_list":"Não há nenhum episódio na produção. Que tal criar alguns?","empty_list_client":"Não há nenhum episódio nesta produção.","new_episode":"Novo episódio","number":"episódio | episódios","title":"Estatísticas do episódio","fields":{"name":"nome","description":"descrição"}},"keyboard":{"altdown":"Mover a seleção de tarefa para baixo","altj":"Selecione a visualização anterior","altk":"Selecionar nova preview","altleft":"Mover a seleção de tarefa para esquerda","altright":"Mover a seleção de tarefa para direita","altup":"Mover a seleção de tarefa para cima","annotations":"Anotações","draw":"Ativar modo de desenho","navigation":"Navegação","redo":"Refazer","undo":"Desfazer","playlist_navigation":"Navegação da lista de reprodução","remove_annotation":"Remover anotação","shortcuts":"Atalhos"},"login":{"back_to_login":"Voltar para a página de login","forgot_password":"Esqueceu a senha?","login":"Log in","login_failed":"Falha no login, verifique suas credenciais","login_page":"Cancelar","redirecting":"Redirecionando em {secondsLeft} segundos ...","reset_change_password":"Mudar senha","reset_change_password_form_failed":"Há um problema com a senha que você forneceu. Por favor, verifique se ele tem pelo menos 7 caracteres e se as duas senhas correspondem.","reset_change_password_failed":"Falha ao alterar a senha. Reinicie todo o procedimento novamente.","reset_change_password_succeed":"Sua senha foi alterada com sucesso. Por favor, volte para a página de login para usá-lo.","reset_change_password_title":"Insira uma nova senha","reset_password":"Redefinir Senha","reset_password_failed":"Falha ao redefinir sua senha. Por favor, verifique seu e-mail.","reset_password_succeed":"A redefinição da sua senha foi bem-sucedida. Verifique sua caixa de entrada.","reset_password_title":"Insira seu e-mail para redefinir sua senha","title":"Entrar no Kitsu","fields":{"email":"Email","password":"Senha","password2":"Senha novamente"}},"main":{"about":"Sobre","add":"Adicionar","all":"Todos","all_assets":"Todos os assets","admin":"Admin","cancel":"Cencelar","clear_selection":"Limpar seleção","close":"Fechar","confirmation":"Confirmar","confirmation_and_stay":"Confirmar e permanecer","date":"Data","dark_theme":"Tema Escuro","days_spent":"dia gasto | dias gastos","days_estimated":"dia estimado | dias estimados","delete":"Deletar","delete_all":"Deletar tudo","delete_text":"Tem certeza de que deseja remover {name} de seu banco de dados?","documentation":"Documentação","edit":"Editar","empty_comment":"Comentário vazio","end_date":"Data final","files_selected":"Arquivos selecionados","for":"Para","go_productions":"Ir para as produções","history":"histórico","info":"Informação","or":"ou","no":"Não","loading":"Carregando...","loading_data":"Carregando dados","loading_error":"Um erro ocorreu enquanto os dados eram carregados.","logout":"Sair","modify":"Midificar","minimize":"Minimizar","main_pack":"Pacote Principal","maximize":"Maximizar","nb_frames":"frame | frames","person":"Pessoa","profile":"Perfil","production":"Produção","remove":"Remover","save":"Salvar","sort_by":"Ordenar por","sorted_by":"Ordenado por","start_date":"Data de inicio","studio":"Estúdio","tutorials":"Tutoriais","user":"Usuário","white_theme":"Tema Branco","yes":"Sim","csv":{"choose":"Escolher","error_upload":"Um erro ocorreu no upload do seu CSV.","export_file":"Exportar","import_file":"Importar","import_title":"Importar dados de um CSV","legend":"Legenda","legend_ok":"Dados reconhecidos","legend_ignored":"Dados ignorados","legend_missing":"Dados faltando","legend_disabled":"Dados que não serão atualizados ou criados","legend_overwrite":"Dados que serão  atualizados","paste":"Colar","paste_code":"Por favor cole aqui seus dados CSV:","preview":"Prévia","preview_episode_name":"Nome do episódio","preview_title":"Prévia dos dados importados","preview_description":"Faça upload de um arquivo .csv para preencher seu quadro com postagens.","preview_required":"NB: os cabeçalhos devem ser incluídos na primeira linha.","preview_reupload":"Reenviar arquivo .CSV","required_fields":"Seu CSV requer as seguintes colunas","select_file":"Selecione um arquivo de uma das suas pastas:","tab_select_file":"Fazer upload de arquivo CSV","tab_paste_code":"Colar dados CSV","unknown":"Coluna desconhecida","upload_file":"Navegar","options":{"title":"Opções","update":"Atualizar dados existentes"}}},"menu":{"assign_tasks":"Atribuir tarefas","change_priority":"Alterar prioridade","change_status":"Alterar status","create_tasks":"Criar tarefas","delete_tasks":"Deletar tarefas","generate_playlists":"Gerar playlists","run_custom_action":"Rodar ação customizada","set_estimations":"Definir estimativas"},"news":{"all":"Todos","commented_on":"comentado em","infos":"Infos","no_news":"Não há novidades para esta produção ou para este filtro.","only_comments":"Apenas comentários","only_previews":"Apenas prévias","set_preview_on":"definir a prévia em","task_status":"Status a tarefa","task_type":"Tipo de tarefa","title":"Notícias"},"not_found":{"text":"Havia algo errado com o link em que você clicou. Recomendamos que você volte à página inicial.","title":"Página não encontrada ... você está procurando algo que excluiu?"},"notifications":{"and_change_status":"e mudou o status para","assigned_you":"designou você para","commented_on":"comentou sobre","mention_you_on":"mencionou você em","no_notifications":"No momento, não há notificação para você sobre seus projetos atuais.","unread_notifications":"notificação não lida | notificações não lidas","title":"Notificações","with_preview":"com uma prévia"},"people":{"active":"Ativo","active_persons":"pessoa ativa | pessoas ativas","add_member_to_team":"Adicione um membro à equipe:","create_invite":"Criar e enviar convite","create_error":"Ocorreu um erro ao criar esta pessoa. Entre em contato com nossa equipe de suporte para obter mais informações.","delete_error":"Ocorreu um erro ao excluir esta pessoa. Provavelmente há dados vinculados a ele. Tem certeza de que esta pessoa não tem atribuição ou não escreveu nenhum comentário?","delete_text":"Tem certeza de que deseja remover {personName} de seu banco de dados? Todos os comentários e visualizações relacionados serão excluídos. Confirme digitando o nome completo da pessoa abaixo.","edit_title":"Editar pessoa","empty_team":"Não há ninguém listado na equipe do projeto.","invite":"Envie um convite","invite_error":"Ocorreu um erro ao enviar o convite","invite_success":"O convite foi enviado com sucesso","new_person":"Adicionar um novo funcionário","no_task_assigned":"Não há tarefas em execução atribuídas a você","persons":"pessoa | pessoas","running_tasks":"Tarefas em execução","select_person":"Selecione uma pessoa ...","team":"Time","title":"Pessoas","unactive":"Inativo","csv":{"import_file":"Importar arquivo .csv","export_file":"Baixar como .csv","import_title":"Importar dados de um arquivo CSV","required_fields":"Seu arquivo CSV precisa das seguintes colunas:","select_file":"Por favor selecione um arquivo da sua pasta:","error_upload":"Um erro ocorreu no upload do arquivo CSV."},"fields":{"first_name":"Primeiro nome","last_name":"Último nome","email":"Email","phone":"Telefone","role":"Cargo","old_password":"Senha atual","password":"Nova senha","password_2":"Nova senha (repetir)","active":"Ativo"},"list":{"name":"Nome","email":"Email","phone":"Telefone","role":"Cargo","active":"Ativo"},"role":{"admin":"Gerente de Estúdio","client":"Cliente","manager":"Supervisor","user":"Artista","undefined":"desconhecido","vendor":"Fornecedor"}},"playlists":{"add_assets":"Adicionar assets","add_selection":"Adicionar seleção","add_shots":"Adicionar shots","add_sequence":"Adicionar sequencia inteira","add_episode":"Adicionar episódio inteiro","add_movie":"Adicionar filme inteiro","apply_task_type_change":"Isso definirá a última revisão para determinado tipo de tarefa em todas as tentativas.","available_build":"Compilações disponíveis","build_daily":"Diariamente pendente","build_weekly":"Todos pendentes","build_mp4":"Exportar .mp4 (beta)","building":"Exportando...","client_playlist":"Playlist de Cliente","create_for_selection":"Gerar uma playlist para seleção de shot","create_title":"Criar playlist","created_at":"Criado em:","delete_text":"Você tem certeza que deseja remover {name} do seu banco de dados?","delete_error":"Um erro ocorreu ao deletar a playlist.","edit_error":"Um erro ocorreu ao salvar a playlist.","download_zip":"Baixar .zip","failed":"Falhou","for_client":"O cliente","for_studio":"O Estúdio","edit_title":"Editar playlist","last_creation":"Ultimas criações","last_modification":"Ultimas modificações","loading_error":"Ocorreu um erro no servidor. As playlist não foram carregadas.","new_playlist":"Adicionar playlist.","no_build":"Sem exportação","no_playlist":"Atualmente não há uma playlist para esse projeto ou episódio.","no_preview":"Sem prévia","no_selection":"Por favor selecione uma playlist na esquerda.","no_sequence_for_episode":"Não há uma sequencia para esse episódio","no_shot_for_production":"Não há um shot para essa produção","select_shot":"Por favor selecione um shot na coluna a direita","select_playlist":"Por favor selecione uma playlist da coluna a esquerda","select_task_type":"Por favor altere o tipo de tarefa em todos os shots","title":"Playlists","updated_at":"Atualizado em:","remove":"remover","fields":{"name":"Nome","created_at":"Data de criação","updated_at":"Data de atualização","for_entity":"Selecionar entidade para mostrar","for_client":"Para ser compartilhado com"},"actions":{"annotation":"Anotação","annotation_text":"Clique duas vezes na prévia para adicionar um texto","annotation_delete":"Deletar anotação","annotation_redo":"Refazer anotação","annotation_undo":"Desfazer anotação","annotation_big":"Grande","annotation_medium":"Médio","annotation_small":"Pequeno","change_task_type":"Alterar tipo de tarefa","comments":"Mostrar/Esconder comentários","delete":"Deletar playlist","download":"Baixar...","edit":"Editar playlist","entity_list":"Mostrar/Esconder lista de entidades","fullscreen":"Fullscreen","next_frame":"Próxima frame","next_shot":"Próximo shot","pause":"Pausar","play":"Play","previous_frame":"Frame anterior","previous_shot":"Shot anterior","save_playlist":"Salvar playlist","speed":"Alterar velocidade","split_screen":"Dividir tela"}},"productions":{"current":"Prodição selecionada","delete_text":"Você tem certeza que deseja remover {name} do seu banco de dados? Por favor, confirme digitando o nome do projeto que você quer deletar no campo de texto.","delete_error":"Ocorreu um erro ao excluir esta produção. Provavelmente há dados vinculados a ele. Tem certeza de que esta produção não tem tarefa, cena ou recurso vinculado a ela? Kitsu não permite exclusão de produção. Se você não quiser mais ver a produção, pode fechá-lo.","edit_title":"Editar produção","new_production":"Adicionar uma produção","number":"produção | produções","open_productions":"Minhas produções","picture":"Alterar imagem","title":"Produções","home":{"create_new":"Criar uma nova produção","empty":"Você não possui nenhuma produção criada. O que acha de criar uma nova?","no_task":"Você não possui nenhuma task atribuída. Fale com seu supervisor para descobrir o que pode fazer!","no_prod_for_client":"Você não possui acesso a nenhuma produção. Contate seu contratante para obter acesso.","title":"Produções em Andamento","welcome":"Bem vindo ao Kitsu"},"fields":{"fps":"FPS","name":"Nome","ratio":"Ratio","resolution":"Resolução","status":"Status","type":"Tipo"},"metadata":{"add_explaination":"Adicionar informação especifica pelo projeto.","add_failed":"Um erro ocorreu ao adicionar metadados no seu projeto.","add_new_values":"Não há valores disponíveis atualmente.","available_values":"Valores disponíveis","choices":"Lista de valores","delete_text":"Você tem certeza que deseja deletar essa coluna e seus dados relacionados de todos os assets dessa produção?","delete_error":"Um erro ocorreu ao deletar os metadados dessa coluna.","error":"Ocorreu um erro ao adicionar a coluna de metadados. Certifique-se de que não haja coluna com nome semelhante e que todos os campos estejam preenchidos. Se o problema persistir, entre em contato com a equipe de suporte.","free":"Valor grátis","title":"Adicionar metadados da coluna"},"status":{"closed":"Fechar","open":"Abrir","active":"Abrir","archived":"Fechado"},"type":{"short":"Curta","featurefilm":"Longa Metragem","tvshow":"Série de TV"}},"profile":{"change_avatar":"Alterar avatar","info_title":"Informação","language":"Linguagem","notifications_enabled":"Notificações de email habilitadas","notifications_slack_enabled":"Notificações do Slack habilitadas","notifications_slack_user":"Nome de usuário do Slack","password_title":"Alterar senha","timezone":"Timezone","title":"Seu Perfil","avatar":{"title":"Alterar avatar","error_upload":"Ocorreu um erro ao enviar a imagem."},"change_password":{"button":"Alterar senha","error":"\\nOcorreu um erro ao alterar a senha. Por favor, verifique sua senha atual.","success":"Sua senha foi alterada com sucesso!","unvalid":"A confirmação de sua nova senha não corresponde ou sua senha é muito curta (7 caracteres, pelo menos, são esperados)."},"save":{"button":"Salvar alterações","error":"Ocorreu um erro ao salvar as alterações"}},"settings":{"change_logo":"Alterar logo","integrations":"Integrações","logo":"Logo do estúdio","no_logo":"Sem logo definida.","set_logo":"Escolher logo do estúdio","title":"Configurações","fields":{"name":"Nome do estúdio","hours_by_day":"Horas por dia","slack_token":"Slack Token (Opcional)","use_original_name":"Usar nome original dos arquivos para download"},"production":{"empty_list":"A lista está vazia no momento. Isso significa que todos os dados das configurações principais estão disponíveis para os usuários. Adicione algumas entradas para limitar as opções para esta produção."},"save":{"button":"Salvar configurações","error":"Um erro ocorreu no servidor ao salvar as configurações"}},"task_status":{"create_error":"Ocorreu um erro ao salvar este status de tarefa. Tem certeza de que não há status de tarefa com nome semelhante?","delete_text":"Tem certeza de que deseja remover {name} de seu banco de dados?","delete_error":"Ocorreu um erro ao excluir este status de tarefa. Provavelmente há dados vinculados a ele. Tem certeza de que o status desta tarefa não tem nenhuma tarefa vinculada a ele?","edit_title":"Editar o status da tarefa","number":"status da tarefa | status da tarefa","new_task_status":"Adicionar um status de tarefa","title":"Status da Tarefa","fields":{"color":"Cor","is_artist_allowed":"Artista é permitido","is_client_allowed":"O cliente é permitido","is_done":"Está feito","is_reviewable":"É revisável","is_retake":"Tem valor de retomada","name":"Nome","short_name":"Nome do curta"}},"task_types":{"delete_text":"Você tem certeza que deseja remover {name} do seu banco de dados?","delete_error":"Ocorreu um erro ao excluir este tipo de tarefa. Provavelmente há dados vinculados a ele. Tem certeza de que este tipo de tarefa não possui nenhuma tarefa vinculada a ele?","edit_title":"Editar tipo de tarefa","create_error":"Ocorreu um erro ao criar o tipo de tarefa. Por favor, verifique se não há tipo de tarefa com nome semelhante.\\ncreate_error","new_task_type":"Adicionar um tipo de tarefa","number":"tipo de tarefa | tipos de tarefa","title":"Tipos de Tarefa","fields":{"dedicated_to":"Para","color":"Cor","name":"Nome","allow_timelog":"Timelog","priority":"Prioridade"}},"sequences":{"all_sequences":"Todas as sequencias","edit_error":"Ocorreu um erro ao salvar esta sequência. Tem certeza de que não há nenhuma sequência com nome semelhante?","delete_text":"Tem certeza de que deseja remover {name} de seu banco de dados? Todas as fotos e visualizações relacionadas serão excluídas. Confirme digitando o nome da sequência abaixo.","delete_error":"Ocorreu um erro ao excluir esta sequência. Provavelmente há dados vinculados a ele. Tem certeza de que esta sequência não tem nenhuma cena vinculada a ela?","edit_title":"Editar sequencia","empty_list":"Não há sequência na produção. Que tal criar alguns?","empty_list_client":"Não há sequência nesta produção.","new_sequence":"Nova sequencia","number":"sequencia | sequencias","title":"Status da Sequencia","fields":{"name":"nome","description":"descrição"}},"schedule":{"title":"Cronograma","title_main":"Cronograma Geral","overall_man_days":"Jornadas necessárias","md":"md","zoom_level":"Nível de zoom","milestone":{"add_milestone":"Adicionar meta para","edit_milestone":"Editar meta para","name":"Nome","error":"Ocorreu um erro ao adicionar ou editar a meta. Por favor, tente novamente."}},"quota":{"average":"Média","count_label":"Modo de contagem","detail_label":"Nível de detalhe","details_name":"Nome","details_seconds":"Segundos","details_frames":"Frames","month_label":"Mês","no_quota":"Não há cota para este tipo de tarefa.","name":"Nome","quota_day":"Quota por dia","quota_week":"Quota por semana","quota_month":"Quota por mês","year_label":"Ano","title":"Cota","type_label":"Tipo"},"shots":{"casting":"Elenco da cena","creation_explaination":"Para adicionar cenas, você precisa primeiro criar um episódio e uma sequência. Digite o nome de um episódio na parte inferior da coluna esquerda e clique em adicionar para criar um novo episódio. Selecione este episódio e repita a mesma operação para a sequência. Por fim, selecione uma sequência e digite o nome de uma cena no campo na parte inferior da coluna direita. Clique no botão adicionar abaixo. Sua primeira cena foi criada. Agora você pode adicionar muitos mais! Se não for um programa de TV, você deve criar uma sequência diretamente.","delete_text":"Tem certeza de que deseja remover {name} de seu banco de dados?","delete_error":"Ocorreu um erro ao excluir esta cena. Provavelmente há dados vinculados a ele. Tem certeza de que esta cena não tem nenhuma tarefa vinculada a ela?","edit_success":"Shot {name} editado com sucesso.","edit_fail":"Falha na criação ou edição, ocorreu um erro. Certifique-se de que você não está renomeando a cena com um nome já listado para determinada sequência.","edit_title":"Editar cena","empty_list":"Não há cenas na produção. Que tal criar algumas?","empty_list_client":"Não há nenhum tiro nesta produção.","episodes":"Episódios","history":"Histórico de valores do shot","new_shot":"Adicionar Cena","new_shots":"Adicionar shots","new_sequences":"Adicionar sequencias","new_episodes":"Adicionar espisódios","no_casting":"O elenco da cena está vazio.","number":"shot | shots","manage":"Criar shots","new_success":"Shot {name} criado com sucesso.","padding":"Preenchimento do Shot","restore_text":"Tem certeza de que deseja restaurar {name} em seu banco de dados?","restore_error":"Ocorreu um erro ao restaurar esta foto.","sequences":"Sequencias","tasks":"Tarefas do Shot","title":"Shots","fields":{"description":"Descrição","nb_frames":"Frames","episode":"Episódio","frame_in":"In","frame_out":"Frame In","fps":"Frame Out","name":"Nome","production":"Prod","sequence":"Sequencia","time_spent":"Tempo"}},"server_down":{"text":"Entre em contato com o suporte do seu fornecedor, administrador do sistema ou departamento de TI para entender o que está errado.","title":"Kitsu encontrou um erro ao acessar sua API de dados."},"statistics":{"count":"Contagem","count_mode":"Modo de Contagem","display_mode":"Modo de Exibição","frames":"Frames","pie":"Gráficos de pizza","shots":"Shots"},"tasks":{"add_preview":"Adicionar prévia","add_preview_error":"Ocorreu um erro ao adicionar a visualização.","assign":"Assign one task to: | Assign {nbSelectedTasks} tasks to:","back_to_list":"de volta à lista","bigger":"Ampliar o painel de tarefas","change_status_to":"Mudar Status da tarefa para:","change_preview":"Mudar preview","change_priority":"Altere a prioridade para:","clear_assignations":"Limpar atribuições","comment_image":"Anexar uma imagem ao seu comentário","create_for_selection":"Criar tarefa para cada célula vazia:","create_tasks":"Adicionar tarefas","create_tasks_shot":"Adicionar tarefas para estes shots","create_tasks_shot_explaination":"Você vai criar uma nova tarefa para cada cena do projeto atual para o tipo de tarefa fornecido. Você quer continuar?","create_tasks_shot_failed":"Ocorreu um erro no servidor durante as criações.","create_tasks_asset":"Adicionar tarefas para estes Assets","create_tasks_asset_explaination":"Você vai criar uma nova tarefa para cada Asset do projeto atual para o tipo de tarefa fornecido. Você quer continuar?","create_tasks_asset_failed":"Ocorreu um erro no servidor durante as criações.","current":"Tarefa a fazer","current_status":"Status atual:","delete_all_text":"Tem certeza de que deseja excluir todas as tarefas para determinado {name}? Por favor, confirme digitando o nome do tipo de tarefa das tarefas que você deseja excluir no campo de texto.","delete_all_error":"Falha ao excluir todas as tarefas para determinado tipo de tarefa.","delete_error":"Um erro ocorreu ao deletar tarefa.","delete_comment":"Tem certeza que quer apagar o último comentário?","delete_comment_error":"Um erro ocorreu ao deletar comentário.","delete_for_selection":"Deletar tarefas selecionadas:","delete_preview":"Tem certeza de que deseja excluir este preview?","delete_preview_error":"Um erro ocorreu ao excluir este preview.","edit_comment":"Editar comentário","done":"Feito","download_pdf_file":"Baixar arquivo .{extension}","feedback":"feedback","full_screen":"Mostrar em tela Cheia","hide_assignations":"Esconder Atribuições","hide_infos":"Esconder informação adicional","my_tasks":"Minhas Tarefas","next":"Próxima tarefa","no_assignation_right":"Você não tem permissão para mudar Atribuições","no_comment":"Ainda não há comentários para esta tarefa","no_preview":"Ainda não há preview para essa tarefa","no_task_selected":"Nenhuma tarefa selecionada","number":"Tarefa | Tarefas","preview":"Prévia","previous":"Tarefa anterior","unsubscribe_notifications":"Desinscrever se das notificações","set_estimations":"Defina estimativas para tarefas selecionadas:","set_preview":"Definir este preview como Thumbnail","set_preview_error":"Um erro ocorreu enquanto definíamos o preview como thumbnail","set_preview_done":"Esta visualização é usada como miniatura para a entidade atual.","select_preview_file":"Selecione uma imagem de seu disco rígido para ser usada como uma prévia para a tarefa atual:","show_assignations":"Mostrar atribuições","show_infos":"Exibir informações adicionais","subscribe_notifications":"Inscreva-se para receber notificações","select_image_file":"Selecione a imagem do seu disco rígido que deseja anexar ao seu comentário:","tasks":"Tarefas","validation":"Validação","with_comment":"Com um comentário...","fields":{"asset_type":"Tipo de Asset","assignees":"Atribuições","count":"Contagem","due_date":"Data de Vencimento","duration":"Duração","end_date":"Data de validade","entity":"Entidade","entity_name":"Nome","estimated_quota":"Avg. Quota","estimation":"Estimativa","frames":"\\nFram.","last_comment":"Último comentário","last_comment_date":"Último comentário","priority":"Prioridade","production":"Prod","real_end_date":"Data de validade","real_start_date":"Data WIP","retake_count":"Retomadas","seconds":"Segundos","sequence":"Sequência","start_date":"Data de início","task_status":"Status","task_status_short_name":"Status","task_type":"Tipo"},"colors":{"title":"Coloração","neutral":"Neutro","status":"Cor de status","late":"Atrasado em vermelho"},"priority":{"emergency":"Emergência","normal":"Normal","high":"Alta","very_high":"Muito alto"}},"timesheets":{"detail_level":"Nível de detalhe","done_tasks":"Tarefas concluídas","export_timesheet":"Exportar quadro de horários","hours":"Horas","month":"Mês","time_spents":"Tempo gasto (horas)","title":"Quadro de Horários","year":"Ano"},"wrong_browser":{"title":"Seu navegador não é compatível com Kitsu","text":"O Kitsu só pode ser usado com os navegadores Firefox e Chrome."}}}')},"5d95":function(e,t,s){},"5e0b":function(e,t,s){"use strict";s("302c")},"5e5b":function(e,t,s){},"5f18":function(e,t,s){"use strict";s("f54c")},"5f48":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])])])])},n=[],a=s("5530"),o=s("2f62"),r=s("d065"),c={name:"delete-modal",mixins:[r["a"]],props:{text:{required:!0,type:String},active:{default:!1,type:Boolean},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},errorText:{default:"",type:String}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])({},Object(o["b"])([]))},l=c,d=(s("dde1"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"5682e6ba",null);t["a"]=u.exports},6038:function(e,t,s){"use strict";s("a2b9")},"608d":function(e,t,s){},6170:function(e,t,s){"use strict";s("11ca")},6185:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return o}));var i=s("5530"),n=(s("b64b"),function(e,t){for(var s={},i=0;i<e;i++){s[i]||(s[i]={});for(var n=0;n<t;n++)s[i][n]=!1}return s}),a=function(e,t,s,n){for(var a=Object(i["a"])({},e),o=t;o<s;o++){a[o]||(a[o]={});for(var r=0;r<n;r++)a[o][r]=!1}return a},o=function(e){for(var t=Object.keys(e).length,s=e[0]?Object.keys(e[0]).length:0,i=0;i<t;i++)for(var n=0;n<s;n++)e[i][n]&&(e[i][n]=!1);return e}},"618c":function(e,t,s){},6304:function(e,t,s){"use strict";s("3b81")},6601:function(e,t,s){"use strict";s("e450")},"660b":function(e,t,s){"use strict";s("e6c8")},"66a5":function(e,t,s){e.exports=s.p+"img/empty_asset.bf75a153.png"},"66be":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o}));s("159b"),s("5319"),s("ac1f"),s("99af");var i=s("0e54"),n=s.n(i),a=function(e){var t="transparent";return e&&(t=e.task_type_color),{"border-left":"4px solid ".concat(t)}},o=function(e,t,s){var i=n()(e||"");return t&&t.forEach((function(e){var t=s[e];i=i.replace("@".concat(t.full_name),'<a class="mention" href="/people/'.concat(t.id,'">@').concat(t.full_name,"</a>"))})),i}},"66c0":function(e,t,s){"use strict";s("9374")},"66e7":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"i",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"f",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"g",(function(){return h})),s.d(t,"b",(function(){return f}));var i=s("2909"),n=s("b85c"),a=(s("99af"),s("7db0"),s("4de4"),s("159b"),s("fb6a"),s("c740"),s("a434"),s("ba4c")),o=s.n(a),r=function(e){"Shot"===e.entity_type_name?(e.episode_name?e.full_entity_name="".concat(e.episode_name," / ").concat(e.sequence_name," / ").concat(e.entity_name):e.full_entity_name="".concat(e.sequence_name," / ").concat(e.entity_name),e.entity_path={name:"shot",params:{production_id:e.project_id,shot_id:e.entity_id}}):(e.full_entity_name="".concat(e.entity_type_name," / ").concat(e.entity_name),e.entity_path={name:"asset",params:{production_id:e.project_id,asset_id:e.entity_id}})},c=function(e,t){var s=e.find((function(e){return e.id===t.id}));return s&&Object.assign(s,t),s},l=function(e,t){return e.filter((function(e){return e.id!==t.id}))},d=function(e,t){return e.filter((function(e){return e!==t}))},u=function(e){var t={};return e.forEach((function(e){e.validations?Object.assign(t,e.validations):e.tasks.forEach((function(e){t[e.task_type_id]=e.id}))})),t},p=function(e,t){var s,i=[],a=[],o=null,r=Object(n["a"])(e);try{for(r.s();!(s=r.n()).done;){var c=s.value;o&&c[t]!==o[t]&&(i.push(a.slice(0)),a=[]),a.push(c),o=c}}catch(l){r.e(l)}finally{r.f()}return i.push(a),i},m=function(e,t,s){e[t]||o.a.set(e,t,[]),e[t].find((function(e){return e===s}))||e[t].push(s)},h=function(e,t,s){var i=e[t].findIndex((function(e){return e===s}));null!==i&&e[t].splice(i,1)},f=function(e,t,s){var n=Object(i["a"])(e),a=n[t];return n.splice(t,1),n.splice(s,0,a),n}},6767:function(e,t,s){"use strict";s("539a")},"67c2":function(e,t,s){"use strict";s("704c")},"6aac":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"preview-player dark"},[s("div",{staticClass:"preview",style:{height:e.defaultHeight+"px"}},[s("div",{ref:"canvas-wrapper",staticClass:"canvas-wrapper",attrs:{oncontextmenu:"return false;"}},[s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"annotation-canvas"}})]),s("preview-viewer",{ref:"preview-viewer",staticClass:"preview-viewer",attrs:{name:"player1",big:e.big,"default-height":e.defaultHeight,"full-screen":e.fullScreen,"is-ordering":e.isOrdering,"is-comparing":e.isComparing,"is-muted":e.isMuted,"is-repeating":e.isRepeating,light:e.light,preview:e.currentPreview},on:{"size-changed":e.fixCanvasSize,"duration-changed":e.changeMaxDuration,"time-update":e.updateTime,"play-ended":e.pause}}),s("preview-viewer",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&e.previewToCompare,expression:"isComparing && previewToCompare"}],ref:"comparison-preview-viewer",staticClass:"comparison-preview-viewer",attrs:{name:"player2",big:e.big,"default-height":e.defaultHeight,"full-screen":e.fullScreen,"is-comparing":e.isComparing,"is-muted":!0,"is-repeating":e.isRepeating,light:e.light,preview:e.previewToCompare}})],1),s("div",{ref:"button-bar",staticClass:"button-bar"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isMovie,expression:"isMovie"}],staticClass:"video-progress pull-bottom"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:e.onProgressClicked}})]),s("annotation-bar",{directives:[{name:"show",rawName:"v-show",value:e.isMovie,expression:"isMovie"}],ref:"annotation-bar",attrs:{annotations:e.annotations,maxDurationRaw:e.videoDuration,width:e.width},on:{"select-annotation":e.onAnnotationClicked}}),s("div",{ref:"buttons",staticClass:"buttons flexrow pull-bottom"},[e.isMovie?s("div",{staticClass:"left flexrow"},[e.isPlaying?s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.pause"),icon:"pause"},on:{click:e.onPlayPauseClicked}}):s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.play"),icon:"play"},on:{click:e.onPlayPauseClicked}}),e.light?e._e():s("button-simple",{attrs:{active:e.isRepeating,title:e.$t("playlists.actions.looping"),icon:"repeat"},on:{click:e.onRepeatClicked}}),e.isMuted?s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.unmute"),icon:"soundoff"},on:{click:e.onToggleSoundClicked}}):s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.mute"),icon:"soundon"},on:{click:e.onToggleSoundClicked}}),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.current_time")}},[e._v(" "+e._s(e.currentTime)+" ")]),e.fullScreen?s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]):e._e(),e.fullScreen?s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.max_duration")}},[e._v(" "+e._s(e.maxDuration)+" ")]):e._e(),s("span",{staticClass:"flexrow-item time-indicator mr1",attrs:{title:e.$t("playlists.actions.frame_number")}},[e._v(" ("+e._s(e.currentFrame)+") ")])],1):e._e(),s("div",{staticClass:"flexrow flexrow-item"},[e.taskTypeOptions.length>0&&e.fullScreen?s("button-simple",{staticClass:"ml1",attrs:{active:e.isComparing,icon:"compare",title:e.$t("playlists.actions.split_screen")},on:{click:e.onCompareClicked}}):e._e(),!e.isComparing||e.light&&!e.fullScreen?e._e():s("combobox",{staticClass:"comparison-combobox dark",attrs:{options:e.taskTypeOptions,"is-dark":!0,thin:!0},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),!e.isComparing||e.light&&!e.fullScreen?e._e():s("combobox",{staticClass:"comparison-combobox dark",attrs:{options:e.previewFileOptions,"is-dark":!0,thin:!0},model:{value:e.previewToCompareId,callback:function(t){e.previewToCompareId=t},expression:"previewToCompareId"}})],1),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow"},[e.isMovie||e.isPicture?s("div",{staticClass:"flexrow"},[!e.readOnly&&e.fullScreen?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"undo",title:e.$t("playlists.actions.annotation_undo")},on:{click:e.undoLastAction}}):e._e(),!e.readOnly&&e.fullScreen?s("button-simple",{staticClass:"flexrow-item flexrow-item",attrs:{title:e.$t("playlists.actions.annotation_redo"),icon:"redo"},on:{click:e.redoLastAction}}):e._e(),!e.readOnly&&e.fullScreen?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"remove",title:e.$t("playlists.actions.annotation_delete")},on:{click:e.onDeleteClicked}}):e._e(),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isTyping&&(!e.light||e.fullScreen),expression:"isTyping && (!light || fullScreen)"}],staticClass:"annotation-tools"},[s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.textColor,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeTextColor}})],1)]),e.readOnly||e.light&&!e.fullScreen?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"type",active:e.isTyping,title:e.$t("playlists.actions.annotation_text")},on:{click:e.onTypeClicked}}),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawing&&(!e.light||e.fullScreen),expression:"isDrawing && (!light || fullScreen)"}],staticClass:"annotation-tools"},[s("pencil-picker",{attrs:{isOpen:e.isShowingPencilPalette,pencil:e.pencil,sizes:this.pencilPalette},on:{"toggle-palette":e.onPickPencil,change:e.onChangePencil}}),s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.color,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeColor}})],1)]),e.readOnly||e.light&&!e.fullScreen?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"pencil",active:e.isDrawing,title:e.$t("playlists.actions.annotation_draw")},on:{click:e.onPencilAnnotateClicked}})],1):e._e(),!e.readOnly&&e.fullScreen&&e.isPicture?s("div",{staticClass:"separator"}):e._e(),!e.readOnly&&e.isPicture?s("a",{staticClass:"button flexrow-item",attrs:{href:e.originalPath,title:e.$t("playlists.actions.see_original_file"),target:"blank"}},[s("arrow-up-right-icon",{staticClass:"icon is-small"})],1):e._e(),!e.fullScreen||e.fullScreen&&(e.previews.length>1||e.lastPreviewFiles.length>1)?s("div",{staticClass:"separator"}):e._e(),e.currentPreview?s("browsing-bar",{attrs:{"current-index":e.currentIndex,previews:e.previews,"read-only":e.readOnly,light:e.light,"full-screen":e.fullScreen,"is-assigned":e.isAssigned},on:{"add-preview-clicked":function(t){return e.$emit("add-extra-preview")},"next-clicked":e.onNextClicked,"previous-clicked":e.onPreviousClicked,"remove-preview-clicked":e.onRemovePreviewClicked,"current-index-clicked":function(t){e.isOrdering=!e.isOrdering}}}):e._e(),s("div",{staticClass:"flexrow"},[e.fullScreen?s("div",{staticClass:"flexrow"},e._l(e.lastPreviewFiles,(function(t){return s("span",{key:"last-preview-"+t.id,class:{"previous-preview-file":!0,"current-preview-file":e.isCurrentRevision(t)},attrs:{title:e.getRevisionTitle(t)},on:{click:function(s){return e.changeCurrentPreview(t)}}},[e._v(" "+e._s(t.revision)+" ")])})),0):e._e()]),e.lastPreviewFiles.length>1&&e.fullScreen?s("div",{staticClass:"separator"}):e._e(),s("a",{staticClass:"button flexrow-item",attrs:{href:e.originalDlPath,title:e.$t("playlists.actions.download_file")}},[s("download-icon",{staticClass:"icon is-small"})],1),e.isFullScreenEnabled?s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.fullscreen"),icon:"maximize"},on:{click:e.onFullscreenClicked}}):e._e()],1)])],1),e.light&&!e.fullScreen||!e.isOrdering?e._e():s("div",{ref:"revision-previews",staticClass:"flexrow revision-previews"},e._l(e.previews,(function(t,i){return s("div",{key:t.id,staticClass:"flexrow-item revision-preview"},[s("revision-preview",{attrs:{"preview-file":t,index:i,"is-selected":e.currentPreview.id===t.id},on:{selected:function(t){return e.onRevisionPreviewSelected(i+1)},"preview-dropped":e.onRevisionPreviewDropped}})],1)})),0)])},n=[],a=s("5530"),o=(s("b64b"),s("1393"),s("caad"),s("99af"),s("d81d"),s("4de4"),s("b0c0"),s("7db0"),s("c740"),s("159b"),s("cb29"),s("a9e3"),s("7a94")),r=s("2f62"),c=s("bcd2"),l={setPreference:function(e,t){return localStorage.setItem(e,t)},getPreference:function(e){return localStorage.getItem(e)},getBoolPreference:function(e){var t=this.getPreference(e);return"true"===t}},d=s("0774"),u={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("picture").webkitRequestFullScreen)}},methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},documentExitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},documentSetFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}},p=s("eb23"),m=s("0a35"),h=s("8707"),f=s("de40"),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"left flexrow"},[e.isBigDisplay?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"left",title:e.$t("playlists.actions.files_previous")},on:{click:function(t){return e.$emit("previous-clicked")}}}):e._e(),e.isBigDisplay?s("div",{staticClass:"flexrow-item bar-element current-index",attrs:{title:e.$t("playlists.actions.files_position")},on:{click:function(t){return e.$emit("current-index-clicked")}}},[s("span",[e._v(e._s(e.currentIndex))]),e.fullScreen?s("span",[e._v(" / "+e._s(e.previews.length))]):e._e()]):e._e(),e.isBigDisplay?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"right",title:e.$t("playlists.actions.files_next")},on:{click:function(t){return e.$emit("next-clicked")}}}):e._e(),!e.isAssigned&&e.readOnly||e.fullScreen?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"plus",title:e.$t("playlists.actions.files_add")},on:{click:function(t){return e.$emit("add-preview-clicked")}}}),e.readOnly||e.fullScreen||e.light?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"delete",title:e.$t("playlists.actions.files_delete")},on:{click:function(t){return e.$emit("remove-preview-clicked")}}}),e.isBigDisplay?s("div",{staticClass:"separator"}):e._e()],1)},v=[],g={name:"browsing-bar",components:{ButtonSimple:f["a"]},props:{currentIndex:{type:Number,default:0},fullScreen:{type:Boolean,default:!1},isAssigned:{type:Boolean,default:!1},light:{type:Boolean,default:!1},previews:{type:Array,default:function(){return[]}},readOnly:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])([])),{},{isBigDisplay:function(){return(!this.light||this.fullScreen)&&this.previews.length>1}}),methods:Object(a["a"])({},Object(r["b"])([])),watch:{}},y=g,b=(s("f8a0"),s("2877")),k=Object(b["a"])(y,_,v,!1,null,"42b3438d",null),w=k.exports,C=s("7096"),S=s("992f"),T=s("7f06"),x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper flexrow"},[s("drag",{attrs:{"transfer-data":e.index},on:{drag:e.onDragged}},[s("div",{class:{"flerow-item":!0,"revision-preview":!0,selected:e.isSelected},on:{click:function(t){return t.preventDefault(),e.onSelected(t)}}},[e.hasThumbnail?s("light-entity-thumbnail",{attrs:{width:"150px",height:"103px","preview-file-id":e.previewFile.id}}):s("span",{attrs:{title:e.originalName}},[e._v(" ."+e._s(e.previewFile.extension)+" ")])],1)]),s("drop",{on:{drop:e.onDropped}},[s("div",{ref:"drop-area",staticClass:"drop-area flexrow-item"})])],1)},E=[],P=s("d793"),O={name:"revision-preview",components:{LightEntityThumbnail:P["a"]},data:function(){return{}},props:{index:{required:!0,type:Number},isSelected:{default:!1,type:Boolean},previewFile:{required:!0,type:Object}},mounted:function(){this.setListeners()},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["isCurrentUserManager"])),{},{dropArea:function(){return this.$refs["drop-area"]},hasThumbnail:function(){return["mp4","png"].includes(this.previewFile.extension)},originalName:function(){return"".concat(this.previewFile.original_name,".").concat(this.previewFile.extension)}}),methods:{onSelected:function(){this.$emit("selected",this.index)},setListeners:function(){this.dropArea.addEventListener("dragover",this.onDragover),this.dropArea.addEventListener("dragleave",this.onDragleave)},onDragged:function(){},onDragleave:function(){this.dropArea.style.background="transparent",this.dropArea.style.width="15px"},onDragover:function(){this.dropArea.style.width="60px"},onDropped:function(e){this.dropArea.style.background="transparent",this.dropArea.style.width="15px",this.$emit("preview-dropped",{previousIndex:e,newIndex:this.index})}},watch:{}},A=O,j=(s("6170"),Object(b["a"])(A,x,E,!1,null,"581dbb13",null)),D=j.exports,M=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"preview-viewer dark"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isBroken,expression:"isBroken"}],staticClass:"center status-message",style:{height:e.defaultHeight+"px"}},[s("p",[e._v("This preview is broken.")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],staticClass:"center status-message",style:{height:e.defaultHeight+"px"},attrs:{title:"Video processing in progress..."}},[s("spinner",{attrs:{"is-processing":!0}})],1),s("video-viewer",{directives:[{name:"show",rawName:"v-show",value:e.isMovie,expression:"isMovie"}],ref:"video-viewer",staticClass:"video-viewer",attrs:{name:e.name,big:e.big,"default-height":e.defaultHeight,"is-comparing":e.isComparing,"is-muted":e.isMuted,"is-repeating":e.isRepeating,light:e.light,preview:e.preview,"full-screen":e.fullScreen},on:{"size-changed":function(t){return e.$emit("size-changed",t)},"duration-changed":function(t){return e.$emit("duration-changed",t)},"time-update":function(t){return e.$emit("time-update",t)},"play-ended":function(t){return e.$emit("play-ended")}}}),s("picture-viewer",{directives:[{name:"show",rawName:"v-show",value:e.isPicture,expression:"isPicture"}],ref:"picture-viewer",attrs:{big:e.big,"default-height":e.defaultHeight,"full-screen":e.fullScreen,"is-comparing":e.isComparing,light:e.light,preview:e.preview},on:{"size-changed":function(t){return e.$emit("size-changed",t)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isFile,expression:"isFile"}],staticClass:"center",style:{height:e.defaultHeight+"px"}},[s("a",{ref:"preview-file",staticClass:"button mt2",attrs:{href:e.originalDlPath,title:e.fileTitle}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v(" "+e._s(e.$t("tasks.download_pdf_file",{extension:e.extension}))+" ")])],1)])],1)},I=[],$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"picture-player"},[s("div",{ref:"picture-wrapper",staticClass:"picture-wrapper",attrs:{oncontextmenu:"return false;"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],ref:"picture-subwrapper",staticClass:"picture-subwrapper"},[s("div",{ref:"loupe",staticClass:"loupe",style:{background:"url("+e.pictureDlPath+")"},attrs:{id:"loupe"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isGif,expression:"isGif"}]},[s("img",{ref:"picture-gif",attrs:{src:e.pictureGifPath}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isGif,expression:"!isGif"}]},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.fullScreen,expression:"fullScreen"}],ref:"picture-big",attrs:{id:"picture-big",src:e.pictureDlPath}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!e.fullScreen,expression:"!fullScreen"}],ref:"picture",attrs:{id:"picture",src:e.picturePath}})])]),e.isLoading?s("spinner"):e._e()],1)])},L=[],F=s("be83"),q={name:"picture-viewer",components:{Spinner:F["a"]},mixins:[p["a"],u],props:{big:{type:Boolean,default:!1},defaultHeight:{type:Number,default:0},fullScreen:{type:Boolean,default:!1},isComparing:{type:Boolean,default:!1},light:{type:Boolean,default:!1},preview:{type:Object,default:function(){}}},data:function(){return{isLoading:!0,picturePath:"",pictureDlPath:"",pictureGifPath:""}},mounted:function(){this.container.style.height=this.defaultHeight+"px",this.isLoading=!0,this.picture.complete&&(this.isLoading=!1,this.onWindowResize()),this.picture.addEventListener("load",this.endLoading),this.pictureBig.addEventListener("load",this.endLoading),this.pictureGif.addEventListener("load",this.endLoading),window.addEventListener("resize",this.onWindowResize),this.setPicturePath()},beforeDestroy:function(){window.removeEventListener("resize",this.onWindowResize)},computed:{container:function(){return this.$refs.container},picture:function(){return this.$refs.picture},pictureBig:function(){return this.$refs["picture-big"]},pictureGif:function(){return this.$refs["picture-gif"]},pictureWrapper:function(){return this.$refs["picture-wrapper"]},pictureSubWrapper:function(){return this.$refs["picture-subwrapper"]},status:function(){return this.preview&&this.preview.status?this.preview.status:"ready"},isAvailable:function(){return!["broken","processing"].includes(this.status)},extension:function(){return this.preview?this.preview.extension:""},isGif:function(){return"gif"===this.extension},isMovie:function(){return"mp4"===this.extension},pictureOriginalPath:function(){if(this.preview&&this.isAvailable&&!this.isMovie){var e=this.preview.id;return"/api/pictures/originals/preview-files/".concat(e,".png")}return null}},methods:{getNaturalDimensions:function(){var e={naturalWidth:0,naturalHeight:0};return this.fullScreen||!this.picture.naturalWidth||this.isGif?this.fullScreen&&this.pictureBig.naturalWidth&&!this.isGif?e=this.pictureBig:this.pictureGif.naturalWidth&&this.isGif&&(e=this.pictureGif):e=this.picture,{height:e.naturalHeight,width:e.naturalWidth}},getDimensions:function(){var e=1,t=this.getNaturalDimensions();t.width>0&&(e=t.height/t.width);var s=t.width;s>this.container.offsetWidth&&(s=this.container.offsetWidth);var i=Math.floor(s*e);return i>this.defaultHeight&&(i=this.defaultHeight),s=Math.floor(i/e),{width:s,height:i}},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,this.$nextTick(this.resetPicture),setTimeout((function(){e.resetPicture()}),400))},endLoading:function(){this.isLoading=!1,this.$nextTick(this.resetPicture)},resetPicture:function(){var e=this.defaultHeight+"px";this.container.style.height=e,this.pictureWrapper&&(this.pictureWrapper.style.height=e),this.pictureSubWrapper&&(this.pictureWrapper.style["max-height"]=e,this.pictureSubWrapper.style["max-height"]=e);var t=this.getDimensions(),s=t.width,i=t.height;this.picture.style.width=s+"px",this.picture.style.height=i+"px",this.pictureBig.style.width=s+"px",this.pictureBig.style.height=i+"px",this.pictureGif.style.width=s+"px",this.pictureGif.style.height=i+"px",this.picture.width=s,this.picture.height=i,this.pictureBig.width=s,this.pictureBig.height=i,this.pictureGif.width=s,this.pictureGif.height=i,this.isMovie||this.$emit("size-changed",t)},setPicturePath:function(){if(this.isGif&&this.isAvailable&&!this.isMovie){var e=this.preview.id;this.pictureGifPath="/api/pictures/originals/preview-files/".concat(e,".gif")}else if(this.preview&&this.isAvailable&&!this.isMovie){var t=this.preview.id;this.picturePath="/api/pictures/previews/preview-files/".concat(t,".png")}this.setPictureDlPath()},setPictureDlPath:function(){if(this.preview&&this.isAvailable&&!this.isMovie){var e=this.preview.id;this.pictureDlPath="/api/pictures/originals/preview-files/".concat(e,"/download")}else this.pictureDlPath=null},showLoupe:function(){this.$refs.loupe.style.display="block"},hideLoupe:function(){this.$refs.loupe.style.display="none"},updateLoupePosition:function(e,t){var s=t.width,i=t.height,n=parseInt(s.substring(0,s.length-2)),a=parseInt(i.substring(0,i.length-2)),o=Math.max(e.pointer.x-150,0),r=Math.max(e.pointer.y-150,0);o=Math.min(o,n-300),r=Math.min(r,a-300),this.$refs.loupe.style.left=o+"px",this.$refs.loupe.style.top=r+"px";var c=Math.max(e.pointer.x,0),l=Math.max(e.pointer.y,0);c=Math.min(c,n),l=Math.min(l,a);var d=this.getNaturalDimensions(),u=d.width/n,p=Math.min(u*c-150,d.width-300),m=Math.min(u*l-150,d.height-300);this.$refs.loupe.style["background-position"]="-".concat(p,"px -").concat(m,"px")}},watch:{fullScreen:function(){this.fullScreen?(this.isLoading=!0,this.setPictureDlPath(),this.pictureBig.complete&&(this.isLoading=!1)):this.setPicturePath()},isLoading:function(){this.isLoading||setTimeout(this.resetPicture,100)},light:function(){this.onWindowResize()},isComparing:function(){var e=this;setTimeout((function(){e.resetPicture()}),20)},preview:function(){this.isLoading=!0,this.setPicturePath(),this.setPictureDlPath(),this.currentIndex>1&&(this.currentIndex=1),this.fullScreen?this.pictureBig.complete&&(this.resetPicture(),this.isLoading=!1):(this.picture.complete&&(this.isLoading=!1),this.$nextTick(this.resetPicture))}}},N=q,z=(s("989e"),Object(b["a"])(N,$,L,!1,null,"150f50e4",null)),R=z.exports,V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"video-player"},[s("div",{ref:"video-wrapper",staticClass:"video-wrapper"},[e.isLoading?s("div",{staticClass:"loading-background"},[s("spinner",{staticClass:"spinner"})],1):e._e(),s("video",{ref:"movie",staticClass:"annotation-movie",style:{display:e.isLoading?"none":"block"},attrs:{id:"annotation-movie",preload:"auto",src:e.moviePath,poster:e.posterPath,type:"video/mp4"}})])])},B=[],U={name:"video-viewer",mixins:[p["a"]],components:{Spinner:F["a"]},props:{name:{type:String,default:""},big:{type:Boolean,default:!1},isComparing:{type:Boolean,default:!1},isDrawing:{type:Boolean,default:!1},isTyping:{type:Boolean,default:!1},isMuted:{type:Boolean,default:!1},isRepeating:{type:Boolean,default:!1},light:{type:Boolean,default:!1},preview:{type:Object,default:function(){}},defaultHeight:{type:Number,default:0},fullScreen:{type:Boolean,default:!1}},data:function(){return{annotations:[],currentTime:"00:00.000",currentTimeRaw:0,isLoading:!1,maxDuration:"00:00.000",videoDuration:0}},mounted:function(){var e=this;this.container&&(this.$options.currentTimeCalls=[],this.container.style.height=this.defaultHeight+"px",this.isLoading=!0,this.isMuted&&(this.video.muted=this.isMuted),setTimeout((function(){e.video&&(e.video.addEventListener("focus",(function(){this.blur()}),!1),e.video.addEventListener("loadedmetadata",(function(){e.configureVideo(),e.onWindowResize(),e.video.removeEventListener("timeupdate",e.onTimeUpdate),e.video.addEventListener("timeupdate",e.onTimeUpdate),e.isLoading=!1})),e.video.addEventListener("ended",(function(){e.isLoading=!1})),e.video.addEventListener("error",(function(){e.$refs.movie.style.height=e.defaultHeight+"px",e.isLoading=!1})),e.video.removeEventListener("timeupdate",e.onTimeUpdate),e.video.addEventListener("timeupdate",e.onTimeUpdate),window.addEventListener("resize",e.onWindowResize))}),0))},beforeDestroy:function(){this.pause(),this.video.removeEventListener("timeupdate",this.onTimeUpdate),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["currentProduction"])),{},{currentFrame:function(){return Object(c["a"])(this.currentTimeRaw,this.fps)},container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},status:function(){return this.preview&&this.preview.status?this.preview.status:"ready"},isAvailable:function(){return!["broken","processing"].includes(this.status)},isVideo:function(){return this.$refs.movie&&this.videoDuration&&this.videoDuration>0},moviePath:function(){return"mp4"===this.extension&&this.isAvailable&&!this.fullScreen?"/api/movies/low/preview-files/".concat(this.preview.id,".mp4"):"mp4"===this.extension&&this.isAvailable?"/api/movies/originals/preview-files/".concat(this.preview.id,".mp4"):null},movieDlPath:function(){return this.preview&&this.isAvailable?"/api/movies/originals/preview-files/".concat(this.preview.id,"/download"):""},posterPath:function(){return"mp4"===this.extension&&this.isAvailable?"/api/pictures/previews/preview-files/".concat(this.preview.id,".png"):null},video:function(){return this.$refs.movie},videoWrapper:function(){return this.$refs["video-wrapper"]},extension:function(){return this.preview?this.preview.extension:""},isMovie:function(){return"mp4"===this.extension},frameFactor:function(){return Math.round(1/this.fps*1e4)/1e4}}),methods:{formatFrame:c["a"],formatTime:c["b"],getNaturalDimensions:function(){return{height:this.video.videoHeight,width:this.video.videoWidth}},getDimensions:function(){var e=this.getNaturalDimensions(),t=e.height/e.width,s=this.container.parentElement.parentElement,i=Math.min(e.width,s.offsetWidth);this.isComparing&&(i=Math.min(e.width,s.offsetWidth/2));var n=Math.floor(i*t);return n=Math.min(n,this.defaultHeight),i=Math.floor(n/t),n=Math.floor(i*t),n=Math.min(n,this.defaultHeight),{width:i,height:n}},getLastPushedCurrentTime:function(){var e=this.$options.currentTimeCalls.length;return e>0?this.$options.currentTimeCalls[e-1]:this.currentTimeRaw},setCurrentTime:function(e){this.$options.currentTimeCalls||(this.$options.currentTimeCalls=[]),this.$options.currentTimeCalls.push(e),this.$options.running||this.runSetCurrentTime()},runSetCurrentTime:function(){var e=this;if(0===this.$options.currentTimeCalls.length)this.$options.running=!1;else{this.$options.running=!0;var t=this.$options.currentTimeCalls.shift();this.video.currentTime!==t+this.frameFactor&&(this.video.currentTime=t+this.frameFactor),setTimeout((function(){e.runSetCurrentTime()}),10)}},configureVideo:function(){this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.onended=this.onVideoEnd,0===this.video.currentTime&&this.mountVideo()},mountVideo:function(){if(this.isMovie&&(this.video.mute=!0,this.videoDuration=this.video.duration,this.isLoading=!1,this.$emit("duration-changed",this.videoDuration),this.container)){var e=this.getDimensions(),t=e.width,s=e.height;s>0&&(this.container.style.height=this.defaultHeight+"px",this.videoWrapper.style.width=t+"px",this.videoWrapper.style.height=s+"px",this.video.style.width=t+"px",this.video.style.height=s+"px",this.$emit("size-changed",{width:t,height:s}))}},onTimeUpdate:function(e){this.video?this.currentTimeRaw=this.video.currentTime-this.frameFactor:this.currentTimeRaw=0+this.frameFactor,this.$emit("time-update",this.currentTimeRaw)},play:function(){this.video.play()},pause:function(){this.video.pause()},toggleMute:function(){this.video.muted=!this.video.muted},goPreviousFrame:function(){var e=this.getLastPushedCurrentTime(),t=Object(c["d"])(e,this.fps)-this.frameFactor;t<0?this.setCurrentTime(0):this.setCurrentTime(t)},goNextFrame:function(){var e=this.getLastPushedCurrentTime(),t=Object(c["d"])(e,this.fps)+this.frameFactor;t>this.video.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(t)},onVideoEnd:function(){this.isPlaying=!1,this.isRepeating?(this.video.currentTime=0,this.play()):this.$emit("play-ended")},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,this.$nextTick(this.mountVideo),setTimeout((function(){e.mountVideo()}),400))}},watch:{preview:function(){this.maxDuration="00:00.000",this.pause()},light:function(){this.onWindowResize()},isComparing:function(){this.mountVideo()},isMuted:function(){this.video.muted=this.isMuted}}},H=U,G=(s("edae"),Object(b["a"])(H,V,B,!1,null,"17de3865",null)),K=G.exports,W={name:"preview-viewer",mixins:[p["a"]],components:{DownloadIcon:m["q"],PictureViewer:R,Spinner:F["a"],VideoViewer:K},props:{name:{type:String,default:""},big:{type:Boolean,default:!1},defaultHeight:{type:Number,default:0},isComparing:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},isMuted:{type:Boolean,default:!1},isRepeating:{type:Boolean,default:!1},light:{type:Boolean,default:!1},preview:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["currentProduction"])),{},{container:function(){return this.$refs.container},videoViewer:function(){return this.$refs["video-viewer"]},pictureViewer:function(){return this.$refs["picture-viewer"]},fileTitle:function(){return this.preview?this.preview.original_name+"."+this.preview.extension:""},extension:function(){return this.preview?this.preview.extension:""},status:function(){return this.preview&&this.preview.status?this.preview.status:"ready"},isBroken:function(){return"broken"===this.status},isProcessing:function(){return"processing"===this.status},isReady:function(){return"ready"===this.status},isMovie:function(){return this.isReady&&"mp4"===this.extension},isPdf:function(){return this.isReady&&"pdf"===this.extension},isPicture:function(){return this.isReady&&["gif","png","jpg","jpeg"].includes(this.extension)},is3DModel:function(){return this.isReady&&"obj"===this.extension},isFile:function(){return this.isReady&&!this.isPicture&&!this.isMovie},originalPath:function(){if(this.preview){var e=this.preview.id,t=this.extension?this.extension:"png",s=this.isMovie?"movies":"pictures";return"/api/".concat(s,"/originals/preview-files/").concat(e,".").concat(t)}return""},originalDlPath:function(){if(this.preview){var e=this.isMovie?"movies":"pictures";return"/api/".concat(e,"/originals/preview-files/")+"".concat(this.preview.id,"/download")}return""}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["updateRevisionPreviewPosition"])),{},{formatFrame:c["a"],formatTime:c["b"],resetVideo:function(){this.videoViewer&&this.videoViewer.mountVideo()},updateTime:function(e){this.currentTimeRaw=e,this.currentTime=this.formatTime(this.currentTimeRaw)},changeMaxDuration:function(e){e?(this.maxDuration=this.formatTime(e),this.videoDuration=e):(this.maxDuration="00:00.000",this.videoDuration=0)},play:function(){this.isPlaying=!0,this.isDrawing=!1,this.videoViewer&&this.videoViewer.play()},pause:function(){this.isPlaying=!1,this.videoViewer&&this.videoViewer.pause()},goPreviousFrame:function(){this.videoViewer.goPreviousFrame()},goNextFrame:function(){this.videoViewer.goNextFrame()},onVideoEnd:function(){this.isPlaying=!1,this.isRepeating&&(this.videoViewer.currentTime=0,this.play())},onPlayPauseClicked:function(){this.isPlaying?this.pause():this.play()},getDimensions:function(){var e={width:0,height:0};return this.container&&(e.width=this.container.offsetWidth,e.height=this.container.offsetHeight),e},resetPicture:function(){this.pictureViewer&&this.pictureViewer.resetPicture()},getPreviewDimensions:function(){return this.isMovie?this.videoViewer.getDimensions():this.isPicture?this.pictureViewer.getDimensions():{width:0,height:0}},setCurrentTime:function(e){this.videoViewer.setCurrentTime(e)},getCurrentTimeRaw:function(e){return this.videoViewer.currentTimeRaw},showLoupe:function(){this.pictureViewer.showLoupe()},hideLoupe:function(){this.pictureViewer.hideLoupe()},updateLoupePosition:function(e,t){this.pictureViewer.updateLoupePosition(e,t)}}),watch:{preview:function(){this.isMovie?(this.pause(),this.maxDuration="00:00.000"):this.isPicture&&(this.pause(),setTimeout(this.pictureViewer.resetPicture,10))}}},Y=W,Q=(s("5e0b"),Object(b["a"])(Y,M,I,!1,null,"988efab8",null)),X=Q.exports,J={name:"preview-player",mixins:[d["a"],p["a"],u],components:{ArrowUpRightIcon:m["a"],AnnotationBar:h["a"],ButtonSimple:f["a"],BrowsingBar:w,ColorPicker:C["a"],Combobox:S["a"],DownloadIcon:m["q"],PencilPicker:T["a"],PreviewViewer:X,RevisionPreview:D},props:{big:{type:Boolean,default:!1},entityPreviewFiles:{type:Object,default:function(){}},isAssigned:{type:Boolean,default:!1},lastPreviewFiles:{type:Array,default:function(){return[]}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},previews:{type:Array,default:function(){return[]}},taskTypeMap:{type:Object,default:function(){}}},data:function(){return{annotations:[],currentIndex:1,fullScreen:!1,color:"#ff3860",currentTime:"00:00.000",currentTimeRaw:0,isComparing:!1,isDrawing:!1,isLoading:!1,isMuted:!1,isPlaying:!1,isOrdering:!1,isRepeating:!1,isTyping:!1,maxDuration:"00:00.000",palette:["#ff3860","#008732","#5E60BA","#f57f17"],pencil:"big",pencilPalette:["big","medium","small"],previewToCompare:null,previewToCompareId:null,taskTypeId:this.entityPreviewFIles?Object.keys(this.entityPreviewFiles)[0]:null,textColor:"#ff3860",videoDuration:0,width:0}},mounted:function(){this.container&&(this.configureEvents(),this.setupFabricCanvas(),this.reloadAnnotations(),this.isPicture&&this.loadAnnotation(this.getAnnotation(0)),this.resetPreviewFileMap(),this.initPreferences())},beforeDestroy:function(){this.removeEvents()},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["currentProduction"])),{},{container:function(){return this.$refs.container},canvasWrapper:function(){return this.$refs["canvas-wrapper"]},previewViewer:function(){return this.$refs["preview-viewer"]},comparisonViewer:function(){return this.$refs["comparison-preview-viewer"]},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},currentFrame:function(){return Object(c["a"])(this.currentTimeRaw,this.fps)},currentPreview:function(){return this.previews&&this.previews.length>0&&this.currentIndex-1<this.previews.length?this.previews[this.currentIndex-1]:{}},defaultHeight:function(){if(this.fullScreen){var e=screen.height;return this.isOrdering&&(e-=140),this.isMovie?e-=60:e-=30,e}var t=screen.height>800?470:300;return this.isMovie&&(t=screen.height>800?442:272),screen.width>1300&&(!this.light||this.big)?t:200},fps:function(){return this.currentProduction.fps||24},frameFactor:function(){return Math.round(1/this.fps*1e4)/1e4},extension:function(){return this.currentPreview?this.currentPreview.extension:""},isPicture:function(){return["gif","png","jpg","jpeg"].includes(this.extension)},isMovie:function(){return"mp4"===this.extension},is3DModel:function(){return"obj"===this.extension},isPdf:function(){return"pdf"===this.extension},isFile:function(){return!this.isPicture&&!this.isMovie},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},originalPath:function(){if(this.currentPreview){var e=this.currentPreview.id,t=this.extension?this.extension:"png",s=this.isMovie?"movies":"pictures";return"/api/".concat(s,"/originals/preview-files/").concat(e,".").concat(t)}return""},originalDlPath:function(){if(this.currentPreview){var e=this.isMovie?"movies":"pictures";return"/api/".concat(e,"/originals/preview-files/")+"".concat(this.currentPreview.id,"/download")}return""},taskTypeOptions:function(){var e=this;if(!this.entityPreviewFiles)return[];var t=Object.keys(this.entityPreviewFiles);return t.filter((function(t){var s=e.entityPreviewFiles[t].filter((function(e){return["mp4","png"].includes(e.extension)}));return s.length>0&&e.taskTypeMap[t]})).map((function(t){var s=e.taskTypeMap[t];return{label:s.name,value:s.id}}))},previewFileOptions:function(){if(!this.entityPreviewFiles)return[];var e=this.entityPreviewFiles[this.taskTypeId];return e&&e.length>0?e.map((function(e){return{label:"v".concat(e.revision),value:e.id}})):[]}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["updateRevisionPreviewPosition"])),{},{formatFrame:c["a"],formatTime:c["b"],isCurrentRevision:function(e){return e.revision===this.currentPreview.revision},getRevisionTitle:function(e){return"".concat(this.$t("playlists.actions.display_revision"))+" ".concat(e.revision)},updateTime:function(e){this.updateProgressBar(e),this.currentTimeRaw=e,this.currentTime=this.formatTime(this.currentTimeRaw),this.isPlaying||this.loadAnnotation()},initPreferences:function(){var e=l.getBoolPreference("player:repeating");this.isRepeating=e},configureVideo:function(){this.isPlaying=!1,this.isMuted=!1,this.isRepeating=!1},changeMaxDuration:function(e){e?(this.maxDuration=this.formatTime(e),this.videoDuration=e-this.frameFactor,this.progress.setAttribute("max",this.videoDuration)):(this.maxDuration="00:00.000",this.videoDuration=0,this.progress.setAttribute("max",0))},play:function(){this.isPlaying=!0,this.isDrawing=!1,this.previewViewer&&(this.clearCanvas(),this.previewViewer.play(),this.comparisonViewer&&this.isComparing&&this.comparisonViewer.play())},pause:function(){this.isPlaying=!1,this.previewViewer&&this.previewViewer.pause(),this.comparisonViewer&&this.comparisonViewer.pause()},goPreviousFrame:function(){this.previewViewer.goPreviousFrame(),this.comparisonViewer&&this.comparisonViewer.goPreviousFrame(),this.clearCanvas()},goNextFrame:function(){this.previewViewer.goNextFrame(),this.comparisonViewer&&this.comparisonViewer.goNextFrame(),this.clearCanvas()},onVideoEnd:function(){this.isPlaying=!1,this.isRepeating&&(this.setCurrentTime(0),this.play())},onPlayPauseClicked:function(){this.clearFocus(),this.isPlaying?this.pause():this.play()},onRepeatClicked:function(){this.clearFocus(),this.isRepeating?this.isRepeating=!1:this.isRepeating=!0,l.setPreference("player:repeating",this.isRepeating)},onToggleSoundClicked:function(){this.clearFocus(),this.isMuted=!this.isMuted},getDimensions:function(){var e={width:0,height:0};return this.container&&(e.width=this.container.offsetWidth,e.height=this.container.offsetHeight),e},getCurrentPreviewDimensions:function(){var e=this.previewViewer.getPreviewDimensions();return e},setupFabricCanvas:function(){var e=new o["fabric"].Canvas("annotation-canvas",{fireRightClick:!0}),t=this.getDimensions(),s=t.width,i=t.height;e.setDimensions({width:s,height:i}),e.freeDrawingBrush.color=this.color,e.freeDrawingBrush.width=4,e.off("object:added",this.stackAddAction),e.off("object:moved",this.saveAnnotations),e.off("mouse:move",this.onCanvasMouseMoved),e.off("mouse:down",this.onCanvasClicked),e.off("mouse:up",this.onCanvasReleased),e.off("mouse:up",this.endDrawing),e.on("object:added",this.stackAddAction),e.on("object:moved",this.saveAnnotations),e.on("mouse:up",this.endDrawing),e.on("mouse:move",this.onCanvasMouseMoved),e.on("mouse:down",this.onCanvasClicked),e.on("mouse:up",this.onCanvasReleased),this.fabricCanvas=e},fixCanvasSize:function(e){var t=this,s=e.width,i=e.height;if(this.fabricCanvas){this.fabricCanvas.setDimensions({width:s,height:i}),this.fabricCanvas.width=s,this.fabricCanvas.height=i;var n=this.container.offsetWidth,a=this.container.offsetHeight,o=Math.round((n-s)/2);this.isComparing&&(o=Math.round((n/2-s)/2));var r=this.isMovie?60:32;this.isOrdering&&(r+=140);var c=Math.round((a-r-i)/2);this.canvasWrapper&&(this.canvasWrapper.style.top=c+"px",this.canvasWrapper.style.left=o+"px",this.canvasWrapper.style.width=s+"px",this.canvasWrapper.style.height=i+"px",setTimeout((function(){t.fabricCanvas.calcOffset(),t.fabricCanvas.setDimensions({width:s,height:i}),t.width=t.getDimensions().width,t.$nextTick(t.refreshCanvas())}),10))}},setFullScreen:function(){var e=this;this.documentSetFullScreen(this.container),this.container.setAttribute("data-fullscreen",!0),this.fullScreen=!0,this.$nextTick((function(){e.fixCanvasSize(e.getCurrentPreviewDimensions()),e.clearFocus(),e.reloadAnnotations(),e.loadAnnotation()}))},exitFullScreen:function(){var e=this;this.documentExitFullScreen(),this.container.setAttribute("data-fullscreen",!1),this.isComparing=!1,this.fullScreen=!1,this.fixCanvasSize(this.getCurrentPreviewDimensions()),this.$nextTick((function(){e.clearFocus(),e.reloadAnnotations(),e.loadAnnotation()}))},onFullscreenClicked:function(){this.fullScreen?(this.removeTypeArea(),this.exitFullScreen()):(this.addTypeArea(),this.setFullScreen())},onFullScreenChange:function(){var e=this;this.fullScreen&&!this.isFullScreen()&&(this.isComparing=!1,this.fullScreen=!1,this.$nextTick((function(){e.previewViewer.resetVideo(),e.previewViewer.resetPicture(),e.fixCanvasSize(e.getCurrentPreviewDimensions()),e.reloadAnnotations(),e.loadAnnotation()})))},onCompareClicked:function(){var e=this;this.clearFocus(),this.isComparing?this.isComparing=!1:(this.isComparing=!0,this.taskTypeId=this.taskTypeOptions[0].value,this.previewToCompareId="",this.$nextTick((function(){e.previewToCompareId=e.previewFileOptions[0].value})),this.isDrawing=!1)},setDefaultComparisonTaskType:function(){var e=this;if(!this.entityPreviewFiles)return"";var t=Object.keys(this.entityPreviewFiles);if(t&&t.length>0){var s=this.taskTypeOptions.find((function(t){return e.entityPreviewFiles[t.value].findIndex((function(t){return t.id===e.currentPreview.id}))>=0}));s?this.taskTypeId=s.value:this.taskTypeOptions.length>0&&(this.taskTypeId=this.taskTypeOptions[0].value),this.taskTypeId&&this.setDefaultComparisonPreview()}else this.previewToCompareId=null},setDefaultComparisonPreview:function(){var e=this;if(!this.entityPreviewFiles)return"";var t=this.entityPreviewFiles[this.taskTypeId];t?(t=t.filter((function(t){return t.id!==e.currentPreview.id})),t.length>0?this.previewToCompareId=t[0].id:this.previewToCompareId=null):this.previewToCompareId=null},resetPreviewFileMap:function(){var e=this;if(this.previewFileMap={},this.entityPreviewFiles){var t=this.entityPreviewFiles[this.taskTypeId];t&&t.forEach((function(t){e.previewFileMap[t.id]=t}))}},onDeleteClicked:function(){this.clearFocus(),this.deleteSelection()},onChangeColor:function(e){this.color=e,this.fabricCanvas.freeDrawingBrush.color=this.color,this.isShowingPalette=!1},onPencilAnnotateClicked:function(){this.clearFocus(),this.isDrawing?this.isDrawing=!1:(this.isTyping=!1,this.isDrawing=!0)},onTypeClicked:function(){this.clearFocus(),this.isTyping?this.isTyping=!1:(this.isDrawing=!1,this.isTyping=!0)},refreshCanvas:function(){this.clearCanvas(),this.annotations.length>0&&(this.isMovie?this.loadAnnotation():this.isPicture&&this.loadAnnotation(this.getAnnotation(0)))},getAnnotation:function(e){return this.isMovie?(e=Object(c["d"])(e,this.fps),this.annotations.find((function(t){return t.time===e}))):this.isPicture?this.annotations[0]:void 0},getAnnotationStyles:function(e,t){return{cursor:"pointer",position:"relative",display:"inline-block",left:this.getTimelinePosition(e.time,t)+"px"}},onAnnotationClicked:function(e){this.loadAnnotation(e)},saveAnnotations:function(){var e=0;if(this.isMovie){var t=this.previewViewer.getCurrentTimeRaw();e=Object(c["d"])(t,this.fps)||0}var s=this.getAnnotation(e),i=this.getNewAnnotations(e,s);this.readOnly||this.$emit("annotation-changed",{preview:this.currentPreview,annotations:i})},loadAnnotation:function(e){var t=this,s=0;if(e||(s=Object(c["d"])(this.currentTimeRaw,this.fps),e=this.getAnnotation(s),e)){this.fabricCanvas||this.setupFabricCanvas(),this.isMovie&&(s=e.time||0,this.previewViewer.pause(),s=Object(c["d"])(s,this.fps),this.setCurrentTime(s)),this.clearCanvas();var i=1,n=1;e.width&&(i=this.fabricCanvas.width/e.width,n=this.fabricCanvas.width/e.width),e.height&&(n=this.fabricCanvas.height/e.height),e.drawing.objects.forEach((function(s){var r={left:s.left*i,top:s.top*n,fill:"transparent",stroke:s.stroke,strokeWidth:s.strokeWidth,radius:s.radius*i,width:s.width,height:s.height,scaleX:s.scaleX*i,scaleY:s.scaleY*n};if("path"===s.type){var c=1;s.canvasWidth&&(c=e.width/t.fabricCanvas.width);var l=new o["fabric"].Path(s.path,Object(a["a"])(Object(a["a"])({},r),{},{strokeWidth:s.strokeWidth*c,canvasWidth:s.canvasWidth}));l.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(l)}else if("i-text"===s.type||"text"===s.type){var d=new o["fabric"].Text(s.text,Object(a["a"])(Object(a["a"])({},r),{},{fill:s.fill,left:s.left*i,top:s.top*n,fontFamily:s.fontFamily,fontSize:s.fontSize,width:s.width*i}));t.fabricCanvas.add(d)}}))}else this.isMovie||console.warn("Annotations are malformed or empty.")},reloadAnnotations:function(){if(this.annotations=[],this.currentPreview.annotations){var e=[];this.currentPreview.annotations.forEach((function(t){return e.push(Object(a["a"])({},t))})),this.annotations=e.sort((function(e,t){return e.time<t.time}))||[]}else this.annotations=[];return this.annotations},onKeyDown:function(e){var t=this;if(!["INPUT","TEXTAREA"].includes(e.target.tagName))if(46===e.keyCode)this.deleteSelection();else if(37===e.keyCode)this.goPreviousFrame();else if(39===e.keyCode)this.goNextFrame();else{if(32===e.keyCode)return this.onPlayPauseClicked(),this.pauseEvent(e),!1;68===e.keyCode?(this.container.focus(),this.pauseEvent(e),this.onPencilAnnotateClicked()):e.ctrlKey&&e.altKey&&68===e.keyCode?this.onPencileAnnotateClicked():e.ctrlKey&&90===e.keyCode?this.undoLastAction():e.altKey&&82===e.keyCode?this.redoLastAction():27===e.keyCode&&this.fullScreen&&(this.isComparing=!1,this.fullScreen=!1,this.$nextTick((function(){t.reloadAnnotations(),t.loadAnnotation()})))}},configureEvents:function(){window.addEventListener("keydown",this.onKeyDown,!1),this.container.addEventListener("fullscreenchange",this.onFullScreenChange,!1),this.container.addEventListener("mozfullscreenchange",this.onFullScreenChange,!1),this.container.addEventListener("MSFullscreenChange",this.onFullScreenChange,!1),this.container.addEventListener("webkitfullscreenchange",this.onFullScreenChange,!1)},removeEvents:function(){window.removeEventListener("keydown",this.onKeyDown),this.container.removeEventListener("fullscreenchange",this.onFullScreenChange,!1),this.container.removeEventListener("mozfullscreenchange",this.onFullScreenChange,!1),this.container.removeEventListener("MSFullscreenChange",this.onFullScreenChange,!1),this.container.removeEventListener("webkitfullscreenchange",this.onFullScreenChange,!1)},changeCurrentPreview:function(e){this.$emit("change-current-preview",e)},onAddPreviewClicked:function(){this.$emit("add-preview")},onRemovePreviewClicked:function(){this.$emit("remove-extra-preview",this.currentPreview)},onPreviousClicked:function(){this.currentIndex>1?this.currentIndex--:this.currentIndex=this.previews.length},onNextClicked:function(){this.currentIndex<this.previews.length?this.currentIndex++:this.currentIndex=1},displayFirst:function(){this.currentIndex>1&&(this.currentIndex=1)},displayLast:function(){this.currentIndex=this.previews.length},onCanvasMouseMoved:function(e){if(this.isPicture&&this.$options.loupe){var t=this.canvasWrapper.style.width,s=this.canvasWrapper.style.height;this.previewViewer.updateLoupePosition(e,{width:t,height:s})}else if(this.isMovie&&this.$options.scrubbing){var i=e.e.clientX;i-this.$options.scrubStartX<0?this.goPreviousFrame():this.goNextFrame(),this.$options.scrubStartX=i}},onCanvasClicked:function(e){if(e.button>1&&this.isPicture&&this.fullScreen){this.$options.loupe=!0,this.previewViewer.showLoupe();var t=this.canvasWrapper.style.width,s=this.canvasWrapper.style.height;this.previewViewer.updateLoupePosition(e,{width:t,height:s})}else e.button>1&&this.isMovie&&(this.$options.scrubbing=!0,this.$options.scrubStartX=e.e.clientX,this.$options.scrubStartTime=Number(this.currentTimeRaw));return!1},onCanvasReleased:function(e){return this.isPicture&&this.$options.loupe?(this.previewViewer.hideLoupe(),this.$options.loupe=!1):this.isMovie&&this.$options.scrubbing&&(this.$options.scrubbing=!1),!1},getTimelinePosition:function(e,t){if(this.$refs.movie){var s=Math.round(e/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*t-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},onProgressClicked:function(e){var t=this.progress.offsetLeft;0!==t||this.fullScreen||(t=this.progress.parentElement.offsetParent.offsetLeft);var s=(e.pageX-t)/this.progress.offsetWidth,i=Object(c["d"])(s*this.videoDuration,this.fps);this.clearCanvas(),this.setCurrentTime(i)},setCurrentTime:function(e){this.previewViewer.setCurrentTime(e),this.comparisonViewer&&this.comparisonViewer.setCurrentTime(e)},updateProgressBar:function(e){this.progress.getAttribute("max")||this.progress.setAttribute("max",this.videoDuration-this.frameFactor),this.progress.value=e},onRevisionPreviewSelected:function(e){this.currentIndex=e},onRevisionPreviewDropped:function(e){var t=this,s=e.previousIndex,i=e.newIndex,n=this.previews[s];this.updateRevisionPreviewPosition({previousIndex:s,newIndex:i,revision:this.currentPreview.revision,taskId:this.currentPreview.task_id,previewId:n.id}).catch(console.error),this.$nextTick((function(){t.currentIndex=i+1}))}}),watch:{currentPreview:function(){this.reloadAnnotations(),this.isMovie?(this.configureVideo(),this.pause(),this.maxDuration="00:00.000",this.isDrawing=!1,this.isComparing&&(this.isComparing=!1)):this.isPicture&&(this.pause(),this.isDrawing=!1,this.refreshCanvas(),setTimeout(this.previewViewer.resetPicture,10),this.comparisonViewer&&setTimeout(this.comparisonViewer.resetPicture,20)),this.setDefaultComparisonTaskType()},"currentPreview.revision":function(){this.currentIndex=1},previewToCompareId:function(){var e=this;this.$nextTick((function(){e.comparisonViewer&&e.comparisonViewer.pause(),e.previewToCompare=e.previewFileMap[e.previewToCompareId],e.setCurrentTime(0),e.isComparing&&e.pause()}))},taskTypeId:function(){this.resetPreviewFileMap(),this.setDefaultComparisonPreview()},isComparing:function(){var e=this;this.isComparing||(this.comparisonViewer&&this.comparisonViewer.pause(),this.taskTypeId="",this.previewToCompareId=""),this.$nextTick((function(){e.fixCanvasSize(e.getCurrentPreviewDimensions())}))},isDrawing:function(){this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=this.isDrawing)},isOrdering:function(){var e=this;this.$nextTick((function(){e.fixCanvasSize(e.getCurrentPreviewDimensions()),e.previewViewer.resetVideo(),e.previewViewer.resetPicture()}))},isTyping:function(){var e=this.canvasWrapper.getElementsByClassName("upper-canvas")[0];this.isTyping&&e?e.addEventListener("dblclick",this.addText):e.removeEventListener("dblclick",this.addText)}}},Z=J,ee=(s("660b"),Object(b["a"])(Z,i,n,!1,null,"f7ad418e",null));t["a"]=ee.exports},"6bda":function(e,t,s){},"6be5":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("article",{ref:"wrapper",class:{"add-comment":!0,"word-break":!0,media:!0,"is-dragging":e.isDragging},on:{drop:e.onDrop,dragover:e.onDragover,dragleave:e.onDragleave}},[e.light?e._e():s("figure",{staticClass:"media-left"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:e.user}})],1)])]),s("div",{staticClass:"media-content"},[s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:2},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"font-size":11,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.item.full_name)+" ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"},{name:"focus",rawName:"v-focus"}],ref:"comment-textarea",staticClass:"textarea flexrow-item",attrs:{placeholder:e.$t("comments.add_comment"),disabled:e.isLoading},domProps:{value:e.text},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runAddComment(e.text,e.attachment,e.checklist,e.task_status_id):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.runAddComment(e.text,e.attachment,e.checklist,e.task_status_id):null}],input:function(t){t.target.composing||(e.text=t.target.value)}}})]),e.checklist.length>0?s("checklist",{attrs:{checklist:e.checklist},on:{"add-item":e.onAddChecklistItem,"remove-task":e.removeTask}}):e._e(),s("div",{staticClass:"flexrow preview-section"},[s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.$emit("add-preview")}}},[e._v(" "+e._s(e.$t("comments.add_preview"))+" ")]),s("span",{staticClass:"attachment-file flexrow-item"},[e.isFileAttached?e._e():s("em",[e._v(" "+e._s(e.$t("comments.no_file_attached"))+" ")]),e.isFileAttached?s("em",[e._v(" "+e._s(e.attachedFileName)+" ")]):e._e()])]),s("group-button",{staticClass:"mt1"},[s("combobox-status",{staticClass:"status-selector",attrs:{narrow:!0,"task-status-list":e.taskStatus},model:{value:e.task_status_id,callback:function(t){e.task_status_id=t},expression:"task_status_id"}}),s("button-simple",{class:{button:!0,active:0!==e.checklist.length},attrs:{icon:"list",title:e.$t("comments.add_checklist")},on:{click:function(t){return e.addChecklistEntry(-1)}}}),s("button-simple",{class:{button:!0,active:0!==e.attachment.length},attrs:{icon:"image",title:e.$t("comments.add_attachment")},on:{click:function(t){return e.onAddCommentAttachmentClicked()}}}),s("button",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},style:{"background-color":e.taskStatusColor},on:{click:function(t){return e.runAddComment(e.text,e.attachment,e.checklist,e.task_status_id)}}},[e._v(" "+e._s(e.$t("comments.post_status"))+" ")])],1),e.isError?s("div",{staticClass:"error pull-right"},[s("em",[e._v(e._s(e.$t("comments.error")))])]):e._e()],1),s("add-comment-image-modal",{ref:"add-comment-image-modal",attrs:{active:e.modals.addCommentAttachment,"is-loading":e.loading.addCommentAttachment,"is-error":e.errors.addCommentAttachment},on:{cancel:e.onCloseCommentAttachment,confirm:e.createCommentAttachment}})],1)},n=[],a=s("5530"),o=(s("7db0"),s("498a"),s("2f62")),r=s("66e7"),c=s("7930"),l=s("53ff"),d=s.n(l),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.comment_image"))+" ")]),s("p",[e._v(" "+e._s(e.$t("tasks.select_file"))+" ")]),s("file-upload",{ref:"image-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.isError?s("p",{staticClass:"error"},[e._v(" "+e._s(e.$t("tasks.add_preview_error"))+" ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":void 0==e.forms},on:{click:function(t){return e.confirm()}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},p=[],m=s("d065"),h=s("8dee"),f=s("4085"),_={name:"add-preview-modal",mixins:[m["a"]],components:{FileUpload:f["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:h["a"].ALL_EXTENSIONS_STRING}},data:function(){return{forms:null}},mounted:function(){this.forms=null},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onFileSelected:function(e){this.forms=e},confirm:function(){this.$emit("confirm",this.forms)},reset:function(){this.$refs["image-field"].reset(),this.forms=null}}),watch:{active:function(){this.reset()}}},v=_,g=(s("9eef"),s("2877")),y=Object(g["a"])(v,u,p,!1,null,"76803482",null),b=y.exports,k=s("56a0"),w=s("eb8c"),C=function(){var e,t=this,s=t.$createElement,i=t._self._c||s;return i("div",{class:(e={"group-button":!0},e["group-button--"+t.align]=!0,e)},[t._t("default")],2)},S=[],T=(s("caad"),{name:"group-button",props:{align:{default:"right",type:String,validator:function(e){return["right","left","center"].includes(e)}}}}),x=T,E=(s("44e8"),Object(g["a"])(x,C,S,!1,null,"55ed4403",null)),P=E.exports,O=s("de40"),A=s("4ce0"),j={name:"add-comment",components:{AtTa:d.a,AddCommentImageModal:b,ComboboxStatus:k["a"],PeopleAvatar:w["a"],GroupButton:P,ButtonSimple:O["a"],Checklist:A["a"]},data:function(){return{isDragging:!1,text:"",attachment:[],checklist:[],task_status_id:this.task.task_status_id,errors:{addCommentAttachment:!1},loading:{addCommentAttachment:!1},modals:{addCommentAttachment:!1}}},props:{addComment:{type:Function,default:null},isLoading:{type:Boolean,default:null},isError:{type:Boolean,default:null},light:{type:Boolean,default:!1},task:{type:Object,default:function(){}},taskStatus:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){}},attachedFileName:{type:String,default:""},team:{type:Array,default:function(){return[]}}},mounted:function(){var e=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach((function(t){e.$refs.wrapper&&e.$refs.wrapper.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))}))},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isDarkTheme"])),{},{isFileAttached:function(){return void 0!==this.attachedFileName&&this.attachedFileName.length>0},taskStatusColor:function(){var e=this,t=this.taskStatus.find((function(t){return t.id===e.task_status_id}))||this.taskStatus[0];if("todo"===t.short_name)return"#666";var s=t.color;return this.isDarkTheme?c["a"].darkenColor(s):s},isAddChecklistAllowed:function(){var e=this,t=this.taskStatus.find((function(t){return t.id===e.task_status_id}))||this.taskStatus[0];return t.is_retake&&0===this.checklist.length}}),methods:{runAddComment:function(e,t,s,i){this.$emit("add-comment",e,t,s,i),this.text="",this.attachment=[],this.checklist=[]},updateValue:function(e){this.task_status_id=this.$refs.statusSelect.value},focus:function(){this.$refs["comment-textarea"].focus()},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(e){for(var t=[],s=0;s<e.dataTransfer.files.length;s++){var i=new FormData;i.append("file",e.dataTransfer.files[s]),t.push(i)}this.$emit("file-drop",t),this.isDragging=!1},onAddCommentAttachmentClicked:function(e){this.modals.addCommentAttachment=!0},createCommentAttachment:function(e){this.onCloseCommentAttachment(),this.attachment=e},onCloseCommentAttachment:function(){this.modals.addCommentAttachment=!1},addChecklistEntry:function(e){-1!==e&&e!==this.checklist.length-1||this.checklist.push({text:"",checked:!1})},removeTask:function(e){this.checklist=Object(r["f"])(this.checklist,e)},setValue:function(e){var t=this;this.checklist=e.checklist,this.$nextTick((function(){t.$refs["comment-textarea"].value=e.text}))},onAddChecklistItem:function(e){this.checklist[e.index].text=this.checklist[e.index].text.trim(),delete e.index,this.checklist.push(e)}},watch:{task:function(){this.task_status_id=this.task.task_status_id}}},D=j,M=(s("a1c2"),Object(g["a"])(D,i,n,!1,null,"115dcfec",null));t["a"]=M.exports},"6c25":function(e,t,s){"use strict";s("0daf")},"704c":function(e,t,s){},7096:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"color-wrapper"},[s("button",{class:{"color-picker":!0},style:{color:e.color},attrs:{type:"button",title:e.color},on:{click:e.togglePalette}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],class:{"color-palette":!0}},e._l(e.palette,(function(t){return s("label",{key:t,style:{color:t},attrs:{title:t}},[s("input",{attrs:{type:"radio"},domProps:{value:t},on:{click:function(s){return e.onColorPicked(t)}}})])})),0)])},n=[],a={name:"colorpicker",props:{color:{type:String},palette:{type:Array}},data:function(){return{isOpen:!1}},computed:{},methods:{togglePalette:function(){this.isOpen=!this.isOpen},onColorPicked:function(e){this.$emit("change",e),this.isOpen=!1}}},o=a,r=(s("f54c0"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"effe3110",null);t["a"]=c.exports},7128:function(e,t,s){},7203:function(e,t,s){"use strict";s("e92a")},"732b":function(e,t,s){e.exports=s.p+"img/empty_shot.8f70da90.png"},7369:function(e,t,s){"use strict";s("29f8")},7448:function(e,t,s){},7678:function(e,t,s){},"782c":function(e,t,s){"use strict";s("a3e1")},"782d":function(e,t,s){"use strict";s("b1a6")},7921:function(e,t,s){},7930:function(e,t,s){"use strict";s("fb6a");var i=s("4710"),n=s.n(i),a=s("6929"),o=s.n(a),r={},c={};t["a"]={darkenColor:function(e){return r[e]||(r[e]=o()(e).darken(.3).saturate(.6)),r[e]},fromString:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=new n.a({lightness:.7,saturation:.8});return(t||localStorage&&"true"===localStorage.getItem("dark-theme"))&&(s=new n.a({lightness:.6,saturation:.8})),s.hex(e)},hexToRGBa:function(e,t){var s=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return t?"rgba("+s+", "+i+", "+n+", "+t+")":"rgb("+s+", "+i+", "+n+")"},lightenColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return c[e+t]||(c[e+t]=o()(e).fade(t)),c[e+t]},validationTextColor:function(e){return e&&"todo"!==e.task_status_short_name&&"wtg"!==e.task_status_short_name?"white":"#333"}}},"7bf8":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label?s("label",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),s("p",{staticClass:"control flexrow"},[s("input",{ref:"input",class:"input flexrow-item"+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type,disabled:e.disabled,maxlength:e.maxlength,min:"0"},domProps:{value:e.value},on:{input:function(t){return e.updateValue()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()}}}),e.buttonLabel?s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.emitEnter()}}},[e._v(" "+e._s(e.buttonLabel)+" ")]):e._e()])])},n=[],a=s("5530"),o=(s("a9e3"),s("2f62")),r={name:"text-field",props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String},value:{default:"",type:[String,Number]},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String},buttonLabel:{default:"",type:String},maxlength:{default:524288,type:Number}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},focus:function(){this.$refs.input.focus()}})},c=r,l=(s("e5e6"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"f5484cc6",null);t["a"]=d.exports},"7d26":function(e,t,s){"use strict";var i,n=s("ade3"),a=s("5530"),o=s("2909"),r=(s("159b"),s("b0c0"),s("d3b7"),s("25f0"),s("99af"),s("07ac"),s("d81d"),s("b64b"),s("fb6a"),s("4de4"),s("7db0"),s("3ca3"),s("ddb0"),s("a4d3"),s("e01a"),s("b680"),s("c740"),s("a434"),s("caad"),s("2532"),s("ba4c")),c=s.n(r),l=s("edbf"),d={getAssets:function(e,t){var s="/api/data/assets/with-tasks";return e&&(s+="?project_id=".concat(e.id)),t&&(s+="&episode_id=".concat(t.id)),l["a"].pget(s)},getAsset:function(e){return l["a"].getModel("assets",e)},newAsset:function(e){var t={name:e.name,description:e.description,data:e.data};"null"!==e.source_id&&(t.episode_id=e.source_id);var s="/api/data/projects/".concat(e.project_id,"/asset-types/")+"".concat(e.entity_type_id,"/assets/new");return l["a"].ppost(s,t)},updateAsset:function(e){var t={name:e.name,description:e.description,entity_type_id:e.entity_type_id,project_id:e.project_id,data:e.data};return("null"===e.source_id||e.source_id)&&(t.source_id=e.source_id),l["a"].pput("/api/data/entities/".concat(e.id),t)},deleteAsset:function(e){return e.canceled?l["a"].pdel("/api/data/assets/".concat(e.id,"?force=true")):l["a"].pdel("/api/data/assets/".concat(e.id))},restoreAsset:function(e,t){var s={canceled:!1};return l["a"].pput("/api/data/entities/".concat(e.id),s)},postCsv:function(e,t,s){var i="/api/import/csv/projects/".concat(e.id,"/assets");return s&&(i+="?update=true"),l["a"].ppost(i,t)}},u=s("ce6b"),p=s("fa53"),m=s("ef8b"),h=s("f83f"),f=s("52ad"),_=s("3657"),v=s("de26"),g=s("2229"),y=s("6185"),b=s("66e7"),k=s("09d3"),w=s("2017"),C=s("ca76"),S=s("9fb0"),T={getCurrentProduction:function(){return h["a"].getters.currentProduction(h["a"].state)},getTaskStatus:function(e){return p["a"].state.taskStatusMap[e]},getTaskType:function(e){return m["a"].state.taskTypeMap[e]},getTask:function(e){return p["a"].state.taskMap[e]},getPerson:function(e){return f["a"].state.personMap[e]},setListStats:function(e,t){var s=0,i=0;t?(t.forEach((function(e){s+=e.timeSpent,i+=e.estimation})),Object.assign(e,{displayedAssetsLength:t.length,displayedAssetsTimeSpent:s,displayedAssetsEstimation:i})):Object.assign(e,{displayedAssetsLength:0,displayedAssetsEstimation:0})},populateTask:function(e,t,s){return e.name=T.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=T.getTaskStatus(e.task_status_id).short_name,Object.assign(e,{project_id:t.production_id,episode_id:t.source_id,entity_name:"".concat(t.asset_type_name," / ").concat(t.name),entity_type_name:t.asset_type_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},populateAndRegisterAsset:function(e,t,s,i,n,a,o){var r={},c=0,l=0;e[o.asset_type]||(e[o.asset_type_id]={id:o.asset_type_id,name:o.asset_type_name}),o.production_id=n.id,o.project_name=n.name,o.production_name=n.name;var d=[];return o.tasks.forEach((function(e){o.full_name="".concat(o.asset_type_name," / ").concat(o.name),T.populateTask(e,o),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return i[e].name.localeCompare(i[t].name)})));var n=s[e.task_type_id];a[n.name]||(a[n.name]=e.task_type_id),c+=e.duration,l+=e.estimation,d.push(e.id),r[e.task_type_id]=e.id,t[e.id]=e})),o.tasks=d,o.validations=r,o.timeSpent=c,o.estimation=l,o},sortValidationColumns:function(e,t,s){var i=Object(o["a"])(e);return Object(g["p"])(i,s)},buildResult:function(e,t){var s=t.assetSearch,i=t.production,n=t.sorting,a=t.taskStatusMap,o=t.taskTypeMap,r=t.persons,c=t.taskMap,l=Object.values(o),d=Object.keys(a).map((function(e){return a[e]})),u=s,p=Object(C["e"])(u)||[],m=Object(C["d"])({entryIndex:x.assetIndex,assetTypes:e.assetTypes,taskTypes:l,taskStatuses:d,descriptors:i.descriptors||[],persons:r,query:u}),h=Object(w["j"])(x.assetIndex,p)||x.assets;h=Object(C["a"])(h,m,c),h=Object(g["a"])(h,n,a,o,c),x.result=h;var f=h.slice(0,v["a"]),_=f.length,k=e.nbValidationColumns;e.displayedAssets=f,e.assetFilledColumns=Object(b["c"])(f),T.setListStats(e,h),e.assetSearchText=u,e.assetSelectionGrid=Object(y["b"])(_,k)}},x={assetIndex:{},assetTypeIndex:{},assets:[]},E={assetMap:{},assetValidationColumns:[],nbValidationColumns:0,filteredAssets:[],displayedAssets:[],displayedAssetsLength:0,displayedAssetsTimeSpent:0,displayedAssetsEstimation:0,assetFilledColumns:{},assetSearchText:"",assetSelectionGrid:{},assetSearchQueries:[],assetSorting:[],displayedAssetTypes:[],displayedAssetTypesLength:0,assetTypeSearchText:"",assetTypeStats:{},assetTypes:[],isAssetsLoading:!1,isAssetsLoadingError:!1,isAssetDescription:!1,isAssetEstimation:!1,isAssetTime:!1,assetsCsvFormData:null,assetCreated:"",personTasks:[],assetListScrollPosition:0},P=Object(a["a"])({},E),O={assets:function(e){return x.assets},assetMap:function(e){return e.assetMap},assetSearchText:function(e){return e.assetSearchText},assetSearchQueries:function(e){return e.assetSearchQueries},assetSelectionGrid:function(e){return e.assetSelectionGrid},assetValidationColumns:function(e){return e.assetValidationColumns},isAssetsLoading:function(e){return e.isAssetsLoading},isAssetsLoadingError:function(e){return e.isAssetsLoadingError},displayedAssets:function(e){return e.displayedAssets},displayedAssetsLength:function(e){return e.displayedAssetsLength},displayedAssetsTimeSpent:function(e){return e.displayedAssetsTimeSpent},displayedAssetsEstimation:function(e){return e.displayedAssetsEstimation},assetFilledColumns:function(e){return e.assetFilledColumns},displayedAssetTypes:function(e){return e.displayedAssetTypes},displayedAssetTypesLength:function(e){return e.displayedAssetTypesLength},assetTypeSearchText:function(e){return e.assetTypeSearchText},assetTypeStats:function(e){return e.assetTypeStats},assetTypeListScrollPosition:function(e){return e.assetTypeListScrollPosition},assetSorting:function(e){return e.assetSorting},assetListScrollPosition:function(e){return e.assetListScrollPosition},displayedAssetsByType:function(e){return Object(b["d"])(e.displayedAssets,"asset_type_name")},assetsByType:function(e){var t=e.displayedAssets.filter((function(e){return!e.canceled}));return Object(b["d"])(t,"asset_type_name")},assetCreated:function(e){return e.assetCreated},isAssetEstimation:function(e){return e.isAssetEstimation},isAssetTime:function(e){return e.isAssetTime},isAssetDescription:function(e){return e.isAssetDescription},assetsCsvFormData:function(e){return e.assetsCsvFormData}},A={loadAssets:function(e){var t=e.commit,s=e.state,i=e.rootGetters,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.currentProduction,o=i.userFilters,r=i.personMap,c=i.currentEpisode,l=i.isTVShow,u=i.taskTypeMap,p=i.taskMap;return l&&!c||s.isAssetsLoading?Promise.resolve([]):(n&&(c=null),t(S["ac"]),d.getAssets(a,c).then((function(e){return t(S["Yb"],{production:a,assets:e,userFilters:o,personMap:r,taskMap:p,taskTypeMap:u}),Promise.resolve(e)})).catch((function(e){return console.error("an error occured while loading assets",e),t(S["Zb"]),Promise.resolve([])})))},loadAsset:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=i.assetMap[t];if(!a||!a.lock){var o=n.personMap,r=n.currentProduction,c=n.taskMap,l=n.taskTypeMap;return d.getAsset(t).then((function(e){i.assetMap[e.id]?s(S["Ve"],e):s(S["b"],{asset:e,taskTypeMap:l,taskMap:c,personMap:o,production:r})})).catch((function(e){return console.error(e)}))}},newAsset:function(e,t){var s=e.commit,i=e.dispatch,n=e.state,a=e.rootGetters;return x.assets.find((function(e){return e.name===t.name}))?Promise.reject(new Error("Asset already exsists")):d.newAsset(t).then((function(e){var t=a.assetTypeMap;s(S["wb"],{newAsset:e,assetTypeMap:t});var o=n.assetValidationColumns,r=o.map((function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"assets"})}));return Promise.all(r).then((function(){return Promise.resolve(e)}))}))},editAsset:function(e,t){var s=e.commit,i=(e.state,e.rootState),n=t.name&&x.assets.find((function(e){return e.name===t.name&&t.id!==e.id}));if(n)return Promise.reject(new Error("Asset already exsists"));var a=i.assetTypes.assetTypeMap;return s(S["cd"],t),s(S["wb"],{newAsset:t,assetTypeMap:a}),d.updateAsset(t).then((function(e){return setTimeout((function(){s(S["Te"],t)}),2e3),Promise.resolve(e)}))},deleteAsset:function(e,t){var s=e.commit,i=e.state;return d.deleteAsset(t).then((function(){var e=i.assetMap[t.id];return e&&e.tasks.length>0&&!e.canceled?s(S["t"],e):s(S["Kd"],t),Promise.resolve(t)}))},restoreAsset:function(e,t){var s=e.commit;e.state;return d.restoreAsset(t).then((function(){return s(S["ce"],t),Promise.resolve(t)}))},uploadAssetFile:function(e,t){var s=e.commit,i=e.state,n=T.getCurrentProduction();return s(S["Sb"]),d.postCsv(n,i.assetsCsvFormData,t).then((function(){s(S["Rb"]),Promise.resolve()}))},setAssetSearch:function(e,t){var s=e.commit,i=(e.state,e.rootGetters),n=i.taskStatusMap,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction,c=i.people;s(S["le"],{assetSearch:t,taskMap:o,taskStatusMap:n,taskTypeMap:a,persons:c,production:r})},saveAssetSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=P.assetSearchQueries.find((function(e){return e.name===t})),o=i.currentProduction;a?e():u["a"].createFilter("asset",t,t,o.id,null,(function(t,i){s(S["ee"],{searchQuery:i,production:o}),t?n(t):e(i)}))}))},removeAssetSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=i.currentProduction;return u["a"].removeFilter(t).then((function(){return s(S["Ld"],{searchQuery:t,production:n}),Promise.resolve()}))},displayMoreAssets:function(e){var t=e.commit,s=e.rootGetters;t(S["sb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},initAssetTypes:function(e){e.commit;var t=e.dispatch;e.state,e.rootState,e.rootGetters;return t("setLastProductionScreen","production-asset-types"),t("loadAssets").then((function(){return t("computeAssetTypeStats"),Promise.resolve()}))},setAssetTypeListScrollPosition:function(e){var t=e.commit;t(S["De"])},computeAssetTypeStats:function(e){var t=e.commit,s=e.rootGetters,i=s.taskStatusMap,n=s.taskMap;t(S["V"],{taskStatusMap:i,taskMap:n})},setAssetTypeSearch:function(e,t){var s=e.commit;s(S["me"],t)},getAssetsCsvLines:function(e){var t=e.state,s=e.rootGetters,i=s.currentProduction,n=s.episodeMap,a=s.organisation,r=x.assets;x.result&&x.result.length>0&&(r=x.result);var c=r.map((function(e){var r=[];return s.isTVShow&&r.push(e.episode_id?n[e.episode_id].name:"MP"),r=r.concat([e.asset_type_name,e.name,e.description]),Object(g["d"])(Object(o["a"])(i.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(t){e.data=e.data||{},r.push(e.data[t.field_name])})),t.isAssetTime&&r.push(Object(_["o"])(a,e.timeSpent).toFixed(2)),t.isAssetEstimation&&r.push(Object(_["o"])(a,e.estimation).toFixed(2)),t.assetValidationColumns.forEach((function(t){var i=s.taskMap[e.validations[t]];i?r.push(i.task_status_short_name):r.push("")})),r}));return c},changeAssetSort:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskStatus,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction,c=i.people,l=t?[t]:[];s(S["G"],{taskStatusMap:n,taskTypeMap:a,taskMap:o,production:r,persons:c,sorting:l})},deleteAllAssetTasks:function(e,t){e.commit;var s=e.dispatch,i=(e.state,t.projectId),n=t.taskTypeId,a=t.selectionOnly,o=[];return a&&(o=x.result.filter((function(e){return e.validations[n]})).map((function(e){return e.validations[n]}))),s("deleteAllTasks",{projectId:i,taskTypeId:n,taskIds:o})}},j=(i={},Object(n["a"])(i,S["P"],(function(e){x.assets=[],e.assetMap={},x.result=[],e.assetValidationColumns=[],x.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},T.setListStats(e,[]),e.assetSearchQueries=[]})),Object(n["a"])(i,S["ac"],(function(e){x.assets=[],x.result=[],e.assetMap={},e.isAssetsLoading=!0,e.isAssetsLoadingError=!1,e.assetValidationColumns=[],x.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},T.setListStats(e,[]),e.assetSearchQueries=[]})),Object(n["a"])(i,S["Zb"],(function(e){e.isAssetsLoading=!1,e.isAssetsLoadingError=!0})),Object(n["a"])(i,S["Yb"],(function(e,t){var s=t.production,i=t.assets,n=t.userFilters,a=t.personMap,o=t.taskMap,r=t.taskTypeMap,c={},l={},d=!1,u=!1,p=!1;i=Object(g["b"])(i),x.assets=i,x.result=i,x.assetIndex=Object(w["a"])(i),e.assetMap={},i.forEach((function(t){T.populateAndRegisterAsset(l,o,r,a,s,c,t),e.assetMap[t.id]=t,!d&&t.timeSpent>0&&(d=!0),!u&&t.estimation>0&&(u=!0),!p&&t.description&&(p=!0)}));var m=Object.values(l);x.assetTypeIndex=Object(w["c"])(m);var h=x.assets.slice(0,v["a"]),f=Object(b["c"])(h);e.assetValidationColumns=T.sortValidationColumns(Object.values(c),f,r),e.isAssetTime=d,e.isAssetEstimation=u,e.isAssetDescription=p,e.isAssetsLoading=!1,e.isAssetsLoadingError=!1,e.nbValidationColumns=e.assetValidationColumns.length,e.displayedAssets=h,T.setListStats(e,x.assets),e.assetFilledColumns=f,e.assetTypes=m,e.displayedAssetTypes=m,e.displayedAssetTypesLength=m.length;var _=e.displayedAssets.length,k=e.nbValidationColumns;e.assetSelectionGrid=Object(y["b"])(_,k),n.asset&&n.asset[s.id]?e.assetSearchQueries=n.asset[s.id]:e.assetSearchQueries=[]})),Object(n["a"])(i,S["b"],(function(e,t){var s=t.taskTypeMap,i=t.taskMap,n=t.personMap,a=t.production,o=t.asset;o.tasks=Object(g["o"])(o.tasks,s),o.validations={},o.production_id=o.project_id,o.episode_id=o.source_id,T.populateAndRegisterAsset({},i,s,n,a,{},o),x.assets.push(o),x.assets=Object(g["b"])(x.assets),e.assetMap[o.id]=o,e.displayedAssets.push(o),e.displayedAssets=Object(g["b"])(e.displayedAssets),T.setListStats(e,x.assets),e.assetFilledColumns=Object(b["c"])(e.displayedAssets);var r=e.displayedAssets.length,c=e.nbValidationColumns;e.assetSelectionGrid=Object(y["b"])(r,c),e.assetMap[o.id]=o,x.assetIndex=Object(w["a"])(x.assets)})),Object(n["a"])(i,S["Ve"],(function(e,t){Object.assign(e.assetMap[t.id],t),x.assetIndex=Object(w["a"])(x.assets)})),Object(n["a"])(i,S["Kd"],(function(e,t){e.assetMap[t.id]&&(delete e.assetMap[t.id],x.assets=Object(b["h"])(x.assets,t),e.displayedAssets=Object(b["h"])(e.displayedAssets,t),t.timeSpent&&(e.displayedAssetsTimeSpent-=t.timeSpent),t.estimation&&(e.displayedAssetsEstimation-=t.estimation),e.assetFilledColumns=Object(b["c"])(e.displayedAssets),T.setListStats(e,x.assets),x.assetIndex=Object(w["a"])(x.assets))})),Object(n["a"])(i,S["r"],(function(e,t){e.assetsCsvFormData=t})),Object(n["a"])(i,S["Sb"],(function(e){})),Object(n["a"])(i,S["Rb"],(function(e){e.assetsCsvFormData=null})),Object(n["a"])(i,S["wb"],(function(e,t){var s=t.newAsset,i=t.assetTypeMap;e.assetCreated=s.name;var n=e.assetMap[s.id],a=i[s.entity_type_id];if(a&&(s.asset_type_name=a.name,s.asset_type_id=a.id),s.tasks=[],n)s.episode_id=s.source_id,Object.assign(n,s),e.displayedAssets=Object(g["b"])(e.displayedAssets);else{s.validations={},s.production_id=s.project_id,s.episode_id=s.source_id,x.assets.push(s),x.assets=Object(g["b"])(x.assets),e.displayedAssets.push(s),e.displayedAssets=Object(g["b"])(e.displayedAssets),e.assetFilledColumns=Object(b["c"])(e.displayedAssets),e.displayedAssetsLength=x.assets.length;var o=e.displayedAssets.length,r=e.nbValidationColumns;e.assetSelectionGrid=Object(y["b"])(o,r),e.assetMap[s.id]=s}s.description&&!e.isAssetDescription&&(e.isAssetDescription=!0),x.assetIndex=Object(w["a"])(x.assets)})),Object(n["a"])(i,S["t"],(function(e,t){t.canceled=!0})),Object(n["a"])(i,S["ce"],(function(e,t){var s=e.assetMap[t.id];s.canceled=!1,x.assetIndex=Object(w["a"])(x.assets)})),Object(n["a"])(i,S["nb"],(function(e,t){var s=e.displayedAssets.find((function(e){return e.id===t.entity_id}));if(s){var i=JSON.parse(JSON.stringify(s.validations));delete s.validations,c.a.set(s,"validations",i);var n=JSON.parse(JSON.stringify(s.tasks)),a=n.findIndex((function(e){return e===t.id}));n.splice(a,1),c.a.set(s,"tasks",n)}})),Object(n["a"])(i,S["rd"],(function(e,t){t.comment,t.taskId})),Object(n["a"])(i,S["le"],(function(e,t){var s=e.assetSorting;t.sorting=s,T.buildResult(e,t)})),Object(n["a"])(i,S["ee"],(function(e,t){var s=t.searchQuery;e.assetSearchQueries.includes(s)||(e.assetSearchQueries.push(s),e.assetSearchQueries=Object(g["d"])(e.assetSearchQueries))})),Object(n["a"])(i,S["Ld"],(function(e,t){var s=t.searchQuery,i=e.assetSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.assetSearchQueries.splice(i,1)})),Object(n["a"])(i,S["sb"],(function(e,t){t.taskTypeMap,t.taskStatusMap,t.taskMap,t.production;var s=x.result,i=e.displayedAssets.length+v["a"];if(i<s.length+v["a"]){e.displayedAssets=s.slice(0,e.displayedAssets.length+v["a"]),e.assetFilledColumns=Object(b["c"])(e.displayedAssets);var n=e.displayedAssets.length-v["a"],a=e.displayedAssets.length,o=e.nbValidationColumns;n>=0&&(e.assetSelectionGrid=Object(y["a"])(e.assetSelectionGrid,n,a,o))}})),Object(n["a"])(i,S["oe"],(function(e,t){e.assetSearchText=""})),Object(n["a"])(i,S["Ce"],(function(e,t){var s=t.entityId,i=(t.taskId,t.previewId),n=t.taskMap,a=e.assetMap[s];a&&(a.preview_file_id=i,a.tasks.forEach((function(e){var t=n[e];t&&(t.entity.preview_file_id=i)})))})),Object(n["a"])(i,S["ke"],(function(e,t){e.assetListScrollPosition=t})),Object(n["a"])(i,S["De"],(function(e,t){e.assetTypeListScrollPosition=t})),Object(n["a"])(i,S["Td"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!1)})),Object(n["a"])(i,S["n"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!0)})),Object(n["a"])(i,S["o"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.assetSelectionGrid=s})),Object(n["a"])(i,S["T"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));e.assetSelectionGrid=Object(y["c"])(s)})),Object(n["a"])(i,S["sd"],(function(e,t){var s=e.assetMap[t.entity_id];s&&t&&(t=T.populateTask(t,s),s.tasks.push(t),s.validations||(s.validations={}),c.a.set(s.validations,t.task_type_id,t.id))})),Object(n["a"])(i,S["Y"],(function(e,t){t.forEach((function(t){if(t){var s=e.assetMap[t.entity_id];if(s){var i=Object(a["a"])({},s.validations);c.a.set(i,t.task_type_id,t.id),delete s.validations,c.a.set(s,"validations",i)}}}))})),Object(n["a"])(i,S["me"],(function(e,t){var s=Object(C["e"])(t),i=Object(w["j"])(x.assetTypeIndex,s)||e.assetTypes;Object.assign(e,{displayedAssetTypes:i,displayedAssetTypesLength:i?i.length:0,assetTypeSearchText:t})})),Object(n["a"])(i,S["V"],(function(e,t){var s=t.taskStatusMap,i=t.taskMap;e.assetTypeStats=Object(k["a"])(x.assets,"asset_type_id",s,i)})),Object(n["a"])(i,S["G"],(function(e,t){var s=t.taskStatusMap,i=t.taskTypeMap,n=t.taskMap,a=t.production,o=t.persons,r=t.sorting,c=e.assetSearchText;e.assetSorting=r,T.buildResult(e,{assetSearch:c,taskStatusMap:s,taskTypeMap:i,taskMap:n,production:a,persons:o,sorting:r})})),Object(n["a"])(i,S["Ye"],(function(e,t){var s=t.descriptor,i=t.previousDescriptorFieldName;"Asset"===s.entity_type&&i&&x.assets.forEach((function(e){e.data[s.field_name]=e.data[i],delete e.data[i]}))})),Object(n["a"])(i,S["cd"],(function(e,t){t=e.assetMap[t.id],t.lock=!0})),Object(n["a"])(i,S["Te"],(function(e,t){t=e.assetMap[t.id],t.lock=!1})),Object(n["a"])(i,S["ae"],(function(e){x.assets=[],x.assetIndex={},x.result=[],Object.assign(e,Object(a["a"])({},E))})),i);t["a"]={state:P,getters:O,actions:A,mutations:j,cache:x}},"7d2e":function(e,t,s){"use strict";s("6bda")},"7f06":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pencil-wrapper"},[s("button",{staticClass:"pencil-picker",class:{medium:"medium"===e.pencil,small:"small"===e.pencil},attrs:{type:"button",title:e.$t("playlists.actions.annotation_"+e.pencil)},on:{click:e.togglePalette}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"pencil-palette"},e._l(e.sizes,(function(t){return s("label",{key:t,class:{medium:"medium"===t,small:"small"===t},attrs:{title:e.$t("playlists.actions.annotation_"+t)}},[s("input",{attrs:{type:"radio"},domProps:{value:t},on:{click:function(s){return e.onPencilPicked(t)}}})])})),0)])},n=[],a={name:"pencilpicker",props:{pencil:{type:String},sizes:{type:Array}},data:function(){return{isOpen:!1}},computed:{},methods:{togglePalette:function(){this.isOpen=!this.isOpen},onPencilPicked:function(e){this.$emit("change",e),this.isOpen=!1}}},o=a,r=(s("fbf3"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"7690204b",null);t["a"]=c.exports},"813f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.assetToEdit&&this.assetToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("assets.edit_title"))+" "+e._s(e.assetToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("assets.new_asset"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("assets.fields.type"),options:e.productionAssetTypeOptions},model:{value:e.form.entity_type_id,callback:function(t){e.$set(e.form,"entity_type_id",t)},expression:"form.entity_type_id"}}),e.isTVShow?s("combobox",{attrs:{label:e.$t("assets.fields.episode"),options:e.episodeOptions},model:{value:e.form.source_id,callback:function(t){e.$set(e.form,"source_id",t)},expression:"form.source_id"}}):e._e(),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"descriptionField",attrs:{label:e.$t("assets.fields.description")},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._l(e.assetMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)})),s("div",{staticClass:"jsoneditor-container"},[s("h2",[e._v("Metadata")]),s("v-jsoneditor",{staticClass:"json-editor",attrs:{options:e.options,plus:!0,height:"400px"},model:{value:e.form.data.metadata,callback:function(t){e.$set(e.form.data,"metadata",t)},expression:"form.data.metadata"}})],1)],2),s("div",{staticClass:"has-text-right"},[e.assetToEdit&&e.assetToEdit.id?e._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoadingStay},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmAndStayClicked}},[e._v(" "+e._s(e.$t("main.confirmation_and_stay"))+" ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.close"))+" ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("assets.edit_fail"))+" ")]):e._e(),e.isSuccess?s("p",{staticClass:"success has-text-right info-message"},[e._v(" "+e._s(e.assetSuccessText)+" ")]):e._e()])])])])},n=[],a=s("5530"),o=(s("d81d"),s("b0c0"),s("a4d3"),s("e01a"),s("2f62")),r=s("d065"),c=s("bd69"),l=s("bcb2"),d=s.n(l),u=s("7bf8"),p=s("1149"),m=s("992f"),h={name:"edit-asset-modal",mixins:[c["a"],r["a"]],components:{VJsoneditor:d.a,TextField:u["a"],TextareaField:p["a"],Combobox:m["a"]},props:{active:{type:Boolean,default:!1},text:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLoadingStay:{type:Boolean,default:!1},isSuccess:{type:Boolean,default:!1},assetToEdit:{type:Object,default:function(){}},errorText:{type:String,default:""}},data:function(){return{form:{name:"",description:"",source_id:null,data:{}},assetSuccessText:""}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["assets","assetCreated","assetMetadataDescriptors","assetTypes","currentProduction","currentEpisode","episodes","productionAssetTypes","productionAssetTypeOptions","isTVShow","openProductions"])),{},{episodeOptions:function(){var e=this.episodes.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:this.$t("main.main_pack"),value:"null"}),e}}),mounted:function(){this.resetForm(),this.assetSuccessText=""},methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{runConfirmation:function(){this.form.name.length>0&&(this.isEditing()?this.confirmClicked():this.confirmAndStayClicked())},focusName:function(){this.$refs.nameField.focus()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.assetToEdit&&this.assetToEdit.id},resetForm:function(){this.isEditing()?this.form={entity_type_id:this.assetToEdit.asset_type_id,project_id:this.assetToEdit.project_id,name:this.assetToEdit.name,description:this.assetToEdit.description,source_id:this.assetToEdit.source_id||this.assetToEdit.episode_id,data:Object(a["a"])({},this.assetToEdit.data)||{}}:(!this.form.entity_type_id&&this.productionAssetTypes.length>0&&(this.form.entity_type_id=this.productionAssetTypes[0].id),this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.form.name="",this.form.description="",this.form.source_id=this.currentEpisode?this.currentEpisode.id:null,this.form.data={})}}),watch:{assetToEdit:function(){this.resetForm()},assetCreated:function(){this.isEditing()?this.assetSuccessText=this.$t("assets.edit_success",{name:this.assetCreated}):this.assetSuccessText=this.$t("assets.new_success",{name:this.assetCreated})},active:function(){var e=this;this.assetSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)}}},f=h,_=(s("bc25"),s("c6eb"),s("2877")),v=Object(_["a"])(f,i,n,!1,null,"dd7cc69e",null);t["a"]=v.exports},"82ea":function(e,t,s){},8395:function(e,t,s){},"84bf":function(e,t,s){},8511:function(e,t,s){"use strict";s("d7bc")},8707:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"playlist-annotation",staticClass:"annotation-bar"},e._l(e.annotations,(function(t,i){return s("span",{key:"annotation-"+i,staticClass:"annotation-mark",style:{left:e.getAnnotationPosition(t)+"px"},on:{click:function(s){return e.$emit("select-annotation",t)}}})})),0)},n=[],a=(s("a9e3"),{name:"annotation-bar",props:{annotations:{default:function(){return[]},type:Array},maxDurationRaw:{default:0,type:Number},width:{default:0,type:Number}},methods:{getAnnotationPosition:function(e){var t=e.time/this.maxDurationRaw,s=this.width,i=this.$parent.progress;if(0===s&&i){var n=i.getBoundingClientRect();s=n.width}var a=s*t-3;return a>=s&&(a-=this.isFullScreen()?9:6),a},isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}}}),o=a,r=(s("3722"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"0696ae30",null);t["a"]=c.exports},8751:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h2",{staticClass:"subtitle"},[e._v(e._s(e.text))])},n=[],a={name:"page-subtitle",props:{text:{default:"",type:String}}},o=a,r=(s("fb36"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"67ee08da",null);t["a"]=c.exports},"8ab4":function(e,t,s){"use strict";s("1dc9")},"8aba":function(e,t,s){},"8bc7":function(e,t,s){"use strict";s("b4e3")},"8bd9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isEmpty?i("div",{staticClass:"empty-comment"},[i("div",{staticClass:"flexrow content-wrapper"},[i("validation-tag",{staticClass:"flexrow-item",attrs:{task:{task_status_id:e.comment.task_status.id},"is-static":!0,thin:!e.isChange}}),i("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.comment.person,size:25,"font-size":12}}),i("people-name",{staticClass:"flexrow-item",attrs:{person:e.comment.person}}),i("span",{staticClass:"filler"}),i("span",{staticClass:"flexrow-item date",attrs:{title:e.fullDate}},[e._v(" "+e._s(e.shortDate)+" ")]),i("div",{staticClass:"flexrow-item menu-wrapper"},[i("chevron-down-icon",{staticClass:"menu-icon",on:{click:e.toggleCommentMenu}}),i("comment-menu",{ref:"menu",attrs:{"is-editable":e.editable,"is-empty":!0},on:{"pin-clicked":function(t){return e.$emit("pin-comment",e.comment)},"edit-clicked":function(t){e.$emit("edit-comment",e.comment),e.toggleCommentMenu()},"delete-clicked":function(t){e.$emit("delete-comment",e.comment),e.toggleCommentMenu()}}})],1)],1)]):i("article",{class:{comment:!0,pinned:e.comment.pinned,highlighted:e.highlighted},style:{"box-shadow":e.boxShadowStyle}},[i("div",{staticClass:"content-wrapper full"},[i("div",{staticClass:"flexrow"},[i("validation-tag",{staticClass:"flexrow-item",attrs:{task:{task_status_id:e.comment.task_status.id},"is-static":!0,thin:!e.isChange}}),i("people-avatar",{staticClass:"flexrow-item",attrs:{size:25,"font-size":12,person:e.comment.person}}),i("strong",{staticClass:"flexrow-item"},[i("people-name",{attrs:{person:e.comment.person}})],1),i("div",{staticClass:"filler"}),i("span",{staticClass:"flexrow-item date",attrs:{title:e.fullDate}},[e._v(" "+e._s(e.shortDate)+" ")]),i("div",{staticClass:"flexrow-item menu-wrapper"},[i("chevron-down-icon",{staticClass:"menu-icon",on:{click:e.toggleCommentMenu}}),i("comment-menu",{ref:"menu",attrs:{"is-pinned":e.comment.pinned,"is-editable":e.editable},on:{"pin-clicked":function(t){return e.$emit("pin-comment",e.comment)},"edit-clicked":function(t){e.$emit("edit-comment",e.comment),e.toggleCommentMenu()},"delete-clicked":function(t){e.$emit("delete-comment",e.comment),e.toggleCommentMenu()}}})],1)],1),i("div",{staticClass:"flexrow-item comment-content"},[i("div",{staticClass:"content"},["client"===e.personMap[e.comment.person_id].role?i("p",{staticClass:"client-comment"},[i("span",[e._v(" "+e._s(e.$t("comments.comment_from_client"))+" "),i("copy-icon",{staticClass:"copy-icon",attrs:{size:"1.1x"},on:{click:function(t){return e.$emit("duplicate-comment",e.comment)}}})],1)]):e._e(),e.comment.text?i("p",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(e.comment.text,e.comment.mentions,e.personMap))}}):e._e(),e.checklist.length>0?i("checklist",{staticClass:"checklist",attrs:{checklist:e.checklist,disabled:!0},on:{"remove-task":e.removeTask,"emit-change":e.emitChangeEvent},nativeOn:{keyup:function(t){return e.emitChangeEvent(t)}}}):e._e(),e.taskStatus.is_done&&e.isLast?i("p",[i("img",{attrs:{src:s("ce80")}})]):e._e(),e.comment.attachment_files.length>0?i("p",[e._l(e.pictureAttachments,(function(t){return i("a",{key:t.id,attrs:{href:e.getAttachmentPath(t),title:t.name,target:"_blank"}},[i("img",{staticClass:"attachment",attrs:{src:e.getAttachmentPath(t)}})])})),e._l(e.fileAttachments,(function(t){return i("a",{key:t.id,staticClass:"flexrow",attrs:{href:e.getAttachmentPath(t),title:t.name,target:"_blank"}},[i("paperclip-icon",{staticClass:"flexrow-item attachment-icon",attrs:{size:"1x"}}),i("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.name)+" ")])],1)}))],2):e._e(),e.comment.text.length>0?i("div",{staticClass:"comment-like",attrs:{title:e.isLikedBy},on:{click:function(t){return e.acknowledgeComment(e.comment)}}},[i("button",{class:{"like-button":!0,"like-button--empty":void 0===e.comment.like},attrs:{type:"button",disabled:"comment.person_id !== user.id"}},[i("thumbs-up-icon",{attrs:{size:"1x"}}),i("span",[e._v(e._s(e.comment.acknowledgements.length))])],1)]):e._e(),e.comment.pinned?i("p",{staticClass:"pinned-text"},[e._v(" "+e._s(e.$t("comments.pinned"))+" ")]):e._e()],1)])]),e.comment.previews.length>0?i("div",{staticClass:"flexrow content-wrapper preview-info"},[i("router-link",{staticClass:"flexrow-item round-name revision",attrs:{to:e.previewRoute}},[e._v(" Revision "+e._s(e.comment.previews[0].revision)+" ")])],1):e._e(),e.isAddChecklistAllowed?i("div",{staticClass:"has-text-centered add-checklist",on:{click:function(t){return e.addChecklistEntry()}}},[e._v(" "+e._s(e.$t("comments.add_checklist"))+" ")]):e._e()])])},n=[],a=s("5530"),o=s("2909"),r=(s("b0c0"),s("d81d"),s("a15b"),s("4de4"),s("caad"),s("2532"),s("c1df")),c=s.n(r),l=s("2f62"),d=s("66e7"),u=s("66be"),p=s("2229"),m=s("3657"),h=s("7930"),f=s("8dee"),_=s("0a35"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"main",staticClass:"comment-menu hidden"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],on:{click:e.onPinClicked}},[e.isPinned?s("span",[e._v(" "+e._s(e.$t("comments.unpin"))+" ")]):s("span",[e._v(e._s(e.$t("comments.pin")))])]),e.isEditable?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v(" "+e._s(e.$t("main.edit"))+" ")]):e._e(),e.isEditable?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v(" "+e._s(e.$t("main.delete"))+" ")]):e._e()])},g=[],y={name:"comment-menu",props:{isPinned:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1},isEditable:{type:Boolean,default:!0},isEmpty:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(a["a"])({},Object(l["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])([])),{},{toggle:function(){var e=this.$refs.main;"comment-menu"===e.className?e.className="comment-menu hidden":e.className="comment-menu"},onPinClicked:function(){this.$emit("pin-clicked"),this.toggle()}})},b=y,k=(s("2b21"),s("2877")),w=Object(k["a"])(b,v,g,!1,null,"3ad24a12",null),C=w.exports,S=s("eb8c"),T=s("0073"),x=s("4ce0"),E=s("fe13"),P={name:"comment",components:{Checklist:x["a"],ChevronDownIcon:_["i"],CopyIcon:_["m"],CommentMenu:C,PaperclipIcon:_["H"],PeopleAvatar:S["a"],PeopleName:T["a"],ThumbsUpIcon:_["U"],ValidationTag:E["a"]},data:function(){return{checklist:[]}},props:{comment:{type:Object,default:function(){}},task:{type:Object,default:null},highlighted:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},light:{type:Boolean,default:!1},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1},isChange:{type:Boolean,default:!1}},mounted:function(){var e=this;this.comment.checklist&&(this.$options.silent=!0,this.checklist=Object(o["a"])(this.comment.checklist),this.$nextTick().then((function(){e.$options.silent=!1})))},computed:Object(a["a"])(Object(a["a"])({},Object(l["c"])(["currentProduction","isDarkTheme","user","personMap","taskMap","taskTypeMap","taskStatusMap"])),{},{isEmpty:function(){return 0===this.comment.text.length&&(!this.comment.checklist||0===this.comment.checklist.length)&&0===this.comment.attachment_files.length&&0===this.comment.previews.length&&!(this.isFirst&&this.taskStatus.is_done)},previewRoute:function(){var e={name:"task",params:{task_id:this.comment.object_id,production_id:this.currentProduction.id}};this.comment.previews.length>0&&(e={name:"task-preview",params:{task_id:this.comment.object_id,preview_id:this.comment.previews[0].id,production_id:this.currentProduction.id}}),this.task.episode_id?(e.name="episode-".concat(e.name),e.params.episode_id=this.task.episode_id):this.task.entity&&this.task.entity.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=this.task.entity.episode_id);var t=this.taskTypeMap[this.task.task_type_id];return e.params.type=t.for_shots?"shots":"assets",e},deleteCommentPath:function(){return this.getPath("task-delete-comment")},editCommentPath:function(){return this.getPath("task-edit-comment")},addPreviewPath:function(){return this.getPath("task-add-preview")},taskStatus:function(){var e=this.taskStatusMap[this.comment.task_status.id];return e||this.comment.task_status},isAddChecklistAllowed:function(){return this.taskStatus.is_retake&&0===this.checklist.length&&this.user.id===this.comment.person_id},isChangeChecklistAllowed:function(){return this.taskStatus.is_retake&&this.user.id===this.comment.person_id},isLikedBy:function(){var e=this,t=this.comment.acknowledgements.map((function(t){return e.personMap[t]}));return Object(p["d"])(t).map((function(e){return e.name})).join(", ")},pictureAttachments:function(){return this.comment.attachment_files.filter((function(e){return f["a"].IMG_EXTENSIONS.includes(e.extension)}))},fileAttachments:function(){return this.comment.attachment_files.filter((function(e){return!f["a"].IMG_EXTENSIONS.includes(e.extension)}))},commentDate:function(){return Object(m["q"])(this.comment.created_at)},fullDate:function(){return this.commentDate.tz(this.user.timezone).format("YYYY-MM-DD HH:mm:ss")},shortDate:function(){return c()().diff(this.commentDate,"days")>1?this.commentDate.tz(this.user.timezone).format("MM/DD"):this.commentDate.tz(this.user.timezone).format("HH:mm")},boxShadowStyle:function(){return"0 0 3px 2px ".concat(this.comment.task_status.color,"1F")},statusColor:function(){var e=this.comment.task_status.color;return this.isDarkTheme&&!this.isEmpty?h["a"].darkenColor(e):e}}),methods:{formatDate:function(e){return Object(m["c"])(e)},getPath:function(e){var t={name:e,params:{task_id:this.comment.object_id,comment_id:this.comment.id}};return this.$route.params.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=this.$route.params.episode_id),t},getAttachmentPath:function(e){return"/api/data/attachment-files/".concat(e.id,"/")+"file/".concat(e.name)},toggleCommentMenu:function(){this.$refs.menu.toggle()},addChecklistEntry:function(){this.checklist.push({text:"",checked:!1})},removeTask:function(e){this.checklist=Object(d["f"])(this.checklist,e)},emitChangeEvent:function(e){var t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>1e3&&(this.lastCall=t,this.$emit("checklist-updated",this.comment,this.checklist.filter((function(e){return e.text&&e.text.length>0}))))},acknowledgeComment:function(e){this.$emit("ack-comment",e)},renderComment:u["b"]},watch:{"comment.checklist":function(){this.checklist=Object(o["a"])(this.comment.checklist)},checklist:function(){this.$options.silent||this.emitChangeEvent()}}},O=P,A=(s("2b11"),Object(k["a"])(O,i,n,!1,null,"32c046a7",null));t["a"]=A.exports},"8c97":function(e,t,s){"use strict";s("466d"),s("ac1f"),s("4d90"),s("fb6a"),s("5319"),s("4d63"),s("25f0");t["a"]={generateNextName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=e.match(/\d+$/);if(s){var i=s[0],n=e.substring(0,e.length-i.length),a=parseInt(i);return 1===a&&10===t?a=10:a+=t,n+String(a).padStart(i.length,"0")}return""},shortenText:function(e,t){var s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"...",s=s.replace(/\n/g," ")),s},slugify:function(e){e=e.replace(/^\s+|\s+$/g,"").toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:",s="aaaaeeeeiiiioooouuuunc------",i=0,n=t.length;i<n;i++)e=e.replace(new RegExp(t.charAt(i),"g"),s.charAt(i));return e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_")}}},"8d07":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"title hide-small-screen"},[e._v(e._s(e.text))])},n=[],a={name:"page-title",props:{text:{default:"",type:String}}},o=a,r=s("2877"),c=Object(r["a"])(o,i,n,!1,null,"ead134bc",null);t["a"]=c.exports},"8dee":function(e,t,s){"use strict";t["a"]={IMG_EXTENSIONS:["png","jpg","jpeg","gif","svg"],ALL_EXTENSIONS_STRING:".png,.jpg,.mp4,.mov,.obj,.pdf,.ma,.mb,.zip,.rar,.jpeg,.svg,.blend,.wmv,.m4v,.ai,.comp,.exr,.psd,.hip,.gif,.ae,.fla,.flv,.swf",ALL_EXTENSIONS:["png","jpg","mp4","mov","obj","pdf","ma","mb","zip","rar","jpeg","svg","blend","wmv","m4v","ai","comp","exr","psd","hip","gif","ae","fla","flv","swf"]}},"8e46":function(e,t,s){"use strict";s("acc7")},"8f4d":function(e,t,s){"use strict";s("cdae")},9123:function(e,t,s){"use strict";s("a504")},"91a5":function(e,t,s){"use strict";s("608d")},9216:function(e,t,s){"use strict";s("f649")},9224:function(e){e.exports=JSON.parse('{"a":"0.12.52"}')},9374:function(e,t,s){},"952a":function(e,t,s){},"95cb":function(e,t,s){},"95d5":function(e,t,s){"use strict";s("430a")},9616:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-autocomplete",{ref:"autocomplete",attrs:{items:e.items,"get-label":e.getAssignationLabel,"component-item":e.assignationItem,"min-len":1,"auto-select-one-item":!1,"input-attrs":{placeholder:this.$t("people.select_person"),class:e.big?"big v-autocomplete-input":"v-autocomplete-input"}},on:{"update-items":e.update,input:e.onChange},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}})},n=[],a=s("5530"),o=(s("b0c0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{"is-link":!1,"no-cache":!0,person:e.item,size:30}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.item.name)+" ")])],1)}),r=[],c=s("eb8c"),l={name:"assignation-item",components:{PeopleAvatar:c["a"]},props:{item:{required:!0},searchText:{required:!0}},computed:{nonHighilightedText:function(){return this.searchText===this.item.first_name?"&nbsp;"+this.item.name.substring(this.searchText.length):this.item.name.substring(this.searchText.length)}}},d=l,u=(s("556f"),s("2877")),p=Object(u["a"])(d,o,r,!1,null,"5585c3e8",null),m=p.exports,h=s("2f62"),f=s("2017"),_={name:"people-field",data:function(){return{assignationItem:m,items:[],item:{},searchText:""}},created:function(){this.items=this.people,this.item=this.value,this.index=Object(f["c"])(this.people)},mounted:function(){var e=this;this.items=this.people,this.$refs.autocomplete.$el.children[0].children[0].addEventListener("keyup",(function(t){13===t.keyCode&&e.item&&e.$emit("enter"),e.searchText=e.$refs.autocomplete.$el.children[0].children[0].value,e.item||0!==e.searchText.length||(e.items=[])}))},props:{value:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}},big:{type:Boolean,default:!1}},computed:Object(a["a"])({},Object(h["c"])(["peopleIndex"])),methods:{getAssignationLabel:function(e){return e?e.name:""},update:function(e){if(e&&e.length>0){var t=Object(f["j"])(this.index,[e]);this.items=t}else this.items=this.people},onChange:function(){this.$emit("input",this.item)},clear:function(){this.item=null},focus:function(){var e=this.$el.querySelector(".v-autocomplete-input");e&&e.focus()}},watch:{item:function(){this.item||(this.items=this.people)},people:function(){this.items=null,this.items=this.people,this.index=Object(f["c"])(this.people)}}},v=_,g=(s("f883"),Object(u["a"])(v,i,n,!1,null,null,null));t["a"]=g.exports},9856:function(e,t,s){"use strict";s("3dcc")},9859:function(e,t,s){},"989e":function(e,t,s){"use strict";s("9859")},"992f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{field:e.withMargin}},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0,"is-top":this.isTop}},[s("select",{ref:"select",class:{thin:e.thin,"select-input":!0,error:this.error},style:{width:e.width?e.width+"px":void 0},attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,i){return s("option",{key:i+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)])])])},n=[],a=(s("a9e3"),{name:"combobox",props:{label:{default:"",type:String},value:{default:"",type:[Object,String]},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isTop:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},error:{default:!1,type:Boolean},thin:{default:!1,type:Boolean},width:{type:Number},withMargin:{default:!0,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",this.$refs.select.value)},emitEnter:function(){this.$emit("enter",this.$refs.select.value)},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}}),o=a,r=(s("997e"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"2144b8c0",null);t["a"]=c.exports},"997e":function(e,t,s){"use strict";s("4bd6")},"9bb3":function(e,t,s){"use strict";s("3fac")},"9c0c":function(e,t,s){},"9d3b":function(e,t,s){"use strict";s("1b4a")},"9d8b":function(e,t,s){"use strict";s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return n})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return r})),s.d(t,"f",(function(){return l})),s.d(t,"c",(function(){return d}));s("b0c0");var i=function(e,t,s,i,n){var a=e.project_id?e.project_id:t.id,o={name:"task",params:{production_id:a,task_id:e.id}};s&&i&&(o.name="episode-task",o.params.episode_id=e.episode_id||i.id);var r=n[e.task_type_id];return o.params.type=r.for_shots?"shots":"assets",o},n=function(e,t){if(e){var s=e.entity_type_name,i=e.entity?e.entity.id:e.entity_id,n={name:"Shot"===s?"shot":"asset",params:{production_id:e.project_id}};return"Shot"===s?n.params.shot_id=i:n.params.asset_id=i,t&&(n.name="episode-".concat(n.name),n.params.episode_id=t),n}return{name:"open-productions"}},a=function(e,t){return{name:e,params:{production_id:t}}},o=function(e,t){return t&&(e.name="episode-".concat(e.name),e.params.episode_id=t),e},r=function(e,t,s,i){var n={name:i?"".concat(i,"-playlist"):"playlist",params:{production_id:e,playlist_id:s}};return o(n,t)},c=function(e,t,s){return o(a(e,t),s)},l=function(e,t,s,i){var n=c("task-type-schedule",t,s);return n.params.task_type_id=e,n.params.type=i,n},d=function(e){return a("schedule",e)}},"9d94":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.task?s("div",{ref:"side-panel",staticClass:"side task-info",style:e.panelStyle},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow header-title"},[s("div",{staticClass:"title flexrow-item"},[s("router-link",{attrs:{to:e.taskEntityPath}},[e._v(" "+e._s(e.task?e.title:"Loading...")+" ")])],1),e.currentTaskType?s("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":e.currentTaskType,"production-id":e.currentProduction.id}}):e._e()],1),s("div",{staticClass:"flexrow task-information"},[e.isWide&&e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"right",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"left",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e._e(),e.isCurrentUserManager&&e.isPreview&&"gif"!==e.extension?s("button-simple",{staticClass:"flexrow-item set-thumbnail-button",attrs:{icon:"image",title:e.$t("tasks.set_preview")},on:{click:e.setCurrentPreviewAsEntityThumbnail}}):e._e(),e.isAssigned?e._e():s("subscribe-button",{staticClass:"flexrow-item",attrs:{subscribed:e.isAssigned||e.isSubscribed},on:{click:e.toggleSubscribe}}),s("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:e.task,"is-static":!0}}),s("div",{staticClass:"filler"}),e.isPreview?s("div",{staticClass:"preview-list flexrow"},[e._l(e.lastFivePreviews,(function(t,i){return s("span",{key:"preview-"+t.id,class:{"flexrow-item":!0,selected:e.currentPreviewIndex===i},on:{click:function(t){return e.onPreviewChanged(i)}}},[e._v(" "+e._s(t.revision)+" ")])})),s("router-link",{staticClass:"history-button flexrow-item",attrs:{to:e.taskPath}},[e._v(" ... ")])],2):e._e()],1)]),s("div",{ref:"task-columns",staticClass:"task-columns"},[e.isPreview?s("div",{staticClass:"task-column preview-column"},[s("div",{staticClass:"preview-column-content"},[s("div",{staticClass:"preview"},[e.taskPreviews&&e.taskPreviews.length>0?s("div",[s("preview-player",{ref:"preview-player",attrs:{"entity-preview-files":e.taskEntityPreviews,"last-preview-files":e.lastFivePreviews,previews:e.currentPreview.previews,"task-type-map":e.taskTypeMap,light:!e.isWide,"read-only":!e.isCurrentUserManager,"is-assigned":e.isAssigned},on:{"annotation-changed":e.onAnnotationChanged,"change-current-preview":e.changeCurrentPreview,"add-extra-preview":e.onAddExtraPreview,"remove-extra-preview":e.onRemoveExtraPreview}})],1):e._e(),e.taskPreviews&&0!==e.taskPreviews.length?e._e():s("div",{staticClass:"no-preview"},[s("em",[e._v(e._s(e.$t("tasks.no_preview")))])])])])]):e._e(),s("div",{staticClass:"task-column comments-column"},[s("div",[s("div",[e.isCommentingAllowed?s("add-comment",{ref:"add-comment",attrs:{user:e.user,team:e.currentTeam,task:e.task,"task-status":e.getTaskStatusForCurrentUser(e.task.project_id),light:!0,"is-loading":e.loading.addComment,"attached-file-name":e.attachedFileName,"is-error":e.errors.addComment},on:{"add-comment":e.addComment,"add-preview":e.onAddPreviewClicked,"file-drop":e.selectFile}}):e._e(),e.taskComments&&e.taskComments.length>0&&!e.loading.task?s("div",{staticClass:"comments"},e._l(e.taskComments,(function(t,i){return s("comment",{key:"comment"+t.id,attrs:{comment:t,task:e.task,light:!0,"add-preview":e.onAddPreviewClicked,"is-first":0===i,"is-last":i===e.pinnedCount,"is-change":e.isStatusChange(i),editable:t.person&&e.user.id===t.person.id||e.isCurrentUserAdmin},on:{"duplicate-comment":e.onDuplicateComment,"pin-comment":e.onPinComment,"edit-comment":e.onEditComment,"delete-comment":e.onDeleteComment,"checklist-updated":e.saveComment,"ack-comment":e.onAckComment}})})),1):e.loading.task?e._e():s("div",{staticClass:"no-comment"},[s("em",[e._v(" "+e._s(e.$t("tasks.no_comment"))+" ")])])],1)]),e.loading.task?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e()])]),s("add-preview-modal",{ref:"add-preview-modal",attrs:{active:e.modals.addPreview,"is-loading":e.loading.addPreview,"is-error":e.errors.addPreview},on:{cancel:e.onClosePreview,fileselected:e.selectFile,confirm:e.onClosePreview}}),s("add-preview-modal",{ref:"add-extra-preview-modal",attrs:{active:e.modals.addExtraPreview,"is-loading":e.loading.addExtraPreview,"is-error":e.errors.addExtraPreview,"form-data":e.addExtraPreviewFormData,extensions:".png,.jpg,.jpeg"},on:{cancel:e.onCloseExtraPreview,fileselected:e.selectFile,confirm:e.createExtraPreview}}),s("edit-comment-modal",{attrs:{active:e.modals.editComment,"is-loading":e.loading.editComment,"is-error":e.errors.editComment,"comment-to-edit":e.commentToEdit,team:e.currentTeam},on:{confirm:e.confirmEditTaskComment,cancel:e.onCancelEditComment}}),s("delete-modal",{attrs:{active:e.modals.deleteComment,"is-loading":e.loading.deleteComment,"is-error":e.errors.deleteComment,text:e.$t("tasks.delete_comment"),"error-text":e.$t("tasks.delete_comment_error")},on:{confirm:e.confirmDeleteTaskComment,cancel:e.onCancelDeleteComment}}),s("delete-modal",{attrs:{active:e.modals.deleteExtraPreview,"is-loading":e.loading.deleteExtraPreview,"is-error":e.errors.deleteExtraPreview,text:e.$t("tasks.delete_preview"),"error-text":e.$t("tasks.delete_preview_error")},on:{cancel:e.onCancelRemoveExtraPreview,confirm:e.confirmDeleteTaskPreview}})],1):s("div",{staticClass:"side task-info has-text-centered"},[e._v(" "+e._s(e.$t("tasks.no_task_selected"))+" ")])},n=[],a=s("5530"),o=(s("d81d"),s("7db0"),s("caad"),s("fb6a"),s("4de4"),s("99af"),s("a15b"),s("b0c0"),s("c740"),s("2532"),s("2f62")),r=s("9d8b"),c=s("66be"),l=s("6be5"),d=s("ee35"),u=s("de40"),p=s("8bd9"),m=s("5f48"),h=s("5b23"),f=s("be83"),_=s("d228"),v=s("274f"),g=s("fe13"),y=s("6aac"),b={name:"task-info",components:{AddComment:l["a"],AddPreviewModal:d["a"],ButtonSimple:u["a"],Comment:p["a"],DeleteModal:m["a"],EditCommentModal:h["a"],PreviewPlayer:y["a"],Spinner:f["a"],SubscribeButton:_["a"],TaskTypeName:v["a"],ValidationTag:g["a"]},props:{task:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!0},isPreview:{type:Boolean,default:!0}},data:function(){return{addExtraPreviewFormData:null,attachedFileName:"",attachedImage:"",currentPreviewIndex:0,currentPreviewPath:"",currentPreviewDlPath:"",commentToEdit:null,isSubscribed:!1,isWide:!1,otherPreviews:[],taskComments:[],taskPreviews:[],errors:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,confirmDeleteTaskPreview:!1,task:!1},loading:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,confirmDeleteTaskPreview:!1,task:!1},modals:{addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,deleteExtraPreview:!1}}},mounted:function(){this.loadTaskData(),this.$refs["add-comment"]&&(this.$refs["add-comment"].text=this.lastCommentDraft)},beforeDestroy:function(){if(this.$refs["add-comment"]){var e="".concat(this.$refs["add-comment"].text);this.$store.commit("SET_LAST_COMMENT_DRAFT",e)}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["currentEpisode","currentProduction","getTaskComment","getTaskComments","getTaskPreviews","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isSingleEpisode","isTVShow","lastCommentDraft","personMap","previewFormData","productionMap","taskEntityPreviews","getTaskStatusForCurrentUser","taskTypeMap","user"])),{},{currentTeam:function(){var e=this,t=this.productionMap[this.task.project_id];return t.team.map((function(t){return e.personMap[t]}))},title:function(){if(this.task){var e=this.task.full_entity_name||this.task.entity_name;return"".concat(e)}return"Loading..."},isAssigned:function(){var e=this;return!!this.task&&this.task.assignees.some((function(t){return t===e.user.id}))},isCommentingAllowed:function(){var e=this,t=this.isCurrentUserManager,s=this.task.assignees.find((function(t){return t===e.user.id})),i=this.$route.path.indexOf("playlist")>0&&this.isCurrentUserClient;return t||s||i},isSetThumbnailAllowed:function(){return this.currentPreviewId&&this.task&&this.task.entity&&this.currentPreviewId!==this.task.entity.preview_file_id&&"gif"!==this.extension},currentTaskType:function(){return this.task?this.taskTypeMap[this.task.task_type_id]:null},currentPreview:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e]:null},currentPreviewId:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0&&this.taskPreviews[e]?this.taskPreviews[e].id:null},extension:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e].extension:""},isStandardPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["ai","blend","ma","mb","pdf","psd","rar","ae","fla","flv","swf","zip"].includes(this.extension)},isMoviePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"mp4"===this.extension},isPicturePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["png","gif"].includes(this.extension)},is3DModelPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"obj"===this.extension},moviePath:function(){var e=null;return e=this.currentPreview.id,"/api/movies/originals/preview-files/".concat(e,".mp4")},tasktypeStyle:function(){return Object(c["a"])(this.task)},taskPath:function(){return Object(r["e"])(this.task,this.currentProduction,this.isTVShow,this.currentEpisode,this.taskTypeMap)},taskEntityPath:function(){var e=this.$route.params.episode_id;return Object(r["d"])(this.task,e)},lastFivePreviews:function(){return this.taskPreviews?this.taskPreviews.slice(0,5):[]},panelStyle:function(){return{width:this.isWide?700:350}},pinnedCount:function(){return this.taskComments?this.taskComments.filter((function(e){return e.pinned})).length:0},previewPlayer:function(){return this.$refs["preview-player"]}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["ackComment","addCommentExtraPreview","commentTask","commentTaskWithPreview","deleteTaskComment","deleteTaskPreview","editTaskComment","loadPreviewFileFormData","loadTask","loadTaskComments","loadTaskSubscribed","refreshPreview","pinComment","setPreview","subscribeToTask","unsubscribeFromTask","updatePreviewAnnotation"])),{},{loadTaskData:function(){var e=this;this.task&&(this.loading.task=!0,this.errors.task=!1,this.loadTaskComments({taskId:this.task.id,entityId:this.task.entity_id}).then((function(){return e.loadTaskSubscribed({taskId:e.task.id})})).then((function(t){e.loading.task=!1,e.reset(),e.isSubscribed=t})).catch((function(t){console.error(t),e.errors.task=!0})))},addComment:function(e,t,s,i){var n=this,a={taskId:this.task.id,taskStatusId:i,attachment:t,checklist:s,comment:e},o="commentTask";this.attachedFileName&&(o="commentTaskWithPreview"),this.loading.addComment=!0,this.errors.addComment=!1,this.$store.dispatch(o,a).then((function(){n.$refs["add-preview-modal"].reset(),n.$refs["add-comment-image-modal"]&&n.$refs["add-comment-image-modal"].reset(),n.reset(),n.attachedFileName="",n.loading.addComment=!1})).catch((function(e){console.error(e),n.errors.addComment=!0,n.loading.addComment=!1}))},reset:function(){var e=this;this.task&&(this.taskComments=this.getTaskComments(this.task.id),this.taskPreviews=this.getTaskPreviews(this.task.id),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),this.$nextTick((function(){e.$refs["add-comment"]&&e.$refs["add-comment"].focus()})))},focusCommentTextarea:function(){this.$refs["add-comment"]&&this.$refs["add-comment"].focus()},getOriginalPath:function(){var e=this.currentPreviewId,t=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)},getOriginalDlPath:function(){var e=this.currentPreviewId;return"/api/pictures/originals/preview-files/".concat(e,"/download")},setOtherPreviews:function(){var e=this;return this.taskPreviews&&(this.otherPreviews=this.taskPreviews.filter((function(t){return t.id!==e.currentPreviewId&&"mp4"===t.extension}))),this.otherPreviews},selectFile:function(e){this.loadPreviewFileFormData(e),this.attachedFileName=e.map((function(e){return e.get("file").name})).join(", ")},createExtraPreview:function(){var e=this,t=this.currentPreviewIndex;this.errors.addExtraPreview=!1,this.loading.addExtraPreview=!0,this.addCommentExtraPreview({taskId:this.task.id,commentId:this.taskComments[0].id,previewId:this.taskPreviews[t].id}).then((function(){e.loading.addExtraPreview=!1,e.$refs["add-extra-preview-modal"].reset(),e.reset(),setTimeout((function(){e.$refs["preview-player"].displayLast()}),0),e.modals.addExtraPreview=!1})).catch((function(t){console.error(t),e.loading.addExtraPreview=!1,e.errors.addExtraPreview=!0}))},onPreviewAdded:function(e){var t=e.task_id,s=e.comment_id,i=e.preview_file_id,n=e.revision,a=e.extension,o=this.getTaskComment(t,s);this.task&&(t!==this.task.id||!o||0!==o.previews.length&&o.previews[0].id===i||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:i,revision:n,extension:a},taskId:t,commentId:s,comment:o}),this.reset()))},onAnnotationChanged:function(e){var t=e.preview,s=e.annotations,i=this.task.id;this.updatePreviewAnnotation({taskId:i,preview:t,annotations:s})},onAddPreviewClicked:function(e){this.modals.addPreview=!0},onAddExtraPreview:function(){this.modals.addExtraPreview=!0},onRemoveExtraPreview:function(e){this.currentExtraPreviewId=e.id,this.modals.deleteExtraPreview=!0},onCancelRemoveExtraPreview:function(){this.modals.deleteExtraPreview=!1},onClosePreview:function(){this.modals.addPreview=!1},onCloseExtraPreview:function(){this.modals.addExtraPreview=!1},onPreviewChanged:function(e){this.currentPreviewIndex=e,this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath()},changeCurrentPreview:function(e){var t=this.taskPreviews.findIndex((function(t){return t.id===e.id}));(t||0===t)&&(this.currentPreviewIndex=t,this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath())},setCurrentPreviewAsEntityThumbnail:function(){this.setPreview({taskId:this.task.id,entityId:this.task.entity.id,previewId:this.currentPreview.previews[0].id})},toggleSubscribe:function(){this.task&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.task.id),this.isSubscribed=!1):(this.subscribeToTask(this.task.id),this.isSubscribed=!0))},toggleWidth:function(){this.isWide=!this.isWide;var e=this.$refs["side-panel"];this.isWide?e.parentElement.style["min-width"]="700px":e.parentElement.style["min-width"]="350px"},onAckComment:function(e){this.ackComment(e)},onDuplicateComment:function(e){this.$refs["add-comment"].setValue(e)},onPinComment:function(e){this.pinComment(e)},onEditComment:function(e){this.commentToEdit=e,this.modals.editComment=!0},onDeleteComment:function(e){this.commentToEdit=e,this.modals.deleteComment=!0},onCancelEditComment:function(e){this.modals.editComment=!1},onCancelDeleteComment:function(e){this.modals.deleteComment=!1},saveComment:function(e,t){this.editTaskComment({taskId:this.task.id,comment:e,checklist:t})},confirmDeleteTaskComment:function(){var e=this;this.loading.deleteComment=!0,this.errors.deleteComment=!1;var t=this.commentToEdit.id;this.deleteTaskComment({taskId:this.task.id,commentId:t}).then((function(){e.reset(),e.loading.deleteComment=!1,e.modals.deleteComment=!1})).catch((function(t){console.error(t),e.loading.deleteComment=!1,e.errors.deleteComment=!0}))},confirmEditTaskComment:function(e){var t=this;this.loading.editComment=!0,this.errors.editComment=!1,this.editTaskComment({taskId:this.task.id,comment:e}).then((function(){t.loading.editComment=!1,t.modals.editComment=!1})).catch((function(e){console.error(e),t.loading.editComment=!1,t.errors.editComment=!0}))},getCurrentTaskComments:function(){return this.getTaskComments(this.task.id)},confirmDeleteTaskPreview:function(){var e=this;this.loading.deleteExtraPreview=!0,this.errors.deleteExtraPreview=!1;var t=this.currentExtraPreviewId,s=this.getCurrentTaskComments().find((function(e){return e.previews.findIndex((function(e){return e.id===t}))>=0}));this.previewPlayer.displayFirst(),this.deleteTaskPreview({taskId:this.task.id,commentId:s.id,previewId:t}).then((function(){e.loading.deleteExtraPreview=!1,e.modals.deleteExtraPreview=!1})).catch((function(t){console.error(t),e.loading.deleteExtraPreview=!1,e.errors.deleteExtraPreview=!0}))},onRemoteAcknowledge:function(e,t){if(this.task){var s=this.getTaskComment(this.task.id,e.comment_id),i=this.personMap[e.person_id];s&&i&&(this.user.id===i.id?("ack"===t&&!s.acknowledgements.includes(i.id)||"unack"===t&&s.acknowledgements.includes(i.id))&&this.$store.commit("ACK_COMMENT",{comment:s,user:i}):this.$store.commit("ACK_COMMENT",{comment:s,user:i}))}},isStatusChange:function(e){var t=this.taskComments[e];return e===this.taskComments.length-1||t.task_status_id!==this.taskComments[e+1].task_status_id}}),watch:{task:function(){this.attachedFileName="",this.currentPreviewIndex=0,this.loadTaskData()}},socket:{events:{"preview-file:add-file":function(e){this.onPreviewAdded(e)},"preview-file:update":function(e){var t=this,s=this.taskPreviews.filter((function(t){return t.id===e.preview_file_id}));s&&this.task&&this.refreshPreview({taskId:this.task.id,previewId:e.preview_file_id}).then((function(){t.taskPreviews=t.getTaskPreviews(t.task.id)}))},"comment:acknowledge":function(e){this.onRemoteAcknowledge(e,"ack")},"comment:unacknowledge":function(e){this.onRemoteAcknowledge(e,"unack")}}}},k=b,w=(s("2a7a"),s("2877")),C=Object(w["a"])(k,i,n,!1,null,"f00e1a92",null);t["a"]=C.exports},"9e75":function(e,t,s){"use strict";s("3a8d")},"9eef":function(e,t,s){"use strict";s("2272")},"9fb0":function(e,t,s){"use strict";s.d(t,"Pe",(function(){return i})),s.d(t,"Qe",(function(){return n})),s.d(t,"Re",(function(){return a})),s.d(t,"xe",(function(){return o})),s.d(t,"tc",(function(){return r})),s.d(t,"rc",(function(){return c})),s.d(t,"sc",(function(){return l})),s.d(t,"Me",(function(){return d})),s.d(t,"Qb",(function(){return u})),s.d(t,"xd",(function(){return p})),s.d(t,"Vb",(function(){return m})),s.d(t,"Tb",(function(){return h})),s.d(t,"Ub",(function(){return f})),s.d(t,"fb",(function(){return _})),s.d(t,"Bb",(function(){return v})),s.d(t,"vc",(function(){return g})),s.d(t,"uc",(function(){return y})),s.d(t,"Be",(function(){return b})),s.d(t,"fe",(function(){return k})),s.d(t,"Rd",(function(){return w})),s.d(t,"Ie",(function(){return C})),s.d(t,"wd",(function(){return S})),s.d(t,"vd",(function(){return T})),s.d(t,"yd",(function(){return x})),s.d(t,"zd",(function(){return E})),s.d(t,"Ae",(function(){return P})),s.d(t,"ud",(function(){return O})),s.d(t,"ze",(function(){return A})),s.d(t,"tf",(function(){return j})),s.d(t,"sf",(function(){return D})),s.d(t,"uf",(function(){return M})),s.d(t,"H",(function(){return I})),s.d(t,"ff",(function(){return $})),s.d(t,"hf",(function(){return L})),s.d(t,"gf",(function(){return F})),s.d(t,"if",(function(){return q})),s.d(t,"jf",(function(){return N})),s.d(t,"mf",(function(){return z})),s.d(t,"of",(function(){return R})),s.d(t,"nf",(function(){return V})),s.d(t,"kf",(function(){return B})),s.d(t,"lf",(function(){return U})),s.d(t,"Je",(function(){return H})),s.d(t,"ad",(function(){return G})),s.d(t,"bd",(function(){return K})),s.d(t,"ef",(function(){return W})),s.d(t,"Ke",(function(){return Y})),s.d(t,"Rc",(function(){return Q})),s.d(t,"rd",(function(){return X})),s.d(t,"sd",(function(){return J})),s.d(t,"Lb",(function(){return Z})),s.d(t,"Kb",(function(){return ee})),s.d(t,"Qc",(function(){return te})),s.d(t,"Sc",(function(){return se})),s.d(t,"Y",(function(){return ie})),s.d(t,"nb",(function(){return ne})),s.d(t,"yb",(function(){return ae})),s.d(t,"cb",(function(){return oe})),s.d(t,"Ad",(function(){return re})),s.d(t,"a",(function(){return ce})),s.d(t,"Bd",(function(){return le})),s.d(t,"k",(function(){return de})),s.d(t,"j",(function(){return ue})),s.d(t,"jb",(function(){return pe})),s.d(t,"N",(function(){return me})),s.d(t,"Ze",(function(){return he})),s.d(t,"n",(function(){return fe})),s.d(t,"o",(function(){return _e})),s.d(t,"Td",(function(){return ve})),s.d(t,"T",(function(){return ge})),s.d(t,"s",(function(){return ye})),s.d(t,"Se",(function(){return be})),s.d(t,"ie",(function(){return ke})),s.d(t,"Yd",(function(){return we})),s.d(t,"We",(function(){return Ce})),s.d(t,"we",(function(){return Se})),s.d(t,"Pd",(function(){return Te})),s.d(t,"bf",(function(){return xe})),s.d(t,"Ec",(function(){return Ee})),s.d(t,"Cc",(function(){return Pe})),s.d(t,"Dc",(function(){return Oe})),s.d(t,"m",(function(){return Ae})),s.d(t,"af",(function(){return je})),s.d(t,"Sd",(function(){return De})),s.d(t,"qc",(function(){return Me})),s.d(t,"oc",(function(){return Ie})),s.d(t,"pc",(function(){return $e})),s.d(t,"Hc",(function(){return Le})),s.d(t,"Fc",(function(){return Fe})),s.d(t,"Gc",(function(){return qe})),s.d(t,"Hb",(function(){return Ne})),s.d(t,"Fb",(function(){return ze})),s.d(t,"Gb",(function(){return Re})),s.d(t,"mb",(function(){return Ve})),s.d(t,"kb",(function(){return Be})),s.d(t,"lb",(function(){return Ue})),s.d(t,"oe",(function(){return He})),s.d(t,"Gd",(function(){return Ge})),s.d(t,"Fd",(function(){return Ke})),s.d(t,"Ne",(function(){return We})),s.d(t,"Oe",(function(){return Ye})),s.d(t,"Cd",(function(){return Qe})),s.d(t,"Hd",(function(){return Xe})),s.d(t,"Ed",(function(){return Je})),s.d(t,"Jd",(function(){return Ze})),s.d(t,"Dd",(function(){return et})),s.d(t,"Id",(function(){return tt})),s.d(t,"f",(function(){return st})),s.d(t,"Ye",(function(){return it})),s.d(t,"eb",(function(){return nt})),s.d(t,"Zc",(function(){return at})),s.d(t,"Xc",(function(){return ot})),s.d(t,"Yc",(function(){return rt})),s.d(t,"Pb",(function(){return ct})),s.d(t,"Nb",(function(){return lt})),s.d(t,"Ob",(function(){return dt})),s.d(t,"rb",(function(){return ut})),s.d(t,"pb",(function(){return pt})),s.d(t,"qb",(function(){return mt})),s.d(t,"Vc",(function(){return ht})),s.d(t,"Tc",(function(){return ft})),s.d(t,"Uc",(function(){return _t})),s.d(t,"Mb",(function(){return vt})),s.d(t,"ob",(function(){return gt})),s.d(t,"ic",(function(){return yt})),s.d(t,"gc",(function(){return bt})),s.d(t,"hc",(function(){return kt})),s.d(t,"zb",(function(){return wt})),s.d(t,"db",(function(){return Ct})),s.d(t,"fc",(function(){return St})),s.d(t,"dc",(function(){return Tt})),s.d(t,"ec",(function(){return xt})),s.d(t,"xb",(function(){return Et})),s.d(t,"bb",(function(){return Pt})),s.d(t,"ke",(function(){return Ot})),s.d(t,"De",(function(){return At})),s.d(t,"P",(function(){return jt})),s.d(t,"ac",(function(){return Dt})),s.d(t,"Yb",(function(){return Mt})),s.d(t,"Zb",(function(){return It})),s.d(t,"cc",(function(){return $t})),s.d(t,"r",(function(){return Lt})),s.d(t,"Sb",(function(){return Ft})),s.d(t,"Rb",(function(){return qt})),s.d(t,"wb",(function(){return Nt})),s.d(t,"ce",(function(){return zt})),s.d(t,"le",(function(){return Rt})),s.d(t,"ee",(function(){return Vt})),s.d(t,"Ld",(function(){return Bt})),s.d(t,"sb",(function(){return Ut})),s.d(t,"V",(function(){return Ht})),s.d(t,"me",(function(){return Gt})),s.d(t,"b",(function(){return Kt})),s.d(t,"Ve",(function(){return Wt})),s.d(t,"Kd",(function(){return Yt})),s.d(t,"t",(function(){return Qt})),s.d(t,"G",(function(){return Xt})),s.d(t,"cd",(function(){return Jt})),s.d(t,"Te",(function(){return Zt})),s.d(t,"U",(function(){return es})),s.d(t,"Nc",(function(){return ts})),s.d(t,"Lc",(function(){return ss})),s.d(t,"Mc",(function(){return is})),s.d(t,"Ic",(function(){return ns})),s.d(t,"kc",(function(){return as})),s.d(t,"Pc",(function(){return os})),s.d(t,"Oc",(function(){return rs})),s.d(t,"bc",(function(){return cs})),s.d(t,"Le",(function(){return ls})),s.d(t,"Wb",(function(){return ds})),s.d(t,"Jb",(function(){return us})),s.d(t,"Ib",(function(){return ps})),s.d(t,"Ab",(function(){return ms})),s.d(t,"qd",(function(){return hs})),s.d(t,"pd",(function(){return fs})),s.d(t,"od",(function(){return _s})),s.d(t,"de",(function(){return vs})),s.d(t,"d",(function(){return gs})),s.d(t,"Xe",(function(){return ys})),s.d(t,"Od",(function(){return bs})),s.d(t,"p",(function(){return ks})),s.d(t,"cf",(function(){return ws})),s.d(t,"Ud",(function(){return Cs})),s.d(t,"q",(function(){return Ss})),s.d(t,"df",(function(){return Ts})),s.d(t,"Wd",(function(){return xs})),s.d(t,"u",(function(){return Es})),s.d(t,"He",(function(){return Ps})),s.d(t,"he",(function(){return Os})),s.d(t,"Xd",(function(){return As})),s.d(t,"Fe",(function(){return js})),s.d(t,"ge",(function(){return Ds})),s.d(t,"Vd",(function(){return Ms})),s.d(t,"se",(function(){return Is})),s.d(t,"vb",(function(){return $s})),s.d(t,"ub",(function(){return Ls})),s.d(t,"tb",(function(){return Fs})),s.d(t,"Ge",(function(){return qs})),s.d(t,"Ee",(function(){return Ns})),s.d(t,"qe",(function(){return zs})),s.d(t,"X",(function(){return Rs})),s.d(t,"W",(function(){return Vs})),s.d(t,"ne",(function(){return Bs})),s.d(t,"Q",(function(){return Us})),s.d(t,"te",(function(){return Hs})),s.d(t,"re",(function(){return Gs})),s.d(t,"be",(function(){return Ks})),s.d(t,"ab",(function(){return Ws})),s.d(t,"Z",(function(){return Ys})),s.d(t,"O",(function(){return Qs})),s.d(t,"dd",(function(){return Xs})),s.d(t,"Ue",(function(){return Js})),s.d(t,"I",(function(){return Zs})),s.d(t,"J",(function(){return ei})),s.d(t,"fd",(function(){return ti})),s.d(t,"gd",(function(){return si})),s.d(t,"ed",(function(){return ii})),s.d(t,"id",(function(){return ni})),s.d(t,"hd",(function(){return ai})),s.d(t,"pf",(function(){return oi})),s.d(t,"rf",(function(){return ri})),s.d(t,"qf",(function(){return ci})),s.d(t,"je",(function(){return li})),s.d(t,"Zd",(function(){return di})),s.d(t,"D",(function(){return ui})),s.d(t,"B",(function(){return pi})),s.d(t,"A",(function(){return mi})),s.d(t,"F",(function(){return hi})),s.d(t,"E",(function(){return fi})),s.d(t,"z",(function(){return _i})),s.d(t,"y",(function(){return vi})),s.d(t,"x",(function(){return gi})),s.d(t,"v",(function(){return yi})),s.d(t,"w",(function(){return bi})),s.d(t,"C",(function(){return ki})),s.d(t,"yc",(function(){return wi})),s.d(t,"wc",(function(){return Ci})),s.d(t,"xc",(function(){return Si})),s.d(t,"Bc",(function(){return Ti})),s.d(t,"zc",(function(){return xi})),s.d(t,"Ac",(function(){return Ei})),s.d(t,"Eb",(function(){return Pi})),s.d(t,"Cb",(function(){return Oi})),s.d(t,"Db",(function(){return Ai})),s.d(t,"ib",(function(){return ji})),s.d(t,"gb",(function(){return Di})),s.d(t,"hb",(function(){return Mi})),s.d(t,"c",(function(){return Ii})),s.d(t,"Nd",(function(){return $i})),s.d(t,"L",(function(){return Li})),s.d(t,"K",(function(){return Fi})),s.d(t,"M",(function(){return qi})),s.d(t,"jc",(function(){return Ni})),s.d(t,"i",(function(){return zi})),s.d(t,"kd",(function(){return Ri})),s.d(t,"Md",(function(){return Vi})),s.d(t,"S",(function(){return Bi})),s.d(t,"lc",(function(){return Ui})),s.d(t,"mc",(function(){return Hi})),s.d(t,"nc",(function(){return Gi})),s.d(t,"jd",(function(){return Ki})),s.d(t,"td",(function(){return Wi})),s.d(t,"Wc",(function(){return Yi})),s.d(t,"Jc",(function(){return Qi})),s.d(t,"Kc",(function(){return Xi})),s.d(t,"Xb",(function(){return Ji})),s.d(t,"ye",(function(){return Zi})),s.d(t,"R",(function(){return en})),s.d(t,"l",(function(){return tn})),s.d(t,"e",(function(){return sn})),s.d(t,"ld",(function(){return nn})),s.d(t,"md",(function(){return an})),s.d(t,"nd",(function(){return on})),s.d(t,"Ce",(function(){return rn})),s.d(t,"ue",(function(){return cn})),s.d(t,"ve",(function(){return ln})),s.d(t,"ae",(function(){return dn})),s.d(t,"g",(function(){return un})),s.d(t,"h",(function(){return pn})),s.d(t,"Qd",(function(){return mn})),s.d(t,"pe",(function(){return hn}));var i="TOGGLE_DARK_THEME",n="TOGGLE_SIDEBAR",a="TOGGLE_USER_MENU",o="SET_LAST_PRODUCTION_SCREEN",r="LOAD_PEOPLE_START",c="LOAD_PEOPLE_END",l="LOAD_PEOPLE_ERROR",d="SHOW_IMPORT_PEOPLE_MODAL",u="HIDE_IMPORT_PEOPLE_MODAL",p="PERSON_CSV_FILE_SELECTED",m="IMPORT_PEOPLE_START",h="IMPORT_PEOPLE_END",f="IMPORT_PEOPLE_ERROR",_="DELETE_PEOPLE_END",v="EDIT_PEOPLE_END",g="LOAD_PERSON_TASKS_END",y="LOAD_PERSON_DONE_TASKS_END",b="SET_PERSON_TASKS_SEARCH",k="SAVE_PERSON_TASKS_SEARCH_END",w="REMOVE_PERSON_TASKS_SEARCH_END",C="SET_TIME_SPENT",S="PEOPLE_TIMESHEET_LOADED",T="PEOPLE_SET_DAY_OFFS",x="PERSON_LOAD_TIME_SPENTS_END",E="PERSON_SET_DAY_OFF",P="SET_PERSON_TASKS_SCROLL_POSITION",O="PEOPLE_SEARCH_CHANGE",A="SET_ORGANISATION",j="USER_SAVE_PROFILE_LOADING",D="USER_SAVE_PROFILE_ERROR",M="USER_SAVE_PROFILE_SUCCESS",I="CHANGE_AVATAR_FILE",$="UPLOAD_AVATAR_END",L="USER_CHANGE_PASSWORD_LOADING",F="USER_CHANGE_PASSWORD_ERROR",q="USER_CHANGE_PASSWORD_SUCCESS",N="USER_CHANGE_PASSWORD_UNVALID",z="USER_LOAD_TODOS_END",R="USER_LOAD_TODOS_START",V="USER_LOAD_TODOS_ERROR",B="USER_LOAD_DONE_TASKS_END",U="USER_LOAD_TIME_SPENTS_END",H="SET_TODOS_SEARCH",G="LOAD_USER_FILTERS_END",K="LOAD_USER_FILTERS_ERROR",W="UPDATE_USER_FILTER",Y="SET_TODO_LIST_SCROLL_POSITION",Q="LOAD_TASK_END",X="NEW_TASK_COMMENT_END",J="NEW_TASK_END",Z="EDIT_TASK_END",ee="EDIT_TASK_DATES",te="LOAD_TASK_COMMENTS_END",se="LOAD_TASK_ENTITY_PREVIEW_FILES_END",ie="CREATE_TASKS_END",ne="DELETE_TASK_END",ae="EDIT_COMMENT_END",oe="DELETE_COMMENT_END",re="PIN_COMMENT",ce="ACK_COMMENT",le="PREVIEW_FILE_SELECTED",de="ADD_PREVIEW_START",ue="ADD_PREVIEW_END",pe="DELETE_PREVIEW_END",me="CHANGE_PREVIEW_END",he="UPDATE_PREVIEW_ANNOTATION",fe="ADD_SELECTED_TASK",_e="ADD_SELECTED_TASKS",ve="REMOVE_SELECTED_TASK",ge="CLEAR_SELECTED_TASKS",ye="ASSIGN_TASKS",be="UNASSIGN_TASKS",ke="SAVE_TASK_SEARCH_END",we="REMOVE_TASK_SEARCH_END",Ce="UPDATE_COMMENT_CHECKLIST",Se="SET_LAST_COMMENT_DRAFT",Te="REMOVE_FIRST_PREVIEW_FILE_TO_UPLOAD",xe="UPDATE_REVISION_PREVIEW_POSITION",Ee="LOAD_PRODUCTIONS_START",Pe="LOAD_PRODUCTIONS_END",Oe="LOAD_PRODUCTIONS_ERROR",Ae="ADD_PRODUCTION",je="UPDATE_PRODUCTION",De="REMOVE_PRODUCTION",Me="LOAD_OPEN_PRODUCTIONS_START",Ie="LOAD_OPEN_PRODUCTIONS_END",$e="LOAD_OPEN_PRODUCTIONS_ERROR",Le="LOAD_PRODUCTION_STATUS_START",Fe="LOAD_PRODUCTION_STATUS_END",qe="LOAD_PRODUCTION_STATUS_ERROR",Ne="EDIT_PRODUCTION_START",ze="EDIT_PRODUCTION_END",Re="EDIT_PRODUCTION_ERROR",Ve="DELETE_PRODUCTION_START",Be="DELETE_PRODUCTION_END",Ue="DELETE_PRODUCTION_ERROR",He="SET_CURRENT_PRODUCTION",Ge="PRODUCTION_PICTURE_FILE_SELECTED",Ke="PRODUCTION_AVATAR_UPLOADED",We="TEAM_ADD_PERSON",Ye="TEAM_REMOVE_PERSON",Qe="PRODUCTION_ADD_ASSET_TYPE",Xe="PRODUCTION_REMOVE_ASSET_TYPE",Je="PRODUCTION_ADD_TASK_TYPE",Ze="PRODUCTION_REMOVE_TASK_TYPE",et="PRODUCTION_ADD_TASK_STATUS",tt="PRODUCTION_REMOVE_TASK_STATUS",st="ADD_METADATA_DESCRIPTOR_END",it="UPDATE_METADATA_DESCRIPTOR_END",nt="DELETE_METADATA_DESCRIPTOR_END",at="LOAD_TASK_TYPES_START",ot="LOAD_TASK_TYPES_END",rt="LOAD_TASK_TYPES_ERROR",ct="EDIT_TASK_TYPE_START",lt="EDIT_TASK_TYPE_END",dt="EDIT_TASK_TYPE_ERROR",ut="DELETE_TASK_TYPE_START",pt="DELETE_TASK_TYPE_END",mt="DELETE_TASK_TYPE_ERROR",ht="LOAD_TASK_STATUSES_START",ft="LOAD_TASK_STATUSES_END",_t="LOAD_TASK_STATUSES_ERROR",vt="EDIT_TASK_STATUS_END",gt="DELETE_TASK_STATUS_END",yt="LOAD_CUSTOM_ACTIONS_START",bt="LOAD_CUSTOM_ACTIONS_END",kt="LOAD_CUSTOM_ACTIONS_ERROR",wt="EDIT_CUSTOM_ACTION_END",Ct="DELETE_CUSTOM_ACTION_END",St="LOAD_ASSET_TYPES_START",Tt="LOAD_ASSET_TYPES_END",xt="LOAD_ASSET_TYPES_ERROR",Et="EDIT_ASSET_TYPE_END",Pt="DELETE_ASSET_TYPE_END",Ot="SET_ASSET_LIST_SCROLL_POSITION",At="SET_PRODUCTION_ASSET_TYPE_LIST_SCROLL_POSITION",jt="CLEAR_ASSETS",Dt="LOAD_ASSETS_START",Mt="LOAD_ASSETS_END",It="LOAD_ASSETS_ERROR",$t="LOAD_ASSET_CAST_IN_END",Lt="ASSET_CSV_FILE_SELECTED",Ft="IMPORT_ASSETS_START",qt="IMPORT_ASSETS_END",Nt="EDIT_ASSET_END",zt="RESTORE_ASSET_END",Rt="SET_ASSET_SEARCH",Vt="SAVE_ASSET_SEARCH_END",Bt="REMOVE_ASSET_SEARCH_END",Ut="DISPLAY_MORE_ASSETS",Ht="COMPUTE_ASSET_TYPE_STATS",Gt="SET_ASSET_TYPE_SEARCH",Kt="ADD_ASSET",Wt="UPDATE_ASSET",Yt="REMOVE_ASSET",Qt="CANCEL_ASSET",Xt="CHANGE_ASSET_SORT",Jt="LOCK_ASSET",Zt="UNLOCK_ASSET",es="CLEAR_SHOTS",ts="LOAD_SHOTS_START",ss="LOAD_SHOTS_END",is="LOAD_SHOTS_ERROR",ns="LOAD_SEQUENCES_END",as="LOAD_EPISODES_END",os="LOAD_SHOT_END",rs="LOAD_SHOT_CASTING_END",cs="LOAD_ASSET_CASTING_END",ls="SHOT_CSV_FILE_SELECTED",ds="IMPORT_SHOTS_END",us="EDIT_SHOT_END",ps="EDIT_SEQUENCE_END",ms="EDIT_EPISODE_END",hs="NEW_SHOT_END",fs="NEW_SEQUENCE_END",_s="NEW_EPISODE_END",vs="RESTORE_SHOT_END",gs="ADD_EPISODE",ys="UPDATE_EPISODE",bs="REMOVE_EPISODE",ks="ADD_SEQUENCE",ws="UPDATE_SEQUENCE",Cs="REMOVE_SEQUENCE",Ss="ADD_SHOT",Ts="UPDATE_SHOT",xs="REMOVE_SHOT",Es="CANCEL_SHOT",Ps="SET_SHOT_SEARCH",Os="SAVE_SHOT_SEARCH_END",As="REMOVE_SHOT_SEARCH_END",js="SET_SEQUENCE_SEARCH",Ds="SAVE_SEQUENCE_SEARCH_END",Ms="REMOVE_SEQUENCE_SEARCH_END",Is="SET_EPISODE_SEARCH",$s="DISPLAY_MORE_SHOTS",Ls="DISPLAY_MORE_SEQUENCES",Fs="DISPLAY_MORE_EPISODES",qs="SET_SHOT_LIST_SCROLL_POSITION",Ns="SET_SEQUENCE_LIST_SCROLL_POSITION",zs="SET_EPISODE_LIST_SCROLL_POSITION",Rs="COMPUTE_SEQUENCE_STATS",Vs="COMPUTE_EPISODE_STATS",Bs="SET_CURRENT_EPISODE",Us="CLEAR_EPISODES",Hs="SET_EPISODE_STATS",Gs="SET_EPISODE_RETAKE_STATS",Ks="RESET_PRODUCTION_PATH",Ws="DATA_LOADING_START",Ys="DATA_LOADING_END",Qs="CHANGE_SHOT_SORT",Xs="LOCK_SHOT",Js="UNLOCK_SHOT",Zs="CHANGE_EMAIL",ei="CHANGE_PASSWORD",ti="LOGIN_RUN",si="LOGIN_SUCCESS",ii="LOGIN_FAILURE",ni="LOGOUT_SUCCESS",ai="LOGOUT_FAILURE",oi="USER_LOGIN",ri="USER_LOGOUT",ci="USER_LOGIN_FAIL",li="SAVE_TODO_SEARCH_END",di="REMOVE_TODO_SEARCH_END",ui="CASTING_SET_SEQUENCE",pi="CASTING_SET_EPISODE",mi="CASTING_SET_CASTING",hi="CASTING_SET_SHOTS",fi="CASTING_SET_SEQUENCES",_i="CASTING_SET_ASSET_TYPES",vi="CASTING_SET_ASSET_TYPE",gi="CASTING_SET_ASSETS",yi="CASTING_ADD_TO_CASTING",bi="CASTING_REMOVE_FROM_CASTING",ki="CASTING_SET_LINK_LABEL",wi="LOAD_PLAYLISTS_START",Ci="LOAD_PLAYLISTS_END",Si="LOAD_PLAYLISTS_ERROR",Ti="LOAD_PLAYLIST_START",xi="LOAD_PLAYLIST_END",Ei="LOAD_PLAYLIST_ERROR",Pi="EDIT_PLAYLIST_START",Oi="EDIT_PLAYLIST_END",Ai="EDIT_PLAYLIST_ERROR",ji="DELETE_PLAYLIST_START",Di="DELETE_PLAYLIST_END",Mi="DELETE_PLAYLIST_ERROR",Ii="ADD_ENTITY_TO_PLAYLIST",$i="REMOVE_ENTITY_FROM_PLAYLIST",Li="CHANGE_PLAYLIST_PREVIEW",Fi="CHANGE_PLAYLIST_ORDER",qi="CHANGE_PLAYLIST_TYPE",Ni="LOAD_ENTITY_PREVIEW_FILES_END",zi="ADD_NEW_JOB",Ri="MARK_JOB_AS_DONE",Vi="REMOVE_BUILD_JOB",Bi="CLEAR_NOTIFICATIONS",Ui="LOAD_MORE_NOTIFICATIONS_END",Hi="LOAD_NOTIFICATIONS_END",Gi="LOAD_NOTIFICATION_END",Ki="MARK_ALL_NOTIFICATIONS_AS_READ",Wi="NOTIFICATION_ADD_PREVIEW",Yi="LOAD_TASK_SUBSCRIBE_END",Qi="LOAD_SEQUENCE_SUBSCRIBE_END",Xi="LOAD_SEQUENCE_SUBSCRIPTION_END",Ji="INCREMENT_NOTIFICATION_COUNTER",Zi="SET_NOTIFICATION_COUNT",en="CLEAR_NEWS",tn="ADD_PREVIOUS_NEWS",sn="ADD_FIRST_NEWS",nn="NEWS_ADD_PREVIEW",an="NEWS_SET_STATS",on="NEWS_SET_TOTAL",rn="SET_PREVIEW",cn="SET_IS_SHOW_ASSIGNATIONS",ln="SET_IS_SHOW_INFOS",dn="RESET_ALL",un="ADD_MILESTONE",pn="ADD_MILESTONES",mn="REMOVE_MILESTONE",hn="SET_CURRENT_SCHEDULE_ITEMS"},a015:function(e,t,s){"use strict";s("d392")},a068:function(e,t,s){"use strict";s("ac61")},a1c2:function(e,t,s){"use strict";s("e42b")},a1c5:function(e,t,s){"use strict";s("4688")},a2b9:function(e,t,s){},a2db:function(e,t,s){"use strict";s("5e5b")},a306:function(e){e.exports=JSON.parse('{"default":{"assets":{"cast_in":"Diseminado en","delete_error":"Error al borrar este recurso porque tiene datos vinculados. ¿Está seguro que el recurso no está asociado a ninguna tarea?","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","edit_fail":"Error al guardar debido a que hay un recurso con el mismo nombre.","edit_success":"Recurso {name} editado correctamente.","edit_title":"Editar recurso","empty_list":"No hay ningún recurso en producción. ¿Qué tal si creamos alguno?","empty_list_client":"No hay ningún recurso en esta producción.","new_asset":"Añadir un recurso","new_assets":"Añadir recursos","new_success":"{name} de recurso creado con éxito.","no_cast_in":"Este recurso no está diseminado en ningún plano.","number":"recurso | recursos","restore_text":"¿Está seguro de que desea restaurar {name} en su base de datos?","restore_error":"Se ha producido un error al restaurar este recurso.","tasks":"Tareas de los recursos","title":"Recursos","fields":{"description":"Descripción","episode":"Ep.","name":"Nombre","production":"Prod","time_spent":"Tiempo","type":"Tipo","hidden_from_client":"Mostrado al cliente"}},"asset_types":{"all_asset_types":"Todos los tipos de assets","create_error":"Ha ocurrido un error mientras se guardaba este tipo de asset. ¿Estás seguro de que no hay un tipo de asset con un nombre similar?","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","delete_error":"Se ha producido un error al borrar este tipo de asset. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de asset no tiene ningún asset vinculado a él?","edit_title":"Editar tipo de recurso","new_asset_type":"Añadir un tipo de recurso","number":"tipo de recurso | tipos de recursos","title":"Tipos de recursos","production_title":"Estadísticas de tipos de recursos","fields":{"name":"Nombre"}},"breakdown":{"all_assets":"Todos los assets disponibles","edit_label":"Cambiar la etiqueta de asset","empty":"Diseminación vacía","label":"Etiqueta","picture_mode":"Cambiar el a modo de imagen.","text_mode":"Cambiar a modo de texto","title":"Desglose","options":{"fixed":"fijo","animate":"animado"}},"comments":{"add_attachment":"Adjuntar archivo...","add_checklist":"Agregar lista de verificación","add_comment":"Añadir un comentario...","add_preview":"Adjuntar vista previa","change_preview":"Cambiar la vista previa","comment_from_client":"Comentario del cliente","edit_title":"Editar comentario","empty_text":"Este comentario está vacío","edit_error":"Ha ocurrido un error mientras se editaba este comentario. Por favor contacte nuestro equipo de soporte.","error":"Se ha producido un error al publicar un comentario","no_file_attached":"Ningún archivo adjunto","pin":"Anclar","pinned":"Anclado","post_status":"Publicar comentario","retake":"Repetir","revision":"modificación","set_status_to":"Fijar el estado en","task_placeholder":"Nuevo articulo...","text":"Texto","unpin":"Desanclar","validated":"Validado!","validation_required":"Validación requerida","fields":{"text":"texto"}},"custom_actions":{"create_error":"Ha ocurrido un error mientras se guardaba esta acción personalizada. ¿Está seguro de que no hay otra acción con el mismo nombre?","delete_text":"¿Está seguro de que desea eliminar una acción personalizada {name} de su base de datos?","delete_error":"Se ha producido un error al eliminar esta acción personalizada.","edit_title":"Editar acción personalizada","new_custom_action":"Añadir acción personalizada","number":"acción personalizada | acciones personalizadas","run_for_selection":"Ejecute una acción personalizada para las tareas seleccionadas:","title":"Acciones personalizadas","fields":{"name":"Nombre","url":"URL","entity_type":"Tipo de entidad","is_ajax":"Usar AJAX"},"entity_types":{"all":"Todos","shot":"Plan","asset":"Asset"}},"entities":{"build_filter":{"asset_type":"Tipo de recurso","all_types":"Todo tipo de recursos","assignation":"Asignación","assignation_exists_for":"La asignación existe para","assigned_to":"Asignado a","descriptor":"Metadatos","equal":"Igual","in":"En","no_assignation_for":"No existe ninguna asignación para","no_filter":"No hay filtro","not_equal":"No igual","not_assigned_to":"No asignado a","status":"Estado de la tarea","thumbnail":"Presencia de la miniatura","title":"Filtro activado...","union_and":"Hacer coincidir todos los filtros.","union_or":"Hacer coincidir uno de los siguientes filtros.","with_thumbnail":"Con miniatura","without_thumbnail":"Sin miniatura"},"thumbnails":{"error":"Ha ocurrido un error mientras se subían las miniaturas","explaination":"Añadir una miniatura requiere establecer una nueva vista previa. Para establecer varias miniaturas al mismo tiempo, debe elegir primero un tipo de tarea que se utilizará para crear las nuevas vistas previas. Las miniaturas se establecerán desde esta nueva vista previa","explaination_two":"Entonces tienes que seleccionar los archivos que quieres subir. Para encontrar las entidades correctas, los nombres de los archivos deben coincidir con el siguiente patrón:","shots_pattern":"NombreDeSecuencia NombreDeDisparo, por ejemplo SQ01_SH01.","assets_pattern":"Nombre de asset del tipo de asset, por ejemplo, Environment_Forest.","select_files":"Seleccion archivos","selected_files":"Archivos seleccionados","select_task_type":"Seleccionar tipo de tarea","title":"Add Thumbnails","undefined":"indefinido","undefined_pattern":"Indefinido","upload":"Agregar miniaturas"}},"estimation":{"title":"Estimación"},"episodes":{"all_episodes":"Todos los episodios","edit_error":"Ha ocurrido un error mientras se guardaba este episodio. ¿Estás seguro de que no hay un episodio con un nombre similar?","delete_error":"Se ha producido un error al borrar este episodio. Es probable que haya datos vinculados a él. ¿Estás seguro de que este episodio no tiene una secuencia vinculada a él?","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","edit_title":"Editar episodio","empty_list":"No hay ningún episodio en la producción. ¿Qué tal si creamos algunos?","empty_list_client":"No hay ningún episodio en esta producción.","new_episode":"Nuevo episodio","number":"episodio | episodios","title":"Estadísticas del episodio","fields":{"name":"denominación","description":"descripción"}},"keyboard":{"altdown":"Mueve la selección de una tarea hacia abajo","altj":"Seleccione la vista previa","altk":"Seleccione el siguiente preview","altleft":"Mueve la selección de una tarea a la izquierda","altright":"Mueve la selección de una tarea a la derecha","altup":"Mueve la selección de una tarea hacia arriba","annotations":"Anotaciones","draw":"Activar el modo de dibujo","navigation":"Navegación","redo":"Rehacer","undo":"Deshacer","playlist_navigation":"Navegación de las Paylists","remove_annotation":"Eliminar anotación","shortcuts":"Atajos de teclado"},"login":{"back_to_login":"Voler al login","forgot_password":"¿Olvidó su contraseña?","login":"Iniciar sesión","login_failed":"Error de inicio de sesión, por favor verifique sus credenciales","login_page":"Cancelar","redirecting":"Redirigiendo en {secondsLeft} segundos","reset_change_password":"Cambiar contraseña","reset_change_password_form_failed":"Hay un problema con la contraseña que dio. Por favor, verifique que tenga al menos 7 caracteres y que ambas contraseñas coincidan.","reset_change_password_failed":"Error al cambiar la contraseña. Por favor, reinicie todo el procedimiento de nuevo.","reset_change_password_succeed":"Su contraseña ha sido cambiada con éxito. Por favor, vuelva a la página de inicio de sesión para utilizarlo.","reset_change_password_title":"Introduzca una nueva contraseña","reset_password":"Restablecer contraseña","reset_password_failed":"Error al restablecer la contraseña. Por favor, verifique su correo electrónico.","reset_password_succeed":"Restablecer contraseña correctamente. Por favor, compruebe su bandeja de entrada.","reset_password_title":"Ingrese su correo electrónico para restablecer su contraseña","title":"Iniciar sesión en Kitsu","fields":{"email":"Correo electrónico","password":"Contraseña","password2":"Contraseña de nuevo"}},"main":{"about":"Acerca de","add":"añadir","all":"Todos","all_assets":"Todos assets","admin":"Admin","cancel":"Cancelar","clear_selection":"Borrar la selección actual","close":"Cerrar","confirmation":"Confirmar","confirmation_and_stay":"Confirmar y quedarse","date":"Fecha","dark_theme":"Tema oscuro","days_spent":"días pasados | días pasados","days_estimated":"día estimado | días estimados","delete":"Borrar","delete_all":"Borrar todo","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","documentation":"Documentación","edit":"Tratar","empty_comment":"Vaciar comentario","end_date":"Fecha de finalización","files_selected":"archivos seleccionados","for":"Para","go_productions":"Ir a producciones","history":"trayectoria","info":"Información","or":"o","no":"No","loading":"Carga...","loading_data":"Carga de datos","loading_error":"Se ha producido un error al cargar los datos.","logout":"Cierre de sesión","modify":"Modificar","minimize":"Minimizar","main_pack":"Main Pack","maximize":"Maximizar","nb_frames":"marcos | marcos","person":"person","profile":"Perfil","production":"Producción","remove":"Quitar","save":"Guardar","sort_by":"Ordenar por","sorted_by":"Ordenado por","start_date":"Fecha de inicio","studio":"Estudio","tutorials":"Tutorials","user":"Usuario","white_theme":"Tema Blanco","yes":"Sí","csv":{"choose":"Elige","error_upload":"Se ha producido un error al cargar el archivo CSV.","export_file":"Exportar","import_file":"Importar","import_title":"Importar datos de un archivo CSV","legend":"Leyenda","legend_ok":"Datos reconocidos","legend_ignored":"Datos ignorados","legend_missing":"Datos perdidos","legend_disabled":"Datos que no serán actualizados ni creados","legend_overwrite":"Datos que serán actualizados","paste":"Pegar","paste_code":"Por favor, pegue aquí sus datos CSV:","preview":"See preview","preview_episode_name":"Nombre del episodio","preview_title":"Vista previa de sus datos importados","preview_description":"Sube un archivo .csv para llenar tu pizarra con posts","preview_required":"NB: Los encabezados deben ser incluidos como primera fila.","preview_reupload":"Subir de nuevo el archivo .CSV","required_fields":"Su archivo CSV requiere las siguientes columnas","select_file":"Por favor, seleccione un archivo de una de sus carpetas:","tab_select_file":"Subir un archivo CSV","tab_paste_code":"Pegar un dato CSV","unknown":"Columna desconocida","upload_file":"Navegar","options":{"title":"Opciones","update":"Actualizar los datos existentes"}}},"menu":{"assign_tasks":"Asignar tareas","change_priority":"Modificar prioridad","change_status":"Status de modificación","create_tasks":"Crear tareas","delete_tasks":"Borrar medidas","generate_playlists":"Generar playlists","run_custom_action":"Ejecutar una acción personalizada","set_estimations":"Fijar estimaciones"},"news":{"all":"Todos","commented_on":"comentado","infos":"Información","no_news":"No hay noticias de esta producción ni de este filtro.","only_comments":"Sólo comentarios","only_previews":"Sólo previsualizaciones","set_preview_on":"establecer vista previa en","task_status":"Status de la tarea","task_type":"Tipo de tarea","title":"Últimas noticias"},"not_found":{"text":"Había algo mal en el enlace en el que hiciste clic, te animamos a que vuelvas a la página de inicio.","title":"Página no encontrada... ¿buscas algo que has borrado?"},"notifications":{"and_change_status":"y ha cambiado el status a","assigned_you":"te asignó a","commented_on":"comentado","mention_you_on":"te mencioné en","no_notifications":"Actualmente no hay ninguna notificación para usted para sus proyectos actuales.","unread_notifications":"notificación no leída | notificaciones no leídas","title":"Notificaciones","with_preview":"con una vista previa"},"people":{"active":"Activada","active_persons":"Persona activada | Personas activadas","add_member_to_team":"Añada un miembro al equipo:","create_invite":"Crear y enviar invitación","create_error":"Seh a producido un error al crear a este usuario. Por favor, contacte con el equipo de soporte técnico para mas información.","delete_error":"Se ha producido un error al borrar a esta persona. Es probable que haya datos vinculados a él. ¿Está seguro de que esta persona no tiene ninguna cita o escribió ningún comentario?","delete_text":"¿Está seguro de que desea eliminar {personName} de su base de datos?","edit_title":"Editar usuario","empty_team":"No hay nadie en el equipo del proyecto.","invite":"Enviar invitación","invite_error":"Se ha producido un error al enviar la invitación","invite_success":"La invitación fue enviada con éxito","new_person":"Añadir un nuevo empleado","no_task_assigned":"No hay tareas de ejecución asignadas a usted","persons":"persona | personas","running_tasks":"Tareas en ejecución","select_person":"Seleccione una persona....","team":"Equipo","title":"Gente","unactive":"Inactivo","csv":{"import_file":"Importar un archivo.csv","export_file":"Descargar como archivo.csv","import_title":"Importar datos de un archivo CSV","required_fields":"Su archivo CSV requiere las siguientes columnas","select_file":"Por favor, seleccione un archivo de una de sus carpetas:","error_upload":"Se ha producido un error al cargar el archivo CSV."},"fields":{"first_name":"Nombre de pila","last_name":"Apellido","email":"Correo electrónico","phone":"Teléfono","role":"Papel","old_password":"Contraseña actual","password":"Nueva contraseña","password_2":"Nueva contraseña (repetir)","active":"En activo"},"list":{"name":"Nombre","email":"Correo electrónico","phone":"llamar","role":"Papel","active":"Asset"},"role":{"admin":"Director del estudio","client":"Mandante","manager":"Supervisor","user":"Artista CG","undefined":"sin definir","vendor":"Proveedor"}},"playlists":{"add_assets":"Añadir assets","add_selection":"Añade la selección","add_shots":"Añadir shots","add_sequence":"Añadir secuencia completa","add_episode":"Añadir episodio completa","add_movie":"Añadir film completa","apply_task_type_change":"Esto posicionará la última revisión para el tipo de tarea dada en todos los shots.","available_build":"Construcciones disponibles","build_daily":"Diario pendiente","build_weekly":"Todos Pendientes","build_mp4":"Construir .mp4","building":"Edificio","client_playlist":"Playlist clave","create_for_selection":"Crear una playlist para la selección","create_title":"Crear playlist","created_at":"Creado en:","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","delete_error":"Se ha producido un error al eliminar esta lista de reproducción.","edit_error":"Ha ocurrido un error mientras se guardaba esta lista de reproducción.","download_zip":"Descargar.zip","failed":"Fallido","for_client":"El cliente","for_studio":"El estudio","edit_title":"Editar lista de reproducción","last_creation":"Ultimas creaciones","last_modification":"Ultimas modificaciones","loading_error":"Se ha producido un error en el servidor. Las listas de reproducción no se pueden cargar.","new_playlist":"Añadir una lista de reproducción","no_build":"Sin construcción","no_playlist":"Actualmente no hay ninguna lista de reproducción para este proyecto.","no_preview":"No hay vista previa de esta toma","no_selection":"Por favor, seleccione una lista de reproducción a la izquierda.","no_sequence_for_episode":"No hay secuencia para este episodio","no_shot_for_production":"No hay ninguna toma para esta producción.","select_shot":"Por favor, seleccione una toma en la columna de la derecha","select_playlist":"Por favor, seleccione una lista de reproducción en la columna de la izquierda","select_task_type":"Cambiar el tipo de tarea para todos los planes","title":"Listas de reproducción","updated_at":"Actualizado en:","remove":"quitar","fields":{"name":"Nombre","created_at":"Creado en","updated_at":"Actualizado en","for_entity":"Para la entidad","for_client":"Par compartir con"},"actions":{"annotation":"Anotación","annotation_text":"Doble clic en la vista previa para añadir algo de texto","annotation_delete":"Borrar anotación","annotation_redo":"Redo anotación","annotation_undo":"Deshacer anotación","annotation_big":"Grande","annotation_medium":"Medium","annotation_small":"Pequeña","change_task_type":"Cambiar el tipo de tarea","comments":"Mostrar/ocultar comentarios","delete":"Borrar playlist","download":"Descargar lista de reproducción…","edit":"Editar playlist","entity_list":"Mostrar/ocultar lista de entidades","fullscreen":"Ver en pantalla completa","next_frame":"Siguiente fotograma","next_shot":"Siguiente entidad","pause":"Pausa","play":"Reproducir","previous_frame":"Fotograma anterior","previous_shot":"Plano anterior","save_playlist":"Guardar lista de reproducción.","speed":"Cambiar velocidad","split_screen":"Comparar con otro tipo de tareas"}},"productions":{"current":"Producción seleccionada","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?\\nPor favor, confirme escribiendo el nombre del proyecto que desea eliminar en el campo de texto.","delete_error":"Se ha producido un error al eliminar esta producción. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta producción no tiene ninguna tarea, toma o asset relacionado con ella? Kitsu no permite la eliminación de la producción. Si no quieres ver más la producción, puedes cerrarla.","edit_title":"Editar producción","new_production":"Añadir una producción","number":"producción | producciones","open_productions":"Mis producciones","picture":"Cambiar imagen","title":"Producciones","home":{"create_new":"Crear una nueva producción","empty":"No tienes ninguna producción abierta. ¿Qué tal si creamos uno nuevo?","no_task":"No tiene ninguna tarea asignada. Consulte a su supervisor para ver qué puede hacer!","no_prod_for_client":"No tienes acceso a ninguna producción. Póngase en contacto con su contratista para obtener un acceso.","title":"Producciones en marcha","welcome":"Bienvenido a Kitsu"},"fields":{"fps":"FPS","name":"Nombre","ratio":"Relación de aspecto","resolution":"Resolución","status":"Estado","type":"Tipo"},"metadata":{"add_explaination":"Añada los datos específicos requeridos por este proyecto.","add_failed":"Se ha producido un error al añadir metadatos al proyecto.","add_new_values":"Actualmente no hay valores disponibles.","available_values":"Valores disponibles","choices":"Lista de valores","delete_text":"¿Está seguro de que desea borrar esta columna y los datos relacionados para todos los assets de esta producción?","delete_error":"Se ha producido un error al eliminar esta columna de metadatos.","error":"Se ha producido un error al añadir la columna de metadatos. Asegúrese de que no hay ninguna columna con un nombre similar y que todos los campos están completos. Si el problema persiste, póngase en contacto con el equipo de soporte.","free":"Valor libre","title":"Add metadata column"},"status":{"closed":"Cerrado","open":"Abrir","active":"Abrir","archived":"Cerrado"},"type":{"short":"Corto","featurefilm":"Largometraje","tvshow":"programa de televisión"}},"profile":{"change_avatar":"Cambiar avatar","info_title":"Información","language":"Idioma","notifications_enabled":"Notificaciones de correo electrónico habilitadas","notifications_slack_enabled":"Notificaciones de Slack activadas","notifications_slack_user":"Slack ID","password_title":"Cambiar contraseña","timezone":"Zona horaria","title":"Su perfil","avatar":{"title":"Cambiar avatar","error_upload":"Se ha producido un error al subir la imagen."},"change_password":{"button":"Cambiar contraseña","error":"Se ha producido un error al cambiar la contraseña. Por favor, verifique su contraseña actual.","success":"Su contraseña ha sido cambiada con éxito!","unvalid":"La confirmación de su nueva contraseña no coincide o es demasiado corta (se esperan al menos 7 caracteres)."},"save":{"button":"Guardar cambios","error":"Se ha producido un error al guardar los cambios"}},"settings":{"change_logo":"Cambiar logotipo","integrations":"Integraciones","logo":"Estudio de logotipos","no_logo":"No hay conjunto de logotipos.","set_logo":"Logotipo de estudio","title":"Ajustes","fields":{"name":"Nombre del estudio","hours_by_day":"Horas por día","slack_token":"Slack token (opcional)","use_original_name":"Usar el nombre del archivo original para las descargas"},"production":{"empty_list":"La lista está actualmente vacía. Significa que todos los datos de los ajustes principales están disponibles para los usuarios. Añada algunas entradas para limitar las opciones de esta producción."},"save":{"button":"Grabar parametrizaciones","error":"Se ha producido un error del servidor al guardar la configuración"}},"task_status":{"create_error":"Se ha producido un error al guardar la secuencia. ¿Está seguro que no hay otro estado que tenga el mismo nombre? ","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","delete_error":"Se ha producido un error al borrar este estado de la tarea. Es probable que haya datos vinculados a él. ¿Está seguro de que este status de tarea no tiene ninguna tarea vinculada a él?","edit_title":"Editar el estado de la tarea","number":"estado de la tarea | estado de la tarea","new_task_status":"Añadir un status de tarea","title":"Estado de la tarea","fields":{"color":"Color","is_artist_allowed":"Se permite al artista","is_client_allowed":"Se permite al cliente","is_done":"Se hace","is_reviewable":"Es revisable","is_retake":"Tiene valor de retomar","name":"Nombre","short_name":"Denominación breve"}},"task_types":{"delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","delete_error":"Se ha producido un error al eliminar este tipo de tarea. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de tarea no tiene ninguna tarea vinculada a ella?","edit_title":"Tratar tipo de tarea","create_error":"Se ha producido un error al crear la tarea. Asegúrese que no hay otra tarea con el mismo nombre.","new_task_type":"Añadir un tipo de tarea","number":"tipo de tarea | tipos de tarea","title":"Tipos de tareas","fields":{"dedicated_to":"Para","color":"Color","name":"Nombre","allow_timelog":"Registro de tiempo","priority":"Prioridad"}},"sequences":{"all_sequences":"Todas las secuencias","edit_error":"Se ha producido un error al guardar la secuencia. ¿Está seguro que no hay otra secuencia con el mismo nombre?","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","delete_error":"Se ha producido un error al borrar esta secuencia. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta secuencia no tiene ninguna toma vinculada a ella?","edit_title":"Tratar secuencia","empty_list":"No hay ninguna secuencia en la producción. ¿Qué tal si creamos algunos?","empty_list_client":"No hay secuencia en esta producción.","new_sequence":"Nueva secuencia","number":"secuencia | secuencias","title":"Estadísticas de secuencia","fields":{"name":"denominar","description":"descripción"}},"schedule":{"title":"Calendario","title_main":"Calendario principal","overall_man_days":"Días-hombre","md":"md","zoom_level":"Nivel de zoom","milestone":{"add_milestone":"Añadir hito para","edit_milestone":"Tratar hito para","name":"Nombre","error":"Se ha producido un error al añadir o editar el hito. Por favor, inténtalo de nuevo."}},"quota":{"average":"Promedio","count_label":"Modo de conteo","detail_label":"Nivel de detalle","details_name":"Nombre","details_seconds":"Segundos","details_frames":"Frames","month_label":"Mes","no_quota":"No hay cuota para este tipo de tarea","name":"Nombre","quota_day":"Cuota por día","quota_week":"Cuota por semana","quota_month":"Cuota por mes","year_label":"Año","title":"Cupos","type_label":"Tipo"},"shots":{"casting":"Casting","creation_explaination":"Para añadir tomas, primero tienes que crear un episodio y una secuencia. Escriba el nombre de un episodio en la parte inferior de la columna de la izquierda y luego haga clic en añadir para crear un nuevo episodio. Seleccione este episodio y repita la misma operación para la secuencia. Finalmente seleccione una secuencia y escriba el nombre de una toma en el campo en la parte inferior de la columna derecha. Haga clic en el botón \\"Agregar\\" que aparece a continuación. Tu primera toma fue creada. Ahora puede añadir muchos más! Si no es un programa de televisión, tienes que crear directamente una secuencia.","delete_text":"¿Está seguro de que desea eliminar {name} de su base de datos?","delete_error":"Se ha producido un error al borrar esta imagen. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta toma no tiene ninguna tarea relacionada con ella?","edit_success":"Plan {name} editado con éxito.","edit_fail":"La creación o edición falló, se produjo un error. Asegúrese de que no está renombrando la toma con un nombre ya listado para una secuencia dada.","edit_title":"Editar foto","empty_list":"No hay ninguna toma en la producción. ¿Qué tal si creamos algunos?","empty_list_client":"No hay ninguna toma en esta producción.","episodes":"Episodios","history":"Historial de valores plan","new_shot":"Agregar una foto","new_shots":"Añadir tomas","new_sequences":"Añadir secuencias","new_episodes":"Añadir episodios","no_casting":"El lanzamiento de granadas está vacío.","number":"Plan | Disparos","manage":"Crear tomas","new_success":"Plan {name} creado con éxito.","padding":"Acolchado de chupitos","restore_text":"¿Está seguro de que desea restaurar {name} en su base de datos?","restore_error":"Se ha producido un error al restaurar esta toma.","sequences":"Secuencias","tasks":"Tareas de los chupitos","title":"Plans","fields":{"description":"Descripción","nb_frames":"Marcos","episode":"Episodio","frame_in":"En","frame_out":"Fuera","fps":"SPD","name":"Nombre","production":"Prod","sequence":"Secuencia","time_spent":"Tiempo"}},"server_down":{"text":"Póngase en contacto con el servicio de asistencia técnica de su proveedor, su administrador de sistemas o su departamento de TI para comprender qué es lo que está fallando.","title":"Kitsu encontró un error al alcanzar su API de datos."},"statistics":{"count":"Conteos","count_mode":"Modo de recuento","display_mode":"Modo de visualización","frames":"Marcos","pie":"Gráficos circulares","shots":"Plans"},"tasks":{"add_preview":"Añadir vista previa","add_preview_error":"Se ha producido un error al añadir la vista previa.","assign":"Asigne una tarea a: | Asignar {nbSelectedTasks} tareas a:","back_to_list":"volver a la lista","bigger":"Ampliar el panel de tareas","change_status_to":"Cambiar el estado de la tarea a:","change_preview":"Cambiar la vista previa","change_priority":"Cambiar la prioridad a:","clear_assignations":"asignaciones claras","comment_image":"Adjunte una imagen a su comentario","create_for_selection":"Crear tarea para cada celda vacía:","create_tasks":"Añadir tareas","create_tasks_shot":"Añadir tareas para las tomas actuales","create_tasks_shot_explaination":"Va a crear una nueva tarea para cada toma de la lista actual para el tipo de tarea dado. ¿Quieres continuar?","create_tasks_shot_failed":"Se ha producido un error en el servidor durante el proceso de creación.","create_tasks_asset":"Añadir tareas para los assets actuales","create_tasks_asset_explaination":"Va a crear una nueva tarea para cada asset fijo de la lista actual para el tipo de tarea en cuestión. ¿Quieres continuar?","create_tasks_asset_failed":"Se ha producido un error en el servidor durante el proceso de creación.","current":"Tarea a realizar","current_status":"Situación actual","delete_all_text":"¿Está seguro de que desea eliminar todas las tareas de {name}? Por favor, confirme escribiendo el nombre del tipo de tarea que desea eliminar en el campo de texto.","delete_all_error":"Ha fallado la eliminación de todas las tareas de un determinado tipo de tarea.","delete_error":"Se ha producido un error al eliminar la tarea.","delete_comment":"¿Seguro de que quiere borrar el último comentario?","delete_comment_error":"Se ha producido un error al eliminar un comentario.","delete_for_selection":"Eliminar tareas seleccionadas:","delete_preview":"¿Estás seguro de que quieres borrar esta vista previa?","delete_preview_error":"Se ha producido un error al eliminar la vista previa.","edit_comment":"Editar cómo","done":"Hecho","download_pdf_file":"Descargar archivo.{extension}","feedback":"retroalimentación","full_screen":"Visualización en pantalla completa","hide_assignations":"Suprimir asignaciones","hide_infos":"Ocultar información adicional","my_tasks":"Mis tareas","next":"tarea siguiente","no_assignation_right":"No se le permite gestionar asignaciones","no_comment":"Actualmente no hay ningún comentario para esta tarea.","no_preview":"Actualmente no hay ninguna vista previa para esta tarea.","no_task_selected":"Ninguna tarea seleccionada","number":"tarea | tareas","preview":"Previsualizaciones","previous":"tarea previa","unsubscribe_notifications":"Darse de baja de las notificaciones","set_estimations":"Establecer estimaciones para las tareas seleccionadas:","set_preview":"Establecer esta vista previa como miniatura","set_preview_error":"Se ha producido un error al configurar la vista previa como miniatura.","set_preview_done":"Esta vista previa se utiliza como miniatura para la entidad actual.","select_preview_file":"Por favor, seleccione una imagen de su disco duro para utilizarla como vista previa de la tarea actual:","show_assignations":"Mostrar asignaciones","show_infos":"Mostrar información adicional","subscribe_notifications":"Suscribirse a las notificaciones","select_image_file":"Por favor, selecciona la imagen de tu disco duro que quieres adjuntar a tu comentario:","tasks":"Tareas","validation":"Validación","with_comment":"Con un comentario...","fields":{"asset_type":"Tipo de asset","assignees":"Asignados","count":"Cuenta","due_date":"Dos fechas","duration":"Duración","end_date":"Fecha de finalización","entity":"Entidad","entity_name":"Nombre","estimated_quota":"Cuota media","estimation":"Estimación","frames":"Marco.","last_comment":"Último comentario","last_comment_date":"Último comentario","priority":"Prioridad","production":"Prod","real_end_date":"Fecha de validación","real_start_date":"Fecha WIP","retake_count":"Reasignaciones","seconds":"Segundos","sequence":"Secuencia","start_date":"Fecha de inicio","task_status":"Estado","task_status_short_name":"Estado","task_type":"Tipo"},"colors":{"title":"Colorear","neutral":"Neutral","status":"Color de estado","late":"Tarde en rojo"},"priority":{"emergency":"Emergencia","normal":"Normal","high":"Alto","very_high":"Muy Alto"}},"timesheets":{"detail_level":"Nivel de detalle","done_tasks":"Tareas realizadas","export_timesheet":"Hoja de horas de exportación","hours":"horario","month":"Mes","time_spents":"Tiempo empleado (horas)","title":"Hojas horarias","year":"Año"},"wrong_browser":{"title":"Tu navegador no es compatible con Kitsu","text":"Kitsu sólo puede ser usado con navegadores Firefox y Chrome."}}}')},a3e1:function(e,t,s){},a423:function(e,t,s){"use strict";s("edd5")},a45e:function(e,t,s){"use strict";s("0185")},a4d5:function(e,t,s){},a504:function(e,t,s){},a60a:function(e,t,s){},a625:function(e){e.exports=JSON.parse('{"default":{"assets":{"cast_in":"Cast in","delete_error":"Er is een fout opgetreden bij het verwijderen van deze asset. Er is waarschijnlijk data aan gekoppeld. Weet je zeker dat er geen asset type aan gekoppeld is?","delete_text":"Weet u zeker dat u {name} uit uw database wilt verwijderen?","edit_fail":"Opslaan mislukt, dit kan komen omdat een asset met dezelfde naam reeds bestaat","edit_success":"Asset {name} succesvol aangepast","edit_title":"Asset aanpassen","empty_list":"Er zijn geen assets in deze productie. Zullen we er een aanmaken?","empty_list_client":"Er zijn geen assets in deze productie.","new_asset":"Asset aanmaken","new_assets":"Asset toevoegen","new_success":"De asset {name} is succesvol aangemaakt.","no_cast_in":"De asset is niet gecast in een shot","number":"asset | assets","restore_text":"Weet je zeker dat je {name} wilt herstellen in de database?","restore_error":"Er is een fout opgetreden bij het herstellen van de asset.","tasks":"Asset taken","title":"Assets","fields":{"description":"Omschrijving","episode":"Afl.","name":"Naam","production":"Prod","time_spent":"Tijd","type":"Type","hidden_from_client":"Getoond aan klant"}},"asset_types":{"all_asset_types":"Alle asset types","create_error":"Er is een fout opgetreden bij het saven van de asset type. Weet je zeker dat er geen asset type bestaat met dezelfde naam?","delete_text":"Weet u zeker dat u {name} wilt verwijderen uit uw database?","delete_error":"Er is een fout opgetreden bij het verwijderen van dit asset-type. Er zijn waarschijnlijk assets aan verbonden. Weet u zeker dat er geen assets aan dit asset-type verbonden zijn?","edit_title":"Asset-type aanpassen","new_asset_type":"Asset-type toevoegen","number":"asset type | asset types","title":"Asset Types","production_title":"Asset Types Statistieken","fields":{"name":"Naam"}},"breakdown":{"all_assets":"Alle beschikbare assets","edit_label":"Asset label aanpassen","empty":"Lege casting","label":"Label","picture_mode":"Wissel naar galerij modus","text_mode":"Wissel naar text modus","title":"","options":{"fixed":"","animate":""}},"comments":{"add_attachment":"Bijlage toevoegen","add_checklist":"Checklist toevoegen","add_comment":"Comment toevoegen...","add_preview":"Preview toevoegen","change_preview":"Preview wijzigen","comment_from_client":"Commentaar van klant","edit_title":"Commentaar aanpassen","empty_text":"Deze comment is leeg.","edit_error":"Er is een fout opgetreden bij het aanpassen van het commentaar. Contacteer ons support team.","error":"Er is een fout opgetreden bij het plaatsen van het commentaar.","no_file_attached":"Geen bijlagen gekoppeld.","pin":"Vastzetten","pinned":"Vastgezet","post_status":"Plaats commentaar","retake":"Retake","revision":"revisie","set_status_to":"Zet status op","task_placeholder":"Nieuw item...","text":"Tekst","unpin":"Losmaken","validated":"Gevalideerd!","validation_required":"Validatie vereist","fields":{"text":"tekst"}},"custom_actions":{"create_error":"Er is een fout opgetreden bij het opslaan van de zelfbepaalde actie. Weet je zeker dat er geen andere actie is met dezelfde naam?","delete_text":"Weet je zeker dat je zelfbepaalde actie {name} wilt verwijderen uit de database?","delete_error":"Er is een fout opgetreden bij het verwijderen van de zelfbepaalde actie.","edit_title":"Pas een zelfbepaalde actie aan","new_custom_action":"Voeg een zelfbepaalde actie toe","number":"zelfbepaalde actie | zelfbepaalde acties","run_for_selection":"Voer zelfbepaalde actie uit voor geselecteerde taken","title":"Zelfbepaalde acties","fields":{"name":"Naam","url":"URL","entity_type":"Entiteit Type","is_ajax":"Gebruik AJAX"},"entity_types":{"all":"Allen","shot":"Shot","asset":"Asset"}},"entities":{"build_filter":{"asset_type":"Asset type","all_types":"Alle asset types","assignation":"Toewijzing","assignation_exists_for":"Toewijzing bestaat voor","assigned_to":"Toegewezen aan","descriptor":"Metadata","equal":"Gelijk","in":"In","no_assignation_for":"Geen toewijzingen bestaan voor","no_filter":"Geen filter","not_equal":"Niet gelijk","not_assigned_to":"Niet toegewezen aan","status":"Taak status","thumbnail":"Thumbnail aanwezig","title":"Filter op...","union_and":"Gebruik alle volgende filters","union_or":"Gebruik een van de volgende filters","with_thumbnail":"Met thumbnail","without_thumbnail":"Zonder thumbnail"},"thumbnails":{"error":"Er is een fout opgetreden bij het uploaden van thumbnails","explaination":"Een thumbnail toevoegen vereist het instellen van een nieuwe preview. Om meerdere thumbnails tegelijk te kiezen moet je eerst een taak type kiezen die gebruikt wordt om de nieuwe previews te maken. De thumbnail wordt dan ingesteld met de nieuwe preview.","explaination_two":"Selecteer dan de bestanden die je wilt uploaden. Om de juiste entiteit te vinden moeten de bestandsnamen voldoen aan het volgende patroon:","shots_pattern":"\\"SequentieNaam ShotNaam\\" eg. SQ01_SH01.\\n","assets_pattern":"\\"AssetType AssetNaam\\" bv. Omgeving_Bos.\\n","select_files":"Selecteer bestanden","selected_files":"Geselecteerde bestanden","select_task_type":"Kies taak type","title":"Voeg thumbnails toe","undefined":"Ongedefinieerd","undefined_pattern":"Ongedefinieerd","upload":"Voeg thumbnails toe"}},"estimation":{"title":"Schatting"},"episodes":{"all_episodes":"Alle afleveringen","edit_error":"Er is een fout opgetreden tijdens het opslaan van de aflevering. Weet je zeker dat er geen aflevering bestaat met dezelfde naam?","delete_error":"Er is een fout opgetreden tijdens het verwijderen van deze aflevering. Waarschijnlijk is er nog data aan gekoppeld. Weet je zeker dat de aflevering geen sequenties eraan gekoppeld heeft?","delete_text":"Weet je zeker dat je {name} wilt verwijderen uit de database? All gerelateerde shots en previews worden verwijderd. Bevestig met het typen van de aflevering naam hieronder.","edit_title":"Aflevering aanpassen","empty_list":"Er is nog geen aflevering in deze productie. Wil je er een maken?","empty_list_client":"Er is nog geen aflevering in deze productie.","new_episode":"Nieuwe aflevering","number":"aflevering | afleveringen","title":"Aflevering statistieken","fields":{"name":"naam","description":"omschrijving"}},"keyboard":{"altdown":"Verplaats taak selectie naar beneden","altj":"Selecteer vorige preview","altk":"Selecteer volgende preview","altleft":"Verplaats taak selectie naar links","altright":"Verplaats taak selectie naar rechts","altup":"Verplaats taak selectie naar boven","annotations":"Annotaties","draw":"Zet tekenmodus aan","navigation":"Navigatie","redo":"Redo","undo":"Undo","playlist_navigation":"Afspeellijst navigatie","remove_annotation":"Verwijder annotatie","shortcuts":"Snelkoppelingen"},"login":{"back_to_login":"Ga terug naar de log-in pagina","forgot_password":"Wachtwoord vergeten?","login":"Log in","login_failed":"Log in mislukt, controleer uw gegevens","login_page":"Annuleren","redirecting":"Redirect in {secondsLeft} seconde...","reset_change_password":"Verander wachtwoord","reset_change_password_form_failed":"Er is een probleem met het ingevulde wachtwoord. Controleer dat uw wachtwoord minstens 7 tekens lang is en beide wachtwoorden gelijk zijn.","reset_change_password_failed":"Wachtwoord veranderen mislukt. Probeer de hele procedure alstublieft nogmaals.","reset_change_password_succeed":"Uw wachtwoord is succesvol veranderd. Ga terug naar de log-in pagina om deze te gebruiken.","reset_change_password_title":"Vul een nieuw wachtwoord in","reset_password":"Wachtwoord resetten","reset_password_failed":"Wachtwoord resetten mislukt. Verifieer uw e-mail adres.","reset_password_succeed":"Wachtwoord resetten succesvol. Controleer uw inbox.","reset_password_title":"Vul uw e-mail adres in om het wachtwoord te resetten.","title":"Log in bij Kitsu","fields":{"email":"E-mail","password":"Wachtwoord","password2":"Wachtwoord herhalen"}},"main":{"about":"Over","add":"toevoegen","all":"Alle","all_assets":"Alle assets","admin":"Admin","cancel":"Annuleren","clear_selection":"Selectie vernieuwen","close":"Afsluiten","confirmation":"Bevestigen","confirmation_and_stay":"Bevestigen en houd open","date":"Datum","dark_theme":"Donker thema","days_spent":"dagen besteed","days_estimated":"dagen geschat","delete":"Verwijderen","delete_all":"Verwijder allen","delete_text":"Weet je zeker dat je {name} wilt verwijderen uit de database?","documentation":"Documentatie","edit":"Aanpassen","empty_comment":"Lege comment","end_date":"Einddatum","files_selected":"geselecteerde bestanden","for":"Voor","go_productions":"Ga naar producties","history":"geschiedenis","info":"Informatie","or":"of","no":"Nee","loading":"Laden...","loading_data":"Data laden","loading_error":"Er is een fout opgetreden tijdens het laden van de data.","logout":"Uitloggen","modify":"Aanpassen","minimize":"Minimaliseren","main_pack":"","maximize":"Maximaliseren","nb_frames":"frame | frames","person":"Persoon","profile":"Profiel","production":"Productie","remove":"Verwijderen","save":"Opslaan","sort_by":"Sorteren bij","sorted_by":"Gesorteerd bij","start_date":"Startdatum","studio":"Studio","tutorials":"Handleidingen","user":"Gebruiker","white_theme":"Lichte thema","yes":"Ja","csv":{"choose":"Kies","error_upload":"Er is een fout opgetreden tijdens het uploaden van de CSV.","export_file":"Exporteren","import_file":"Importeren","import_title":"Importeer data vanuit CSV","legend":"Legenda","legend_ok":"Herkende data","legend_ignored":"Genegeerde data","legend_missing":"Ontbrekende data","legend_disabled":"Data die niet zal worden geupdate of aangemaakt","legend_overwrite":"Data die wordt geupdate","paste":"Plakken","paste_code":"Plak hier uw CSV data","preview":"Voorbeeld","preview_episode_name":"Aflevering naam","preview_title":"Voorbeeld van de geimporteerde data","preview_description":"Upload een .csv bestand om uw \\"board\\" te vullen met posts.","preview_required":"NB: Headers moeten inbegrepen zijn als eerste rij.","preview_reupload":"Herupload .CSV bestand","required_fields":"CSV vereist de volgende kolommen","select_file":"Selecteer een bestand uit een folder","tab_select_file":"Upload een CSV bestand","tab_paste_code":"Plak een CSV bestand","unknown":"Onbekende kolom","upload_file":"Bladeren","options":{"title":"Opties","update":"Update bestaande data"}}},"menu":{"assign_tasks":"Taak toewijzen","change_priority":"Prioriteit aanpassen","change_status":"Status aanpassen","create_tasks":"Taken aanmaken","delete_tasks":"Taken verwijderen","generate_playlists":"Genereer playlists","run_custom_action":"Voer zelfbepaalde actie uit","set_estimations":"Stel schatting in"},"news":{"all":"Alles","commented_on":"gereageerd op","infos":"Info","no_news":"Er is geen nieuws voor deze productie of filter.","only_comments":"Alleen comments","only_previews":"Alleen previews","set_preview_on":"stel preview in op","task_status":"Taak status","task_type":"Taak type","title":"Nieuwsfeed"},"not_found":{"text":"Er is iets fout gegaan met de link waar je op geklikt hebt, we raden je aan om terug te gaan naar de thuis pagina.","title":"Pagina niet gevonden... zoek je iets dat je hebt verwijderd?"},"notifications":{"and_change_status":"en status aangepast naar","assigned_you":"heeft jouw toegewezen aan","commented_on":"gereageerd op","mention_you_on":"heeft jouw genoemd in","no_notifications":"Er zijn geen notificaties voor jouw huidige projecten.","unread_notifications":"ongelezen notificatie | ongelezen notificaties","title":"Notificaties","with_preview":"met een preview"},"people":{"active":"Actied","active_persons":"actief persoon / actieve personen","add_member_to_team":"Voeg een gebruiker toe aan het team:","create_invite":"Maak en stuur uitnodiging","create_error":"Er is een fout opgetreden tijdens het aanmaken van deze persoon. Neem contact op met uw support team voor meer informatie.","delete_error":"Er is een fout opgetreden bij het verwijderen van deze persoon. Er is waarschijnlijk data aan gekoppeld. Weet je zeker dat de persoon nergens aan is toegewezen of een reactie heeft geschreven?","delete_text":"Weet je zeker dat je {personName} wilt verwijderen uit de database? Alle gerelateerde reacties en previews zullen worden verwijderd. Bevestig hieronder door de volledige naam van de persoon in te vullen.","edit_title":"Persoon wijzigen","empty_team":"Er is niemand in dit project team.","invite":"Stuur een uitnodiging","invite_error":"Er is een fout opgetreden tijdens het versturen van de uitnodiging","invite_success":"Uitnodiging succesvol verzonden","new_person":"Voeg een nieuwe werknemer toe","no_task_assigned":"Er zijn geen lopende taken aan jou toegewezen","persons":"persoon | personen","running_tasks":"Lopende taken","select_person":"Kies een persoon...","team":"Team","title":"Mensen","unactive":"Inactief","csv":{"import_file":"Importeer een .csv bestand","export_file":"Download een .csv bestand","import_title":"Importeer data uit een CSV bestand","required_fields":"De CSV file vereist the volgende kolommen","select_file":"Selecteer een bestand uit een folder:","error_upload":"Er is een probleem opgetreden tijdens het uploaden van het CSV bestand."},"fields":{"first_name":"Voornaam","last_name":"Achternaam","email":"E-mail","phone":"Telefoonnummer","role":"Rol","old_password":"Huidig wachtwoord","password":"Nieuw wachtwoord","password_2":"Nieuw wachtwoord (herhalen)","active":"Actief"},"list":{"name":"Naam","email":"E-mail","phone":"Telefoon","role":"Rol","active":"Actief"},"role":{"admin":"Studio Manager","client":"Cliënt","manager":"Supervisor","user":"Artist","undefined":"ongedefinieerd","vendor":"Leverancier"}},"playlists":{"add_assets":"Asset toevoegen","add_selection":"Selectie toevoegen","add_shots":"Shot toevoegen","add_sequence":"Hele sequentie toevoegen","add_episode":"Hele aflevering toevoegen","add_movie":"Hele film toevoegen","apply_task_type_change":"Dit stelt een laatste revisie in voor het gekozen taak type voor alle shots.","available_build":"","build_daily":"","build_weekly":"","build_mp4":"Maak .mp4 (beta)","building":"Maken...","client_playlist":"Klant Playlist","create_for_selection":"Genereer een playlist voor shot selectie","create_title":"Creëer playlist","created_at":"Gecreëerd op:","delete_text":"Weet je zeker dat je {name} wilt verwijderen uit de database?","delete_error":"Er is een fout opgetreden tijdens het verwijderen van de playlist.","edit_error":"Er is een fout opgetreden tijdens het opslaan van de playlist.","download_zip":"Download .zip","failed":"Mislukt","for_client":"","for_studio":"","edit_title":"","last_creation":"","last_modification":"","loading_error":"Er is een server error opgetreden. De playlists kunnen niet geladen worden.","new_playlist":"Voeg een playlist toe","no_build":"","no_playlist":"Er is geen playlist voor dit project of de aflevering","no_preview":"Geen preview","no_selection":"","no_sequence_for_episode":"","no_shot_for_production":"","select_shot":"","select_playlist":"","select_task_type":"","title":"","updated_at":"Geupdate om:","remove":"verwijderen","fields":{"name":"Naam","created_at":"Aanmaakdatum","updated_at":"Update datum","for_entity":"Kies entiteit om weer te geven","for_client":"Wordt gedeeld met"},"actions":{"annotation":"Annotatie","annotation_text":"Dubbelklik op de preview om tekst toe te voegen","annotation_delete":"Verwijder annotatie","annotation_redo":"Redo annotatie","annotation_undo":"Undo annotatie","annotation_big":"Groot","annotation_medium":"Gemiddeld","annotation_small":"Klein","change_task_type":"Verander task type","comments":"Toon/Verberg commentaar","delete":"Verwijder afspeellijst","download":"Download...","edit":"Verander playlist","entity_list":"Toon/Verberg entiteiten lijst","fullscreen":"Volledig scherm","next_frame":"Volgend frame","next_shot":"Volgend shot","pause":"Pauzeer","play":"Afspelen","previous_frame":"Vorig frame","previous_shot":"Volgend frame","save_playlist":"Afspeellijst opslaan","speed":"Verander snelheid","split_screen":"Scherm splitsen"}},"productions":{"current":"Geselecteerde productie","delete_text":"Weet je zeker dat je {name} wilt verwijderen uit de database? Bevestig in het tekstveld met de naam van het project dat je wilt verwijderen.","delete_error":"Er is een probleem opgetreden tijdens het verwijderen van deze productie. Er is waarschijnlijk data aan gekoppeld. Weet je zeker dat de productie geen taken, shots of assets gekoppeld heeft? Kitsu staat het verwijderen van producties niet toe. Indien je de productie niet meer wilt zien kan je deze afsluiten.","edit_title":"Productie aanpassen","new_production":"Voeg een productie toe","number":"productie | producties","open_productions":"Mijn producties","picture":"","title":"","home":{"create_new":"","empty":"","no_task":"","no_prod_for_client":"","title":"","welcome":""},"fields":{"fps":"","name":"","ratio":"","resolution":"","status":"","type":""},"metadata":{"add_explaination":"","add_failed":"","add_new_values":"","available_values":"","choices":"","delete_text":"","delete_error":"Er is een fout opgetreden bij het verwijderen van de metadata kolom","error":"Er is een fout opgetreden tijdens het toevoegen van de metadata kolom. Controleer of er geen dubbele namen zijn en dat alle velden zijn gevuld. Als het probleem blijft neem dan contact op met het support team","free":"","title":"Metadata kolom toevoegen"},"status":{"closed":"Gesloten","open":"Open","active":"Open","archived":"Gesloten"},"type":{"short":"Short","featurefilm":"Feature Film","tvshow":"TV Show"}},"profile":{"change_avatar":"Avatar aanpassen","info_title":"Informatie","language":"Taal","notifications_enabled":"E-mail notificaties ingeschakeld","notifications_slack_enabled":"Slack notificaties ingeschakeld","notifications_slack_user":"Slack gebruikersnaam","password_title":"Wachtwoord aanpassen","timezone":"Tijdzone","title":"Jouw profiel","avatar":{"title":"","error_upload":""},"change_password":{"button":"","error":"","success":"","unvalid":""},"save":{"button":"","error":""}},"settings":{"change_logo":"","integrations":"","logo":"","no_logo":"","set_logo":"","title":"","fields":{"name":"","hours_by_day":"","slack_token":"","use_original_name":""},"production":{"empty_list":""},"save":{"button":"","error":""}},"task_status":{"create_error":"","delete_text":"","delete_error":"","edit_title":"","number":"","new_task_status":"","title":"","fields":{"color":"","is_artist_allowed":"","is_client_allowed":"","is_done":"","is_reviewable":"","is_retake":"","name":"","short_name":""}},"task_types":{"delete_text":"","delete_error":"","edit_title":"","create_error":"","new_task_type":"","number":"","title":"","fields":{"dedicated_to":"","color":"","name":"","allow_timelog":"","priority":""}},"sequences":{"all_sequences":"","edit_error":"","delete_text":"","delete_error":"","edit_title":"","empty_list":"","empty_list_client":"","new_sequence":"","number":"","title":"","fields":{"name":"","description":""}},"schedule":{"title":"","title_main":"","overall_man_days":"","md":"","zoom_level":"","milestone":{"add_milestone":"","edit_milestone":"","name":"","error":""}},"quota":{"average":"","count_label":"","detail_label":"","details_name":"","details_seconds":"","details_frames":"","month_label":"","no_quota":"","name":"","quota_day":"","quota_week":"","quota_month":"","year_label":"","title":"","type_label":""},"shots":{"casting":"","creation_explaination":"","delete_text":"","delete_error":"","edit_success":"","edit_fail":"","edit_title":"","empty_list":"","empty_list_client":"","episodes":"","history":"","new_shot":"","new_shots":"","new_sequences":"","new_episodes":"","no_casting":"","number":"","manage":"","new_success":"","padding":"","restore_text":"","restore_error":"","sequences":"","tasks":"","title":"","fields":{"description":"","nb_frames":"","episode":"","frame_in":"","frame_out":"","fps":"","name":"","production":"","sequence":"","time_spent":""}},"server_down":{"text":"","title":""},"statistics":{"count":"","count_mode":"","display_mode":"","frames":"","pie":"","shots":""},"tasks":{"add_preview":"","add_preview_error":"","assign":"","back_to_list":"","bigger":"","change_status_to":"","change_preview":"","change_priority":"","clear_assignations":"","comment_image":"","create_for_selection":"","create_tasks":"","create_tasks_shot":"","create_tasks_shot_explaination":"","create_tasks_shot_failed":"","create_tasks_asset":"","create_tasks_asset_explaination":"","create_tasks_asset_failed":"","current":"","current_status":"","delete_all_text":"","delete_all_error":"","delete_error":"","delete_comment":"","delete_comment_error":"","delete_for_selection":"","delete_preview":"","delete_preview_error":"","edit_comment":"","done":"","download_pdf_file":"","feedback":"","full_screen":"","hide_assignations":"","hide_infos":"","my_tasks":"","next":"","no_assignation_right":"","no_comment":"","no_preview":"","no_task_selected":"","number":"","preview":"","previous":"","unsubscribe_notifications":"","set_estimations":"","set_preview":"","set_preview_error":"","set_preview_done":"","select_preview_file":"","show_assignations":"","show_infos":"","subscribe_notifications":"","select_image_file":"","tasks":"","validation":"","with_comment":"","fields":{"asset_type":"","assignees":"","count":"","due_date":"","duration":"","end_date":"","entity":"","entity_name":"","estimated_quota":"","estimation":"","frames":"","last_comment":"","last_comment_date":"","priority":"","production":"","real_end_date":"","real_start_date":"","retake_count":"","seconds":"","sequence":"","start_date":"","task_status":"","task_status_short_name":"","task_type":""},"colors":{"title":"","neutral":"","status":"","late":""},"priority":{"emergency":"","normal":"","high":"","very_high":""}},"timesheets":{"detail_level":"","done_tasks":"","export_timesheet":"","hours":"","month":"","time_spents":"","title":"","year":""},"wrong_browser":{"title":"","text":""}}}')},a6b7:function(e,t,s){},a91d:function(e,t,s){},ac61:function(e,t,s){},acc7:function(e,t,s){},ad6c:function(e,t,s){e.exports=s.p+"img/kitsu.b07d6464.png"},b030:function(e,t,s){"use strict";s("e8b8")},b11e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-timesheet data-list"},[s("div",{staticClass:"flexrow timesheet-header"},[s("div",{staticClass:"flexrow-item current-date"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input short",language:e.locale,"disabled-dates":e.disabledDates,"monday-first":!0,format:"yyyy-MM-dd"},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),s("div",{staticClass:"flexrow-item flexrow time-spent-total"},[e._v(" - "+e._s(e.timeSpentTotal)+" "+e._s(e.$t("timesheets.hours"))+" ")]),s("div",{staticClass:"filler"}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:e.$t("timesheets.day_off"),active:e.personIsDayOff},on:{click:e.toggleDayOff}})],1),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{ref:"th-prod",staticClass:"datatable-row-header datatable-row-header--nobd production",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.production"))+" ")]),s("th",{ref:"th-type",staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.task_type"))+" ")]),s("th",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.entity"))+" ")]),s("th",{staticClass:"time-spent",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("timesheets.time_spents"))+" ")])])]),e.tasks.length>0&&!e.isLoading?s("tbody",{staticClass:"datatable-body"},e._l(e.displayedTasks,(function(t,i){return s("tr",{key:t.id+"-"+i,staticClass:"datatable-row"},[s("th",{staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"row"}},[s("production-name-cell",{attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}})],1),s("task-type-cell",{staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{"production-id":t.project_id,"task-type":e.taskTypeMap[t.task_type_id]}}),s("th",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX}},[s("router-link",{attrs:{to:e.entityPath(t)}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:t.entity_preview_file_id}}}),s("span",[e._v(" "+e._s(t.full_entity_name)+" ")])],1)])],1),e.personIsDayOff?s("td"):s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)})),0):e._e(),e.isLoading||e.hideDone?e._e():s("tbody",{staticClass:"datatable-body"},[e.hideDone?e._e():s("tr",{staticClass:"datatable-type-header"},[s("th",{attrs:{colspan:"4",scope:"rowgroup"}},[s("div",{staticClass:"datatable-row-header"},[s("page-subtitle",{attrs:{text:e.$t("timesheets.done_tasks")}})],1)])]),e._l(e.doneTasks,(function(t,i){return s("tr",{key:t+"-"+i,staticClass:"datatable-row"},[s("th",{staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"row"}},[s("production-name-cell",{attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}})],1),s("task-type-cell",{staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{"production-id":t.project_id,"task-type":{id:t.task_type_id,name:t.task_type_name,color:t.task_type_color}}}),s("th",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX}},[s("router-link",{attrs:{to:t.entity_path}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1),e.personIsDayOff?e._e():s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)}))],2)])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+" ")]),s("delete-modal",{attrs:{text:e.$t("timesheets.confirm_day_off"),active:e.modals.dayOff},on:{confirm:function(t){e.modals.dayOff=!1,e.$emit("set-day-off")},cancel:function(t){e.modals.dayOff=!1}}})],1)},n=[],a=s("5530"),o=(s("a9e3"),s("fb6a"),s("b0c0"),s("2f62")),r=s("7f45"),c=s.n(r),l=s("fa33"),d=s("2430"),u=s("de26"),p=s("de40"),m=s("5f48"),h=s("bb21"),f=s("8751"),_=s("09a4"),v=s("e60b"),g=s("58f5"),y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"value flexrow-item"},[e._v(" "+e._s(e.value)+" ")]),s("vue-slider",e._b({ref:"slider",staticClass:"flexrow-item slider",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"vue-slider",e.options,!1)),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(1)}}},[e._v("1")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(4)}}},[e._v("4")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(e.organisation.hours_by_day||8)}}},[e._v(" "+e._s(e.organisation.hours_by_day||8)+" ")])],1)])},b=[],k=s("4971"),w=s.n(k),C=(s("24df"),{name:"time-slider-cell",data:function(){return{value:this.duration,options:{show:!0,width:400,min:0,max:10,interval:.5,lazy:!0,marks:!0,hideLabel:!0,piecewise:!0,tooltip:"focus",tooltipPlacement:"bottom",processStyle:{"background-color":"#8F91EB"},railStyle:{background:"#CCC"}}}},components:{VueSlider:w.a},props:{"task-id":{type:String,default:""},duration:{type:Number,default:0}},computed:Object(a["a"])({},Object(o["c"])(["organisation"])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{setValue:function(e){this.value=e}}),watch:{value:function(){this.$emit("change",{taskId:this.taskId,duration:this.value})}}}),S=C,T=(s("1ce5"),s("2877")),x=Object(T["a"])(S,y,b,!1,null,"7dfc5216",null),E=x.exports,P={name:"timesheet-list",components:{ButtonSimple:p["a"],Datepicker:l["a"],DeleteModal:m["a"],EntityThumbnail:h["a"],ProductionNameCell:_["a"],PageSubtitle:f["a"],TableInfo:v["a"],TaskTypeCell:g["a"],TimeSliderCell:E},props:{tasks:{default:function(){return[]},type:Array},doneTasks:{default:function(){return[]},type:Array},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},done:{default:!1,type:Boolean},timeSpentMap:{default:function(){},type:Object},timeSpentTotal:{default:0,type:Number},hideDone:{default:!1,type:Boolean}},data:function(){return{colNamePosX:"",colTypePosX:"",disabledDates:{},page:1,selectedDate:c()().toDate(),modals:{dayOff:!1}}},mounted:function(){this.colTypePosX=this.$refs["th-prod"].offsetWidth+"px",this.colNamePosX=this.$refs["th-prod"].offsetWidth+this.$refs["th-type"].offsetWidth+"px";var e=c()().startOf("isoWeek").toDate();this.disabledDates={to:this.isCurrentUserArtist?e:null,from:c()().toDate()}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isCurrentUserArtist","nbSelectedTasks","personIsDayOff","productionMap","taskTypeMap","user"])),{},{locale:function(){return"fr_FR"===this.user.locale?d["fr"]:d["en"]},displayedTasks:function(){return this.tasks.slice(0,this.page*(u["a"]/2))}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onBodyScroll:function(e,t){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},currentDate:function(){return c()().format("LL")},onSliderChange:function(e){this.$emit("time-spent-change",e)},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};return"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id,e.episode_id&&(s.name="episode-".concat(t),s.params.episode_id=e.episode_id),s},toggleDayOff:function(){this.personIsDayOff?this.$emit("unset-day-off"):this.modals.dayOff=!0}}),watch:{selectedDate:function(){this.$emit("date-changed",this.selectedDate)}}},O=P,A=(s("8511"),Object(T["a"])(O,i,n,!1,null,"65eb52c2",null));t["a"]=A.exports},b16f:function(e,t,s){},b1a6:function(e,t,s){},b482:function(e,t,s){"use strict";s("a6b7")},b4e3:function(e,t,s){},b72a:function(e,t,s){},ba83:function(e,t,s){"use strict";s("4dab")},ba8a:function(e,t,s){},bb21:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isPreview&&e.withLink?s("a",{staticClass:"thumbnail-wrapper",style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"},attrs:{href:e.originalPath,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",style:e.imgStyle})]):e.isPreview&&!e.withLink?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",staticStyle:{}}):s("span",{class:{"thumbnail-picture":!0,"thumbnail-empty":!0,square:e.square},style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"}})},n=[],a=(s("a9e3"),{name:"entity-thumbnail",props:{entity:{default:function(){},type:Object},square:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},maxWidth:{default:null,type:Number},maxHeight:{default:null,type:Number},emptyHeight:{default:30,type:Number},emptyWidth:{default:50,type:Number},previewFileId:{default:null,type:String},withLink:{default:!0,type:Boolean}},computed:{originalPath:function(){return"/api/pictures/originals/preview-files/"+this.entity.preview_file_id+".png"},isPreview:function(){return this.entity.preview_file_id&&this.entity.preview_file_id.length>0},imgStyle:function(){var e={};return this.maxWidth?e["max-width"]=this.maxWidth+"px":this.width&&(e.width=this.width+"px"),this.maxHeight?e["max-height"]=this.maxHeight+"px":this.height&&(e.height=this.height+"px"),e},thumbnailPath:function(){var e=this.previewFileId||this.entity.preview_file_id;return this.square?"/api/pictures/thumbnails-square/preview-files/"+e+".png":"/api/pictures/thumbnails/preview-files/"+e+".png"},thumbnailKey:function(){var e=this.previewFileId||this.entity.preview_file_id;return"thumbnail-".concat(e)}}}),o=a,r=(s("2d24"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"024ea0ea",null);t["a"]=c.exports},bc25:function(e,t,s){"use strict";s("84bf")},bc47:function(e,t,s){},bcd2:function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o}));s("4d90"),s("b680");var i=function(e,t){var s=Math.round(1/t*1e4)/1e4,i=Math.round(e/s),n=i*s;return n=Math.round(1e4*n)/1e4,n},n=function(e,t,s){var i=25;return s&&s.fps&&(i=s.fps),t&&t.fps&&(i=t.fps),Math.round(e/i*1e3)/1e3},a=function(e){var t="".concat(Math.round(e%1*1e3)).padStart(3,"0");t="."+t;try{return new Date(1e3*e).toISOString().substr(14,5)+t}catch(s){return console.error(s),"00:00.000"}},o=function(e,t){var s=Math.floor(e.toFixed(5)*t);return s<0&&(s=0),"".concat(s).padStart(3,"0")}},bd69:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var i=s("2909"),n=(s("7db0"),s("b0c0"),s("d81d"),s("99af"),{created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{descriptorLength:function(){return this.shotMetadataDescriptors?this.shotMetadataDescriptors.length:this.assetMetadataDescriptors.length}},methods:{onAddMetadataClicked:function(){this.$emit("add-metadata")},onMetadataFieldChanged:function(e,t,s){this.$emit("metadata-changed",{entry:e,descriptor:t,value:s.target.value})},onSortByMetadataClicked:function(){var e=this.lastMetadaDataHeaderMenuDisplayed,t=this.currentProduction.descriptors.find((function(t){return t.id===e}));this.$emit("change-sort",{type:"metadata",column:t.field_name,name:t.name}),this.showMetadataHeaderMenu()},onEditMetadataClicked:function(){this.$emit("edit-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},onDeleteMetadataClicked:function(){this.$emit("delete-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},showMetadataHeaderMenu:function(e,t){var s=this.$refs.headerMetadataMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var i=t.srcElement.parentNode.parentNode,n=i.getBoundingClientRect(),a=n.left,o=n.bottom,r=Math.max(100,n.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastMetadaDataHeaderMenuDisplayed=e},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(i["a"])(t))},getMetadataFieldValue:function(e,t){return t.data&&t.data[e.field_name]||""},keyMetadataNavigation:function(e,t,s,i,n){if("ArrowDown"===n)s+=1,s>=t&&(s=0);else if("ArrowLeft"===n)i-=1,i<0&&(i=e-1);else if("ArrowRight"===n)i+=1,i>=e&&(i=0);else{if("ArrowUp"!==n)return;s-=1,s<0&&(s=t-1)}var a="editor-".concat(s,"-").concat(i),o=this.$refs[a][0];o.focus()}}})},be83:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"has-text-centered",style:e.sizeStyle},[e.isWhite?i("img",{attrs:{src:s("c9e4")}}):e.isProcessing?i("square-grid",{style:{margin:"auto"}}):e.isStylish?i("origami",{style:{margin:"auto"}}):i("img",{attrs:{src:s("5c3d")}})],1)},n=[],a=(s("a9e3"),s("d58b")),o={name:"spinner",components:{SquareGrid:a["b"],Origami:a["a"]},props:{isWhite:{type:Boolean,default:!1},isProcessing:{type:Boolean,default:!1},isStylish:{type:Boolean,default:!1},size:{type:Number}},computed:{sizeStyle:function(){return{width:this.size?this.size+"px":"auto"}}}},r=o,c=s("2877"),l=Object(c["a"])(r,i,n,!1,null,"4a96b01c",null);t["a"]=l.exports},c20f:function(e,t,s){},c266:function(e,t,s){"use strict";s("3a7d")},c31e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("entities.build_filter.title"))+" ")]),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.unionOptions,"locale-key-prefix":"entities.build_filter."},model:{value:e.union,callback:function(t){e.union=t},expression:"union"}}),e.isAssets?s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.asset_type"))+" ")]):e._e(),e.isAssets?s("div",{staticClass:"flexrow asset-type-filter"},[s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.operatorOptions,"locale-key-prefix":"entities.build_filter."},model:{value:e.assetTypeFilters.operator,callback:function(t){e.$set(e.assetTypeFilters,"operator",t)},expression:"assetTypeFilters.operator"}}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.assetTypeOptions},model:{value:e.assetTypeFilters.value,callback:function(t){e.$set(e.assetTypeFilters,"value",t)},expression:"assetTypeFilters.value"}})],1):e._e(),s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.status"))+" ")]),e._l(e.taskTypeFilters.values,(function(t,i){return s("div",{key:"task-type-"+i,staticClass:"flexrow task-type-filter"},[s("combobox-task-type",{staticClass:"flexrow-item",attrs:{"task-type-list":e.taskTypeList},model:{value:t.id,callback:function(s){e.$set(t,"id",s)},expression:"taskTypeFilter.id"}}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.taskTypeOperatorOptions,"locale-key-prefix":"entities.build_filter."},on:{input:function(s){return e.onTaskTypeOperatorChanged(t)}},model:{value:t.operator,callback:function(s){e.$set(t,"operator",s)},expression:"taskTypeFilter.operator"}}),s("div",{staticClass:"flexrow-item flexrow value-column"},[e._l(t.values,(function(i,n){return s("combobox-status",{key:"task-type-value-"+n,staticClass:"flexrow-item",attrs:{"task-status-list":e.productionTaskStatuses},model:{value:t.values[n],callback:function(s){e.$set(t.values,n,s)},expression:"taskTypeFilter.values[index]"}})})),"in"===t.operator?s("button-simple",{staticClass:"mt05",attrs:{icon:"plus"},on:{click:function(s){return e.addInTaskTypeFilter(t)}}}):e._e()],2),s("button-simple",{staticClass:"mt05",attrs:{icon:"minus"},on:{click:function(s){return e.removeTaskTypeFilter(t)}}})],1)})),s("div",{staticClass:"add-button"},[s("button-simple",{attrs:{icon:"plus"},on:{click:e.addTaskTypeFilter}})],1),e.descriptorOptions.length>0?s("div",[s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.descriptor"))+" ")]),e._l(e.metadataDescriptorFilters.values,(function(t,i){return s("div",{key:"desc-"+i,staticClass:"flexrow descriptor-filter"},[s("combobox",{staticClass:"flexrow-item",attrs:{options:e.descriptorOptions},on:{input:function(s){return e.onDescriptorChanged(t)}},model:{value:t.id,callback:function(s){e.$set(t,"id",s)},expression:"descriptorFilter.id"}}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.operatorOptions,"locale-key-prefix":"entities.build_filter."},model:{value:t.operator,callback:function(s){e.$set(t,"operator",s)},expression:"descriptorFilter.operator"}}),s("div",{staticClass:"flexrow-item flexrow value-column"},[e._l(t.values,(function(i,n){return[0===e.getDescriptor(t.id).choices.length?s("text-field",{key:"descriptor-value-"+n,staticClass:"flexrow-item",attrs:{"input-class":" thin"},model:{value:t.values[n],callback:function(s){e.$set(t.values,n,s)},expression:"descriptorFilter.values[index]"}}):s("combobox",{key:"descriptor-value-"+n,staticClass:"flexrow-item",attrs:{options:e.getDescriptorChoiceOptions(t.id)},model:{value:t.values[n],callback:function(s){e.$set(t.values,n,s)},expression:"descriptorFilter.values[index]"}})]})),"in"===t.operator?s("button-simple",{staticClass:"mt05",attrs:{icon:"plus"},on:{click:function(s){return e.addInDescriptorFilter(t)}}}):e._e()],2),s("button-simple",{staticClass:"mt05",attrs:{icon:"minus"},on:{click:function(s){return e.removeDescriptorFilter(t)}}})],1)})),s("div",{staticClass:"add-button"},[s("button-simple",{attrs:{icon:"plus"},on:{click:e.addDescriptorFilter}})],1)],2):e._e(),e.isCurrentUserVendor?e._e():s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.assignation"))+" ")]),e.isCurrentUserVendor?e._e():s("div",{staticClass:"flexrow"},[s("combobox",{staticClass:"flexrow-item",attrs:{options:e.assignation.options,"locale-key-prefix":"entities.build_filter."},model:{value:e.assignation.value,callback:function(t){e.$set(e.assignation,"value",t)},expression:"assignation.value"}}),["assigned","unassigned"].includes(e.assignation.value)?s("combobox-task-type",{staticClass:"flexrow-item",attrs:{"task-type-list":e.taskTypeList},model:{value:e.assignation.taskTypeId,callback:function(t){e.$set(e.assignation,"taskTypeId",t)},expression:"assignation.taskTypeId"}}):e._e(),["assignedto","-assignedto"].includes(e.assignation.value)?s("people-field",{staticClass:"flexrow-item",attrs:{people:e.team},model:{value:e.assignation.person,callback:function(t){e.$set(e.assignation,"person",t)},expression:"assignation.person"}}):e._e()],1),s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.thumbnail"))+" ")]),s("combobox",{attrs:{options:e.hasThumbnail.options,"locale-key-prefix":"entities.build_filter."},model:{value:e.hasThumbnail.value,callback:function(t){e.$set(e.hasThumbnail,"value",t)},expression:"hasThumbnail.value"}}),s("modal-footer",{attrs:{"error-text":e.$t("entities.thumbnails.error")},on:{confirm:e.applyFilter,cancel:function(t){return e.$emit("cancel")}}})],2)])])},n=[],a=s("2909"),o=s("5530"),r=(s("99af"),s("d81d"),s("b0c0"),s("498a"),s("159b"),s("d3b7"),s("ddb0"),s("a15b"),s("4de4"),s("7db0"),s("2f62")),c=s("d065"),l=s("ca76"),d=s("de40"),u=s("992f"),p=s("56a0"),m=s("e4fd"),h=s("d5c9"),f=s("9616"),_=s("7bf8"),v={name:"build-filter-modal",mixins:[c["a"]],components:{ButtonSimple:d["a"],Combobox:u["a"],ComboboxStatus:p["a"],ComboboxTaskType:m["a"],ModalFooter:h["a"],PeopleField:f["a"],TextField:_["a"]},props:{active:{type:Boolean,default:!1},entityType:{type:String,default:"asset"}},data:function(){return{assetTypeFilters:{operator:"=",value:""},assignation:{person:null,taskTypeId:"",value:"nofilter",options:[{label:"no_filter",value:"nofilter"},{label:"assigned_to",value:"assignedto"},{label:"not_assigned_to",value:"-assignedto"},{label:"assignation_exists_for",value:"assigned"},{label:"no_assignation_for",value:"unassigned"}]},general:{operatorOptions:[{label:"equal",value:"="},{label:"not_equal",value:"=-"},{label:"in",value:"in"}],taskTypeOperatorOptions:[{label:"equal",value:"="},{label:"not_equal",value:"=-"},{label:"in",value:"in"}],unionOptions:[{label:"union_and",value:"and"},{label:"union_or",value:"or"}]},hasThumbnail:{value:"nofilter",options:[{label:"no_filter",value:"nofilter"},{label:"with_thumbnail",value:"withthumbnail"},{label:"without_thumbnail",value:"-withthumbnail"}]},metadataDescriptorFilters:{values:[]},taskTypeFilters:{values:[]},union:"and"}},mounted:function(){this.reset(),this.setFiltersFromCurrentQuery()},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["assetMetadataDescriptors","assetTypeMap","assetSearchText","assetValidationColumns","currentProduction","isCurrentUserVendor","people","personMap","productionAssetTypes","productionTaskStatuses","productionTaskTypes","shotMetadataDescriptors","shotSearchText","shotValidationColumns","taskTypeMap","taskStatusMap"])),{},{isAssets:function(){return"asset"===this.entityType},assetTypeOptions:function(){return[{label:this.$t("entities.build_filter.all_types"),value:"-"}].concat(Object(a["a"])(this.productionAssetTypes.map((function(e){return{label:e.name,value:e.id}}))))},taskTypeList:function(){var e=this;return this.isAssets?this.assetValidationColumns.map((function(t){return e.taskTypeMap[t]})):this.shotValidationColumns.map((function(t){return e.taskTypeMap[t]}))},team:function(){var e=this;return this.currentProduction.team.map((function(t){return e.personMap[t]}))},descriptorOptions:function(){return this.metadataDescriptors.map((function(e){return{label:e.name,value:e.id}}))},metadataDescriptors:function(){var e=this.shotMetadataDescriptors;return this.isAssets&&(e=this.assetMetadataDescriptors),e}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])([])),{},{applyFilter:function(){var e=this.buildFilter();this.$emit("confirm",e)},buildFilter:function(){var e="";return e=this.applyAssetTypeChoice(e),e=this.applyTaskTypeChoice(e),e=this.applyDescriptorChoice(e),e=this.applyAssignationChoice(e),e=this.applyThumbnailChoice(e),e=this.applyUnionChoice(e),e.trim()},applyAssetTypeChoice:function(e){var t=this.assetTypeFilters.value;if(t&&"-"!==t){var s="=[";"=-"===this.assetTypeFilters.operator&&(s="=[-");var i=this.assetTypeMap[t];e+=" type".concat(s).concat(i.name,"]")}return e},applyTaskTypeChoice:function(e){var t=this;return this.taskTypeFilters.values.forEach((function(s){var i="=[";"=-"===s.operator&&(i="=[-");var n=t.getTaskType(s.id),a=s.values.map((function(e){return t.taskStatusMap[e].short_name})).join(",");e+=" [".concat(n.name,"]").concat(i).concat(a,"]")})),e},applyDescriptorChoice:function(e){var t=this;return this.metadataDescriptorFilters.values.forEach((function(s){var i="=[";"=-"===s.operator&&(i="=[-");var n=t.getDescriptor(s.id),a=s.values.join(",");e+=" [".concat(n.name,"]").concat(i).concat(a,"]")})),e},applyAssignationChoice:function(e){if("nofilter"!==this.assignation.value)if(this.assignation.person){var t=this.assignation.person.name;"-assignedto"===this.assignation.value&&(t="-".concat(t)),e+=" assignedto=[".concat(t,"]")}else if(this.assignation.taskTypeId){var s=this.taskTypeMap[this.assignation.taskTypeId],i="assigned"===this.assignation.value?"assigned":"unassigned";e+=" [".concat(s.name,"]=").concat(i)}return e},applyThumbnailChoice:function(e){return"nofilter"!==this.hasThumbnail.value&&(e+=" ".concat(this.hasThumbnail.value)),e},applyUnionChoice:function(e){return"or"===this.union&&(e=" +(".concat(e.trim(),")")),e},addTaskTypeFilter:function(){var e={id:this.taskTypeList[0].id,operator:"=",values:[this.productionTaskStatuses[0].id]};return this.taskTypeFilters.values.push(e),e},addInTaskTypeFilter:function(e){e.values.push(this.productionTaskStatuses[0].id)},removeTaskTypeFilter:function(e){this.taskTypeFilters.values=this.taskTypeFilters.values.filter((function(t){return t!==e}))},addInDescriptorFilter:function(e){e.values.push("")},getTaskType:function(e){return this.taskTypeMap[e]},onDescriptorChanged:function(e){var t=this.getDescriptor(e.id);t.choices.length>0?e.values=[t.choices[0]]:e.values=[""]},addDescriptorFilter:function(){var e=this.getDescriptor(this.descriptorOptions[0].value),t={id:this.descriptorOptions[0].value,operator:"=",values:[e.choices.length>0?e.choices[0]:""]};return this.metadataDescriptorFilters.values.push(t),t},removeDescriptorFilter:function(e){this.metadataDescriptorFilters.values=this.metadataDescriptorFilters.values.filter((function(t){return t!==e}))},getDescriptor:function(e){return this.metadataDescriptors.find((function(t){return t.id===e}))},getDescriptorChoiceOptions:function(e){return this.getDescriptor(e).choices.map((function(e){return{label:e,value:e}}))},setFiltersFromCurrentQuery:function(){var e=this,t=this.isAssets?this.assetSearchText:this.shotSearchText;if(t){var s=Object(l["d"])({entryIndex:[],assetTypes:this.productionAssetTypes,taskTypes:this.productionTaskTypes,taskStatuses:this.productionTaskStatuses,descriptors:this.metadataDescriptors,persons:this.people,query:t});s.forEach((function(t){"assettype"===t.type?e.setFiltersFromAssetTypeQuery(t):"status"===t.type?e.setFiltersFromStatusQuery(t):"descriptor"===t.type?e.setFiltersFromDescriptorQuery(t):"assignation"===t.type?e.setFiltersFromAssignationQuery(t):"assignedto"===t.type?e.setFiltersFromAssignedToQuery(t):"thumbnail"===t.type&&e.setFiltersFromThumbnailQuery(t)})),s.union&&this.setUnion()}},setFiltersFromAssetTypeQuery:function(e){this.assetTypeFilters.operator=e.excluding?"=-":"=",this.assetTypeFilters.value=e.assetType.id},setFiltersFromStatusQuery:function(e){var t="=";e.taskStatuses.length>1?t="in":e.excluding&&(t="=-"),this.taskTypeFilters.values.push({id:e.taskType.id,operator:t,values:e.taskStatuses})},setFiltersFromDescriptorQuery:function(e){var t="=";e.values.length>1?t="in":e.excluding&&(t="=-"),this.metadataDescriptorFilters.values.push({id:e.descriptor.id,operator:t,values:e.values})},setFiltersFromAssignationQuery:function(e){e.assigned?this.assignation.value="assigned":this.assignation.value="unassigned",this.assignation.taskTypeId=e.taskType.id},setFiltersFromAssignedToQuery:function(e){this.assignation.value=e.excluding?"-assignedto":"assignedto",this.assignation.person=this.people.find((function(t){return t.id===e.personId}))},setFiltersFromThumbnailQuery:function(e){e.excluding?this.hasThumbnail.value="-withthumbnail":this.hasThumbnail.value="withthumbnail"},setUnion:function(){this.union="or"},onTaskTypeOperatorChanged:function(e){"in"!==e.operator&&(e.values=[e.values[0]])},reset:function(){this.assignation.value="nofilter",this.assignation.person=null,this.assignation.taskType="",this.hasThumbnail.value="nofilter",this.metadataDescriptorFilters.values=[],this.taskTypeFilters.values=[],this.assetTypeFilters.operator="=",this.assetTypeFilters.value="-"}}),watch:{active:function(){this.active&&(this.reset(),this.assignation.taskTypeId=this.taskTypeList.length>0?this.taskTypeList[0].id:"",this.setFiltersFromCurrentQuery())}}},g=v,y=(s("7d2e"),s("2877")),b=Object(y["a"])(g,i,n,!1,null,"78a702c6",null);t["a"]=b.exports},c6eb:function(e,t,s){"use strict";s("dbca")},c802:function(e,t,s){},c9e4:function(e,t,s){e.exports=s.p+"img/spinner-white.defdcdce.svg"},ca1b:function(e,t,s){"use strict";s("d3c5")},ca76:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"e",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"f",(function(){return f})),s.d(t,"b",(function(){return y}));var i=s("2909"),n=(s("4de4"),s("159b"),s("caad"),s("2532"),s("d3b7"),s("ddb0"),s("1276"),s("ac1f"),s("5319"),s("d81d"),s("99af"),s("466d"),s("2ca0"),s("7db0"),s("b0c0"),s("4ec9"),s("3ca3"),s("2017")),a=/\+\(.*\)/,o=/\[([^[]*)\]=\[([^[]*)\]|([^ ]*)=\[([^[]*)\]|([^ ]*)=([^ ]*)|\[([^[]*)\]=([^ ]*)/g,r=/type=\[([^[]*)\]|type=([^ ]*)|type=([^ ]*)/g,c=function(e,t,s){if(t&&t.length>0){var i=e.filter((function(e){var i=null;return t.forEach((function(n){return!(!1===i&&!t.union)&&(!(!0!==i||!t.union)||void(i=l[n.type](e,n,s)))})),i}));return i}return e},l={assettype:function(e,t,s){var i=!0;return i=t.assetType&&e.asset_type_id===t.assetType.id,t.excluding&&(i=!i),i},assignation:function(e,t,s){var i=s[e.validations[t.taskType.id]];return t.assigned?i&&i.assignees&&i.assignees.length>0:!i||i&&i.assignees&&0===i.assignees.length},assignedto:function(e,t,s){var i=!1;return e.tasks&&e.tasks.forEach((function(e){var n=s[e];i=i||n.assignees.includes(t.personId)})),t.excluding&&(i=!i),i},descriptor:function(e,t,s){var i=!1;if(e.data&&e.data[t.descriptor.field_name]&&t.values){var n=e.data[t.descriptor.field_name];n=n.toLowerCase(),t.values.forEach((function(e){i=i||n.indexOf(e.toLowerCase())>=0}))}else i=!1;return t.excluding&&(i=!i),i},exclusion:function(e,t,s){return!t.excludedIds[e.id]},status:function(e,t,s){var i=s[e.validations[t.taskType.id]],n=!0;return n=i&&t.taskStatuses.includes(i.task_status_id),t.excluding&&(n=!n),n},thumbnail:function(e,t,s){var i=""!==e.preview_file_id&&void 0!==e.preview_file_id&&null!==e.preview_file_id;return t.excluding?!i:i}},d=function(e){return e?e.replace(a,"").replace(o,"").split(" ").filter((function(e){return e.length>0&&"-"!==e[0]&&"withthumbnail"!==e})):[]},u=function(e){return e.replace(a,"").replace(o,"").split(" ").filter((function(e){return e.length>0&&"-"===e[0]&&"-withthumbnail"!==e})).map((function(e){return e.substring(1)}))},p=function(e){var t=e.entryIndex,s=e.assetTypes,n=e.taskTypes,a=e.taskStatuses,o=e.descriptors,r=e.persons,c=e.query,l=m(c);c=l.query;var d=[].concat(Object(i["a"])(v(s,c)),Object(i["a"])(g(n,a,c)),Object(i["a"])(y(o,c)),Object(i["a"])(b(r,c)),Object(i["a"])(k(c)||[]),Object(i["a"])(h(t,c)));return d.union=l.union,d},m=function(e){var t=e.match(a),s=!1;return t&&(s=!0,e=t[0].substring(2,t[0].length-1)),{query:e,union:s}},h=function(e,t){var s=[],i=u(t)||[];return i.forEach((function(t){var i={},a=Object(n["j"])(e,[t])||[];a.forEach((function(e){i[e.id]=!0})),s.push({type:"exclusion",excludedIds:i})})),s},f=function(e,t){var s=[],i=u(t)||[];return i.forEach((function(t){var i={},a=Object(n["j"])(e,[t])||[];a.forEach((function(e){i[e.id]=!0})),s.push({type:"exclusion",excludedIds:i})})),s},_=function(e){return"["===e[0]?e.substring(1,e.length-1):e},v=function(e,t){if(!t)return[];var s=[],i=t.match(r);return i&&i.forEach((function(t){var i=t.split("="),n=_(i[1]),a=n.startsWith("-");a&&(n=n.substring(1));var o=e.find((function(e){return e.name===n}));s.push({assetType:o,excluding:a,type:"assettype"})})),s},g=function(e,t,s){if(!s)return[];var i=[],a=s.match(o);if(a){var r=Object(n["i"])(e),c=Object(n["h"])(t);a.forEach((function(e){var t=e.split("="),s=_(t[1]),n=s.startsWith("-");n&&(s=s.substring(1));var a=_(t[0]),o=r[a.toLowerCase()];if(o)if("unassigned"===s)i.push({taskType:o[0],assigned:!1,type:"assignation"});else if("assigned"===s)i.push({taskType:o[0],assigned:!0,type:"assignation"});else if(s){var l=s.split(",").map((function(e){return e.toLowerCase()})).filter((function(e){return c[e]})).map((function(e){return c[e].id}));l.length>0&&i.push({taskType:o[0],taskStatuses:l,type:"status",excluding:n})}}))}return i},y=function(e,t){if(!t)return[];var s=[],i=t.match(o);if(i){var a=Object(n["c"])(e,!1);i.forEach((function(e){var t=e.split("="),i=_(t[0]);if("type"!==i){var n=a[i.toLowerCase()],o=_(t[1]),r=o.startsWith("-");r&&(o=o.substring(1));var c=o.split(",");n&&s.push({descriptor:n[0],values:c,type:"descriptor",excluding:r})}}))}return s},b=function(e,t){if(!t)return[];var s=[],i=t.match(o);return i&&i.forEach((function(t){var i=new Map;e.filter((function(e){return e.active})).forEach((function(e){var t=e.name.toLowerCase();i.set(t,e)}));var n=t.split("=");if("assignedto"===n[0]){var a=n[1];a=_(a);var o=a.startsWith("-");o&&(a=a.substring(1));var r=i.get(a.toLowerCase());r&&s.push({personId:r.id,value:a,type:"assignedto",excluding:o})}})),s},k=function(e){var t=[];return e.indexOf("-withthumbnail")>-1?t.push({type:"thumbnail",excluding:!0}):e.indexOf("withthumbnail")>-1&&t.push({type:"thumbnail",excluding:!1}),t}},cb0e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{ref:"cell",class:{validation:e.selectable&&!e.isCurrentUserClient,selected:e.selectable&e.selected},style:{"border-left":e.isBorder?"1px solid "+e.column.color:"none",background:e.isBorder?e.getBackground():"transparent"},on:{mouseover:e.onMouseOver,mouseout:e.onMouseOut,click:e.onClick}},[e.minimized?s("div",{staticClass:"wrapper"},[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color}})]):s("div",{staticClass:"wrapper"},[e.task?s("span",[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color},attrs:{title:e.taskStatus.name}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]),e.isCurrentUserClient?e._e():s("span",{staticClass:"priority"},[e._v(" "+e._s(e.priority)+" ")])]):e._e(),e._l(e.assignees,(function(t){return e.isAssignees&&!e.isCurrentUserClient?s("span",{key:"avatar-"+t,staticClass:"avatar has-text-centered",style:{background:e.personMap[t].color,width:"20px",height:"20px","font-size":"10px"},attrs:{title:e.personMap[t].full_name}},[e.personMap[t].has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath(t),expression:"avatarPath(personId)"}],key:e.avatarKey(t),attrs:{width:"20",height:"20"}}):s("span",[e._v(" "+e._s(e.personMap[t].initials)+" ")])]):e._e()}))],2)])},n=[],a=s("5530"),o=(s("a9e3"),s("99af"),s("2f62")),r=s("7930"),c={name:"validation-cell",data:function(){return{task:null}},components:{},props:{column:{default:null,type:Object},entity:{default:null,type:Object},taskTest:{default:null,type:Object},isBorder:{default:!0,type:Boolean},isStatic:{default:!1,type:Boolean},isAssignees:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},selectable:{default:!0,type:Boolean},clickable:{default:!0,type:Boolean},selected:{default:!1,type:Boolean},rowX:{default:0,type:Number},columnY:{default:0,type:Number}},mounted:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isDarkTheme","isCurrentUserClient","personMap","taskMap","taskStatusMap"])),{},{assignees:function(){return this.task?this.task.assignees:[]},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{getBackground:function(){if(this.isBorder){var e=this.isDarkTheme?.15:.08;return r["a"].hexToRGBa(this.column.color,e)}return"transparent"},onMouseOver:function(e){if(this.selectable&&!this.selected){var t=this.isDarkTheme?"#6E70CA":"#CFD1FF";this.changeStyle(t)}},onMouseOut:function(e){if(this.selectable&&!this.selected){var t=this.getBackground();this.changeStyle(t)}},onClick:function(e){this.clickable&&this.select(e)},changeStyle:function(e){var t=this.isBorder?"1px solid "+this.column.color:"none";this.$refs.cell.style="border-left: ".concat(t,"; background: ").concat(e,";")},select:function(e){var t=!1!==e.isUserClick;this.selectable&&!this.isCurrentUserClient&&(this.$refs.cell&&this.$refs.cell.className.indexOf("selected")<0?this.$emit("select",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey||e.metaKey,isShiftKey:e.shiftKey,isUserClick:t}):this.$emit("unselect",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey||e.metaKey,isShiftKey:e.shiftKey,isUserClick:t}))},avatarPath:function(e){var t=this.personMap[e];return t?t.avatarPath+"?unique="+t.uniqueHash:""},avatarKey:function(e){var t=this.personMap[e];return t?t.id+"-"+t.uniqueHash:""}}),watch:{selected:function(){if(this.selected){var e=this.isDarkTheme?"#5E60BA":"#BFC1FF";this.changeStyle(e)}else{var t=this.getBackground(this.column.color);this.changeStyle(t)}},taskTest:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])}}},l=c,d=(s("315e"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"639cf6b8",null);t["a"]=u.exports},cdae:function(e,t,s){},ce6b:function(e,t,s){"use strict";s("d3b7"),s("b0c0"),s("498a"),s("99af");var i=s("edbf");t["a"]={getOrganisation:function(){return i["a"].pget("/api/data/organisations").then((function(e){var t={name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:!1,chat_token_slack:""};e.length>0&&(t=e[0]),t.use_original_file_name=t.use_original_file_name?"true":"false",Promise.resolve(t)}))},updateOrganisation:function(e){var t={name:e.name,hours_by_day:e.hours_by_day,use_original_file_name:"true"===e.use_original_file_name,chat_token_slack:e.chat_token_slack};return i["a"].pput("/api/data/organisations/".concat(e.id),t)},postOrganisationLogo:function(e,t){return i["a"].ppost("/api/pictures/thumbnails/organisations/".concat(e),t)},getPeople:function(e){i["a"].get("/api/data/persons",e)},getPerson:function(e,t){i["a"].get("/api/data/persons/".concat(e),t)},createPerson:function(e){var t={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,role:e.role,active:e.active};return i["a"].ppost("/api/data/persons/new",t)},invitePerson:function(e){return i["a"].pget("/api/actions/persons/".concat(e.id,"/invite"))},updatePerson:function(e){var t={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,timezone:e.timezone,locale:e.locale,role:e.role,active:e.active,notifications_enabled:"true"===e.notifications_enabled,notifications_slack_enabled:"true"===e.notifications_slack_enabled,notifications_slack_userid:e.notifications_slack_userid};return i["a"].pput("/api/data/persons/".concat(e.id),t)},deletePerson:function(e,t){return i["a"].pdel("/api/data/persons/".concat(e.id,"?force=true"))},postCsv:function(e,t){var s="/api/import/csv/persons";return t&&(s+="?update=true"),i["a"].ppost(s,e)},postAvatar:function(e,t,s){i["a"].post("/api/pictures/thumbnails/persons/".concat(e),t,s)},changePassword:function(e,t){var s={old_password:e.oldPassword,password:e.password,password_2:e.password2};i["a"].post("/api/auth/change-password",s,t)},loadTodos:function(e){i["a"].get("/api/data/user/tasks",e)},loadDone:function(e){i["a"].get("/api/data/user/done-tasks",e)},loadTimeSpents:function(e){return i["a"].pget("/api/data/user/time-spents/".concat(e))},getPersonTasks:function(e,t){i["a"].get("/api/data/persons/".concat(e,"/tasks"),t)},getPersonDoneTasks:function(e,t){i["a"].get("/api/data/persons/".concat(e,"/done-tasks"),t)},getUserSearchFilters:function(e){i["a"].get("/api/data/user/filters",e)},updateFilter:function(e){var t={name:e.name,search_query:e.search_query};return i["a"].pput("/api/data/user/filters/".concat(e.id),t)},createFilter:function(e,t,s,n,a,o){var r={list_type:e,name:t,query:s,entity_type:a,project_id:n};i["a"].post("/api/data/user/filters",r,o)},removeFilter:function(e,t){return i["a"].pdel("/api/data/user/filters/".concat(e.id))},getTimeSpents:function(e,t){return i["a"].pget("/api/data/persons/".concat(e,"/time-spents/").concat(t))},setTimeSpent:function(e,t,s,n){var a={duration:60*n};return i["a"].ppost("/api/actions/tasks/".concat(e,"/time-spents/").concat(s,"/persons/").concat(t),a)},getDayOff:function(e,t){return i["a"].pget("/api/data/persons/".concat(e,"/day-offs/").concat(t))},setDayOff:function(e,t){return i["a"].ppost("/api/data/day-offs",{person_id:e,date:t})},getDayOffs:function(e,t){var s="/api/data/persons/day-offs/".concat(e,"/").concat(t);return i["a"].pget(s)},unsetDayOff:function(e){return i["a"].pdel("/api/data/day-offs/".concat(e.id))},getAggregatedPersonDaysOff:function(e,t,s,n,a){var o="/api/data/persons/".concat(e,"/day-offs/");return"year"===t?o+="year/".concat(s):"month"===t?o+="month/".concat(s,"/").concat(n):"week"===t&&(o+="week/".concat(s,"/").concat(a)),i["a"].pget(o)},getDayTable:function(e,t,s){var n="/api/data/persons/time-spents/day-table/".concat(e,"/").concat(t);return s&&(n+="?project_id=".concat(s)),i["a"].pget(n)},getWeekTable:function(e,t,s){var n="/api/data/persons/time-spents/week-table/".concat(e);return s&&(n+="?project_id=".concat(s)),i["a"].pget(n)},getMonthTable:function(e,t,s){var n="/api/data/persons/time-spents/month-table/".concat(e);return s&&(n+="?project_id=".concat(s)),i["a"].pget(n)},getYearTable:function(e,t,s){var n="/api/data/persons/time-spents/year-table";return s&&(n+="?project_id=".concat(s)),i["a"].pget(n)},getAggregatedPersonTimeSpents:function(e,t,s,n,a,o,r){var c="/api/data/persons/".concat(e,"/time-spents/");return c+="year"===t?"year/".concat(s):"month"===t?"month/".concat(s,"/").concat(n):"week"===t?"week/".concat(s,"/").concat(a):"day/".concat(s,"/").concat(n,"/").concat(o),r&&(c+="?project_id=".concat(r)),i["a"].pget(c)},getContext:function(){return i["a"].pget("/api/data/user/context")}}},ce80:function(e,t,s){e.exports=s.p+"img/validated.a1d2a358.png"},d065:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i={beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{onKeyDown:function(e){"Escape"===e.key&&this.$emit("cancel")}},watch:{active:function(){this.active?window.addEventListener("keydown",this.onKeyDown,!1):window.removeEventListener("keydown",this.onKeyDown)}}}},d228:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"button",attrs:{title:e.buttonTitle},on:{click:function(t){return e.$emit("click")}}},[e.subscribed?s("eye-icon",{staticClass:"icon is-small only-icon"}):s("eye-off-icon",{staticClass:"icon is-small only-icon"})],1)},n=[],a=s("0a35"),o={name:"subscribe-button",components:{EyeIcon:a["t"],EyeOffIcon:a["u"]},props:{subscribed:{default:!1,type:Boolean}},computed:{buttonTitle:function(){return this.subscribed?this.$t("tasks.unsubscribe_notifications"):this.$t("tasks.subscribe_notifications")}}},r=o,c=(s("5bf3"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"76d14e74",null);t["a"]=l.exports},d2f9:function(e,t,s){"use strict";s("7448")},d359:function(e,t,s){"use strict";s("13d5"),s("d3b7");t["a"]={runPromiseMapAsSeries:function(e,t){return e.reduce((function(e,s){return e.then((function(){return t(s)}))}),Promise.resolve())},throttle:function(e,t){var s=0;return function(){var i=(new Date).getTime();if(!(i-s<t))return s=i,e.apply(void 0,arguments)}}}},d370:function(e,t,s){"use strict";s("0bd7")},d37c:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{field:e.withMargin}},[e.label?s("label",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),s("p",{staticClass:"control flexrow"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":{"date-input":!0,input:!0,short:e.shortDate},language:e.locale,"disabled-dates":e.disabledDates,"monday-first":!0,format:"yyyy-MM-dd"},on:{input:function(t){return e.$emit("input",e.localValue)}},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.localValue,expression:"localValue"}],staticClass:"clear-button unselectable",on:{click:e.clearValue}},[e._v(" + ")])],1)])},n=[],a=s("5530"),o=s("2f62"),r=s("2430"),c=s("fa33"),l={name:"text-field",components:{Datepicker:c["a"]},props:{disabledDates:{default:function(){},type:Object},label:{default:"",type:String},shortDate:{default:!0,type:Boolean},value:{default:new Date,type:Date},withMargin:{default:!0,type:Boolean}},data:function(){return{localValue:null}},mounted:function(){this.localValue=this.value},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["user"])),{},{locale:function(){return"fr_FR"===this.user.locale?r["fr"]:r["en"]}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{clearValue:function(){this.localValue=null}}),watch:{value:function(){this.localValue=this.value},localValue:function(){}}},d=l,u=(s("3693"),s("2877")),p=Object(u["a"])(d,i,n,!1,null,"299b9a2e",null);t["a"]=p.exports},d392:function(e,t,s){},d3c5:function(e,t,s){},d49e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.isEditing?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("playlists.edit_title"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("playlists.create_title"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("playlists.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("combobox",{attrs:{label:e.$t("playlists.fields.for_client"),options:e.forClientOptions},model:{value:e.forClient,callback:function(t){e.forClient=t},expression:"forClient"}}),e.isEditing?e._e():s("combobox",{attrs:{label:e.$t("playlists.fields.for_entity"),options:e.forEntityOptions,disabled:e.typeDisabled},model:{value:e.form.for_entity,callback:function(t){e.$set(e.form,"for_entity",t)},expression:"form.for_entity"}})],1),s("modal-footer",{attrs:{"error-text":e.$t("playlists.edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=s("5530"),o=(s("b0c0"),s("caad"),s("992f")),r=s("d5c9"),c=s("7bf8"),l=s("2f62"),d=s("d065"),u={name:"edit-playlist-modal",mixins:[d["a"]],components:{Combobox:o["a"],ModalFooter:r["a"],TextField:c["a"]},props:{active:{type:Boolean,value:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},playlistToEdit:{type:Object,default:function(){}},typeDisabled:{type:Boolean,default:!1}},data:function(){return{forClient:"false",forClientOptions:[{label:this.$t("playlists.for_client"),value:"true"},{label:this.$t("playlists.for_studio"),value:"false"}],form:{name:this.playlistToEdit.name,for_entity:this.playlistToEdit.for_entity||this.defaultForEntity,for_client:this.playlistToEdit.for_client,is_for_all:this.currentEpisode&&"all"===this.currentEpisode.id}}},computed:Object(a["a"])(Object(a["a"])({},Object(l["c"])(["currentEpisode"])),{},{isEditing:function(){return this.playlistToEdit&&this.playlistToEdit.id},forEntityOptions:function(){return this.currentEpisode&&["main","all"].includes(this.currentEpisode.id)?[{label:this.$t("assets.title"),value:"asset"}]:[{label:this.$t("assets.title"),value:"asset"},{label:this.$t("shots.title"),value:"shot"}]},defaultForEntity:function(){var e=this.currentEpisode&&["all","main"].includes(this.currentEpisode.id);return e?"asset":"shot"}}),methods:{runConfirmation:function(){this.form.for_client="true"===this.forClient,this.$emit("confirm",this.form)},resetForm:function(){this.isEditing?(this.form.name=this.playlistToEdit.name,this.form.for_entity=this.playlistToEdit.for_entity,this.form.is_for_all=this.currentEpisode&&"all"===this.currentEpisode.id):this.form={name:this.playlistToEdit.name,for_entity:this.playlistToEdit.for_entity||this.defaultForEntity,for_client:"false",is_for_all:this.currentEpisode&&"all"===this.currentEpisode.id}}},watch:{playlistToEdit:function(){this.resetForm()},active:function(){var e=this;this.active&&(this.forClient=this.playlistToEdit.for_client?"true":"false",this.resetForm(),setTimeout((function(){e.$refs.nameField.focus()}),100))}}},p=u,m=(s("12c5"),s("2877")),h=Object(m["a"])(p,i,n,!1,null,"2a6b2ec6",null);t["a"]=h.exports},d57a:function(e,t,s){"use strict";s("1f79")},d5b0:function(e,t,s){},d5c9:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":e.isDisabled},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.confirmLabel||e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.cancelLabel||e.$t("main.cancel"))+" ")])]),e.isError?s("p",{staticClass:"error mt1 has-text-right"},[e._v(" "+e._s(e.errorText)+" ")]):e._e()])},n=[],a=s("5530"),o=s("2f62"),r={name:"modal-footer",components:{},props:{cancelLabel:{type:String,default:""},confirmLabel:{type:String,default:""},errorText:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])({},Object(o["b"])([])),watch:{}},c=r,l=(s("a015"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"1fe06be4",null);t["a"]=d.exports},d61d:function(e,t,s){},d793:function(e,t,s){"use strict";var i=function(e,t){var s=t._c;return t.props.previewFileId?s("img",t._b({directives:[{name:"lazy",rawName:"v-lazy",value:"/api/pictures/"+t.props.type+"/preview-files/"+t.props.previewFileId+".png",expression:"'/api/pictures/' + props.type + '/preview-files/' + props.previewFileId + '.png'"}],key:t.props.previewFileId,staticClass:"thumbnail-picture",style:{width:t.props.width,height:t.props.height,"max-width":t.props.maxWidth,"max-height":t.props.maxHeight}},"img",t.data.attrs,!1)):s("span",t._b({class:{"thumbnail-picture":!0,"thumbnail-empty":!0},style:{width:t.props.width,height:t.props.emptyHeight?t.props.emptyHeight:t.props.height}},"span",t.data.attrs,!1))},n=[],a={name:"light-entity-thumbnail",functional:!0,props:{previewFileId:{default:"",type:String},width:{default:"150px",type:String},height:{default:"50px",type:String},maxHeight:{default:"auto",type:String},maxWidth:{default:"auto",type:String},emptyHeight:{type:String},type:{default:"thumbnails",type:String}}},o=a,r=(s("7203"),s("2877")),c=Object(r["a"])(o,i,n,!0,null,null,null);t["a"]=c.exports},d7bc:function(e,t,s){},d7c7:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"schedule-wrapper"},[s("div",{ref:"schedule",class:e.scheduleClass},[s("div",{ref:"entity-list",staticClass:"entities",on:{mousedown:e.startBrowsingY}},[s("div",{staticClass:"has-text-right total-man-days mr0"},[s("span",{staticClass:"total-value"},[e._v(" "+e._s(e.formatDuration(e.totalManDays))+" "+e._s(e.$t("schedule.md"))+" ")])]),s("div",{staticClass:"entity-name-list"},e._l(e.hierarchy,(function(t){return s("div",{key:"entity-"+t.id},[s("div",{class:{"entity-line":!0,"entity-name":!0,flexrow:!0,root:!0,expanded:t.expanded},style:e.entityLineStyle(t,!0,!0)},[s("span",{staticClass:"expand flexrow-item mr1",on:{click:function(s){return e.expandRootElement(t)}}},[t.expanded?s("chevron-down-icon"):s("chevron-right-icon")],1),t.avatar?s("span",{staticClass:"avatar flexrow-item"},["Project"===t.type?s("production-name",{attrs:{production:t,"only-avatar":!0,size:30}}):s("people-avatar",{attrs:{person:t,"is-link":!1,size:30,"no-cache":!0}})],1):e._e(),t.route?s("router-link",{staticClass:"filler flexrow-item root-element-name",attrs:{to:t.route}},[e._v(" "+e._s(t.name)+" ")]):s("span",{staticClass:"filler flexrow-item root-element-name"},[e._v(" "+e._s(t.name)+" ")]),!t.avatar&&t.editable?s("input",{staticClass:"flexrow-item mr1",attrs:{type:"number",step:"any",placeholder:"0"},domProps:{value:e.formatDuration(t.man_days)},on:{input:function(s){return e.$emit("estimation-changed",{days:s.target.value,item:t})}}}):e._e(),!t.avatar&&t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(e.$t("schedule.md"))+" ")]):e._e(),t.avatar||!t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(e.formatDuration(t.man_days))+" "+e._s(e.$t("schedule.md"))+" ")]):e._e()],1),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px"}})],1):e._e(),e._l(t.children,(function(i,n){return s("div",{key:"entity-"+i.id,staticClass:"child-name"},[s("div",{staticClass:"entity-line entity-name child-line flexrow",style:e.childNameStyle(t,n)},[i.route?s("router-link",{staticClass:"filler flexrow-item child-element-name",attrs:{to:i.route}},[e._v(" "+e._s(i.name)+" ")]):s("span",{staticClass:"filler flexrow-item"},[e._v(" "+e._s(i.name)+" ")]),i.editable?s("span",{staticClass:"flexrow-item"},[s("input",{staticClass:"man-days-unit flexrow-item",attrs:{type:"number",min:"0",placeholder:"0",step:"any"},domProps:{value:e.formatDuration(i.man_days)},on:{input:function(s){return e.onChildEstimationChanged(s,i,t)}}}),e._v(" "+e._s(e.$t("schedule.md"))+" ")]):s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(i.man_days)+" "+e._s(e.$t("schedule.md"))+" ")])],1)])}))],2):e._e()])})),0)]),s("div",{staticClass:"timeline"},[s("div",{ref:"timeline-header",staticClass:"timeline-header",on:{mousedown:e.startBrowsingX}},e._l(e.daysAvailable,(function(t,i){return s("div",{key:"header-"+t.text+"-"+i,staticClass:"day",style:e.dayStyle(t)},[e.milestones[t.text]?s("div",{staticClass:"milestone",on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("div",{staticClass:"milestone-tooltip",style:e.milestoneTooltipStyle},[s("span",[e._v(" "+e._s(e.milestones[t.text].name)+" ")])]),e._m(0,!0)]):s("div",{staticClass:"milestone"},[e._m(1,!0)]),s("div",{class:{"with-milestones":e.withMilestones,"date-widget":!0}},[s("div",{staticClass:"add-milestone",attrs:{title:e.addMilestoneTitle(t)},on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("span",[e._v("+")])]),s("div",{staticClass:"date-name"},[t.newMonth?s("span",{staticClass:"month-name"},[e._v(" "+e._s(t.monthText)+" ")]):e._e(),s("div",{class:e.dayClass(t,i)},[!t.weekend&&e.zoomLevel>2?s("span",[e._v(" "+e._s(t.dayText)+" / ")]):e._e(),t.weekend?e._e():s("span",{staticClass:"day-number"},[e._v(" "+e._s(t.dayNumber)+" ")])])])])])})),0),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onTimelineScroll,expression:"onTimelineScroll"}],ref:"timeline-content-wrapper",staticClass:"timeline-content-wrapper"},[s("div",{ref:"timeline-content",staticClass:"timeline-content",on:{mousedown:e.startBrowsing,mousewheel:function(t){return e.$emit("change-zoom",t)}}},[s("div",{ref:"timeline-today-position",staticClass:"timeline-position today",style:e.timelineTodayPositionStyle}),s("div",{ref:"timeline-position",staticClass:"timeline-position",style:e.timelinePositionStyle}),e._l(Object.values(e.milestones),(function(t){return s("div",{key:"milestone-"+t.date,staticClass:"milestone-vertical-line",style:e.milestoneLineStyle(t)})})),e._l(e.hierarchy,(function(t){return s("div",{key:"entity-line-"+t.id},[s("div",{staticClass:"entity-line root-element",style:e.entityLineStyle(t,!0)},[s("div",{staticClass:"timebar-wrapper",style:e.timebarStyle(t,!0)},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible(t),expression:"isVisible(rootElement)"}],staticClass:"timebar"},[s("div",{class:{"timebar-left-hand":t.editable&&e.isCurrentUserManager},on:{mousedown:function(s){return e.moveTimebarLeftSide(t,s)}}}),s("div",{staticClass:"filler",on:{mousedown:function(s){return e.moveTimebar(t,s)}}}),s("div",{class:{"timebar-right-hand":t.editable&&e.isCurrentUserManager},on:{mousedown:function(s){return e.moveTimebarRightSide(t,s)}}})])])]),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px",opacity:"0"}})],1):e._e(),e._l(t.children,(function(i){return s("div",{key:"entity-line-"+i.id,staticClass:"entity-line child-line"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible(i),expression:"isVisible(childElement)"}],staticClass:"timebar",style:e.timebarChildStyle(i,t,!0),attrs:{title:i.name+" ("+i.startDate.format("DD-MM")+" - "+i.endDate.format("DD-MM")+")"}},[s("div",{class:{"timebar-left-hand":i.editable&&!i.unresizable&&e.isCurrentUserManager},on:{mousedown:function(t){return e.moveTimebarLeftSide(i,t)}}}),s("div",{staticClass:"filler",on:{mousedown:function(t){return e.moveTimebar(i,t)}}}),s("div",{class:{"timebar-right-hand":i.editable&&!i.unresizable&&e.isCurrentUserManager},on:{mousedown:function(t){return e.moveTimebarRightSide(i,t)}}})])])}))],2):e._e()])}))],2)])])]),s("edit-milestone-modal",{ref:"edit-milestone-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"milestone-to-edit":e.milestoneToEdit},on:{confirm:e.confirmEditMilestone,cancel:e.hideEditMilestoneModal,"remove-milestone":e.removeMilestone}})],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"},[e._v("•")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"})])}],a=s("5530"),o=(s("a9e3"),s("caad"),s("4de4"),s("159b"),s("13d5"),s("2f62")),r=s("7f45"),c=s.n(r),l=s("31f2"),d=s("7930"),u=s("3657"),p=s("0a35"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEdit?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("schedule.milestone.edit_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("schedule.milestone.add_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("schedule.milestone.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isEdit?s("button-simple",{staticClass:"button is-link error",attrs:{text:"Delete milestone"},on:{click:function(t){return e.$emit("remove-milestone",e.milestoneToEdit)}}}):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("schedule.milestone.error"),"is-error":e.isError,"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},h=[],f=(s("b0c0"),s("d065")),_=s("de40"),v=s("d5c9"),g=s("7bf8"),y={name:"edit-milestone-modal",mixins:[f["a"]],components:{ButtonSimple:_["a"],ModalFooter:v["a"],TextField:g["a"]},props:{active:{type:Boolean,default:!1},milestoneToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:""}}},mounted:function(){this.reset()},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{isEdit:function(){return void 0!==this.milestoneToEdit.id},isFormFilled:function(){return this.form.name.length>0}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{confirm:function(){return this.$emit("confirm",this.form)},reset:function(){this.form={id:this.milestoneToEdit.id||void 0,name:"".concat(this.milestoneToEdit.name||""),date:this.milestoneToEdit.date}}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},b=y,k=s("2877"),w=Object(k["a"])(b,m,h,!1,null,"541fbff2",null),C=w.exports,S=s("eb8c"),T=s("4736"),x=s("be83"),E={name:"schedule",mixins:[l["a"]],components:{ChevronDownIcon:p["i"],ChevronRightIcon:p["k"],EditMilestoneModal:C,PeopleAvatar:S["a"],ProductionName:T["a"],Spinner:x["a"]},data:function(){return{currentMilestoneDate:null,isBrowsingX:!1,isBrowsingY:!1,isChangeSize:!1,milestoneToEdit:{date:c()()},timelineDisplayedDaysIndex:{},errors:{edit:!1},modals:{edit:!1},loading:{edit:!1}}},props:{endDate:{type:Object,required:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!0},height:{type:Number,default:0},hierarchy:{default:function(){return[]},type:Array},startDate:{type:Object,required:!0},isEstimationLinked:{type:Boolean,default:!1},withMilestones:{type:Boolean,default:!0},zoomLevel:{type:Number,default:2}},mounted:function(){this.resetScheduleSize(),document.addEventListener("mouseup",this.stopBrowsing),document.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.resetScheduleSize)},destroyed:function(){document.removeEventListener("mouseup",this.stopBrowsing),document.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.resetScheduleSize),document.body.style.cursor="default"},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isCurrentUserManager","organisation","milestones"])),{},{cellWidth:function(){return 20*this.zoomLevel},daysAvailable:function(){var e=[],t=Object(u["q"])(this.startDate.format("YYYY-MM-DD")),s=t.clone().add(-1,"days"),i=s.toDate(),n=Object(u["q"])(this.endDate.format("YYYY-MM-DD")),a=n.toDate();i.isoweekday=s.isoWeekday(),i.monthday=s.month();while(i<a){var o=new Date(Number(i));o.setDate(i.getDate()+1),o.isoweekday=i.isoweekday+1,o.isoweekday>7&&(o.isoweekday=1,o.newWeek=!0),o.monthday=i.monthday+1,o.getMonth()!==i.getMonth()&&(o.newMonth=!0,o.monthday=1),[6,7].includes(o.isoweekday)&&(o.weekend=!0);var r=Object(u["q"])(c()(o).format("YYYY-MM-DD"));r.newWeek=o.newWeek,r.newMonth=o.newMonth,r.weekend=o.weekend,r.text=r.format("YYYY-MM-DD"),r.monthText=r.format("MMMM"),r.dayNumber=r.format("DD"),r.dayText=r.format("ddd")[0],e.push(r),i=o}return e.length>1&&!0===e[0].weekend?(e[0].newMonth=!1,e[1].newMonth=!0,e.length>2&&!0===e[1].weekend?(e[1].newMonth=!1,e[2].newMonth=!0):e.length>2&&(e[1].newMonth=!0)):e.length>0&&(e[0].newMonth=!0),e},displayedDays:function(){return this.daysAvailable.filter((function(e){return!e.weekend}))},nbDisplayedDays:function(){return this.displayedDays.length},displayedDaysIndex:function(){var e=0,t={};return this.displayedDays.forEach((function(s){t[s.text]=e,e++})),t},totalManDays:function(){return this.hierarchy.reduce((function(e,t){var s=e,i=t.man_days;return t.man_days&&("string"===typeof i&&(i=parseInt(i)),s=e+i),s}),0)},entityList:function(){return this.$refs["entity-list"]},schedule:function(){return this.$refs.schedule},timelineContent:function(){return this.$refs["timeline-content"]},timelineContentWrapper:function(){return this.$refs["timeline-content-wrapper"]},timelineHeader:function(){return this.$refs["timeline-header"]},timelinePosition:function(){return this.$refs["timeline-position"]},scheduleClass:function(){var e={schedule:!0,unselectable:!0};return e["zoom-level-".concat(this.zoomLevel)]=!0,e},timelinePositionStyle:function(){return{width:"".concat(this.cellWidth,"px")}},timelineTodayPositionStyle:function(){var e=c()(),t=e.isAfter(this.startDate)&&e.isBefore(this.endDate);return{width:"".concat(this.cellWidth,"px"),left:"".concat(this.getTimebarLeft({startDate:e})-5,"px"),display:t?"block":"none"}},milestoneTooltipStyle:function(){return{left:-40-10*(3-this.zoomLevel)+"px"}},dayBeforeStartDate:function(){return this.startDate.clone().add(-1,"days")},dayAfterEndDate:function(){return this.endDate.clone().add(1,"days")}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["deleteMilestone","saveMilestone"])),{},{isVisible:function(e){var t=e.startDate.isSameOrAfter(this.startDate),s=e.endDate.isSameOrBefore(this.dayAfterEndDate);return t&&s},resetScheduleSize:function(){this.height&&(this.schedule.style.height="".concat(this.height,"px")),this.timelineContent&&(this.timelineContent.style.width=this.nbDisplayedDays*this.cellWidth+"px",this.timelineContentWrapper.style.height=this.schedule.offsetHeight-250+"px",this.entityList.style.height=this.schedule.offsetHeight-169+"px")},onMouseMove:function(e){this.isChangeStartDate?this.changeStartDate(e):this.isChangeEndDate?this.changeEndDate(e):this.isChangeDates?this.changeDates(e):(this.isBrowsingX&&this.scrollScheduleLeft(e),this.isBrowsingY&&this.scrollScheduleTop(e)),this.updatePositionBarPosition(e)},onChildEstimationChanged:function(e,t,s){var i=e.target.value;this.isEstimationLinked&&(t.man_days=Object(u["b"])(this.organisation,i),s.man_days=s.children.reduce((function(e,t){var s=e,i=t.man_days;return t.man_days&&(s=e+i),s}),0),i>0&&(t.endDate=Object(u["a"])(t.startDate,i))),this.$emit("estimation-changed",{taskId:t.id,days:i,item:t})},updatePositionBarPosition:function(e){var t=this.timelineContentWrapper.scrollLeft+e.clientX;t-=320,t=Math.floor(t/this.cellWidth)*this.cellWidth,this.timelinePosition.style.left=t+"px"},isValidItemDates:function(e,t){return e&&t&&e.isSameOrAfter(this.startDate.clone().add(-1,"hour"))&&t.isSameOrBefore(this.endDate.clone().add(1,"day"))&&e.isSameOrBefore(t)&&t.isSameOrAfter(e)},getDisplayedDaysIndex:function(e){6===e.isoWeekday()&&(e=e.add(-1,"days")),7===e.isoWeekday()&&(e=e.add(-2,"days"));var t=e.format("YYYY-MM-DD");return this.displayedDaysIndex[t]},changeDates:function(e){var t=e.clientX-this.initialClientX-this.cellWidth/2,s=Math.ceil(t/this.cellWidth);this.lastStartDate.isBefore(this.startDate)&&(this.lastStartDate=this.startDate.clone()),this.lastEndDate.isBefore(this.startDate)&&(this.lastEndDate=this.startDate.clone().add(1,"days"));var i=this.lastStartDate,n=this.lastEndDate,a=this.getDisplayedDaysIndex(i),o=this.getDisplayedDaysIndex(n),r=o-a,c=this.getDisplayedDaysIndex(i);c+=s,c<0&&(c=0);var l=this.displayedDays[c];if(l||(l=this.displayedDays[c-1]),l||(l=this.displayedDays[c-2]),l){var d=this.displayedDays[c+r];this.isValidItemDates(l,d)&&(this.currentElement.startDate=l,this.currentElement.endDate=d,this.$emit("item-changed",this.currentElement))}},changeStartDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.floor(t/this.cellWidth),i=this.lastStartDate,n=this.currentElement.endDate,a=this.getDisplayedDaysIndex(i),o=this.getDisplayedDaysIndex(n);a+=s,a>o&&(a=o),a<0&&(a=0);var r=this.displayedDays[a];this.isValidItemDates(r,this.currentElement.endDate)&&(this.currentElement.startDate=r,this.$emit("item-changed",this.currentElement))},changeEndDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.ceil(t/this.cellWidth);this.currentElement.startDate.isBefore(this.startDate)&&(this.currentElement.startDate=this.startDate.clone()),this.currentElement.endDate.isBefore(this.startDate)&&(this.currentElement.endDate=this.startDate.clone().add(1,"days")),this.lastEndDate.isBefore(this.startDate)&&(this.lastEndDate=this.startDate.clone().add(1,"days"));var i=this.currentElement.startDate,n=this.lastEndDate,a=this.getDisplayedDaysIndex(i),o=this.getDisplayedDaysIndex(n);o+=s-1,o<a&&(o=a),o>this.displayedDaysIndex.length&&(o=this.displayedDaysIndex.length-1);var r=this.displayedDays[o];this.isValidItemDates(this.currentElement.startDate,r)&&(this.currentElement.endDate=r,this.$emit("item-changed",this.currentElement))},moveTimebar:function(e,t){!this.isChangeStartDate&&!this.isChangeEndDate&&e.editable&&this.isCurrentUserManager&&(this.isChangeDates=!0,this.isChangeStartDate=!1,this.isChangeEnd=!1,this.currentElement=e,this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="ew-resize")},moveTimebarLeftSide:function(e,t){!this.isChangeDates&&!this.isChangeEndDate&&e.editable&&this.isCurrentUserManager&&(this.isChangeDates=!1,this.isChangeStartDate=!0,this.isChangeEndDate=!1,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add(1,"days")),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="w-resize")},moveTimebarRightSide:function(e,t){!this.isChangeDates&&!this.isChangeStartDate&&e.editable&&this.isCurrentUserManager&&(this.isChangeDates=!1,this.isChangeStartDate=!1,this.isChangeEndDate=!0,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add(1,"days")),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="e-resize")},onTimelineScroll:function(e,t){var s=t.scrollTop;this.entityList.scrollTop=s;var i=t.scrollLeft;this.timelineHeader.scrollLeft=i},scrollScheduleLeft:function(e){var t=this.timelineContentWrapper.scrollLeft,s=t-e.movementX;this.timelineContentWrapper.scrollLeft=s,this.timelineHeader.scrollLeft=s},scrollScheduleTop:function(e){var t=this.timelineContentWrapper.scrollTop,s=t-e.movementY;this.timelineContentWrapper.scrollTop=s,this.entityList.scrollTop=s},scrollToToday:function(){var e=this;setTimeout((function(){var t=c()();if(t.isAfter(e.startDate)&&t.isBefore(e.endDate)){var s=e.getTimebarLeft({startDate:t})-5,i=s-(e.schedule.offsetWidth/2-300);e.timelineContentWrapper.scrollLeft=i,e.timelineHeader.scrollLeft=i}}),10)},startBrowsing:function(e){this.isChangeStartDate||this.isChangeEndDate||this.isChangeDates||(document.body.style.cursor="grabbing",this.isBrowsingX=!0,this.isBrowsingY=!0)},startBrowsingX:function(e){document.body.style.cursor="grabbing",this.isBrowsingX=!0},startBrowsingY:function(e){document.body.style.cursor="grabbing",this.isBrowsingY=!0},stopBrowsing:function(e){document.body.style.cursor="default",this.isChangeStartDate=!1,this.isChangeEndDate=!1,this.isChangeDates=!1,this.isBrowsingX=!1,this.isBrowsingY=!1},businessDiff:function(e,t){if(e.isSame(t))return 0;var s=e.clone().endOf("isoweek"),i=t.clone().startOf("isoweek"),n=i.diff(s,"days");if(t.diff(e,"days")>6){var a=5*n/7,o=s.isoWeekday()-e.isoWeekday();0===e.isoWeekday()&&--o;var r=t.isoWeekday()-i.isoWeekday();return 6===t.day()&&--r,Math.ceil(o+a+r-1)}var l=c()(e),d=0;while(l.isBefore(t,"day"))0!==l.day()&&6!==l.day()&&d++,l.add(1,"days");return d},dayClass:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{"day-name":!0,"new-week":e.newWeek||!1,"new-month":e.newMonth||0===t||!1}},dayStyle:function(e){return{"min-width":e.weekend?"0px":this.cellWidth+"px","max-width":e.weekend?"0px":this.cellWidth+"px"}},entityLineStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={};return t&&(i["border-left"]="1px solid "+e.color,i["border-top"]="1px solid "+e.color,i["border-bottom"]="1px solid "+e.color,s&&(i.background=e.color)),e.expanded&&(i["margin-bottom"]="0"),i},timebarStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default"};return t&&(s["background-color"]=e.color),s},timebarChildStyle:function(e,t){return{left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default",background:e.color||t.color}},getTimebarLeft:function(e){var t=e.startDate||this.startDate,s=this.businessDiff(this.startDate,t)||0;return s*this.cellWidth+5},getTimebarWidth:function(e){var t=e.startDate||this.startDate,s=e.endDate||e.startDate&&e.startDate.clone().add(1,"days")||this.startDate.clone().add(1,"days");if(e.man_days>0&&!e.end_date&&!e.endDate){var i=Math.ceil(e.man_days);s=Object(u["a"])(t,i-1)}var n=this.businessDiff(t,s);return n>0?(n+1)*this.cellWidth-10:this.cellWidth-10},expandRootElement:function(e){this.$emit("root-element-expanded",e)},expandChildElement:function(e){},childNameStyle:function(e,t){var s=t%2===0,i=s?.7:.9;return{background:d["a"].lightenColor(e.color,i)}},childrenStyle:function(e){return{"border-bottom":"1px solid "+e.color}},showEditMilestoneModal:function(e,t){this.modals.edit=!0,t?(t.date=Object(u["q"])(t.date),this.milestoneToEdit=t):this.milestoneToEdit={date:e}},hideEditMilestoneModal:function(){this.modals.edit=!1},confirmEditMilestone:function(e){var t=this;this.loading.edit=!0,this.saveMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},removeMilestone:function(e){var t=this;this.loading.edit=!0,this.deleteMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},milestoneLineStyle:function(e){var t=Object(u["q"])(this.startDate.format("YYYY-MM-DD")),s=Object(u["q"])(e.date);if(t.isSameOrBefore(s)){var i=this.businessDiff(t,s);return{left:(i+.5)*this.cellWidth+"px"}}return{display:"none"}},addMilestoneTitle:function(e){return"".concat(this.$t("schedule.milestone.add_milestone")," ")+"".concat(e.format("YYYY-MM-DD"))}}),socket:{},watch:{startDate:function(){this.resetScheduleSize(),this.scrollToToday()},endDate:function(){this.resetScheduleSize()},zoomLevel:function(){this.resetScheduleSize()},isLoading:function(){this.$nextTick(this.resetScheduleSize)},height:function(){this.$nextTick(this.resetScheduleSize)}}},P=E,O=(s("9123"),Object(k["a"])(P,i,n,!1,null,"5cb0eaa7",null));t["a"]=O.exports},d8a5:function(e,t,s){},d936:function(e,t,s){"use strict";s("d5b0")},dbca:function(e,t,s){},dbde:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"c-mask":!0,"is-active":e.displayed},on:{click:function(t){return e.$emit("click")}}})},n=[],a={name:"combobox-mask",props:{displayed:{type:Boolean,default:!1}},computed:{}},o=a,r=s("2877"),c=Object(r["a"])(o,i,n,!1,null,"5261c2a0",null);t["a"]=c.exports},dde1:function(e,t,s){"use strict";s("d61d")},de26:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i=30},de40:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{button:!0,active:e.active,"is-primary":e.isPrimary,"is-loading":e.isLoading,"is-on":e.isOn},attrs:{title:e.title},on:{click:function(t){return e.$emit("click")}}},["undo"===e.icon?s("corner-left-down-icon",{class:e.iconClass}):e._e(),"redo"===e.icon?s("corner-right-down-icon",{class:e.iconClass}):e._e(),"save"===e.icon?s("save-icon",{class:e.iconClass}):e._e(),"plus"===e.icon?s("plus-icon",{class:e.iconClass}):e._e(),"minus"===e.icon?s("minus-icon",{class:e.iconClass}):e._e(),"comment"===e.icon?s("message-square-icon",{class:e.iconClass}):e._e(),"download"===e.icon?s("download-icon",{class:e.iconClass}):e._e(),"upload"===e.icon?s("upload-icon",{class:e.iconClass}):e._e(),"film"===e.icon?s("film-icon",{class:e.iconClass}):e._e(),"play"===e.icon?s("play-icon",{class:e.iconClass}):e._e(),"pause"===e.icon?s("pause-icon",{class:e.iconClass}):e._e(),"edit"===e.icon?s("edit-icon",{class:e.iconClass}):e._e(),"image"===e.icon?s("image-icon",{class:e.iconClass}):e._e(),"maximize"===e.icon?s("maximize-icon",{class:e.iconClass}):e._e(),"delete"===e.icon?s("trash-icon",{class:e.iconClass}):e._e(),"restore"===e.icon?s("rotate-ccw-icon",{class:e.iconClass}):e._e(),"back"===e.icon?s("skip-back-icon",{class:e.iconClass}):e._e(),"forward"===e.icon?s("skip-forward-icon",{class:e.iconClass}):e._e(),"left"===e.icon?s("chevron-left-icon",{class:e.iconClass}):e._e(),"right"===e.icon?s("chevron-right-icon",{class:e.iconClass}):e._e(),"compare"===e.icon?s("copy-icon",{class:e.iconClass}):e._e(),"remove"===e.icon?s("x-icon",{class:e.iconClass}):e._e(),"pencil"===e.icon?s("edit2-icon",{class:e.iconClass}):e._e(),"layers"===e.icon?s("layers-icon",{class:e.iconClass}):e._e(),"type"===e.icon?s("type-icon",{class:e.iconClass}):e._e(),"list"===e.icon?s("list-icon",{class:e.iconClass}):e._e(),"funnel"===e.icon?s("filter-icon",{class:e.iconClass}):e._e(),"refresh"===e.icon?s("refresh-cw-icon",{class:e.iconClass}):e._e(),"repeat"===e.icon?s("repeat-icon",{class:e.iconClass}):e._e(),"soundoff"===e.icon?s("volume-x-icon",{class:e.iconClass}):e._e(),"soundon"===e.icon?s("volume-2-icon",{class:e.iconClass}):e._e(),e.isText?s("span",{class:{text:!0,"is-hidden-touch":e.isResponsive}},[e._v(" "+e._s(e.text)+" ")]):e._e()],1)},n=[],a=s("0a35"),o={name:"button-simple",components:{ChevronLeftIcon:a["j"],ChevronRightIcon:a["k"],CornerLeftDownIcon:a["n"],CornerRightDownIcon:a["o"],CopyIcon:a["m"],DownloadIcon:a["q"],EditIcon:a["s"],Edit2Icon:a["r"],FilmIcon:a["v"],FilterIcon:a["w"],ImageIcon:a["y"],LayersIcon:a["z"],ListIcon:a["A"],MaximizeIcon:a["E"],MessageSquareIcon:a["F"],MinusIcon:a["G"],PauseIcon:a["I"],PlayIcon:a["J"],PlusIcon:a["K"],RefreshCwIcon:a["L"],RepeatIcon:a["M"],RotateCcwIcon:a["N"],SaveIcon:a["O"],SkipBackIcon:a["R"],SkipForwardIcon:a["S"],TrashIcon:a["V"],TypeIcon:a["W"],UploadIcon:a["X"],VolumeXIcon:a["bb"],Volume2Icon:a["ab"],XIcon:a["cb"]},props:{active:{default:!1,type:Boolean},icon:{default:"",type:String},isOn:{default:!1,type:Boolean},isLoading:{default:!1,type:Boolean},isPrimary:{default:!1,type:Boolean},isResponsive:{default:!1,type:Boolean},text:{default:"",type:String},title:{default:"",type:String}},computed:{isText:function(){return this.text&&this.text.length>0},iconClass:function(){return{icon:!0,"is-small":!0,"only-icon":!this.isText}}}},r=o,c=(s("782d"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"ef892a78",null);t["a"]=l.exports},de95:function(e,t,s){"use strict";s("c802")},e007:function(e,t,s){"use strict";s("16ce")},e07d:function(e,t,s){"use strict";var i,n=s("ade3"),a=s("5530"),o=(s("4de4"),s("d3b7"),s("159b"),s("c740"),s("a434"),s("b0c0"),s("edbf")),r=function(e){return{name:e.name,short_name:e.short_name,is_reviewable:Boolean("true"===e.is_reviewable),is_done:Boolean("true"===e.is_done),is_retake:Boolean("true"===e.is_retake),is_artist_allowed:Boolean("true"===e.is_artist_allowed),is_client_allowed:Boolean("true"===e.is_client_allowed),color:e.color}},c={getTaskStatuses:function(e){o["a"].get("/api/data/task-status",e)},getTaskStatus:function(e,t){o["a"].get("/api/data/task-status/".concat(e),t)},newTaskStatus:function(e){var t=r(e);return o["a"].ppost("/api/data/task-status/",t)},updateTaskStatus:function(e){var t=r(e);return o["a"].pput("/api/data/task-status/".concat(e.id),t)},deleteTaskStatus:function(e){return o["a"].pdel("/api/data/task-status/".concat(e.id))}},l=s("2229"),d=s("9fb0"),u={taskStatus:[],taskStatusMap:{}},p=u,m={taskStatus:function(e){return e.taskStatus},taskStatusMap:function(e){return e.taskStatusMap},editTaskStatus:function(e){return e.editTaskStatus},deleteTaskStatus:function(e){return e.deleteTaskStatus},taskStatusForCurrentUser:function(e,t,s,i){var n=i.productionTaskStatuses;return i.isCurrentUserManager?n:i.isCurrentUserClient?n.filter((function(e){return e.is_client_allowed})):n.filter((function(e){return e.is_artist_allowed}))},getTaskStatusForCurrentUser:function(e,t,s,i){return function(e){var t=i.getProductionTaskStatuses(e);return i.isCurrentUserManager?t:i.isCurrentUserClient?t.filter((function(e){return e.is_client_allowed})):t.filter((function(e){return e.is_artist_allowed}))}}},h={loadTaskStatuses:function(e,t){var s=e.commit;e.state;s(d["Vc"]),c.getTaskStatuses((function(e,i){e?s(d["Uc"]):s(d["Tc"],i),t&&t(e)}))},loadTaskStatus:function(e,t){var s=e.commit;e.state;c.getTaskStatus(t,(function(e,t){e?console.error(e):s(d["Mb"],t)}))},newTaskStatus:function(e,t){var s=e.commit;e.state;return c.newTaskStatus(t).then((function(e){s(d["Mb"],e),Promise.resolve(e)}))},saveTaskStatus:function(e,t){var s=e.commit;e.state;return c.updateTaskStatus(t).then((function(e){s(d["Mb"],e),Promise.resolve(e)}))},deleteTaskStatus:function(e,t){var s=e.commit;e.state;c.deleteTaskStatus(t).then((function(){s(d["ob"],t),Promise.resolve(t)}))}},f=(i={},Object(n["a"])(i,d["Vc"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(n["a"])(i,d["Uc"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(n["a"])(i,d["Tc"],(function(e,t){e.taskStatus=Object(l["d"])(t),e.taskStatusMap={},t.forEach((function(t){null===t.is_artist_allowed&&(t.is_artist_allowed=!0),null===t.is_client_allowed&&(t.is_client_allowed=!1),e.taskStatusMap[t.id]=t}))})),Object(n["a"])(i,d["Mb"],(function(e,t){var s=e.taskStatusMap[t.id];s&&s.id?Object.assign(s,t):(e.taskStatus.push(t),e.taskStatus=Object(l["d"])(e.taskStatus)),e.taskStatusMap[t.id]=t})),Object(n["a"])(i,d["ob"],(function(e,t){var s=e.taskStatus.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskStatus.splice(s,1),delete e.taskStatusMap[t.id]})),Object(n["a"])(i,d["ae"],(function(e){Object.assign(e,Object(a["a"])({},u))})),i);t["a"]={state:p,getters:m,actions:h,mutations:f}},e3fc:function(e,t,s){},e42b:function(e,t,s){},e450:function(e,t,s){},e4c2:function(e,t,s){},e4fd:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("div",{staticClass:"task-type-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleTaskTypeList}},[s("div",{staticClass:"selected-task-type-line flexrow-item"},[e.currentTaskType?s("task-type-name",{attrs:{"task-type":e.currentTaskType}}):e._e()],1),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showTaskTypeList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskTypeList,(function(t){return s("div",{key:t.id,staticClass:"task-type-line",on:{click:function(s){return e.selectTaskType(t)}}},[s("task-type-name",{attrs:{"task-type":t}})],1)})),0):e._e()]),s("combobox-mask",{attrs:{displayed:e.showTaskTypeList},on:{click:e.toggleTaskTypeList}})],1)},n=[],a=s("5530"),o=s("2f62"),r=s("0a35"),c=s("dbde"),l=s("274f"),d={name:"combobox-task-type",components:{ChevronDownIcon:r["i"],ComboboxMask:c["a"],TaskTypeName:l["a"]},data:function(){return{showTaskTypeList:!1}},props:{label:{default:"",type:String},taskTypeList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["taskTypeMap"])),{},{currentTaskType:function(){return this.value?this.taskTypeMap[this.value]:this.taskTypeList[0]}}),methods:{selectTaskType:function(e){this.$emit("input",e.id),this.showTaskTypeList=!1},toggleTaskTypeList:function(){this.showTaskTypeList=!this.showTaskTypeList}}},u=d,p=(s("b030"),s("2877")),m=Object(p["a"])(u,i,n,!1,null,"2ade3883",null);t["a"]=m.exports},e577:function(e,t,s){},e5e6:function(e,t,s){"use strict";s("09d9")},e60b:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading&&!e.isError?s("spinner",{staticClass:"table-info",attrs:{"is-stylish":!0}}):e._e(),e.isError?s("div",{staticClass:"has-text-centered table-info"},[s("span",{staticClass:"tag is-danger"},[e._v(" "+e._s(e.$t("main.loading_error"))+" ")])]):e._e()],1)},n=[],a=s("be83"),o={name:"table-info",components:{Spinner:a["a"]},props:{isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}}},r=o,c=s("2877"),l=Object(c["a"])(r,i,n,!1,null,"744f9020",null);t["a"]=l.exports},e6c8:function(e,t,s){},e739:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list task-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{ref:"th-prod",staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.production"))+" ")]),s("th",{ref:"th-type",staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.task_type"))+" ")]),s("th",{ref:"th-name",staticClass:"name datatable-row-header",style:{left:e.colNamePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.entity"))+" ")]),s("th",{staticClass:"description",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.description"))+" ")]),s("th",{staticClass:"estimation",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"estimation",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.duration").substring(0,3))+". ")]),s("th",{staticClass:"due-date",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.due_date"))+" ")]),s("th",{staticClass:"status",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.task_status"))+" ")]),e.done?s("th",{staticClass:"end-date",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.end_date"))+" ")]):s("th",{staticClass:"last-comment",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.last_comment"))+" ")])])]),e.tasks.length>0?s("tbody",{staticClass:"datatable-body"},e._l(e.displayedTasks,(function(t,i){return s("tr",{key:t+"-"+i,class:{"datatable-row":!0,"datatable-row--selectable":!0,selected:!(!e.selectionGrid||!e.selectionGrid[i])&&e.selectionGrid[i][0]},on:{click:function(t){return e.onLineClicked(i,t)}}},[s("td",{staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"row"}},[s("production-name-cell",{attrs:{"is-tooltip":!0,entry:e.productionMap[t.project_id],"only-avatar":!0}})],1),s("task-type-cell",{staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{"production-id":t.project_id,"task-type":e.getTaskType(t)}}),s("td",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:t.entity_preview_file_id}}}),s("router-link",{attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)]),s("description-cell",{staticClass:"description",attrs:{entry:{description:t.entity_description}}}),s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")]),s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.duration))+" ")]),s("td",{staticClass:"due-date"},[e._v(" "+e._s(e.formatDate(t.due_date))+" ")]),s("validation-cell",{ref:"validation-"+i+"-0",refInFor:!0,staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!e.done,clickable:!1,selected:!(!e.selectionGrid||!e.selectionGrid[i])&&e.selectionGrid[i][0],rowX:i,columnY:0,column:t.taskStatus},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}}),e.done?s("td",{staticClass:"end-date"},[e._v(" "+e._s(e.formatDate(t.end_date))+" ")]):s("last-comment-cell",{staticClass:"last-comment",attrs:{task:t}})],1)})),0):e._e()])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),0!==e.tasks.length||e.isLoading?e._e():s("div",{staticClass:"has-text-centered empty-list"},[e._m(0),s("p",[e._v(" "+e._s(e.$t("people.no_task_assigned"))+" ")])]),e.tasks.length&&!e.isLoading?s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+" ")]):e._e()],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("img",{attrs:{src:s("f64c")}})])}],a=s("5530"),o=(s("fb6a"),s("b0c0"),s("2f62")),r=s("35bb"),c=s("31f2"),l=s("de26"),d=s("3657"),u=s("bb21"),p=s("0fcb"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[e.task.last_comment.person?s("people-avatar",{staticClass:"flexrow-item avatar-wrapper",attrs:{size:25,"font-size":14,person:e.task.last_comment.person}}):s("span",{staticClass:"no-avatar"}),e.commentText&&e.commentText.length>0?s("span",{staticClass:"flexrow-item last-comment pointer",domProps:{innerHTML:e._s(e.compileMarkdown(e.commentText))},on:{click:e.onClick}}):e.task.last_comment.person?s("span",{staticClass:"flexrow-item last-comment no-comment"},[e._v(" "+e._s(e.$t("main.empty_comment"))+" ")]):e._e()],1)])},h=[],f=s("0e54"),_=s.n(f),v=s("eb8c"),g={name:"last-comment-cell",components:{PeopleAvatar:v["a"]},data:function(){return{isOpen:!1,timeout:null}},props:["task"],computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{commentText:function(){var e=this.task.last_comment.text,t=140,s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"..."),s}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{compileMarkdown:function(e){return _()(e||"")},onClick:function(){this.isOpen=!this.isOpen}})},y=g,b=(s("8ab4"),s("2877")),k=Object(b["a"])(y,m,h,!1,null,"7c166565",null),w=k.exports,C=s("09a4"),S=s("58f5"),T=s("e60b"),x=s("cb0e"),E={name:"todos-list",mixins:[c["a"],r["a"]],components:{EntityThumbnail:u["a"],DescriptionCell:p["a"],LastCommentCell:w,ProductionNameCell:C["a"],TableInfo:T["a"],TaskTypeCell:S["a"],ValidationCell:x["a"]},props:["done","tasks","isLoading","isError","selectionGrid"],data:function(){return{page:1,colTypePosX:"",colNamePosX:""}},mounted:function(){this.page=1,this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1),this.colTypePosX=this.$refs["th-prod"].offsetWidth+"px",this.colNamePosX=this.$refs["th-prod"].offsetWidth+this.$refs["th-type"].offsetWidth+"px"},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["nbSelectedTasks","taskTypeMap","productionMap"])),{},{displayedTasks:function(){return this.tasks.slice(0,this.page*l["a"])}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},formatDate:function(e){return e?Object(d["e"])(e):""},onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},onLineClicked:function(e,t){var s="validation-"+e+"-0",i=this.$refs[s][0];i.select(t)},onTaskSelected:function(e){var t=this;if(e.isShiftKey){if(this.lastSelection){var s=this.lastSelection.x,i=e.x;e.x<this.lastSelection.x&&(s=e.x,i=this.lastSelection.x);for(var n=s;n<=i;n++){var a="validation-"+n+"-0",o=this.$refs[a][0];this.selectionGrid[n][0]||o.select({ctrlKey:!0,isUserClick:!1})}}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(this.$store.commit("ADD_SELECTED_TASK",e),!e.isShiftKey&&e.isUserClick){var r=e.x,c=0;this.lastSelection={x:r,y:c};var l="validation-"+r+"-"+c,d=this.$refs[l][0];this.$nextTick((function(){t.scrollToValidationCell(d)}))}},onTaskUnselected:function(e){e.isCtrlKey||1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},getTaskType:function(e){var t=this.taskTypeMap[e.task_type_id],s=this.productionMap[e.project_id];return t.episode_id=e.episode_id,s&&"tvshow"===s.production_type&&!e.episode_id&&(t.episode_id=s.first_episode_id),t},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id;var i=this.productionMap[e.project_id],n=e.episode_id;return i&&"tvshow"===i.production_type&&!n&&(n="shot"===t?i.first_episode_id:"main"),n&&(s.name="episode-".concat(t),s.params.episode_id=n),s},onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,i=t.y,n=null;(e.ctrlKey||e.metaKey)&&(37===e.keyCode?n=this.select(s,i-1):38===e.keyCode?n=this.select(s-1,i):39===e.keyCode?n=this.select(s,i+1):40===e.keyCode&&(n=this.select(s+1,i)),this.scrollToValidationCell(n))},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),n=s.bottom>i.bottom-t,a=s.top<i.top+t,o=s.right>i.right-t,r=s.left<i.left+t;if(n){var c=s.bottom-i.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=i.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-i.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=i.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}},select:function(e,t){var s="validation-"+e+"-"+t,i=this.$refs[s];return i&&i[0].$el.click(),i?i[0]:0},resizeHeaders:function(){var e=this,t=this.$refs["body-tbody"],s=t&&t.children;if(s){var i=t.children[0],n=[{index:1,name:"type"},{index:3,name:"name"}];n.forEach((function(t){var s=Math.max(i.children[t.index].offsetWidth,100);e.$refs["th-"+t.name].style["min-width"]="".concat(s,"px")}))}}})},P=E,O=(s("d57a"),Object(b["a"])(P,i,n,!1,null,"639a098d",null));t["a"]=O.exports},e8b8:function(e,t,s){},e92a:function(e,t,s){},e95c:function(e,t,s){"use strict";s("95cb")},e962:function(e,t,s){"use strict";s("5688")},ea46:function(e,t,s){"use strict";s("d8a5")},eb23:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{clearFocus:function(){document.activeElement.blur()},focusInput:function(e){e.focus(),e.setSelectionRange(0,e.value.length),e.className="input"},onInputBlur:function(e){e.target.className="input stylehidden"},onInputMouseOut:function(e){document.activeElement!==e.target&&(e.target.className="input stylehidden")},onInputMouseOver:function(e){e.target.className="input"},pauseEvent:function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}}}},eb8c:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isLink?s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","min-width":e.size+"px","min-height":e.size+"px","font-size":e.person.has_avatar?0:e.fontSize+"px"}},[s("router-link",{staticClass:"avatar-link",attrs:{to:{name:"person",params:{person_id:e.person.id}},title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):e._e(),e.person.has_avatar?e._e():s("span",[e._v(" "+e._s(e.initials)+" ")])])],1):s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","font-size":e.fontSize+"px"},attrs:{title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):s("span",[e._v(" "+e._s(e.initials)+" ")])])},n=[],a=(s("a9e3"),{name:"person-avatar",data:function(){return{avatarPath:"",avatarKey:"",initials:""}},props:{person:{type:Object,default:function(){return{id:"empty",color:"#FFF"}}},size:{type:Number,default:40},"font-size":{type:Number,default:18},"is-link":{type:Boolean,default:!0},"no-cache":{type:Boolean,default:!1}},created:function(){this.reloadAvatar()},methods:{reloadAvatar:function(){this.avatarPath=this.person.avatarPath+"?unique="+this.person.uniqueHash,this.avatarKey=this.person.id+"-"+this.person.uniqueHash}},mounted:function(){this.initials=this.person.initials},watch:{person:function(){this.reloadAvatar()},"person.uniqueHash":function(){this.reloadAvatar()}}}),o=a,r=(s("8bc7"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"be351bf6",null);t["a"]=c.exports},ebac:function(e,t,s){},edae:function(e,t,s){"use strict";s("3714")},edbf:function(e,t,s){"use strict";s("d3b7"),s("99af");var i=s("db82"),n=s.n(i),a=(s("5319"),s("ac1f"),{backToLogin:function(){"/login"!==window.location&&window.location.replace("/login")}}),o=a,r={get:function(e,t){n.a.get(e).end((function(e,s){t(e,s.body)}))},post:function(e,t,s){n.a.post(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},put:function(e,t,s){n.a.put(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},del:function(e,t){n.a.del(e).end((function(e,s){if(401===s.statusCode)return o.backToLogin();t(e,s.body)}))},pget:function(e){return new Promise((function(t,s){r.get(e,(function(e,i){e?s(e):t(i)}))}))},ppost:function(e,t,s){return new Promise((function(s,i){n.a.post(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),i(e)):e?i(e):s(t.body)}))}))},pput:function(e,t,s){return new Promise((function(s,i){n.a.put(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),i(e)):e?i(e):s(t.body)}))}))},pdel:function(e,t){return new Promise((function(t,s){n.a.del(e).end((function(e,i){401===i.statusCode?(o.backToLogin(),s(e)):e?s(e):t(i.body)}))}))},getModel:function(e,t){var s="/api/data/".concat(e,"/").concat(t);return r.pget(s)},getEvents:function(e,t){var s="/api/data/events/last?after=".concat(e,"&before=").concat(t,"&page_size=100000");return r.pget(s)}};t["a"]=r},edd5:function(e,t,s){},ee35:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEditing?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.change_preview"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.add_preview"))+" ")]),s("p",[e._v(" "+e._s(e.$t("tasks.select_preview_file"))+" ")]),s("file-upload",{ref:"preview-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.isError?s("p",{staticClass:"error"},[e._v(" "+e._s(e.$t("tasks.add_preview_error"))+" ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":void 0==e.forms},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},n=[],a=s("5530"),o=s("2f62"),r=s("d065"),c=s("8dee"),l=s("4085"),d={name:"add-preview-modal",mixins:[r["a"]],components:{FileUpload:l["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:c["a"].ALL_EXTENSIONS_STRING}},data:function(){return{forms:null}},mounted:function(){this.forms=null},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onFileSelected:function(e){this.forms=e,this.$emit("fileselected",e)},reset:function(){this.$refs["preview-field"].reset(),this.forms=null}}),watch:{active:function(){this.reset()}}},u=d,p=(s("9d3b"),s("2877")),m=Object(p["a"])(u,i,n,!1,null,"eb63e79a",null);t["a"]=m.exports},ef8b:function(e,t,s){"use strict";var i,n=s("ade3"),a=s("5530"),o=(s("4de4"),s("d81d"),s("b0c0"),s("d3b7"),s("b64b"),s("159b"),s("c740"),s("a434"),s("ba4c")),r=s.n(o),c=(s("a9e3"),s("edbf")),l={getTaskTypes:function(){return c["a"].pget("/api/data/task-types")},newTaskType:function(e){var t={name:e.name,color:e.color,priority:Number(e.priority),for_shots:Boolean("true"===e.for_shots),allow_timelog:Boolean("true"===e.allow_timelog)};return c["a"].ppost("/api/data/task-types/",t)},updateTaskType:function(e){var t={name:e.name,color:e.color};return e.priority&&e.priority>0&&(t.priority=Number(e.priority)),void 0!==e.allow_timelog&&(t.allow_timelog=Boolean("true"===e.allow_timelog)),void 0!==e.for_shots&&(t.for_shots=Boolean("true"===e.for_shots)),c["a"].pput("/api/data/task-types/".concat(e.id),t)},deleteTaskType:function(e){return c["a"].pdel("/api/data/task-types/".concat(e.id))},getTaskType:function(e){return c["a"].pget("/api/data/task-types/".concat(e))}},d=s("2229"),u=s("9fb0"),p={taskTypes:[],taskTypeMap:{},sequenceSubscriptions:{},editTaskType:{isLoading:!1,isError:!1},deleteTaskType:{isLoading:!1,isError:!1}},m=Object(a["a"])({},p),h={taskTypes:function(e){return e.taskTypes},taskTypeMap:function(e){return e.taskTypeMap},sequenceSubscriptions:function(e){return e.sequenceSubscriptions},editTaskType:function(e){return e.editTaskType},deleteTaskType:function(e){return e.deleteTaskType},currentTaskType:function(e,t,s){return e.taskTypeMap[s.route.params.task_type_id]||{}},assetTaskTypes:function(e,t,s,i){return i.productionTaskTypes.filter((function(e){return!e.for_shots}))},shotTaskTypes:function(e,t,s,i){return i.productionTaskTypes.filter((function(e){return e.for_shots}))},getTaskTypeOptions:function(e){return e.taskTypes.map((function(e){return{label:e.name,value:e.id}}))},getAssetTaskTypeOptions:function(e,t){return t.assetTaskTypes.map((function(e){return{label:e.name,value:e.id}}))},getShotTaskTypeOptions:function(e,t){return t.shotTaskTypes.map((function(e){return{label:e.name,value:e.id}}))},getTaskType:function(e,t){return function(t){return e.taskTypeMap[t]}}},f={loadTaskTypes:function(e){var t=e.commit;e.state;return t(u["Zc"]),l.getTaskTypes().then((function(e){t(u["Xc"],e),Promise.resolve(e)})).catch((function(e){console.error(e),Promise.reject(e)}))},loadTaskType:function(e,t){var s=e.commit;e.state;return l.getTaskType(t).then((function(e){s(u["Nb"],e),Promise.resolve(e)})).catch((function(e){console.error(e),Promise.reject(e)}))},newTaskType:function(e,t){var s=e.commit;e.state;return s(u["Pb"],t),l.newTaskType(t).then((function(e){s(u["Nb"],e),Promise.resolve(e)}))},editTaskType:function(e,t){var s=e.commit;e.state;return s(u["Pb"]),l.updateTaskType(t).then((function(e){s(u["Nb"],e),Promise.resolve(e)}))},deleteTaskType:function(e,t){var s=e.commit;e.state;return s(u["rb"]),l.deleteTaskType(t).then((function(){s(u["pb"],t),Promise.resolve(t)}))},initTaskType:function(e,t){e.commit;var s=e.dispatch,i=(e.state,e.rootState,e.rootGetters);return new Promise((function(e,n){i.currentTaskType.for_shots?Object.keys(i.shotMap).length<2||t?0===i.episodes.length&&i.isTVShow?s("loadEpisodes").then((function(){return s("loadShots",(function(t){t?n(t):e()}))})).catch(n):s("loadShots",(function(t){t?n(t):e()})):e():Object.keys(i.assetMap).length<2||t?s("loadAssets").then(e).catch(n):e()}))}},_=(i={},Object(n["a"])(i,u["Zc"],(function(e){})),Object(n["a"])(i,u["Yc"],(function(e){e.taskTypes=[],e.taskTypeMap={}})),Object(n["a"])(i,u["Xc"],(function(e,t){e.taskTypes=Object(d["n"])(t),e.taskTypeMap={},t.forEach((function(t){e.taskTypeMap[t.id]=t}))})),Object(n["a"])(i,u["Pb"],(function(e,t){e.editTaskType.isLoading=!0,e.editTaskType.isError=!1})),Object(n["a"])(i,u["Ob"],(function(e){e.editTaskType.isLoading=!1,e.editTaskType.isError=!0})),Object(n["a"])(i,u["Nb"],(function(e,t){var s=e.taskTypeMap[t.id];s&&s.id?Object.assign(s,t):(e.taskTypes.push(t),e.taskTypeMap[t.id]=t),e.taskTypes=Object(d["n"])(e.taskTypes),e.editTaskType={isLoading:!1,isError:!1}})),Object(n["a"])(i,u["rb"],(function(e){e.deleteTaskType={isLoading:!0,isError:!1}})),Object(n["a"])(i,u["qb"],(function(e){e.deleteTaskType={isLoading:!1,isError:!0}})),Object(n["a"])(i,u["pb"],(function(e,t){var s=e.taskTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskTypes.splice(s,1),delete e.taskTypeMap[t.id],e.deleteTaskType={isLoading:!1,isError:!1}})),Object(n["a"])(i,u["Jc"],(function(e,t){var s=t.sequenceId,i=t.subscribed;r.a.set(e.sequenceSubscriptions,s,i)})),Object(n["a"])(i,u["Kc"],(function(e,t){e.sequenceSubscriptions={},t.forEach((function(t){e.sequenceSubscriptions[t]=!0}))})),Object(n["a"])(i,u["ae"],(function(e){Object.assign(e,Object(a["a"])({},p))})),i);t["a"]={state:m,getters:h,actions:f,mutations:_}},f420:function(e,t,s){},f4f1:function(e,t,s){"use strict";s("7921")},f54c:function(e,t,s){},f54c0:function(e,t,s){"use strict";s("b16f")},f649:function(e,t,s){},f64c:function(e,t,s){e.exports=s.p+"img/empty_todo.1f922c20.png"},f693:function(e){e.exports=JSON.parse('{"default":{"assets":{"cast_in":"Présent dans","delete_error":"Une erreur est survenue en créant l\'asset, êtes-vous sûr de vouloir que l\'asset n\'ait plus aucun lien ?","delete_text":"Êtes-vous sûr de vouloir retirer {name} de la base de données ?","edit_fail":"La création ou l\'édition a échoué, une erreur est survenue.","edit_success":"Asset {name} édité avec succès.","edit_title":"Modifier asset","empty_list":"Il n\'y a pas d\'asset dans la production. Voulez-vous en créer ?","empty_list_client":"Il n\'y a pas d\'asset dans la production.","new_asset":"Ajouter un asset","new_assets":"Ajouter des assets","new_success":"Asset {name} créé avec succès.","no_cast_in":"Cet asset n\'apparait dans aucun shot.","number":"asset | assets","restore_text":"Êtes-vous sûr de vouloir restaurer {name} dans votre base de données ?","restore_error":"Une erreur est survenue en restaurant l\'asset.","tasks":"Tâches de fabrication","title":"Assets","fields":{"description":"Description","episode":"Ép.","name":"Nom","production":"Prod","time_spent":"Jours","type":"Type","hidden_from_client":"Visible par le client"}},"asset_types":{"all_asset_types":"Tous les types d\'assets","create_error":"Une erreur est survenue en créant l\'asset. Êtes-vous sûr qu\'il n\'y a pas un asset avec un nom similaire ?","delete_text":"Êtes-vous sur de vouloir enlever {name} de la base de données ?","delete_error":"Une erreur est survenue en supprimant un type d\'asset. Êtes-vous sûr qu\'aucun asset est lié à ce type d\'asset ?","edit_title":"Modifier le type d\'asset","new_asset_type":"Ajouter un type d\'asset","number":"type d\'asset | types d\'assets","title":"Types d\'assets","production_title":"Stats types d\'assets","fields":{"name":"Nom"}},"breakdown":{"all_assets":"Tous les assets disponibles","edit_label":"Changer le label de l\'asset","empty":"Casting vide","label":"Label","picture_mode":"Passer en mode image","text_mode":"Passer en mode texte","title":"Casting","options":{"fixed":"fixe","animate":"animé"}},"comments":{"add_attachment":"Ajouter une pièce jointe","add_checklist":"Ajout checklist","add_comment":"Ajouter un commentaire…","add_preview":"Attacher un fichier","change_preview":"Changer previz","comment_from_client":"Commentaire du client","edit_title":"Modifier le commentaire","empty_text":"Ce commentaire est vide","edit_error":"Une erreur est survenue en éditant le commentaire","error":"Une erreur est survenue en postant le commentaire","no_file_attached":"Aucun fichier attaché","pin":"Épingler","pinned":"Épinglé","post_status":"Publier","retake":"Reprise","revision":"révision","set_status_to":"Positionner le statut à","task_placeholder":"Nouvel élément…","text":"Texte","unpin":"Désépingler","validated":"Validé !","validation_required":"Validation requise","fields":{"text":"Texte"},"checklist":"Checklist"},"custom_actions":{"create_error":"Une erreur est survenue durant la création. Êtes-vous sûr qu\'aucune action a un nom similaire ?","delete_text":"Êtes-vous sûr de supprimer l\'action personnalisée {name} de la base de données ?","delete_error":"Une erreur est survenue en supprimant l\'action personnalisée.","edit_title":"Modifier une action personnalisée","new_custom_action":"Ajouter une action personnalisée","number":"action pesonnalisée | actions personnalisées","run_for_selection":"Lancer une action personnalisée pour les tâche sélectionnées :","title":"Actions","fields":{"name":"Nom","url":"URL","entity_type":"Type d\'entité","is_ajax":"Utiliser AJAX"},"entity_types":{"all":"Tous","shot":"Plan","asset":"Asset"}},"entities":{"build_filter":{"asset_type":"Type d\'asset","all_types":"Tous les types d\'assets","assignation":"Assignation","assignation_exists_for":"Des assignations existent pour","assigned_to":"Assigné à","descriptor":"Metadata","equal":"Égal","in":"Dans","no_assignation_for":"Pas d\'assignation pour","no_filter":"Pas de filtre","not_equal":"Pas égal","not_assigned_to":"Pas assigné à","status":"Statut de tâche","thumbnail":"A une vignette","title":"Filtré sur…","union_and":"Valide tous les filtres suivants","union_or":"Valide un des filtres suivants","with_thumbnail":"Avec vignette","without_thumbnail":"Sans vignette"},"thumbnails":{"error":"Une erreur s\'est produite en téléversant les vignettes","explaination":"L\'ajout d\'une vignette nécessite de publier un nouvel aperçu. Afin de définir plusieurs vignettes en même temps, vous devez d\'abord choisir un type de tâche qui sera utilisé pour publier les nouveaux aperçus. Les vignettes seront définies à partir de ce nouvel aperçu.","explaination_two":"Ensuite, vous devez sélectionner les fichiers que vous voulez télécharger. Pour trouver les bonnes entités, les noms de fichiers doivent correspondre au modèle suivant :","shots_pattern":"\\"SequenceName ShotName\\" ex. SQ01_SH01.","assets_pattern":"\\"AssetType AssetName\\" ex. Environnement_Forêt.","select_files":"Sélectionner les fichiers","selected_files":"Fichiers sélectionnés","select_task_type":"Sélectionner un type de tâche","title":"Ajouter des vignettes","undefined":"Non défini","undefined_pattern":"Non défini","upload":"Téléverser des vignettes"}},"estimation":{"title":"Estimation"},"episodes":{"all_episodes":"Tous les épisodes","edit_error":"Une erreur est survenue en sauvegardant l\'épisode. Êtes-vous sûr qu\'aucun épisode existe avec un nom similaire ?","delete_error":"Une erreur est survenue en créant le plan, êtes-vous sûr que la séquence n\'a plus aucun lien ?","delete_text":"Êtes-vous sûr de vouloir retirer {name} de la base de données ? Tous les plans et préviz liés seront supprimés. Pour confirmer, tapez le nom de l\'épisode en dessous","edit_title":"Éditer épisode","empty_list":"Il n\'y a pas d\'épisodes dans la production. Voulez-vous en créer ?","empty_list_client":"Il n\'y a pas d\'épisode pour cette production.","new_episode":"Nouvel épisode","number":"épisode | épisodes","title":"Stats épisodes","fields":{"name":"Nom","description":"Description"}},"keyboard":{"altdown":"Déplace la sélection d\'une tâche vers le bas","altj":"Selectionne le preview précédent","altk":"Selectionne le preview suivant","altleft":"Déplace la sélection d\'une tâche vers la gauche","altright":"Déplace la sélection d\'une tâche vers la droite","altup":"Déplace la sélection d\'une tâche vers le haut","annotations":"Annotations","draw":"Démarre le mode dessin","navigation":"Navigation","redo":"Redo","undo":"Undo","playlist_navigation":"Navigation dans une playlist","remove_annotation":"Supprimme l\'annotation sélectionnée","shortcuts":"Raccourcis claviers","ctrldown":"Déplacer la seléction de la colonne de métadonnées vers le bas","ctrlleft":"Déplacer la seléction de la colonne de métadonnées vers la gauche","ctrlright":"Déplacer la seléction de la colonne de métadonnées vers la droite","ctrlup":"Déplacer la seléction de la colonne de métadonnées vers le haut"},"login":{"back_to_login":"Revenir à la page de connexion","forgot_password":"Mot de passe oublié ?","login":"Se connecter","login_failed":"La connexion a échoué, vérifiez vos identifiants","login_page":"Annuler","redirecting":"Redirection dans {secondsLeft} secondes…","reset_change_password":"Changer le mot de passe","reset_change_password_form_failed":"Il y a un problème avec le mot de passe donné. S\'il vous plait, verifiez qu\'il y a au moins 7 caractèrs et que les deux mots de passe correspondent.","reset_change_password_failed":"Le changement de mot de passe a échoué. Recommencez toute la procédure.","reset_change_password_succeed":"Le mot de passe a changé. Revenez à la page de connexion pour vous identifier avec.","reset_change_password_title":"Entrez un nouveau mot de passe","reset_password":"Réinitialiser le mot de passe","reset_password_failed":"La réinitialisation du mot de passe a échoué. S\'il vous plait vérifiez votre email.","reset_password_succeed":"La réinitialisation du mot de passe a réussi. Consultez votre boite mail pour la suite de la procédure.","reset_password_title":"Entrez votre mail pour réinitialiser le mot de passe","title":"Se connecter à Kitsu","fields":{"email":"Adresse Mail","password":"Mot de passe","password2":"Mot de passe à nouveau"}},"main":{"about":"À propos","add":"Ajouter","all":"Tous","all_assets":"Tous les assets","admin":"Admin","cancel":"Annuler","clear_selection":"Effacer la sélection","close":"Fermer","confirmation":"Confirmer","confirmation_and_stay":"Confirmer et rester","date":"Date","dark_theme":"Thème sombre","days_spent":"jour passé | jours passés","days_estimated":"jour estimaté | jours estimés","delete":"Supprimer","delete_all":"Supprimer tout","delete_text":"Êtes-vous sûr de vouloir supprimer {name} de la base de données ?","documentation":"Documentation","edit":"Modifier","empty_comment":"Commentaire vide","end_date":"Date de fin","files_selected":"Fichiers sélectionnés","for":"Pour","go_productions":"Aller aux productions","history":"Historique","info":"Information","or":"ou","no":"non","loading":"Chargement…","loading_data":"Chargement des données","loading_error":"Une erreur est survenue en chargeant les données.","logout":"Se déconnecter","modify":"Modifier","minimize":"Minimiser","main_pack":"Main Pack","maximize":"Maximiser","nb_frames":"frames","person":"Personne","profile":"Profil","production":"Production","remove":"Enlever","save":"Enregistrer","sort_by":"Trier par","sorted_by":"Trié(e)s par","start_date":"Date de début","studio":"Studio","tutorials":"Tutorials","user":"Utilisateur","white_theme":"Thème blanc","yes":"oui","csv":{"choose":"Choisir","error_upload":"Une erreur est survenue en téleversant votre fichier .csv.","export_file":"Exporter","import_file":"Importer","import_title":"Importer depuis un .csv","legend":"Légende","legend_ok":"Données reconnue","legend_ignored":"Données ignorée","legend_missing":"Données manquante","legend_disabled":"Données qui ne seront pas mises à jour","legend_overwrite":"Données qui seront mises à jour","paste":"Coller","paste_code":"Coller vos données CSV :","preview":"Aperçu","preview_episode_name":"Nom de l\'épisode","preview_title":"Aperçu de vos données à importer","preview_description":"Importer un fichier .csv pour peupler votre board avec des posts. Vous pouvez aussi ajouter de nouvelles colonnes.","preview_required":"Note: La première ligne doit spécifier les entêtes.","preview_reupload":"Réimporter un fichier .CSV","required_fields":"Le fichier CSV à importer doit comporter les colonnes suivantes :","select_file":"Sélectionner un fichier depuis votre dossier :","tab_select_file":"Importer un fichier CSV","tab_paste_code":"Coller des données CSV","unknown":"Colonne inconnue","upload_file":"Parcourir","options":{"title":"Options","update":"Mettre à jour les données"}},"after":"Après","before":"avant","from":"Depuis","home":"Revenir à la page d\'acceuil","less_filters":"Moins de filtres","more_filters":"Plus de filtres","reload":"Recharger","search_query":"Recherche","search_query_edit":"Éditer le filtre","search_query_edit_error":"Une erreur est survenue en mettant à jour le filtre","to":"Jusqu\'à","workspace":"Espace de travail"},"menu":{"assign_tasks":"Assigner des tâches","change_priority":"Changer la priorité","change_status":"Changer le statut","create_tasks":"Créer des tâches","delete_tasks":"Supprimer des tâches","generate_playlists":"Générer des playlists","run_custom_action":"Lancer des actions","set_estimations":"Définir estimations"},"news":{"all":"Tous","commented_on":"a commenté sur","infos":"Infos","no_news":"Il n\'y a pas de nouveautés pour cette production ou ce filtre","only_comments":"Seulement les commentaires","only_previews":"Seulement les previews","set_preview_on":"a mis un preview sur","task_status":"Statut de tâche","task_type":"Type de tâche","title":"Flux de nouveautés ","hide_stats":"Cacher les statistiques","news":"nouvelles","show_stats":"Montrer les statistiques"},"not_found":{"text":"Le lien que vous avez chargé ne correspond à rien. Retournez sur la page d\'accueil pour reprendre la navigation","title":"Page non trouvé… Est-ce que vous cherchez quelque chose que vous avez supprimé ?"},"notifications":{"and_change_status":"et changé le statut à","assigned_you":"vous a assigné à","commented_on":"a commenté","mention_you_on":"vous a mentionné sur","no_notifications":"Il n\'y a pas encore de notifications pour vous pour les projets en cours","unread_notifications":"notification non lue | notifications non lues","title":"Notifications","with_preview":"avec une version"},"people":{"active":"Présents","active_persons":"présent | présents","add_member_to_team":"Ajouter un membre à l\'équipe: ","create_invite":"Créer et envoyer une invitation","create_error":"Une erreur est survenue en créant l\'utilisateur. Êtes-vous sûr qu\'il n\'y a pas un utilisateur avec un nom ou un email similaire ?","delete_error":"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à elle. Êtes-vous sur que cet utilisateur n\'a aucune tâche assignée et n\'a fait aucun commentaire ?","delete_text":"Êtes-vous sûr de vouloir retirer {personName} de la base de données ? Tous les commentaires et préviz liés seront supprimés. Pour confirmer, tapez le nom complet de l\'utilisateur en dessous","edit_title":"Modifier les informations de","empty_team":"Personne n\'a été affecté à cette production.","invite":"Envoyer une invitation","invite_error":"Une erreur est survenue en envoyant l\'invitation.","invite_success":"L\'invitation a été envoyé avec succès.","new_person":"Ajouter un employé","no_task_assigned":"Il n\'y a aucune tâche assignée.","persons":"utilisateurs","running_tasks":"Tâches en cours","select_person":"Sélectionner un utilisateur…","team":"Équipe","title":"Utilisateurs","unactive":"Absents","csv":{"import_file":"Importer","export_file":"Télécharger","import_title":"Importer les utilisateurs depuis un fichier CSV","required_fields":"Le fichier CSV à importer doit comporter les colonnes suivantes :","select_file":"Sélectionnez un fichier de votre disque dur :","error_upload":"Une erreur est survenue en important votre fichier CSV."},"fields":{"first_name":"Prénom","last_name":"Nom","email":"Adresse email","phone":"Téléphone","role":"Rôle","old_password":"Mot de passe actuel","password":"Nouveau mot de passe","password_2":"Répétez le nouveau mot de passe","active":"Actif"},"list":{"name":"Nom","email":"Adresse Mail","phone":"Téléphone","role":"Rôle","active":"Actif"},"role":{"admin":"Studio Manager","client":"Client","manager":"Superviseur","user":"Graphiste","undefined":"Non défini","vendor":"Fournisseur"}},"playlists":{"add_assets":"Ajouter des assets","add_selection":"Ajouter la sélection","add_shots":"Ajouter des plans","add_sequence":"Ajouter séquence","add_episode":"Ajouter l\'épisode","add_movie":"Ajouter tout le film","apply_task_type_change":"Cela positionnera la dernière révision du type de tâche donné pour tous les plans.","available_build":"Builds disponibles","build_daily":"Valid. quotidienne","build_weekly":"Valid. hebodomadaire","build_mp4":"Construire .mp4 (beta)","building":"En cours…","client_playlist":"Playlist Client","create_for_selection":"Créer une playlist pour la sélection courante","create_title":"Créer playlist","created_at":"Créé le :","delete_text":"Êtes-vous sûr de vouloir supprimer {name} de la base de données ?","delete_error":"Une erreur est survenue en supprimant la playlist.","edit_error":"Une erreur est survenue en sauvegardant la playlist. Êtes-vous sûr qu\'aucune playlist n\'existe avec un nom similaire ?","download_zip":"Télécharger en .zip","failed":"Échec","for_client":"Le client","for_studio":"Pour le studio","edit_title":"Modifier la playlist","last_creation":"Dernière créations","last_modification":"Dernière modifications","loading_error":"Une erreur serveur est apparue, les playlists ne peuvent pas être chargées.","new_playlist":"Ajouter une playlist","no_build":"Pas de build","no_playlist":"Il n\'y a pas de playlist pour ce projet.","no_preview":"Aucune préviz","no_selection":"Séléctionnez une playlist sur la gauche.","no_sequence_for_episode":"Il n\'y a pas de séquence pour cette épisode","no_shot_for_production":"Il n\'y pas de plan pour cette production","select_shot":"Sélectionnez un plan dans la colonne de droite","select_playlist":"Sélectionnez une playlist dans la colonne de gauche","select_task_type":"Changer le type de tâche pour tous les plans","title":"Playlists","updated_at":"Mis à jour le :","remove":"enlever","fields":{"name":"Nom","created_at":"Date de création","updated_at":"Date de m.à.j","for_entity":"Sélectionne le type d\'entité à afficher","for_client":"À partager avec"},"actions":{"annotation":"Annotation","annotation_text":"Double clic sur la preview pour ajouter du texte","annotation_delete":"Supprimer l\'annotation","annotation_redo":"Refaire annotation","annotation_undo":"Annuler annotation","annotation_big":"Gros","annotation_medium":"Moyen","annotation_small":"Petit","change_task_type":"Changer le task type","comments":"Montrer/Cacher les commentaires","delete":"Supprimer la playlist","download":"Télécharger…","edit":"Modifier la playlist","entity_list":"Montrer/Cacher la liste d\'entités","fullscreen":"Voir le fichier en plein écran","next_frame":"Prochaine frame","next_shot":"Prochaine entité","pause":"Pause","play":"Lecture","previous_frame":"Frame précédente","previous_shot":"Entité précédente","save_playlist":"Sauvegarde la playlist","speed":"Changer la vitesse","split_screen":"Comparer avec d\'autres types de tâches","annotation_draw":"Dessiner des annotations","current_time":"Position dans la vidéo","display_revision":"Afficher révision","download_file":"Télécharger fichier","entity_index":"Index de l\'entité courante dans la playlist","entities_number":"Nombre d\'entités dans la playlist","frame_number":"Numéro de frame","files_add":"Ajouter un fichier à la révision","files_delete":"Supprimmer le fichier de la révision","files_next":"Prochain fichier pour la révision","files_position":"Index du fichier pour cette révision","files_previous":"Fichier précédent pour cette révision","looping":"Boucler sur la vidéo courante","mute":"Couper le son","unmute":"Rétablir le son","number_of_files":"Nombre de fichier pour cette révision","max_duration":"Durée de la vidéo","see_original_file":"Ouvrir le fichier original dans un nouvel onglet"}},"productions":{"current":"Production sélectionnée ","delete_text":"Êtes-vous sûr de vouloir retirer {name} de la base de données ? Veuiller indiquer le nom du projet dans le champ.","delete_error":"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à cette production. Êtes-vous sur que cette production n\'a aucune tâche, shot ou asset lié ? Kitsu n\'autorise pas la suppression de production. Si vous ne souhaitez plus la voir apparaitre, vous pouvez fermer la production.","edit_title":"Modifier la production","new_production":"Ajouter une production","number":"production | productions","open_productions":"Mes productions","picture":"Changer l\'image","title":"Productions","home":{"create_new":"Créer une nouvelle production","empty":"Vous n\'avez pas de production ouverte, voulez-vous en créer une nouvelle ?","no_task":"Vous n\'avez pas de tâches assignées. Demandez à votre superviseur ce que vous pouvez faire !","no_prod_for_client":"Vous n\'avez accès à aucune production. Contactez votre prestataire pour obtenir un accès","title":"Productions en cours","welcome":"Bienvenue sur Kitsu"},"fields":{"fps":"FPS","name":"Name","ratio":"Ratio","resolution":"Resolution","status":"Status","type":"Type","start_date":"Date de début","end_date":"Date de fin","nb_episodes":"Nombre d\'épisodes","episode_span":"Espace entre les épisodes"},"metadata":{"add_explaination":"Ajouter des données spécifiques au projet.","add_failed":"Une erreur s\'est produite en ajoutant des métadonnées au projet.","add_new_values":"Il n\'y a pour le moment aucune valeur enregistrée.","available_values":"Valeurs disponibles","choices":"Liste de valeurs","delete_text":"Êtes-vous sûr de vouloir supprimmer cette colonne et toutes les données liées?","delete_error":"Une erreur est survenue en supprimant la colone de métadonnées.","error":"Une erreur est survenue en ajoutant la colone de métadonnées. Assurez vous qu\'aucune colonne ne porte le même nom et que les champs sont bien renseignés. Si le problème persiste, contactez le support.","free":"Valeur libre","title":"Ajouter une colonne de métadonnées"},"status":{"closed":"Fermé","open":"Ouvert","active":"Ouvert","archived":"Fermé"},"type":{"short":"Format court","featurefilm":"Long Métrage","tvshow":"Série télé"},"edit_error":"Une erreur s\'est produite en éditant la production. Contactez notre équipe support pour obtenir de l\'aide","brief":{"title":"Brief","empty":"Il n\'y a pas de brief. Voulez-vous en créer un ?"},"parameters":{"title":"Paramètres","save":{"button":"Confirmez"}}},"profile":{"change_avatar":"Changer Avatar","info_title":"Informations","language":"Langue","notifications_enabled":"Notifications mail activées","notifications_slack_enabled":"Notifications Slack activées","notifications_slack_user":"Nom d\'utilisateur Slack","password_title":"Changement de mot de passe","timezone":"Fuseau horaire","title":"Votre Profil","avatar":{"title":"Changer votre avatar","error_upload":"Une erreur est survenue en envoyant l\'image."},"change_password":{"button":"Changez de mot de passe","error":"Une erreur s\'est produite lors du changement de mot de passe. Veuillez vérifier votre mot de passe actuel.","success":"Votre mot de passe a été changé avec succès !","unvalid":"Les nouveaux mots de passe sont différents ou votre mot de passe est trop court (7 caractères minimum)."},"save":{"button":"Sauvegardez vos changements","error":"Une erreur est survenue pendant la sauvegarde de vos changememts."}},"settings":{"change_logo":"Changer logo","integrations":"Intégrations","logo":"Logo du studio","no_logo":"Aucun logo n\' a été positionné.","set_logo":"Changer le logo","title":"Paramètres","fields":{"name":"Nom du studio","hours_by_day":"Heures par jour","slack_token":"Token Slack (optionnel)","use_original_name":"Utiliser les noms de fichiers originaux pour le téléchargement"},"production":{"empty_list":"La liste est vide. Cela signifie que tous les entrées sont disponibles aux utilisateurs. Ajouter des éléments à cette liste si vous voulez limiter les choix disponibles aux utilisateurs."},"save":{"button":"Sauvegarder les paramètres","error":"Une erreur serveur est survenue en sauvegardant les paramètres"}},"task_status":{"create_error":"Une erreur est survenue en créant le statut. Êtes-vous sûr qu\'il n\'y a pas un statut avec un nom similaire ?","delete_text":"Êtes-vous sur de vouloir retirer {name} de la base de données ?","delete_error":"Une erreur est survenue lors de la suppression du statut de tâche. Êtes-vous sûr qu\'aucune tâche n\'est lié à ce statut de tâche ?","edit_title":"Modifier statut","number":"statut | statuts de tâche","new_task_status":"Ajouter un statut de tâche","title":"Statuts de tâche","fields":{"color":"Couleur","is_artist_allowed":"Autorisé aux artistes","is_client_allowed":"Autorisé aux clients","is_done":"Est terminé","is_reviewable":"Est vérifiable","is_retake":"A valeur de retake","name":"Nom","short_name":"Nom court"},"name":"Statut de tâche"},"task_types":{"delete_text":"Êtes-vous sur de vouloir retirer {name} de la base de données ?","delete_error":"Une erreur est survenue lors de la suppression du type de tâche. Êtes-vous sûr qu\'aucune tâche n\'est lié à ce type de tâche ?","edit_title":"Modifier le type de tâches","create_error":"Une erreur est survenue en créant le type de tâche. Êtes-vous sûr qu\'il n\'y a pas un type avec un nom similaire ?","new_task_type":"Ajouter un type de tâche","number":"type de tâche | types de tâches","title":"Types de tâches","fields":{"dedicated_to":"Pour","color":"Couleur","name":"Nom","allow_timelog":"Temps passé","priority":"Priorité"}},"sequences":{"all_sequences":"Toutes les séquences","edit_error":"Une erreur est survenue en sauvegardant la séquence. Êtes-vous sûr qu\'aucune séquence n\'existe avec un nom similaire ?","delete_text":"Êtes-vous sûr de vouloir retirer {name} de la base de données ? Tous les plans et préviz liés seront supprimés. Pour confirmer, tapez le nom de la séquence en dessous","delete_error":"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n\'a plus aucun lien ?","edit_title":"Éditer séquence","empty_list":"Il n\'y a pas de séquence dans la production. Voulez vous en créer ?","empty_list_client":"Il n\'y pas de séquences dans cette production.","new_sequence":"Nouvelle séquence","number":"séquence | séquences","title":"Stats séquences","fields":{"name":"Nom","description":"Description"}},"schedule":{"title":"Planning","title_main":"Planning principal","overall_man_days":"Jours Homme","md":"jh","zoom_level":"Niveau de zoom","milestone":{"add_milestone":"Ajouter un jalon","edit_milestone":"Modifier le jalon","name":"Nom","error":"Erreur"}},"quota":{"average":"Moyenne","count_label":"Mode de comptage","detail_label":"Niveau de détail","details_name":"Nom","details_seconds":"Secondes","details_frames":"Frames","month_label":"Mois","no_quota":"Il n\'y a pas de quota pour ce type de tâche.","name":"Nom","quota_day":"Quota par jour","quota_week":"Quota par semaine","quota_month":"Quota par mois","year_label":"Année","title":"Quotas","type_label":"Type"},"shots":{"casting":"Casting","creation_explaination":"Pour ajouter des shots, vous devez d\'abord créer un épisode. Taper le nom de l\'épisode dans la colonne de gauche en bas. Séléctionnez cette épisode et répétez l\'opération pour créer une séquence. Enfin créez un shot en sélectionnant la séquence créée, en tapant son nom en bas de la colonne de droite. Cliquez sur le bouton Ajouter pour ajouter le shot. Vous pouvez maintenant créer de nombreux shots. Si cette production n\'est pas une série, vous pouvez directement créer une séquence.","delete_text":"Êtes-vous sûr de vouloir retirer {name} de la base de données ?","delete_error":"Une erreur est survenue en créant le plan, êtes-vous sûr que le plan n\'a plus aucun lien ?","edit_success":"Plan {name} édité avec succès.","edit_fail":"La création ou l\'édition a échoué, une erreur est survenue. Assurez-vous qu\'il n\'y pas déjà un shot portant le nom que vous donnez pour la séqence choisie.","edit_title":"Modifier plan","empty_list":"Il n\'y a pas de plans dans la production. Voulez-vous en créer ?","empty_list_client":"Il n\'y pas de plans dans cette production.","episodes":"Épisodes","history":"historique","new_shot":"Ajouter un plan","new_shots":"Ajouter des plans","new_sequences":"Ajouter des séquences","new_episodes":"Ajouter des épisodes","no_casting":"Le casting du plan est vide.","number":"plan | plans","manage":"Créer des plans","new_success":"Plan {name} créé avec succès.","padding":"Distance","restore_text":"Êtes-vous sûr de vouloir restorer {name} dans la base de données ?","restore_error":"Une erreur est survenue en restorant le plan.","sequences":"Séquences","tasks":"Tâches de fabrication","title":"Plans","fields":{"description":"Description","nb_frames":"Frames","episode":"Épisode","frame_in":"In","frame_out":"Out","fps":"FPS","name":"Plan","production":"Prod","sequence":"Séquence","time_spent":"Temps passé","person":"Modifier"}},"server_down":{"text":"Contactez votre fournisseur, votre administrateur système ou votre département informatique pour comprendre ce qui ne va pas.","title":"Kitsu a rencontré une erreur en communiquant avec son API de données."},"statistics":{"count":"Comptages","count_mode":"Mode de comptage","display_mode":"Mode d\'affichage","frames":"Frames","pie":"Graphiques","shots":"Plans","data_mode":"Données","retakes":"Retakes","status":"Statut"},"tasks":{"add_preview":"Attacher une préviz","add_preview_error":"Une erreur est survenue en ajoutant la preview.","assign":"Assigner une tâche à : | Assigner {nbSelectedTasks} tâches à :","back_to_list":"Retour à la liste","bigger":"Élargir le panneau de tâche","change_status_to":"Changer le statut de la tâche à : ","change_preview":"Modifier preview","change_priority":"Changer le priorité de la tâche à : ","clear_assignations":"effacer les assignations","comment_image":"Comment image","create_for_selection":"Créer une tâche pour chaque cellule vide :","create_tasks":"Ajouter des tâches","create_tasks_shot":"Ajouter des tâches pour les plans affichés","create_tasks_shot_explaination":"Vous allez créer une nouvelle tâche pour chaque plan du projet. Est-ce que vous voulez continuer ?","create_tasks_shot_failed":"Une erreur serveur est survenue pendant la création des tâches.","create_tasks_asset":"Ajouter des tâches pour les assets affichés","create_tasks_asset_explaination":"Vous allez créer une nouvelle tâche pour chaque asset du projet. Est-ce que vous voulez continuer ?","create_tasks_asset_failed":"Une erreur serveur est survenue pendant la création des tâches.","current":"Tâches à faire","current_status":"Statut actuel :","delete_all_text":"Êtes-vous sûr de vouloir supprimmer toutes les tâches pour {name}? S\'il vous plait, confirmez en tapant le nom du type de tâches des tâches que vous souhaitez supprimmer.","delete_all_error":"Supprimer toutes les tâches pour ce type de tâche a échoué","delete_error":"Une erreur est survenue en supprimant la tâche.","delete_comment":"Êtes-vous sûr de vouloir supprimer ce commentaire ?","delete_comment_error":"Une erreur est survenue en supprimant le commentaire.","delete_for_selection":"Supprimer les tâches sélectionnées :","delete_preview":"Êtes-vous sûr de vouloir supprimer cette préviz ?","delete_preview_error":"Une erreur est survenue en supprimant la preview.","edit_comment":"Éditer commentaire","done":"Terminées","download_pdf_file":"Télécharger le fichier .{extension}","feedback":"retours","full_screen":"Afficher en plein écran","hide_assignations":"Cacher assignations","hide_infos":"Cacher informations additionnelles","my_tasks":"Mes tâches","next":"Suivante","no_assignation_right":"vous n\'êtes pas autorisé à gérer les assigations.","no_comment":"Il n\'y a pas de commentaires pour cette tâche.","no_preview":"Il n\'y a pas de préviz pour cette tâche.","no_task_selected":"Pas de tâche sélectionnée","number":"tâche | tâches","preview":"Pré-visualisation","previous":"Précédente","unsubscribe_notifications":"Se désabonner des notifications","set_estimations":"Donner une estimation pour les tâches sélectionnées :","set_preview":"Utilisez cette previz comme vignette","set_preview_error":"Une erreur est survenue en utilisant cette vignette.","set_preview_done":"Cette previz sert de vignette à l\'entité courante.","select_preview_file":"Choisissez un fichier de prévisualisation sur votre disque dur:","show_assignations":"Voir assignations","show_infos":"Montrer informations additionnelles","subscribe_notifications":"S\'abonner aux notifications","select_image_file":"Choisissez une image sur votre disque dur:","tasks":"Tâches","validation":"Validation","with_comment":"Avec un commentaire…","fields":{"asset_type":"Type d\'asset","assignees":"Assignés","count":"Nombre","due_date":"Pour le","duration":"Duration","end_date":"Date de fin","entity":"Entité","entity_name":"Nom","estimated_quota":"Quota Moy.","estimation":"Estimation","frames":"Frames","last_comment":"Dernier commentaire","last_comment_date":"Dernier comm.","priority":"Priorité","production":"Prod","real_end_date":"Date de valid.","real_start_date":"Date de WIP","retake_count":"Retakes","seconds":"Secondes","sequence":"Séquence","start_date":"Date de début","task_status":"Statut","task_status_short_name":"Statut","task_type":"Type"},"colors":{"title":"Coloration","neutral":"Neutre","status":"Couleur des status","late":"En retard en rouge"},"priority":{"emergency":"Urgence","normal":"Normale","high":"Haute","very_high":"Très haute"},"assignation_warning":"Attention : vous ne verrez pas le résultat, car vous masquez les assignations dans la liste.","for_selection":"Pour la liste et les filtres courants","for_project":"Pour le projet"},"timesheets":{"detail_level":"Niveau de détail","done_tasks":"Tâches terminées","export_timesheet":"Exporter la feuille de temps","hours":"heures","month":"Mois","time_spents":"Temps passé (heures)","title":"Feuille de temps","year":"Année"},"wrong_browser":{"title":"Votre navigateur n\'est pas pris en charges par Kitsu","text":"Kitsu ne peut être utilisé qu\'avec les navigateurs Firefox et Chrome."},"logs":{"current_date_label":"Montrer les journaux pour","events":"Événements listés pour le jour courant","empty_list":"Il n\'y a pas de journaux pour cette date","title":"Journaux"}}}')},f83f:function(e,t,s){"use strict";var i,n=s("ade3"),a=s("5530"),o=(s("caad"),s("d81d"),s("4de4"),s("b0c0"),s("d3b7"),s("7db0"),s("159b"),s("c740"),s("a434"),s("ba4c")),r=s.n(o),c=(s("a4d3"),s("e01a"),s("99af"),s("ddb0"),s("edbf")),l={getProductions:function(e){c["a"].get("/api/data/projects/all",e)},getProduction:function(e){return c["a"].getModel("projects",e)},getOpenProductions:function(e){c["a"].get("/api/data/projects/open",e)},getProductionStatus:function(e){c["a"].get("/api/data/project-status",e)},newProduction:function(e){var t={name:e.name,project_status_id:e.project_status_id,production_type:e.production_type};return c["a"].ppost("/api/data/projects/",t)},updateProduction:function(e){var t={name:e.name,description:e.description,project_status_id:e.project_status_id,production_type:e.production_type,fps:e.fps,ratio:e.ratio,resolution:e.resolution,start_date:e.start_date,end_date:e.end_date,man_days:e.man_days,nb_episodes:e.nb_episodes,episode_span:e.episode_span};return c["a"].pput("/api/data/projects/".concat(e.id),t)},postAvatar:function(e,t,s){c["a"].post("/api/pictures/thumbnails/projects/".concat(e),t,s)},deleteProduction:function(e){return c["a"].pdel("/api/data/projects/".concat(e.id,"?force=true"))},addPersonToTeam:function(e,t){var s={person_id:t};return c["a"].ppost("/api/data/projects/".concat(e,"/team"),s)},removePersonFromTeam:function(e,t){return c["a"].pdel("/api/data/projects/".concat(e,"/team/").concat(t))},addAssetTypeToProduction:function(e,t){var s={asset_type_id:t},i="/api/data/projects/".concat(e,"/settings/asset-types");return c["a"].ppost(i,s)},removeAssetTypeFromProduction:function(e,t){var s="/api/data/projects/".concat(e,"/settings/asset-types/").concat(t);return c["a"].pdel(s)},addTaskTypeToProduction:function(e,t){var s={task_type_id:t},i="/api/data/projects/".concat(e,"/settings/task-types");return c["a"].ppost(i,s)},removeTaskTypeFromProduction:function(e,t){var s="/api/data/projects/".concat(e,"/settings/task-types/").concat(t);return c["a"].pdel(s).catch(console.error)},addTaskStatusToProduction:function(e,t){var s={task_status_id:t},i="/api/data/projects/".concat(e,"/settings/task-status");return c["a"].ppost(i,s)},removeTaskStatusFromProduction:function(e,t){var s="/api/data/projects/".concat(e,"/settings/task-status/").concat(t);return c["a"].pdel(s)},addMetadataDescriptor:function(e,t){return new Promise((function(s,i){var n={name:t.name,choices:t.values,for_client:"true"===t.for_client,entity_type:t.entity_type};c["a"].post("/api/data/projects/".concat(e,"/metadata-descriptors"),n,(function(e,t){e?i(e):s(t)}))}))},getMetadataDescriptor:function(e,t){return new Promise((function(s,i){c["a"].get("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e,t){e?i(e):s(t)}))}))},updateMetadataDescriptor:function(e,t){return new Promise((function(s,i){var n={id:t.id,name:t.name,choices:t.values,for_client:"true"===t.for_client,entity_type:t.entity_type};c["a"].put("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t.id),n,(function(e,t){e?i(e):s(t)}))}))},deleteMetadataDescriptor:function(e,t){return new Promise((function(s,i){c["a"].del("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e){e?i(e):s()}))}))}},d=s("2229"),u=s("66e7"),p=s("9fb0"),m={productions:[],productionMap:{},openProductions:[],productionStatus:[],productionStatusMap:{},currentProduction:null,productionAvatarFormData:null,isProductionsLoading:!1,isProductionsLoadingError:!1,isOpenProductionsLoading:!1,assetsPath:{name:"open-productions"},assetTypesPath:{name:"open-productions"},shotsPath:{name:"open-productions"},sequencesPath:{name:"open-productions"},episodesPath:{name:"open-productions"},breakdownPath:{name:"open-productions"},playlistsPath:{name:"open-productions"},teamPath:{name:"open-productions"}},h=Object(a["a"])({},m),f={getProductionComponentPath:function(e,t,s){var i={name:"open-productions"};if(s)i={name:"episode-"+e,params:{episode_id:s,production_id:t}};else if(t)return{name:e,params:{production_id:t}};return["assets","shots"].includes(e)&&(i.query={search:""}),i},isEmptyArray:function(e,t){return!e||!e[t]||0===e[t].length}},_={productions:function(e){return e.productions},productionMap:function(e){return e.productionMap},productionStatusMap:function(e){return e.productionStatusMap},openProductions:function(e){return e.openProductions},productionStatus:function(e){return e.productionStatus},productionAvatarFormData:function(e){return e.productionAvatarFormData},isProductionsLoading:function(e){return e.isProductionsLoading},isProductionsLoadingError:function(e){return e.isProductionsLoadingError},isOpenProductionsLoading:function(e){return e.isOpenProductionsLoading},assetsPath:function(e){return e.assetsPath},assetTypesPath:function(e){return e.assetTypesPath},shotsPath:function(e){return e.shotsPath},sequencesPath:function(e){return e.sequencesPath},episodesPath:function(e){return e.episodesPath},breakdownPath:function(e){return e.breakdownPath},playlistsPath:function(e){return e.playlistsPath},teamPath:function(e){return e.teamPath},productionAssetTypes:function(e,t,s){return f.isEmptyArray(e.currentProduction,"asset_types")?s.assetTypes.assetTypes:Object(d["d"])(e.currentProduction.asset_types.map((function(e){return s.assetTypes.assetTypeMap[e]})))},productionTaskStatuses:function(e,t,s){return f.isEmptyArray(e.currentProduction,"task_statuses")?s.taskStatus.taskStatus:Object(d["d"])(e.currentProduction.task_statuses.map((function(e){return s.taskStatus.taskStatusMap[e]})))},getProductionTaskStatuses:function(e,t,s){return function(t){var i=e.productionMap[t];return f.isEmptyArray(i,"task_statuses")?s.taskStatus.taskStatus:Object(d["d"])(i.task_statuses.map((function(e){return s.taskStatus.taskStatusMap[e]})))}},productionTaskTypes:function(e,t,s){return f.isEmptyArray(e.currentProduction,"task_types")?s.taskTypes.taskTypes:Object(d["d"])(e.currentProduction.task_types.map((function(e){return s.taskTypes.taskTypeMap[e]})))},currentProduction:function(e){return e.currentProduction?e.currentProduction:e.openProductions.length>0?e.openProductions[0]:null},isTVShow:function(e){var t=_.currentProduction(e);return t&&"tvshow"===t.production_type},assetMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(d["d"])(e.currentProduction.descriptors.filter((function(e){return"Asset"===e.entity_type}))):[]},shotMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(d["d"])(e.currentProduction.descriptors.filter((function(e){return"Shot"===e.entity_type}))):[]},productionAssetTypeOptions:function(e,t){return t.productionAssetTypes.map((function(e){return{label:e.name,value:e.id}}))},productionStatusOptions:function(e){return e.productionStatus.map((function(e){return{label:e.name,value:e.id}}))},openProductionOptions:function(e){return e.openProductions.map((function(e){return{label:e.name,value:e.id}}))}},v={loadProductionStatus:function(e,t){var s=e.commit;e.state;s(p["Hc"]),l.getProductionStatus((function(e,i){e?s(p["Gc"]):s(p["Fc"],i),t&&t(e)}))},loadOpenProductions:function(e,t){var s=e.commit;e.state;s(p["qc"]),l.getOpenProductions((function(e,i){e?s(p["pc"]):s(p["oc"],i),t&&t(e)}))},loadProductions:function(e,t){var s=e.commit;e.state;s(p["Ec"]),l.getProductions((function(e,i){e?s(p["Dc"]):s(p["Cc"],i),t&&t(e)}))},loadProduction:function(e,t){var s=e.commit,i=e.state;return l.getProduction(t).then((function(e){i.productionMap[e.id]?s(p["af"],e):s(p["m"],e)})).catch((function(e){return console.error(e)}))},newProduction:function(e,t){var s=e.commit;e.state;return s(p["Hb"],t),l.newProduction(t).then((function(e){s(p["Fb"],e)}))},editProduction:function(e,t){var s=e.commit;e.state;return s(p["Hb"]),l.updateProduction(t).then((function(e){s(p["Fb"],e)}))},deleteProduction:function(e,t){var s=e.commit;e.state;return s(p["mb"]),l.deleteProduction(t).then((function(){s(p["Sd"],t),s(p["kb"])}))},setProduction:function(e,t){var s=e.commit,i=e.rootGetters;if(s(p["oe"],t),s(p["P"]),s(p["U"]),i.isTVShow){var n=i.currentEpisode,a=n?n.id:null;t&&a&&s(p["be"],{productionId:t,episodeId:a})}else t&&s(p["be"],{productionId:t})},storeProductionPicture:function(e,t){var s=e.commit;s(p["Gd"],t)},uploadProductionAvatar:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){l.postAvatar(t,i.productionAvatarFormData,(function(i){s(p["Fd"],t),i?n(i):e()}))}))},addPersonToTeam:function(e,t){var s=e.commit,i=e.state;return s(p["Ne"],t.id),l.addPersonToTeam(i.currentProduction.id,t.id)},removePersonFromTeam:function(e,t){var s=e.commit,i=e.state;return s(p["Oe"],t.id),l.removePersonFromTeam(i.currentProduction.id,t.id)},addAssetTypeToProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Cd"],t),l.addAssetTypeToProduction(i.currentProduction.id,t)},removeAssetTypeFromProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Hd"],t),l.removeAssetTypeFromProduction(i.currentProduction.id,t)},addTaskTypeToProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Ed"],t),l.addTaskTypeToProduction(i.currentProduction.id,t)},removeTaskTypeFromProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Jd"],t),l.removeTaskTypeFromProduction(i.currentProduction.id,t)},addTaskStatusToProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Dd"],t),l.addTaskStatusToProduction(i.currentProduction.id,t)},removeTaskStatusFromProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Id"],t),l.removeTaskStatusFromProduction(i.currentProduction.id,t)},addMetadataDescriptor:function(e,t){var s=e.commit,i=e.state;if(t.id){var n=i.currentProduction.descriptors.find((function(e){return e.id===t.id})).field_name;return l.updateMetadataDescriptor(i.currentProduction.id,t).then((function(e){s(p["Ye"],{production:i.currentProduction,previousDescriptorFieldName:n,descriptor:e})}))}return l.addMetadataDescriptor(i.currentProduction.id,t)},deleteMetadataDescriptor:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){return l.deleteMetadataDescriptor(i.currentProduction.id,t).then((function(){s(p["eb"],{id:t}),e()})).catch(n)}))},refreshMetadataDescriptor:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){return l.getMetadataDescriptor(i.currentProduction.id,t).then((function(t){var n={};i.openProductions.forEach((function(e){e.descriptors||r.a.set(e,"descriptors",[]),e.descriptors.forEach((function(e){n[e.id]=e}))})),n[t.id]?s(p["Ye"],{production:i.productionMap[t.project_id],descriptor:t}):s(p["f"],{production:i.productionMap[t.project_id],descriptor:t}),e()})).catch(n)}))}},g=(i={},Object(n["a"])(i,p["Ec"],(function(e){e.productions=[],e.isProductionsLoading=!0,e.isProductionsLoadingError=!1})),Object(n["a"])(i,p["Dc"],(function(e){e.productions=[],e.isProductionsLoading=!1,e.isProductionsLoadingError=!0})),Object(n["a"])(i,p["Cc"],(function(e,t){e.isProductionsLoading=!1,e.isProductionsLoadingError=!1,e.productions=Object(d["h"])(t);var s={},i=function(e){s[e.id]||(s[e.id]=e)};e.openProductions.forEach(i),e.productions.forEach(i),e.productionMap=s})),Object(n["a"])(i,p["qc"],(function(e){e.isOpenProductionsLoading=!0,e.openProductions=[]})),Object(n["a"])(i,p["pc"],(function(e){e.isOpenProductionsLoading=!1})),Object(n["a"])(i,p["oc"],(function(e,t){e.isOpenProductionsLoading=!1,e.openProductions=Object(d["d"])(t);var s={};t.forEach((function(e){s[e.id]=e})),e.productionMap=s,!e.currentProduction&&e.openProductions.length>0&&(e.currentProduction=e.openProductions[0])})),Object(n["a"])(i,p["Hc"],(function(e){e.productionStatus=[]})),Object(n["a"])(i,p["Gc"],(function(e){})),Object(n["a"])(i,p["Fc"],(function(e,t){var s={};t.forEach((function(e){s[e.id]=e})),e.productionStatus=t,e.productionStatusMap=s})),Object(n["a"])(i,p["Hb"],(function(e,t){})),Object(n["a"])(i,p["Gb"],(function(e){})),Object(n["a"])(i,p["Fb"],(function(e,t){var s=e.productionStatusMap[t.project_status_id],i=e.productions.find((function(e){return e.id===t.id})),n=e.openProductions.find((function(e){return e.id===t.id}));if(t.project_status_name=s.name,i){var a=e.openProductions.findIndex((function(e){return e.id===t.id}));t.project_status_id&&(a>=0&&i.project_status_id!==t.project_status_id?e.openProductions.splice(a,1):a<0&&(e.openProductions=Object(d["d"])(e.openProductions))),t.production_type&&t.production_type!==i.production_type&&"short"===t.production_type&&(i.first_episode_id=void 0,n.first_episode_id=void 0),Object.assign(i,t),n&&Object.assign(n,t),e.currentProduction&&e.currentProduction.id===t.id&&Object.assign(e.currentProduction,t)}else t.team=[],t.task_statuses=[],t.asset_types=[],t.task_types=[],e.productions.push(t),e.productionMap[t.id]=t,n||(e.openProductions.push(t),e.openProductions=Object(d["d"])(e.openProductions)),e.productions=Object(d["h"])(e.productions)})),Object(n["a"])(i,p["m"],(function(e,t){e.productions.push(t),e.openProductions.push(t),e.productions=Object(d["h"])(e.productions),e.openProductions=Object(d["d"])(e.openProductions),e.productionMap[t.id]=t})),Object(n["a"])(i,p["af"],(function(e,t){var s=e.productionMap[t.id],i=e.productionStatusMap[t.project_status_id],n=e.openProductions.find((function(e){return e.id===t.id})),a=s.project_status_id!==i.id;t.project_status_name=i.name,Object.assign(s,t),n&&Object.assign(n,t),a&&("Open"===t.project_status_name?e.openProductions.push(s):e.openProductions=Object(u["h"])(e.openProductions,s)),e.productions=Object(d["h"])(e.productions),e.openProductions=Object(d["d"])(e.openProductions)})),Object(n["a"])(i,p["mb"],(function(e){})),Object(n["a"])(i,p["lb"],(function(e){})),Object(n["a"])(i,p["Sd"],(function(e,t){e.productions=Object(u["h"])(e.productions,t),e.openProductions=Object(u["h"])(e.openProductions,t),delete e.productionMap[t.id]})),Object(n["a"])(i,p["kb"],(function(e,t){})),Object(n["a"])(i,p["Gd"],(function(e,t){e.productionAvatarFormData=t})),Object(n["a"])(i,p["Fd"],(function(e,t){var s=e.productionMap[t];s&&(s.has_avatar=!0)})),Object(n["a"])(i,p["oe"],(function(e,t){var s=e.productionMap[t];e.currentProduction=s})),Object(n["a"])(i,p["be"],(function(e,t){var s=t.productionId,i=t.episodeId;e.assetsPath=f.getProductionComponentPath("assets",s,i),e.assetTypesPath=f.getProductionComponentPath("production-asset-types",s,i),e.shotsPath=f.getProductionComponentPath("shots",s,i),e.sequencesPath=f.getProductionComponentPath("sequences",s,i),e.episodesPath=f.getProductionComponentPath("episodes",s),e.breakdownPath=f.getProductionComponentPath("breakdown",s,i),e.playlistsPath=f.getProductionComponentPath("playlists",s,i),e.teamPath=f.getProductionComponentPath("team",s)})),Object(n["a"])(i,p["Ne"],(function(e,t){Object(u["a"])(e.currentProduction,"team",t)})),Object(n["a"])(i,p["Oe"],(function(e,t){Object(u["g"])(e.currentProduction,"team",t)})),Object(n["a"])(i,p["Cd"],(function(e,t){Object(u["a"])(e.currentProduction,"asset_types",t)})),Object(n["a"])(i,p["Hd"],(function(e,t){Object(u["g"])(e.currentProduction,"asset_types",t)})),Object(n["a"])(i,p["Dd"],(function(e,t){Object(u["a"])(e.currentProduction,"task_statuses",t)})),Object(n["a"])(i,p["Id"],(function(e,t){Object(u["g"])(e.currentProduction,"task_statuses",t)})),Object(n["a"])(i,p["Ed"],(function(e,t){Object(u["a"])(e.currentProduction,"task_types",t)})),Object(n["a"])(i,p["Jd"],(function(e,t){Object(u["g"])(e.currentProduction,"task_types",t)})),Object(n["a"])(i,p["f"],(function(e,t){var s=t.production,i=t.descriptor;s&&(s.descriptors?s.descriptors.push(i):r.a.set(s,"descriptors",[i]))})),Object(n["a"])(i,p["Ye"],(function(e,t){var s=t.production,i=t.descriptor;s&&(s.descriptors?Object(u["i"])(s.descriptors,i):r.a.set(s,"descriptors",[]))})),Object(n["a"])(i,p["eb"],(function(e,t){var s=e.openProductions.find((function(e){return e.descriptors.find((function(e){return e.id===t.id}))}));s&&(s.descriptors=Object(u["h"])(s.descriptors,t))})),Object(n["a"])(i,p["s"],(function(e,t){var s=t.personId,i=e.currentProduction&&e.currentProduction.team.some((function(e){return e===s}));!i&&e.currentProduction&&e.currentProduction.team.push(s)})),Object(n["a"])(i,p["ae"],(function(e){Object.assign(e,Object(a["a"])({},m))})),i);t["a"]={state:h,getters:_,actions:v,mutations:g}},f883:function(e,t,s){"use strict";s("c20f")},f8a0:function(e,t,s){"use strict";s("7678")},fa22:function(e,t,s){"use strict";s("5d95")},fa53:function(e,t,s){"use strict";var i,n=s("ade3"),a=s("2909"),o=s("5530"),r=(s("7db0"),s("d81d"),s("d3b7"),s("b64b"),s("159b"),s("13d5"),s("b0c0"),s("99af"),s("c740"),s("4de4"),s("a434"),s("caad"),s("2532"),s("2f24")),c=s("edbf"),l={getTask:function(e,t){return c["a"].pget("/api/data/tasks/".concat(e,"/full"))},updateTask:function(e,t,s){return c["a"].pput("/api/data/tasks/".concat(e),t,s)},getTaskStatuses:function(e){c["a"].get("/api/data/task-status",e)},getTaskSubscribed:function(e,t){return c["a"].pget("/api/data/user/tasks/".concat(e,"/subscribed"))},subscribeToTask:function(e,t){return c["a"].ppost("/api/actions/user/tasks/".concat(e,"/subscribe"),{})},unsubscribeFromTask:function(e,t){return c["a"].pdel("/api/actions/user/tasks/".concat(e,"/unsubscribe"))},getTaskComments:function(e,t){return c["a"].pget("/api/data/tasks/".concat(e,"/comments"))},getTaskPreviews:function(e,t){return c["a"].pget("/api/data/tasks/".concat(e,"/previews"))},commentTask:function(e){var t={task_status_id:e.taskStatusId,comment:e.comment,checklist:e.checklist||[]};if(e.attachment&&e.attachment.length>0){t=new FormData;var s=0;e.attachment.forEach((function(e){t.append("file-"+s,e.get("file")),s++})),t.set("task_status_id",e.taskStatusId),t.set("comment",e.comment),t.set("checklist",JSON.stringify(e.checklist||[]))}return c["a"].ppost("/api/actions/tasks/".concat(e.taskId,"/comment"),t)},commentTasks:function(e,t){return c["a"].ppost("/api/actions/projects/".concat(e,"/tasks/comment-many"),t)},getTaskComment:function(e,t){return c["a"].pget("/api/data/comments/".concat(e.id))},editTaskComment:function(e,t){var s={text:e.text,task_status_id:e.task_status_id,checklist:e.checklist};return c["a"].pput("/api/data/comments/".concat(e.id),s)},deleteTaskComment:function(e,t,s){return c["a"].pdel("/api/data/tasks/".concat(e,"/comments/").concat(t))},createTasks:function(e){var t=e.task_type_id,s=e.type,i=e.project_id,n=e.entityIds;return c["a"].ppost("/api/actions/projects/".concat(i,"/task-types/").concat(t,"/").concat(s,"/")+"create-tasks",n)},createTask:function(e,t){var s=e.entity_id,i=e.task_type_id,n=e.type,a=e.project_id;c["a"].post("/api/actions/projects/".concat(a,"/task-types/").concat(i,"/").concat(n,"/")+"create-tasks?id=".concat(s),{},t)},deleteTask:function(e,t){c["a"].del("/api/data/tasks/".concat(e.id,"?force=true"),t)},deleteAllTasks:function(e,t,s){return s.length>0?c["a"].ppost("/api/actions/projects/".concat(e,"/delete-tasks"),s):c["a"].pdel("/api/actions/projects/".concat(e,"/task-types/").concat(t,"/delete-tasks"))},addPreview:function(e){var t=e.taskId,s=e.commentId;return c["a"].ppost("/api/actions/tasks/".concat(t,"/comments/").concat(s,"/add-preview"),{})},addExtraPreview:function(e,t,s){return c["a"].ppost("/api/actions/tasks/".concat(t,"/comments/").concat(s,"/preview-files/")+"".concat(e),{})},deletePreview:function(e,t,s){return c["a"].pdel("/api/actions/tasks/".concat(e,"/comments/").concat(t,"/preview-files/")+"".concat(s))},setPreview:function(e,t,s){return c["a"].pput("/api/actions/preview-files/".concat(t,"/set-main-preview"),{})},uploadPreview:function(e,t){return c["a"].ppost("/api/pictures/preview-files/".concat(e),t)},updatePreviewAnnotation:function(e,t){return c["a"].pput("/api/data/preview-files/".concat(e.id),{annotations:t})},getPreviewFile:function(e){return c["a"].pget("/api/data/preview-files/".concat(e))},assignTasks:function(e,t,s){c["a"].put("/api/actions/persons/".concat(e,"/assign"),{task_ids:t},s)},unassignTasks:function(e,t){c["a"].put("/api/actions/tasks/clear-assignation",{task_ids:e},t)},pinComment:function(e){var t={pinned:e.pinned};return c["a"].pput("/api/data/comments/".concat(e.id),t)},ackComment:function(e){var t="/api/data/tasks/".concat(e.object_id,"/comments/").concat(e.id,"/ack");return c["a"].ppost(t,{})},updateRevisionPreviewPosition:function(e,t){var s="/api/actions/preview-files/".concat(e,"/update-position");return c["a"].pput(s,{position:t+1})}},d=s("ce6b"),u=s("487c"),p=s("2229"),m=s("66e7"),h=s("52ad"),f=s("ef8b"),_=s("7d26"),v=s("0263"),g=s("9fb0"),y={taskMap:{},taskStatusMap:{},taskStatuses:[],taskComments:{},taskPreviews:{},taskEntityPreviews:{},selectedTasks:{},selectedValidations:{},taskSearchQueries:[],nbSelectedTasks:0,nbSelectedValidations:0,isShowAssignations:!0,isShowInfos:!0,isSavingCommentPreview:!1,previewForms:[],lastCommentDraft:""},b=Object(o["a"])({},y),k={getPerson:function(e){return h["a"].getters.getPerson(h["a"].state,h["a"].getters)(e)},getTaskType:function(e){return f["a"].state.taskTypeMap[e]}},w={taskMap:function(e){return e.taskMap},getTaskComments:function(e,t){return function(t){return e.taskComments[t]}},getTaskPreviews:function(e,t){return function(t){return e.taskPreviews[t]}},getTaskComment:function(e,t){return function(t,s){return e.taskComments[t]?e.taskComments[t].find((function(e){return e.id===s})):[]}},getTaskStatus:function(e,t){return function(t){return e.taskStatuses.find((function(e){return e.id===t}))}},taskStatusOptions:function(e){return e.taskStatuses.map((function(e){return{label:e.short_name,value:e.id,color:e.color,isArtistAllowed:e.is_artist_allowed}}))},selectedTasks:function(e){return e.selectedTasks},nbSelectedTasks:function(e){return e.nbSelectedTasks},nbSelectedValidations:function(e){return e.nbSelectedValidations},taskSearchQueries:function(e){return e.taskSearchQueries},isShowAssignations:function(e){return e.isShowAssignations},isShowInfos:function(e){return e.isShowInfos},taskEntityPreviews:function(e){return e.taskEntityPreviews},previewForms:function(e){return e.previewForms},isSavingCommentPreview:function(e){return e.isSavingCommentPreview},lastCommentDraft:function(e){return e.lastCommentDraft}},C={loadTask:function(e,t){var s=e.commit,i=(e.state,t.taskId);return l.getTask(i).then((function(e){return s(g["Rc"],e),Promise.resolve(e)}))},loadTaskSubscribed:function(e,t){var s=e.commit,i=(e.state,t.taskId);t.callback;return l.getTaskSubscribed(i).then((function(e){return s(g["Wc"],{taskId:i,subscribed:e}),Promise.resolve(e)}))},subscribeToTask:function(e,t){var s=e.commit;e.state;return l.subscribeToTask(t).then((function(){return s(g["Wc"],{taskId:t,subscribed:!0}),Promise.resolve(!0)}))},unsubscribeFromTask:function(e,t){var s=e.commit;e.state;return l.unsubscribeFromTask(t).then((function(){return s(g["Wc"],{taskId:t,subscribed:!1}),Promise.resolve(!1)}))},loadTaskComments:function(e,t){var s=e.commit,i=(e.state,e.dispatch),n=t.taskId,a=t.entityId;t.callback;return l.getTaskComments(n).then((function(e){return s(g["Qc"],{comments:e,taskId:n}),i("loadTaskEntityPreviewFiles",a)}))},loadTaskEntityPreviewFiles:function(e,t){var s=e.commit,i=(e.state,{id:t});return u["a"].getEntityPreviewFiles(i).then((function(e){return s(g["Sc"],e),Promise.resolve(e)}))},commentTask:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.taskStatusId,a=t.comment,o=t.attachment,r=t.checklist;return l.commentTask({taskId:i,taskStatusId:n,comment:a,attachment:o,checklist:r}).then((function(e){s(g["rd"],{comment:e,taskId:i})}))},loadComment:function(e,t){var s=e.commit,i=(e.state,t.commentId);t.callback;return l.getTaskComment({id:i}).then((function(e){return s(g["rd"],{comment:e,taskId:e.object_id}),Promise.resolve(e)}))},createTasks:function(e,t){e.commit,e.state;var s=[];t.selectionOnly&&(s="shots"===t.type?v["a"].cache.result.map((function(e){return e.id})):_["a"].cache.result.map((function(e){return e.id})));var i={task_type_id:t.task_type_id,type:t.type,project_id:t.project_id,entityIds:s};return l.createTasks(i)},createSelectedTasks:function(e,t){var s=e.commit,i=e.state,n=t.type,a=t.projectId,o=t.callback;r["a"].eachSeries(Object.keys(i.selectedValidations),(function(e,t){var o=i.selectedValidations[e],r={entity_id:o.entity.id,task_type_id:o.column.id,type:n,project_id:a};l.createTask(r,(function(e,i){s(g["Y"],i),i.forEach((function(e){s(g["Td"],o),e.assigneesInfo=[],o.task=e,s(g["n"],o)})),t(e,i[0])}))}),o)},deleteSelectedTasks:function(e){var t=e.commit,s=e.state;return new Promise((function(e,i){var n=Object.keys(s.selectedTasks);r["a"].eachSeries(n,(function(e,i){var n=s.taskMap[e];n?l.deleteTask(n,(function(e){e||t(g["nb"],n),i(e)})):i()}),(function(t){t?i(t):e()}))}))},deleteAllTasks:function(e,t){e.commit,e.state;var s=t.projectId,i=t.taskTypeId,n=t.taskIds;return l.deleteAllTasks(s,i,n)},createTask:function(e,t){var s=e.commit,i=(e.state,e.rootGetters,t.entityId),n=t.projectId,a=t.taskTypeId,o=t.type;return new Promise((function(e,t){var r={entity_id:i,task_type_id:a,type:o,project_id:n};l.createTask(r,(function(i,n){i?t(i):(s(g["sd"],n[0]),e())}))}))},changeSelectedTaskStatus:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=t.taskStatusId,o=t.comment,r=[],c=n.currentProduction;return Object.keys(i.selectedTasks).forEach((function(e){var t=i.taskMap[e],s=t&&(t.task_status_id!==a||o&&o.length>0);s&&r.push({object_id:e,task_status_id:a,comment:o||"",checklist:[]})})),l.commentTasks(c.id,r).then((function(e){return e.forEach((function(e){s(g["rd"],{comment:e,taskId:e.object_id})})),Promise.resolve(e)}))},changeSelectedPriorities:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=t.priority,o=t.callback;r["a"].eachSeries(Object.keys(i.selectedTasks),(function(e,t){var o=i.taskMap[e],r=n.taskTypeMap[o.task_type_id];o&&o.priority!==a?l.updateTask(e,{priority:a}).then((function(e){s(g["Lb"],{task:e,taskType:r}),t()})).catch(t):t()}),(function(e){o(e)}))},updateTask:function(e,t){var s=e.commit,i=t.taskId,n=t.data;return s(g["Kb"],{taskId:i,data:n}),l.updateTask(i,n).then((function(e){s(g["Kb"],{taskId:i,data:n})}))},getTask:function(e,t){var s=e.commit,i=e.rootGetters,n=t.taskId,a=t.callback;l.getTask(n,(function(e,t){if(!e){var n=i.taskTypeMap[t.task_type_id];s(g["Lb"],{task:t,taskType:n})}a&&a(e)}))},deleteTask:function(e,t){var s=e.commit,i=t.task,n=t.callback;l.deleteTask(i,(function(e){e||s(g["nb"],i),n&&n(e)}))},editTaskComment:function(e,t){var s=e.commit,i=t.taskId,n=t.comment,a=t.checklist;return a=a||n.checklist,l.editTaskComment(n).then((function(e){return s(g["yb"],{taskId:i,comment:e,checklist:a}),Promise.resolve(e)}))},deleteTaskComment:function(e,t){var s=e.commit,i=e.rootState,n=t.taskId,a=t.commentId,o=(t.callback,i.taskStatus.taskStatus.find((function(e){return"todo"===e.short_name})));return l.deleteTaskComment(n,a).then((function(){return s(g["cb"],{commentId:a,taskId:n,taskStatusMap:i.taskStatus.taskStatusMap,todoStatus:o}),Promise.resolve()}))},commentTaskWithPreview:function(e,t){var s,i=e.commit,n=(e.getters,e.state),a=e.dispatch,o=t.taskId,r=t.comment,c=t.taskStatusId,d=t.form,u=t.attachment,p=t.checklist,m={taskId:o,taskStatusId:c,comment:r,attachment:u,checklist:p};return i(g["k"]),l.commentTask(m).then((function(e){s=e;var t={taskId:o,commentId:s.id};return l.addPreview(t)})).then((function(e){return d||(d=n.previewForms[0]),l.uploadPreview(e.id,d)})).then((function(e){return i(g["rd"],{comment:s,taskId:o}),i(g["j"],{preview:e,taskId:o,commentId:s.id,comment:s}),n.previewForms.length>1&&(i(g["Pd"]),a("addCommentExtraPreview",{taskId:o,commentId:s.id,previewId:e.id})),Promise.resolve({newComment:s,preview:e})}))},addCommentExtraPreview:function(e,t){var s=e.commit,i=e.getters,n=e.state,a=t.taskId,o=t.commentId,r=t.previewId,c=function(e){return l.addExtraPreview(r,a,o).then((function(t){return l.uploadPreview(t.id,e)})).then((function(e){var t=i.getTaskComment(a,o);return s(g["j"],{preview:e,taskId:a,commentId:o,comment:t}),Promise.resolve(e)}))};return n.previewForms.reduce((function(e,t){return e.then((function(){return c(t)}))}),Promise.resolve())},deleteTaskPreview:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.commentId,a=t.previewId;return l.deletePreview(i,n,a).then((function(){return s(g["jb"],{taskId:i,previewId:a}),Promise.resolve(a)}))},setPreview:function(e,t){var s=e.commit,i=e.state,n=t.taskId,a=t.entityId,o=t.previewId,r=i.taskMap;return l.setPreview(a,o).then((function(e){return s(g["Ce"],{taskId:n,entityId:a,previewId:o,taskMap:r}),Promise.resolve()}))},updatePreviewAnnotation:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.preview,a=t.annotations;return l.updatePreviewAnnotation(n,a).then((function(e){return s(g["Ze"],{taskId:i,preview:n,annotations:a}),Promise.resolve(e)})).catch(console.error)},refreshPreview:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.previewId;return l.getPreviewFile(n).then((function(e){return s(g["Ze"],{taskId:i,preview:e,annotations:e.annotations}),Promise.resolve()}))},assignSelectedTasks:function(e,t){var s=e.commit,i=e.state,n=t.personId,a=t.callback,o=Object.keys(i.selectedTasks);l.assignTasks(n,o,(function(e){e||s(g["s"],{selectedTaskIds:o,personId:n}),a&&a(e)}))},unassignSelectedTasks:function(e,t){var s=e.commit,i=e.state,n=(t.personId,t.callback),a=Object.keys(i.selectedTasks);l.unassignTasks(a,(function(e){e||s(g["Se"],a),n&&n(e)}))},showAssignations:function(e){var t=e.commit;e.state;t(g["ue"],!0)},hideAssignations:function(e){var t=e.commit;e.state;t(g["ue"],!1)},showInfos:function(e){var t=e.commit;e.state;t(g["ve"],!0)},hideInfos:function(e){var t=e.commit;e.state;t(g["ve"],!1)},loadPreviewFileFormData:function(e,t){var s=e.commit;s(g["Bd"],t)},addSelectedTask:function(e,t){var s=e.commit;s(g["n"],t)},addSelectedTasks:function(e,t){var s=e.commit;s(g["o"],t)},clearSelectedTasks:function(e,t){var s=e.commit;s(g["T"],t)},removeSelectedTask:function(e,t){var s=e.commit;s(g["Td"],t)},saveTaskSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=t.searchQuery,a=t.entityType;return new Promise((function(e,t){var o=b.taskSearchQueries.find((function(e){return e.name===n})),r=i.currentProduction;o?e():d["a"].createFilter("task",n,n,r.id,a,(function(i,n){s(g["ie"],{searchQuery:n,production:r}),i?t(i):e(n)}))}))},removeTaskSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=i.currentProduction;return d["a"].removeFilter(t).then((function(){return s(g["Yd"],{searchQuery:t,production:n}),Promise.resolve(t)}))},ackComment:function(e,t){var s=e.commit,i=e.rootGetters,n=i.user;return s(g["a"],{comment:t,user:n}),l.ackComment(t)},pinComment:function(e,t){var s=e.commit;return s(g["Ad"],t),l.pinComment(t)},updateRevisionPreviewPosition:function(e,t){var s=e.commit;return t.newIndex<t.previousIndex&&t.newIndex++,s(g["bf"],t),l.updateRevisionPreviewPosition(t.previewId,t.newIndex)}},S=(i={},Object(n["a"])(i,g["Yb"],(function(e,t){var s=t.production,i=t.userFilters;i.task&&i.task[s.id]?e.taskSearchQueries=i.task[s.id]:e.taskSearchQueries=[]})),Object(n["a"])(i,g["Lc"],(function(e,t){var s=t.production,i=t.userFilters;i.task&&i.task[s.id]?e.taskSearchQueries=i.task[s.id]:e.taskSearchQueries=[]})),Object(n["a"])(i,g["Rc"],(function(e,t){Object.assign(t,{project_name:t.project.name,entity_type_name:t.entity_type.name}),"Shot"===t.entity_type.name?t.episode?t.entity_name="".concat(t.episode.name," / ").concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.entity_type.name," / ").concat(t.entity.name),e.taskMap[t.id]?Object.assign(e.taskMap[t.id],t):e.taskMap[t.id]=t})),Object(n["a"])(i,g["Sc"],(function(e,t){e.taskEntityPreviews=t})),Object(n["a"])(i,g["Qc"],(function(e,t){var s=t.taskId,i=t.comments;i.forEach((function(e){e.person=h["a"].helpers.addAdditionalInformation(e.person)})),e.taskComments[s]=Object(p["e"])(i),e.taskPreviews[s]=i.reduce((function(e,t){if(t.previews&&t.previews.length>0){var s=t.previews[0];return s.previews=Object(p["i"])(t.previews.map((function(e){return{id:e.id,annotations:e.annotations,extension:e.extension,task_id:e.task_id,status:e.status,revision:e.revision,position:e.position,original_name:e.original_name}}))),e.push(s),e}return e}),[])})),Object(n["a"])(i,g["Tc"],(function(e,t){e.taskStatuses=Object(p["d"])(t),e.taskStatuses.forEach((function(t){e.taskStatusMap[t.id]=t}))})),Object(n["a"])(i,g["Wc"],(function(e,t){t.taskId,t.subscribed})),Object(n["a"])(i,g["rd"],(function(e,t){var s=t.comment,i=t.taskId,n=e.taskMap[i];if(void 0===s.task_status){var a=w.getTaskStatus(e,w);s.task_status=a(s.task_status_id)}if(void 0===s.person){var o=h["a"].getters.getPerson(h["a"].state,h["a"].getters);s.person=o(s.person_id)}s.person=h["a"].helpers.addAdditionalInformation(s.person),e.taskComments[i]||(e.taskComments[i]=[]),e.taskComments[i].find((function(e){return e.id===s.id}))||e.taskComments[i].unshift(s),e.taskComments[i]=Object(p["e"])(e.taskComments[i]),n&&Object.assign(n,{task_status_id:s.task_status_id,last_comment:s})})),Object(n["a"])(i,g["nb"],(function(e,t){e.taskComments[t.id]=void 0,e.taskPreviews[t.id]=void 0,e.taskMap[t.id]=void 0;var s="".concat(t.entity_id,"-").concat(t.task_type_id);e.selectedValidations[s]={entity:{id:t.entity_id},column:{id:t.task_type_id}},delete e.selectedTasks[t.id]})),Object(n["a"])(i,g["cb"],(function(e,t){var s=t.taskId,i=t.commentId,n=t.taskStatusMap,o=t.todoStatus,r=e.taskMap[s],c=e.taskComments[s],l=c.findIndex((function(e){return e.id===i})),d=c.find((function(e){return e.id===i})),u=c.filter((function(e){return e.pinned})).length;if(c=c.filter((function(e){return e.id!==i})),e.taskComments[s]=c,e.taskPreviews[s]=Object(a["a"])(e.taskPreviews[s]).filter((function(e){return!(d.previews.length>0&&d.previews[0].id===e.id)})),l===u){var p=o;if(c.length>0){var m=c[0].task_status_id;u<c.length&&(m=c[u].task_status_id),p=n[m]}r&&Object.assign(r,{task_status_id:p.id,task_status_priority:p.priority})}})),Object(n["a"])(i,g["yb"],(function(e,t){var s=t.taskId,i=t.comment,n=t.checklist,a=e.taskComments[s].find((function(e){return e.id===i.id}));Object.assign(a,{text:i.text,task_status_id:i.task_status_id,task_status:e.taskStatusMap[i.task_status_id],checklist:n||[]})})),Object(n["a"])(i,g["Bd"],(function(e,t){e.previewForms=t})),Object(n["a"])(i,g["k"],(function(e){e.isSavingCommentPreview=!0})),Object(n["a"])(i,g["j"],(function(e,t){var s=t.preview,i=t.taskId,n=(t.commentId,t.comment);e.isSavingCommentPreview=!1;var a={id:s.id,feedback:!1,revision:s.revision,status:s.status,position:s.position,original_name:s.original_name,extension:s.extension,task_id:i};if(e.taskPreviews[i]){var r=e.taskPreviews[i].find((function(e){return e.revision===s.revision}));if(r){var c=r.previews.find((function(e){return e.id===a.id}));c||r.previews.push(a)}else a.previews=[Object(o["a"])({},a)],e.taskPreviews[i]=[a].concat(e.taskPreviews[i]),n.preview=a,n.previews=[a]}})),Object(n["a"])(i,g["jb"],(function(e,t){var s=t.taskId,i=t.previewId;e.taskPreviews[s].forEach((function(e){var t=e.previews.findIndex((function(e){return e.id===i}));t>=0&&e.previews.splice(t,1)}))})),Object(n["a"])(i,g["Ze"],(function(e,t){var s=t.taskId,i=t.preview,n=t.annotations;i.annotations=n,e.taskPreviews[s].forEach((function(e){e.previews.forEach((function(e){e.id===i.id&&(e.annotations=n,e.status=i.status)})),e.id===i.id&&(e.annotations=n,e.status=i.status)}))})),Object(n["a"])(i,g["N"],(function(e,t){var s=t.preview,i=t.comment,n=i.object_id,a={id:s.id,feedback:!1,revision:s.revision,position:s.position,original_name:s.original_name,extension:s.extension};e.taskPreviews[n].shift(),e.taskPreviews[n]=[a].concat(e.taskPreviews[n])})),Object(n["a"])(i,g["n"],(function(e,t){if(t.task)e.selectedTasks[t.task.id]=t.task,e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,i=t.entity.id,n="".concat(i,"-").concat(s);e.selectedValidations[n]=t,e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(n["a"])(i,g["o"],(function(e,t){var s=JSON.parse(JSON.stringify(e.selectedTasks)),i=JSON.parse(JSON.stringify(e.selectedValidations)),n=!1;t.forEach((function(e){if(e.task)s[e.task.id]=e.task;else{var t=e.column.id,a=e.entity.id,o="".concat(a,"-").concat(t);i[o]=e,n=!0}})),e.selectedTasks=s,e.nbSelectedTasks=Object.keys(e.selectedTasks).length,n&&(e.selectedValidations=i,e.nbSelectedValidations=Object.keys(e.selectedValidations).length)})),Object(n["a"])(i,g["Td"],(function(e,t){if(t.task)delete e.selectedTasks[t.task.id],e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,i=t.entity.id,n="".concat(i,"-").concat(s);delete e.selectedValidations[n],e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(n["a"])(i,g["T"],(function(e){e.selectedTasks={},e.nbSelectedTasks=0,e.selectedValidations={},e.nbSelectedValidations=0})),Object(n["a"])(i,g["Y"],(function(e,t){t.forEach((function(t){e.taskMap[t.id]=t}))})),Object(n["a"])(i,g["sd"],(function(e,t){e.taskMap[t.id]=t})),Object(n["a"])(i,g["Lb"],(function(e,t){var s=t.task,i=e.taskMap[s.id];i&&Object.assign(e.taskMap[s.id],{task_status_id:s.task_status_id,task_status_short_name:e.taskStatusMap[s.task_status_id].short_name,priority:s.priority,estimation:s.estimation,duration:s.duration,real_start_date:s.real_start_date,end_date:s.end_date,due_date:s.due_date,real_end_date:s.end_date,last_comment_date:s.last_comment_date,retake_count:s.retake_count})})),Object(n["a"])(i,g["Kb"],(function(e,t){var s=t.taskId,i=t.data,n=e.taskMap[s];Object.assign(n,i)})),Object(n["a"])(i,g["s"],(function(e,t){var s=t.selectedTaskIds,i=t.personId;s.forEach((function(t){var s=e.taskMap[t];s&&!s.assignees.find((function(e){return e===i}))&&(s.assignees.push(i),s.assignees=Object(a["a"])(s.assignees))}))})),Object(n["a"])(i,g["Se"],(function(e,t){t.forEach((function(t){var s=e.taskMap[t];s.assignees=[],s.assigneesInfo=[]}))})),Object(n["a"])(i,g["Ce"],(function(e,t){var s=t.taskId,i=t.previewId;e.taskMap[s]&&(e.taskMap[s].entity.preview_file_id=i)})),Object(n["a"])(i,g["ue"],(function(e,t){e.isShowAssignations=t})),Object(n["a"])(i,g["ve"],(function(e,t){e.isShowInfos=t})),Object(n["a"])(i,g["vc"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=k.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(n["a"])(i,g["mf"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=k.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(n["a"])(i,g["ie"],(function(e,t){var s=t.searchQuery;e.taskSearchQueries.includes(s)||(e.taskSearchQueries.push(s),e.taskSearchQueries=Object(p["d"])(e.taskSearchQueries))})),Object(n["a"])(i,g["Yd"],(function(e,t){var s=t.searchQuery,i=e.taskSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.taskSearchQueries.splice(i,1)})),Object(n["a"])(i,g["Ad"],(function(e,t){t.pinned=!t.pinned,e.taskComments[t.object_id]=Object(p["e"])(e.taskComments[t.object_id])})),Object(n["a"])(i,g["a"],(function(e,t){var s=t.comment,i=t.user;s.acknowledgements.includes(i.id)?s.acknowledgements=s.acknowledgements.filter((function(e){return e!==i.id})):s.acknowledgements.push(i.id),e.taskComments[s.object_id]=Object(p["e"])(e.taskComments[s.object_id])})),Object(n["a"])(i,g["We"],(function(e,t){var s=t.comment,i=t.checklist;s.checklist=Object(a["a"])(i),e.taskComments[s.object_id].checklist=Object(a["a"])(i)})),Object(n["a"])(i,g["P"],(function(e){e.taskMap={}})),Object(n["a"])(i,g["U"],(function(e){e.taskMap={}})),Object(n["a"])(i,g["we"],(function(e,t){e.lastCommentDraft=t})),Object(n["a"])(i,g["bf"],(function(e,t){var s=t.previousIndex,i=t.newIndex,n=t.revision,a=t.taskId,o=e.taskPreviews[a].find((function(e){return e.revision===n}));o.previews=Object(m["b"])(o.previews,s,i);var r=1;o.previews.forEach((function(e){e.position=r,r++}))})),Object(n["a"])(i,g["Pd"],(function(e){e.previewForms=e.previewForms.splice(1)})),Object(n["a"])(i,g["ae"],(function(e,t){Object.assign(e,Object(o["a"])({},y))})),i);t["a"]={state:b,getters:w,actions:C,mutations:S}},fb36:function(e,t,s){"use strict";s("a91d")},fbf3:function(e,t,s){"use strict";s("186e")},fd99:function(e,t,s){"use strict";s("1b5e")},fe13:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e.minimized?s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:e.cursor}):s("router-link",{staticClass:"tag dynamic",style:e.tagStyle,attrs:{to:e.taskPath(e.task)}})],1):s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:e.tagStyle},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]):s("router-link",{staticClass:"tag dynamic",style:e.tagStyle,attrs:{to:e.taskPath(e.task)}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]),e.isPriority&&!e.isCurrentUserClient?s("span",{staticClass:"priority"},[e._v(" "+e._s(e.priority)+" ")]):e._e()],1)])},n=[],a=s("5530"),o=(s("b0c0"),s("2f62")),r=s("7930"),c={name:"validation-tag",props:{task:{default:function(){},type:Object},isStatic:{default:!1,type:Boolean},isPriority:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},pointer:{default:!1,type:Boolean},thin:{default:!1,type:Boolean}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["currentEpisode","currentProduction","isDarkTheme","isTVShow","taskMap","taskStatusMap","taskTypeMap","isCurrentUserClient"])),{},{cursor:function(){return this.pointer?"pointer":"default"},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""},tagStyle:function(){var e=!this.isStatic&&!this.isCurrentUserClient,t="todo"===this.taskStatus.short_name.toLowerCase();return this.thin&&!t?{background:"transparent",border:"1px solid "+(t?"grey":this.backgroundColor),color:this.backgroundColor,cursor:e?"pointer":this.cursor}:{background:this.backgroundColor,color:this.color,cursor:e?"pointer":this.cursor}}}),methods:{taskPath:function(e){var t=this.task.project_id?this.task.project_id:this.currentProduction.id,s={name:"task",params:{production_id:t,task_id:e.id}};this.isTVShow&&this.currentEpisode&&(s.name="episode-task",s.params.episode_id=e.episode_id||this.currentEpisode.id);var i=this.taskTypeMap[e.task_type_id];return s.params.type=i.for_shots?"shots":"assets",s}}},l=c,d=(s("b482"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"2f9dd082",null);t["a"]=u.exports}});
//# sourceMappingURL=app.eb0c002e.js.map