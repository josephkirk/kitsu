{"version":3,"sources":["webpack:///./src/components/lists/QuotaShotList.vue?6236","webpack:///./src/components/pages/quota/Quota.vue?b1af","webpack:///./src/components/sides/PeopleQuotaInfo.vue?2ac2","webpack:///./src/components/pages/ProductionQuota.vue?7aec","webpack:///./src/components/pages/quota/Quota.vue?30f7","webpack:///src/components/pages/quota/Quota.vue","webpack:///./src/components/pages/quota/Quota.vue?e088","webpack:///./src/components/pages/quota/Quota.vue","webpack:///./src/components/sides/PeopleQuotaInfo.vue?d071","webpack:///./src/components/lists/QuotaShotList.vue?ed4e","webpack:///src/components/lists/QuotaShotList.vue","webpack:///./src/components/lists/QuotaShotList.vue?17e8","webpack:///./src/components/lists/QuotaShotList.vue","webpack:///src/components/sides/PeopleQuotaInfo.vue","webpack:///./src/components/sides/PeopleQuotaInfo.vue?4c68","webpack:///./src/components/sides/PeopleQuotaInfo.vue","webpack:///src/components/pages/ProductionQuota.vue","webpack:///./src/components/pages/ProductionQuota.vue?929c","webpack:///./src/components/pages/ProductionQuota.vue","webpack:///./src/components/pages/ProductionQuota.vue?ff98"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","$t","shotTaskTypes","model","value","callback","$$v","taskTypeId","expression","detailLevelOptions","detailLevelString","monthOptions","monthString","_e","yearOptions","yearString","countModeOptions","countMode","currentYear","currentMonth","currentWeek","currentDay","currentPerson","currentMode","personShots","on","hideSideInfo","staticRenderFns","ref","_v","_s","style","left","averageColumnX","_l","month","detailLevel","key","monthToString","week","day","quotaLength","isLoading","personMap","full_name","getQuotaAverage","year","class","selected","isMonthSelected","getQuota","episodifyRoute","name","params","person_id","isWeekSelected","weekend","isWeekend","isDaySelected","isError","components","PeopleAvatar","TableInfo","props","type","String","required","default","Number","data","detailsTitle","detailsMap","isPanelShown","quotaMap","undefined","mounted","Object","keys","shotMap","length","setTimeout","err","isShotsLoading","loadData","computed","monthRange","dayRange","weekRange","personIds","sort","personAName","localeCompare","personBName","methods","currentEpisode","route","date","includes","computeQuota","loadDetails","loadShots","console","error","personId","dateString","dateDigit","toString","padStart","opt","yearKey","weekKey","dayKey","average","monthKey","toFixed","calcAverageColumnX","watch","$route","els","component","closeRoute","person","startDay","endDay","weekMonth","shots","isLoadingError","shot","projectNames","Array","Boolean","nb_frames","XIcon","PageTitle","QuotaShotList","isMonthInfo","path","indexOf","isWeekInfo","isDayInfo","currentProduction","production_id","id","episode_id","onCloseClicked","$emit","Combobox","ComboboxTaskType","PeopleQuotaInfo","Quota","getCurrentPerson","showInfo","loadRoute","label","map","weekString","getPersonShots","showSideInfo","query","$router","push","localStorage","setItem"],"mappings":"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","file":"js/chunk-10007c7b.e70f64c4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuotaShotList.vue?vue&type=style&index=0&id=363f2e28&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Quota.vue?vue&type=style&index=0&id=46cf4d41&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleQuotaInfo.vue?vue&type=style&index=0&id=5ef21a06&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns fixed-page\"},[_c('div',{staticClass:\"column main-column\"},[_c('div',{staticClass:\"flexrow filters\"},[_c('div',{staticClass:\"flexrow-item\"},[_c('combobox-task-type',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('quota.type_label'),\"task-type-list\":_vm.shotTaskTypes},model:{value:(_vm.taskTypeId),callback:function ($$v) {_vm.taskTypeId=$$v},expression:\"taskTypeId\"}})],1),_c('div',{staticClass:\"flexrow-item\"},[_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('quota.detail_label'),\"options\":_vm.detailLevelOptions},model:{value:(_vm.detailLevelString),callback:function ($$v) {_vm.detailLevelString=$$v},expression:\"detailLevelString\"}})],1),(_vm.detailLevelString === 'day')?_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('quota.month_label'),\"options\":_vm.monthOptions},model:{value:(_vm.monthString),callback:function ($$v) {_vm.monthString=$$v},expression:\"monthString\"}}):_vm._e(),_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('quota.year_label'),\"options\":_vm.yearOptions},model:{value:(_vm.yearString),callback:function ($$v) {_vm.yearString=$$v},expression:\"yearString\"}}),_c('div',{staticClass:\"flexrow-item\"},[_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('quota.count_label'),\"options\":_vm.countModeOptions},model:{value:(_vm.countMode),callback:function ($$v) {_vm.countMode=$$v},expression:\"countMode\"}})],1)],1),_c('quota',{attrs:{\"taskTypeId\":_vm.taskTypeId,\"detailLevel\":_vm.detailLevelString,\"year\":_vm.currentYear,\"month\":_vm.currentMonth,\"week\":_vm.currentWeek,\"day\":_vm.currentDay,\"currentPerson\":_vm.currentPerson,\"countMode\":_vm.currentMode}})],1),(_vm.showInfo)?_c('div',{staticClass:\"column side-column\"},[_c('people-quota-info',{attrs:{\"person\":_vm.currentPerson,\"year\":_vm.currentYear,\"month\":_vm.currentMonth,\"week\":_vm.currentWeek,\"day\":_vm.currentDay,\"is-loading\":false,\"is-loading-error\":false,\"shots\":_vm.personShots,\"count-mode\":_vm.countMode},on:{\"close\":_vm.hideSideInfo}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[_c('div',{ref:\"body\",staticClass:\"datatable-wrapper\"},[_c('table',{staticClass:\"datatable\"},[_c('thead',{staticClass:\"datatable-head\"},[_c('tr',[_c('th',{ref:\"rowHeaderName\",staticClass:\"name datatable-row-header\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t('quota.name'))+\" \")]),_c('th',{staticClass:\"average datatable-row-header\",style:({left: _vm.averageColumnX}),attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t('quota.average'))+\" \")]),_vm._l((_vm.monthRange),function(month){return (_vm.detailLevel === 'month')?_c('th',{key:'month-' + month,attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.monthToString(month))+\" \")]):_vm._e()}),_vm._l((_vm.weekRange),function(week){return (_vm.detailLevel === 'week')?_c('th',{key:'week-' + week,attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(week)+\" \")]):_vm._e()}),_vm._l((_vm.dayRange),function(day){return (_vm.detailLevel === 'day')?_c('th',{key:'day-' + day,attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(day)+\" \")]):_vm._e()})],2)]),(this.quotaLength > 0 && !_vm.isLoading)?_c('tbody',{staticClass:\"datatable-body\"},_vm._l((_vm.personIds),function(key){return _c('tr',{key:'name-' + key,staticClass:\"datatable-row\"},[_c('th',{staticClass:\"name datatable-row-header\",attrs:{\"scope\":\"row\"}},[_c('div',{staticClass:\"flexrow\"},[_c('people-avatar',{attrs:{\"size\":30,\"person\":_vm.personMap[key]}}),_vm._v(\" \"+_vm._s(_vm.personMap[key].full_name)+\" \")],1)]),(_vm.detailLevel === 'month')?_c('td',{staticClass:\"average datatable-row-header\",style:({left: _vm.averageColumnX})},[_vm._v(\" \"+_vm._s(_vm.getQuotaAverage(key, { year: _vm.year }))+\" \")]):_vm._e(),(_vm.detailLevel === 'week')?_c('td',{staticClass:\"average datatable-row-header\",style:({left: _vm.averageColumnX})},[_vm._v(\" \"+_vm._s(_vm.getQuotaAverage(key, { year: _vm.year }))+\" \")]):_vm._e(),(_vm.detailLevel === 'day')?_c('td',{staticClass:\"average datatable-row-header\",style:({left: _vm.averageColumnX})},[_vm._v(\" \"+_vm._s(_vm.getQuotaAverage(key, { year: _vm.year, month: _vm.month }))+\" \")]):_vm._e(),_vm._l((_vm.monthRange),function(month){return (_vm.detailLevel === 'month')?_c('td',{key:'month-' + month,class:{\r\n              selected: _vm.isMonthSelected(key, _vm.year, month)\r\n            }},[(_vm.getQuota(key, {year: _vm.year, month: month}))?_c('router-link',{staticClass:\"quota-button\",attrs:{\"to\":_vm.episodifyRoute({\r\n                name: 'quota-month-person',\r\n                params: {\r\n                  person_id: key,\r\n                  year: _vm.year,\r\n                  month: month\r\n                }\r\n              })}},[_vm._v(\" \"+_vm._s(_vm.getQuota(key, {year: _vm.year, month: month}))+\" \")]):_c('span',[_vm._v(\"-\")])],1):_vm._e()}),_vm._l((_vm.weekRange),function(week){return (_vm.detailLevel === 'week')?_c('td',{key:'week-' + week,class:{\r\n              selected: _vm.isWeekSelected(key, _vm.year, week)\r\n            }},[(_vm.getQuota(key, {year: _vm.year, week: week}))?_c('router-link',{staticClass:\"quota-button\",attrs:{\"to\":_vm.episodifyRoute({\r\n                name: 'quota-week-person',\r\n                params: {\r\n                  person_id: key,\r\n                  year: _vm.year,\r\n                  week: week\r\n                }\r\n              })}},[_vm._v(\" \"+_vm._s(_vm.getQuota(key, {year: _vm.year, week: week}))+\" \")]):_c('span',[_vm._v(\" - \")])],1):_vm._e()}),_vm._l((_vm.dayRange),function(day){return (_vm.detailLevel === 'day')?_c('td',{key:'day-' + day,class:{\r\n              weekend: _vm.isWeekend(_vm.year, _vm.month, day),\r\n              selected: _vm.isDaySelected(key, _vm.year, _vm.month, day)\r\n            }},[(_vm.getQuota(key, {year: _vm.year, month: _vm.month, day: day}))?_c('router-link',{staticClass:\"quota-button\",attrs:{\"to\":_vm.episodifyRoute({\r\n                name: 'quota-day-person',\r\n                params: {\r\n                  person_id: key,\r\n                  year: _vm.year,\r\n                  month: _vm.month,\r\n                  day: day\r\n                }\r\n              })}},[_vm._v(\" \"+_vm._s(_vm.getQuota(key, {year: _vm.year, month: _vm.month, day: day}))+\" \")]):_c('span',[_vm._v(\" - \")])],1):_vm._e()})],2)}),0):_vm._e()])]),(this.quotaLength === 0 && !_vm.isLoading)?_c('div',{staticClass:\"has-text-centered empty-quota\"},[_c('p',{staticClass:\"info\"},[_vm._v(_vm._s(_vm.$t('quota.no_quota')))])]):_vm._e(),_c('table-info',{attrs:{\"is-loading\":_vm.isLoading,\"is-error\":_vm.isError}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"data-list\">\r\n  <div\r\n    class=\"datatable-wrapper\"\r\n    ref=\"body\"\r\n  >\r\n    <table class=\"datatable\">\r\n      <thead class=\"datatable-head\">\r\n        <tr>\r\n          <th\r\n            scope=\"col\"\r\n            class=\"name datatable-row-header\"\r\n            ref=\"rowHeaderName\"\r\n          >\r\n            {{ $t('quota.name') }}\r\n          </th>\r\n          <th\r\n            scope=\"col\"\r\n            class=\"average datatable-row-header\"\r\n            :style=\"{left: averageColumnX}\"\r\n          >\r\n            {{ $t('quota.average') }}\r\n          </th>\r\n          <th\r\n            scope=\"col\"\r\n            :key=\"'month-' + month\"\r\n            v-for=\"month in monthRange\"\r\n            v-if=\"detailLevel === 'month'\"\r\n          >\r\n            {{ monthToString(month) }}\r\n          </th>\r\n          <th\r\n            scope=\"col\"\r\n            :key=\"'week-' + week\"\r\n            v-for=\"week in weekRange\"\r\n            v-if=\"detailLevel === 'week'\"\r\n          >\r\n            {{ week }}\r\n          </th>\r\n\r\n          <th\r\n            scope=\"col\"\r\n            :key=\"'day-' + day\"\r\n            v-for=\"day in dayRange\"\r\n            v-if=\"detailLevel === 'day'\"\r\n          >\r\n            {{ day }}\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody\r\n        class=\"datatable-body\"\r\n        v-if=\"this.quotaLength > 0 && !isLoading\"\r\n      >\r\n        <tr\r\n          class=\"datatable-row\"\r\n          v-for=\"key in personIds\"\r\n          :key=\"'name-' + key\"\r\n        >\r\n          <th scope=\"row\" class=\"name datatable-row-header\">\r\n            <div class=\"flexrow\">\r\n              <people-avatar :size=\"30\" :person=\"personMap[key]\"/>\r\n              {{ personMap[key].full_name }}\r\n            </div>\r\n          </th>\r\n          <td\r\n            class=\"average datatable-row-header\"\r\n            :style=\"{left: averageColumnX}\"\r\n            v-if=\"detailLevel === 'month'\"\r\n          >\r\n            {{ getQuotaAverage(key, { year }) }}\r\n          </td>\r\n          <td\r\n            class=\"average datatable-row-header\"\r\n            :style=\"{left: averageColumnX}\"\r\n            v-if=\"detailLevel === 'week'\"\r\n          >\r\n            {{ getQuotaAverage(key, { year }) }}\r\n          </td>\r\n          <td\r\n            class=\"average datatable-row-header\"\r\n            :style=\"{left: averageColumnX}\"\r\n            v-if=\"detailLevel === 'day'\"\r\n          >\r\n            {{ getQuotaAverage(key, { year, month }) }}\r\n          </td>\r\n          <td\r\n            :class=\"{\r\n              selected: isMonthSelected(key, year, month)\r\n            }\"\r\n            :key=\"'month-' + month\"\r\n            v-for=\"month in monthRange\"\r\n            v-if=\"detailLevel === 'month'\"\r\n          >\r\n            <router-link\r\n              class=\"quota-button\"\r\n              :to=\"episodifyRoute({\r\n                name: 'quota-month-person',\r\n                params: {\r\n                  person_id: key,\r\n                  year: year,\r\n                  month: month\r\n                }\r\n              })\"\r\n              v-if=\"getQuota(key, {year, month})\"\r\n            >\r\n              {{ getQuota(key, {year, month}) }}\r\n            </router-link>\r\n            <span v-else>-</span>\r\n          </td>\r\n\r\n          <td\r\n            :class=\"{\r\n              selected: isWeekSelected(key, year, week)\r\n            }\"\r\n            :key=\"'week-' + week\"\r\n            v-for=\"week in weekRange\"\r\n            v-if=\"detailLevel === 'week'\"\r\n          >\r\n            <router-link\r\n              class=\"quota-button\"\r\n              :to=\"episodifyRoute({\r\n                name: 'quota-week-person',\r\n                params: {\r\n                  person_id: key,\r\n                  year: year,\r\n                  week: week\r\n                }\r\n              })\"\r\n              v-if=\"getQuota(key, {year, week})\"\r\n            >\r\n              {{ getQuota(key, {year, week}) }}\r\n            </router-link>\r\n            <span v-else>\r\n            -\r\n            </span>\r\n          </td>\r\n\r\n          <td\r\n            :class=\"{\r\n              weekend: isWeekend(year, month, day),\r\n              selected: isDaySelected(key, year, month, day)\r\n            }\"\r\n            :key=\"'day-' + day\"\r\n            v-for=\"day in dayRange\"\r\n            v-if=\"detailLevel === 'day'\"\r\n          >\r\n            <router-link\r\n              class=\"quota-button\"\r\n              :to=\"episodifyRoute({\r\n                name: 'quota-day-person',\r\n                params: {\r\n                  person_id: key,\r\n                  year: year,\r\n                  month: month,\r\n                  day: day\r\n                }\r\n              })\"\r\n              v-if=\"getQuota(key, {year, month, day})\"\r\n            >\r\n              {{ getQuota(key, {year, month, day}) }}\r\n            </router-link>\r\n            <span v-else>\r\n            -\r\n            </span>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div\r\n    class=\"has-text-centered empty-quota\"\r\n    v-if=\"this.quotaLength === 0 && !isLoading\"\r\n  >\r\n    <p class=\"info\">{{ $t('quota.no_quota') }}</p>\r\n  </div>\r\n\r\n  <table-info\r\n    :is-loading=\"isLoading\"\r\n    :is-error=\"isError\"\r\n  />\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport moment from 'moment-timezone'\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { episodifyRoute } from '../../../lib/path'\r\nimport PeopleAvatar from '../../widgets/PeopleAvatar'\r\nimport TableInfo from '../../widgets/TableInfo'\r\nimport {\r\n  monthToString,\r\n  getMonthRange,\r\n  getWeekRange,\r\n  getDayRange\r\n} from '../../../lib/time'\r\n\r\nexport default {\r\n  name: 'quota',\r\n\r\n  components: {\r\n    PeopleAvatar,\r\n    TableInfo\r\n  },\r\n\r\n  props: {\r\n    taskTypeId: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    detailLevel: {\r\n      type: String,\r\n      default: 'day',\r\n      required: true\r\n    },\r\n    countMode: {\r\n      type: String,\r\n      default: 'frames',\r\n      required: true\r\n    },\r\n    year: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    month: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    week: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    day: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      currentMonth: moment().month() + 1,\r\n      currentYear: moment().year(),\r\n      currentWeek: moment().week(),\r\n      detailsTitle: '',\r\n      detailsMap: {},\r\n      isPanelShown: false,\r\n      isLoading: true,\r\n      isError: false,\r\n      quotaMap: {},\r\n      quotaLength: 0,\r\n      selected: undefined,\r\n      averageColumnX: '12rem'\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    if (Object.keys(this.shotMap).length < 2) {\r\n      setTimeout(() => {\r\n        this.loadShots((err) => {\r\n          setTimeout(() => {\r\n            this.isLoading = false\r\n          }, 200)\r\n          if (!err) {\r\n            this.loadData()\r\n          }\r\n        })\r\n      }, 100)\r\n    } else {\r\n      if (!this.isShotsLoading) this.isLoading = false\r\n      this.loadData()\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      'currentEpisode',\r\n      'isShotsLoading',\r\n      'shotMap',\r\n      'personMap'\r\n    ]),\r\n\r\n    monthRange () {\r\n      return getMonthRange(this.year, this.currentYear, this.currentMonth)\r\n    },\r\n\r\n    dayRange () {\r\n      return getDayRange(\r\n        this.year,\r\n        this.month,\r\n        this.currentYear,\r\n        this.currentMonth\r\n      )\r\n    },\r\n\r\n    weekRange () {\r\n      return getWeekRange(this.year, this.currentYear, this.currentWeek)\r\n    },\r\n\r\n    personIds () {\r\n      const personIds = Object.keys(this.quotaMap)\r\n      return personIds.sort((a, b) => {\r\n        const personAName = this.personMap[a].full_name\r\n        const personBName = this.personMap[b].full_name\r\n        return personAName.localeCompare(personBName)\r\n      })\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      'loadShots',\r\n      'computeQuota',\r\n      'getPeriodDetails'\r\n    ]),\r\n\r\n    episodifyRoute (route) {\r\n      if (this.currentEpisode) {\r\n        episodifyRoute(route, this.currentEpisode.id)\r\n      }\r\n      return route\r\n    },\r\n\r\n    isWeekend (year, month, day) {\r\n      let date = moment(`${year}-${month}-${day}`, 'YYYY-MM-DD')\r\n      if (day < 10) date = moment(`${year}-${month}-0${day}`, 'YYYY-MM-DD')\r\n      return [0, 6].includes(date.day())\r\n    },\r\n\r\n    loadData () {\r\n      if (this.taskTypeId) {\r\n        this.computeQuota({\r\n          taskTypeId: this.taskTypeId,\r\n          detailLevel: this.detailLevel,\r\n          countMode: this.countMode\r\n        })\r\n          .then(quotas => {\r\n            this.quotaMap = quotas\r\n            this.isLoading = false\r\n            this.quotaLength = Object.keys(this.quotaMap).length\r\n            this.calcAverageColumnX()\r\n          })\r\n      }\r\n    },\r\n\r\n    loadDetails (personId, dateString) {\r\n      this.loadShots((err) => {\r\n        this.isLoading = true\r\n        if (err) {\r\n          console.error(err)\r\n        } else {\r\n          if (this.taskTypeId) {\r\n            this.getPeriodDetails({\r\n              taskTypeId: this.taskTypeId,\r\n              detailLevel: this.detailLevel,\r\n              personId,\r\n              dateString\r\n            })\r\n              .then(shots => {\r\n                this.detailsMap = shots\r\n                this.isLoading = false\r\n              })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    monthToString,\r\n\r\n    dateDigit (date) {\r\n      return date.toString().padStart(2, '0')\r\n    },\r\n\r\n    getQuota (personId, opt = {}) {\r\n      if (opt.day) {\r\n        const yearKey =\r\n          `${opt.year}-${this.dateDigit(opt.month)}-${this.dateDigit(opt.day)}`\r\n        return this.quotaMap[personId][yearKey]\r\n      } else if (opt.week) {\r\n        const weekKey = `${opt.year}-${opt.week}`\r\n        return this.quotaMap[personId][weekKey]\r\n      } else {\r\n        const dayKey = `${opt.year}-${this.dateDigit(opt.month)}`\r\n        return this.quotaMap[personId][dayKey]\r\n      }\r\n    },\r\n\r\n    getQuotaAverage (personId, opt = {}) {\r\n      let average\r\n      if (opt.month) {\r\n        const monthKey = opt.year + '-' + this.dateDigit(opt.month)\r\n        average = this.quotaMap[personId].average[monthKey]\r\n      } else if (opt.week) {\r\n        const weekKey = `${opt.year}-${opt.week}`\r\n        average = this.quotaMap[personId].average[weekKey]\r\n      } else if (this.quotaMap[personId].average) {\r\n        average = this.quotaMap[personId].average[opt.year]\r\n      }\r\n      return average ? average.toFixed(2) : '-'\r\n    },\r\n\r\n    isDaySelected (personId, year, month, day) {\r\n      return (\r\n        this.$route.params.person_id &&\r\n        this.$route.params.person_id === personId &&\r\n        this.$route.params.year === year &&\r\n        this.$route.params.month === month &&\r\n        this.$route.params.day === day\r\n      )\r\n    },\r\n\r\n    isWeekSelected (personId, year, week) {\r\n      return (\r\n        this.$route.params.person_id &&\r\n        this.$route.params.person_id === personId &&\r\n        this.$route.params.year === year &&\r\n        this.$route.params.week === week\r\n      )\r\n    },\r\n\r\n    isMonthSelected (personId, year, month) {\r\n      return (\r\n        this.$route.params.person_id &&\r\n        this.$route.params.person_id === personId &&\r\n        this.$route.params.year === year &&\r\n        this.$route.params.month === month\r\n      )\r\n    },\r\n\r\n    calcAverageColumnX () {\r\n      if (this.quotaLength > 0) {\r\n        this.averageColumnX = `${this.$refs.rowHeaderName.offsetWidth}px`\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    taskTypeId () {\r\n      if (this.taskTypeId) {\r\n        this.loadData()\r\n      }\r\n    },\r\n\r\n    detailLevel () {\r\n      this.loadData()\r\n    },\r\n\r\n    countMode () {\r\n      this.loadData()\r\n    },\r\n\r\n    shotMap () {\r\n      this.loadData()\r\n    },\r\n\r\n    $route () {\r\n      const els = document.getElementsByClassName('selected')\r\n      if (els.length === 0) { // selected element is not visible\r\n        setTimeout(() => {\r\n          this.$refs.body.scrollLeft += 380\r\n        }, 100)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n  .dark {\r\n    .weekend {\r\n      background-color: $dark-grey;\r\n    }\r\n   .quota-button:hover {\r\n      color: #333;\r\n    }\r\n  }\r\n\r\n  .data-list {\r\n    margin-top: 0;\r\n  }\r\n\r\n  .datatable-wrapper {\r\n    overflow: auto;\r\n    margin-bottom: 1rem;\r\n  }\r\n\r\n  .datatable {\r\n    min-width: auto;\r\n    .name {\r\n      min-width: 12rem;\r\n      text-align: left;\r\n      justify-content: flex-start;\r\n      .avatar {\r\n        margin-right: .5rem;\r\n      }\r\n    }\r\n    .average {\r\n      width: 8rem;\r\n    }\r\n    th,\r\n    td {\r\n      text-align: center\r\n    }\r\n  }\r\n\r\n  .datatable-head th {\r\n    min-width: 4rem;\r\n  }\r\n\r\n  .datatable-body th {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .datatable-body {\r\n    th, td {\r\n      border: 0;\r\n    }\r\n  }\r\n\r\n  .quota-button {\r\n    border-radius: .5rem;\r\n    padding: .5rem;\r\n    background: transparent;\r\n    border: 0;\r\n    cursor: pointer;\r\n    color: inherit;\r\n    font-size: inherit;\r\n    &:hover,\r\n    &:focus,\r\n    &.is-selected {\r\n      background-color: $dark-grey-lightest;\r\n    }\r\n  }\r\n\r\n  .empty-quota {\r\n    width: 100%;\r\n  }\r\n\r\n  .selected .quota-button {\r\n    background: $purple;\r\n    color: #333;\r\n  }\r\n\r\n  .quota-button:hover {\r\n    background: #BBEEBB;\r\n  }\r\n\r\n  .weekend {\r\n    background-color: $white-grey;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Quota.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Quota.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Quota.vue?vue&type=template&id=46cf4d41&scoped=true&\"\nimport script from \"./Quota.vue?vue&type=script&lang=js&\"\nexport * from \"./Quota.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Quota.vue?vue&type=style&index=0&id=46cf4d41&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46cf4d41\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"people-timesheet-info\"},[_c('div',{staticClass:\"close\"},[_c('router-link',{staticClass:\"close-button\",attrs:{\"to\":_vm.closeRoute}},[_c('x-icon')],1)],1),_c('div',{staticClass:\"flexrow\"},[_c('people-avatar',{staticClass:\"flexrow-item\",attrs:{\"person\":_vm.person,\"no-cache\":true}}),_c('page-title',{staticClass:\"flexrow-item\",attrs:{\"text\":_vm.person.full_name}})],1),(_vm.isMonthInfo)?_c('div',{staticClass:\"info-date\"},[_vm._v(\" \"+_vm._s(_vm.monthString)+\" \"+_vm._s(_vm.year)+\" \")]):(_vm.isWeekInfo)?_c('div',{staticClass:\"info-date\"},[_vm._v(\" week \"+_vm._s(_vm.week)+\", \"+_vm._s(_vm.startDay)+\" - \"+_vm._s(_vm.endDay)+\" \"+_vm._s(_vm.weekMonth)+\" \"+_vm._s(_vm.year)+\" \")]):(_vm.isDayInfo)?_c('div',{staticClass:\"info-date\"},[_vm._v(\" \"+_vm._s(_vm.day)+\" \"+_vm._s(_vm.monthString)+\" \"+_vm._s(_vm.year)+\" \")]):_vm._e(),_c('quota-shot-list',{staticClass:\"time-spent-list\",attrs:{\"count-mode\":_vm.countMode,\"shots\":_vm.shots,\"is-loading\":_vm.isLoading,\"is-error\":_vm.isLoadingError}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[(!_vm.isLoading)?_c('table',{staticClass:\"details table\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(_vm._s(_vm.$t('quota.details_name')))]),_c('th',[_vm._v(\" \"+_vm._s(this.countMode === 'seconds' ? _vm.$t('quota.details_seconds') : _vm.$t('quota.details_frames'))+\" \")])])]),_c('tbody',_vm._l((_vm.shots),function(shot){return _c('tr',{key:(\"shot-quota-\" + (shot.id))},[_c('td',[_vm._v(_vm._s(shot.full_name))]),_c('td',[_vm._v(_vm._s(_vm.getQuota(shot)))])])}),0)]):_vm._e(),_c('table-info',{attrs:{\"is-loading\":_vm.isLoading,\"is-error\":_vm.isLoadingError}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"data-list\">\r\n  <table class=\"details table\" v-if=\"!isLoading\">\r\n    <thead>\r\n      <tr>\r\n        <th>{{ $t('quota.details_name') }}</th>\r\n        <th>\r\n        {{\r\n          this.countMode === 'seconds'\r\n            ? $t('quota.details_seconds')\r\n            : $t('quota.details_frames')\r\n        }}\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr\r\n        :key=\"`shot-quota-${shot.id}`\"\r\n        v-for=\"shot in shots\"\r\n      >\r\n        <td>{{ shot.full_name }}</td>\r\n        <td>{{ getQuota(shot) }}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <table-info\r\n    :is-loading=\"isLoading\"\r\n    :is-error=\"isLoadingError\"\r\n  />\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nimport { frameToSeconds } from '@/lib/video'\r\nimport TableInfo from '@/components/widgets/TableInfo'\r\n\r\nexport default {\r\n  name: 'quota-shot-list',\r\n\r\n  components: {\r\n    TableInfo\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      projectNames: {}\r\n    }\r\n  },\r\n\r\n  props: {\r\n    shots: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    isLoading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    isLoadingError: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    countMode: {\r\n      type: String,\r\n      default: 'frames'\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      'currentProduction',\r\n      'lastProductionScreen',\r\n      'taskTypeMap'\r\n    ])\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n    ]),\r\n\r\n    getQuota (shot) {\r\n      if (this.countMode === 'seconds') {\r\n        return frameToSeconds(shot.nb_frames, this.currentProduction, shot)\r\n      } else {\r\n        return shot.nb_frames\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dark {\r\n  header tr:hover {\r\n    background: transparent;\r\n  }\r\n\r\n  .table {\r\n    thead,\r\n    tbody tr:nth-child(odd) {\r\n      color: $white-grey;\r\n      background: #36393F;\r\n    }\r\n\r\n    tbody tr:nth-child(even) {\r\n      color: $white-grey;\r\n      background: #46494F;\r\n    }\r\n\r\n    thead th,\r\n    thead:hover {\r\n      color: $white-grey;\r\n      background: #36393F;\r\n      border-color: #666666;\r\n    }\r\n\r\n    tbody td {\r\n      border-color: #25282E;\r\n    }\r\n\r\n    tbody tr:hover {\r\n      color: $white-grey;\r\n      background: #5E6169;\r\n    }\r\n  }\r\n}\r\n\r\ntbody {\r\n  tr:nth-child(even) {\r\n    background: #F6F6F6;\r\n  }\r\n\r\n  tr:hover {\r\n    background: $light-green-lightest;\r\n  }\r\n}\r\n\r\n.name {\r\n  width: 300px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuotaShotList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuotaShotList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QuotaShotList.vue?vue&type=template&id=363f2e28&scoped=true&\"\nimport script from \"./QuotaShotList.vue?vue&type=script&lang=js&\"\nexport * from \"./QuotaShotList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QuotaShotList.vue?vue&type=style&index=0&id=363f2e28&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"363f2e28\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n<div class=\"people-timesheet-info\">\r\n  <div class=\"close\">\r\n    <router-link class=\"close-button\" :to=\"closeRoute\">\r\n      <x-icon />\r\n    </router-link>\r\n  </div>\r\n\r\n  <div class=\"flexrow\">\r\n    <people-avatar class=\"flexrow-item\" :person=\"person\" :no-cache=true />\r\n    <page-title class=\"flexrow-item\" :text=\"person.full_name\" />\r\n  </div>\r\n  <div\r\n    class=\"info-date\"\r\n    v-if=\"isMonthInfo\"\r\n  >\r\n    {{ monthString }} {{ year }}\r\n  </div>\r\n\r\n  <div\r\n    class=\"info-date\"\r\n    v-else-if=\"isWeekInfo\"\r\n  >\r\n    week {{ week }}, {{ startDay }} - {{ endDay }} {{ weekMonth }} {{ year }}\r\n  </div>\r\n\r\n  <div\r\n    class=\"info-date\"\r\n    v-else-if=\"isDayInfo\"\r\n  >\r\n    {{ day }} {{ monthString }} {{ year }}\r\n  </div>\r\n\r\n  <quota-shot-list\r\n    class=\"time-spent-list\"\r\n    :count-mode=\"countMode\"\r\n    :shots=\"shots\"\r\n    :is-loading=\"isLoading\"\r\n    :is-error=\"isLoadingError\"\r\n  />\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment-timezone'\r\n\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { XIcon } from 'vue-feather-icons'\r\nimport PageTitle from '../widgets/PageTitle'\r\nimport PeopleAvatar from '../widgets/PeopleAvatar'\r\nimport QuotaShotList from '../lists/QuotaShotList'\r\nimport { monthToString } from '../../lib/time'\r\n\r\nexport default {\r\n  name: 'shot-quota-info',\r\n\r\n  components: {\r\n    XIcon,\r\n    PageTitle,\r\n    PeopleAvatar,\r\n    QuotaShotList\r\n  },\r\n\r\n  props: {\r\n    person: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    year: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    month: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    week: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    day: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    countMode: {\r\n      type: String,\r\n      default: 'frames'\r\n    },\r\n    isLoading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    isLoadingError: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    shots: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      'currentEpisode',\r\n      'currentProduction'\r\n    ]),\r\n\r\n    startDay () {\r\n      return moment()\r\n        .day('Monday')\r\n        .year(this.year)\r\n        .week(this.week)\r\n        .date()\r\n    },\r\n\r\n    endDay () {\r\n      return moment()\r\n        .day('Monday')\r\n        .year(this.year)\r\n        .week(this.week)\r\n        .add('days', 6)\r\n        .date()\r\n    },\r\n\r\n    weekMonth () {\r\n      return moment()\r\n        .day('Monday')\r\n        .year(this.year)\r\n        .week(this.week)\r\n        .format('MMM')\r\n    },\r\n\r\n    monthString () {\r\n      return monthToString(this.month)\r\n    },\r\n\r\n    isMonthInfo () {\r\n      return this.$route.path.indexOf('month') > 0\r\n    },\r\n\r\n    isWeekInfo () {\r\n      return this.$route.path.indexOf('week') > 0\r\n    },\r\n\r\n    isDayInfo () {\r\n      return this.$route.path.indexOf('day') > 0\r\n    },\r\n\r\n    closeRoute () {\r\n      if (!this.currentProduction) return {}\r\n      let route = {\r\n        name: 'quota',\r\n        production_id: this.currentProduction.id\r\n      }\r\n      if (this.isMonthInfo) {\r\n        route = {\r\n          name: 'quota-month',\r\n          params: {\r\n            year: this.year\r\n          }\r\n        }\r\n      } else if (this.isWeekInfo) {\r\n        route = {\r\n          name: 'quota-week',\r\n          params: {\r\n            year: this.year\r\n          }\r\n        }\r\n      } else if (this.isDayInfo) {\r\n        route = {\r\n          name: 'quota-day',\r\n          params: {\r\n            year: this.year,\r\n            month: this.month\r\n          }\r\n        }\r\n      }\r\n      if (this.currentEpisode) {\r\n        route.name = `episode-${route.name}`\r\n        route.params.episode_id = this.currentEpisode.id\r\n      }\r\n      return route\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n    ]),\r\n\r\n    onCloseClicked () {\r\n      this.$emit('close')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dark .close-button:hover {\r\n  background: $dark-grey-lightest;\r\n}\r\n\r\n.data-list {\r\n  padding-bottom: 5em;\r\n}\r\n\r\n.people-timesheet-info {\r\n  padding: 1em;\r\n}\r\n\r\n.info-date {\r\n  font-size: 1.5em;\r\n  margin-top: 1em;\r\n  text-transform: capitalize;\r\n}\r\n\r\n.close {\r\n  text-align: right;\r\n}\r\n\r\n.close-button {\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  text-align: center;\r\n  padding-top: 3px;\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\n.close-button:hover {\r\n  display: inline-block;\r\n  background: $white-grey;\r\n  border-radius: 50%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleQuotaInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleQuotaInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PeopleQuotaInfo.vue?vue&type=template&id=5ef21a06&scoped=true&\"\nimport script from \"./PeopleQuotaInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./PeopleQuotaInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PeopleQuotaInfo.vue?vue&type=style&index=0&id=5ef21a06&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ef21a06\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n<div\r\n  class=\"columns fixed-page\"\r\n>\r\n  <div\r\n    class=\"column main-column\"\r\n  >\r\n    <div class=\"flexrow filters\">\r\n      <div class=\"flexrow-item\">\r\n        <combobox-task-type\r\n          class=\"flexrow-item\"\r\n          :label=\"$t('quota.type_label')\"\r\n          :task-type-list=\"shotTaskTypes\"\r\n          v-model=\"taskTypeId\"\r\n        />\r\n      </div>\r\n      <div class=\"flexrow-item\">\r\n        <combobox\r\n          class=\"flexrow-item\"\r\n          :label=\"$t('quota.detail_label')\"\r\n          :options=\"detailLevelOptions\"\r\n          v-model=\"detailLevelString\"\r\n        />\r\n      </div>\r\n\r\n      <combobox\r\n        class=\"flexrow-item\"\r\n        :label=\"$t('quota.month_label')\"\r\n        :options=\"monthOptions\"\r\n        v-model=\"monthString\"\r\n        v-if=\"detailLevelString === 'day'\"\r\n      />\r\n\r\n      <combobox\r\n        class=\"flexrow-item\"\r\n        :label=\"$t('quota.year_label')\"\r\n        :options=\"yearOptions\"\r\n        v-model=\"yearString\"\r\n      />\r\n\r\n      <div class=\"flexrow-item\">\r\n        <combobox\r\n          class=\"flexrow-item\"\r\n          :label=\"$t('quota.count_label')\"\r\n          :options=\"countModeOptions\"\r\n          v-model=\"countMode\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <quota\r\n      :taskTypeId=\"taskTypeId\"\r\n      :detailLevel=\"detailLevelString\"\r\n      :year=\"currentYear\"\r\n      :month=\"currentMonth\"\r\n      :week=\"currentWeek\"\r\n      :day=\"currentDay\"\r\n      :currentPerson=\"currentPerson\"\r\n      :countMode=\"currentMode\"\r\n    />\r\n  </div>\r\n  <div\r\n    class=\"column side-column\"\r\n    v-if=\"showInfo\"\r\n  >\r\n    <people-quota-info\r\n      :person=\"currentPerson\"\r\n      :year=\"currentYear\"\r\n      :month=\"currentMonth\"\r\n      :week=\"currentWeek\"\r\n      :day=\"currentDay\"\r\n      :is-loading=\"false\"\r\n      :is-loading-error=\"false\"\r\n      :shots=\"personShots\"\r\n      :count-mode=\"countMode\"\r\n      @close=\"hideSideInfo\"\r\n    />\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment-timezone'\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nimport { monthToString, range } from '../../lib/time'\r\nimport { episodifyRoute } from '../../lib/path'\r\nimport Combobox from '../widgets/Combobox'\r\nimport ComboboxTaskType from '../widgets/ComboboxTaskType'\r\nimport Quota from './quota/Quota'\r\nimport PeopleQuotaInfo from '../sides/PeopleQuotaInfo'\r\n\r\nexport default {\r\n  name: 'production-quota',\r\n  components: {\r\n    Combobox,\r\n    ComboboxTaskType,\r\n    PeopleQuotaInfo,\r\n    Quota\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      taskTypeId: '',\r\n      countMode: 'frames',\r\n      countModeOptions: [\r\n        { label: 'Frames', value: 'frames' },\r\n        { label: 'Seconds', value: 'seconds' }\r\n      ],\r\n      detailLevelOptions: [\r\n        { label: 'Day', value: 'day' },\r\n        { label: 'Week', value: 'week' },\r\n        { label: 'Month', value: 'month' }\r\n      ],\r\n      currentYear: moment().year(),\r\n      currentMonth: moment().month() + 1,\r\n      currentWeek: moment().week(),\r\n      currentDay: moment().date(),\r\n      currentPerson: this.getCurrentPerson(),\r\n      currentMode: 'frames',\r\n\r\n      detailLevelString: 'day',\r\n      detailLevel: 'day',\r\n\r\n      isLoading: false,\r\n      isLoadingError: false,\r\n      monthString: `${moment().month() + 1}`,\r\n\r\n      personShots: [],\r\n      showInfo: false,\r\n      yearString: `${moment().year()}`\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.loadRoute()\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      'currentEpisode',\r\n      'currentProduction',\r\n      'shotTaskTypes',\r\n      'personMap'\r\n    ]),\r\n\r\n    yearOptions () {\r\n      const year = 2018\r\n      const currentYear = moment().year()\r\n      return range(year, currentYear)\r\n        .map(year => ({\r\n          label: year,\r\n          value: `${year}`\r\n        }))\r\n    },\r\n\r\n    monthOptions () {\r\n      const currentYear = `${moment().year()}`\r\n      const month = 1\r\n      const currentMonth = moment().month() + 1\r\n      let monthRange = range(month, 12)\r\n      if (currentYear === this.yearString) {\r\n        monthRange = range(month, currentMonth)\r\n      }\r\n\r\n      return monthRange.map(month => ({\r\n        label: monthToString(month),\r\n        value: `${month}`\r\n      }))\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      'computeQuota',\r\n      'getPersonShots',\r\n      'loadShots'\r\n    ]),\r\n\r\n    getCurrentPerson () {\r\n      const personId = this.$route.params.person_id\r\n      if (personId && this.personMap) {\r\n        return this.personMap[personId]\r\n      } else {\r\n        return {}\r\n      }\r\n    },\r\n\r\n    loadRoute () {\r\n      const { month, year, week, day } = this.$route.params\r\n      const { countMode, taskTypeId } = this.$route.query\r\n\r\n      if (this.$route.path.indexOf('week') > 0) this.detailLevel = 'week'\r\n      if (this.$route.path.indexOf('month') > 0) this.detailLevel = 'month'\r\n      if (this.$route.path.indexOf('day') > 0) this.detailLevel = 'day'\r\n\r\n      this.currentPerson = this.getCurrentPerson()\r\n      this.detailLevelString = this.detailLevel\r\n      if (countMode) {\r\n        this.countMode = countMode\r\n        this.currentMode = this.countMode\r\n      }\r\n      if (taskTypeId) {\r\n        this.taskTypeId = taskTypeId\r\n      } else {\r\n        const key = `quota:${this.currentProduction.id}:task-type-id`\r\n        this.taskTypeId =\r\n          localStorage.getItem(key) || this.shotTaskTypes[0].id\r\n      }\r\n      if (month) {\r\n        this.currentMonth = Number(month)\r\n        this.monthString = `${month}`\r\n      }\r\n      if (year) {\r\n        this.currentYear = Number(year)\r\n        this.yearString = `${year}`\r\n      }\r\n      if (week) {\r\n        this.currentWeek = Number(week)\r\n        this.weekString = `${week}`\r\n      }\r\n      if (day) {\r\n        this.currentDay = Number(day)\r\n      }\r\n\r\n      if (this.$route.path.indexOf('person') > 0) {\r\n        this.getPersonShots({\r\n          personId: this.currentPerson.id,\r\n          detailLevel: this.detailLevel,\r\n          taskTypeId: this.taskTypeId,\r\n          year,\r\n          month,\r\n          week,\r\n          day\r\n        })\r\n          .then(shots => {\r\n            this.personShots = shots\r\n            this.showSideInfo()\r\n          })\r\n      } else {\r\n        this.hideSideInfo()\r\n      }\r\n    },\r\n\r\n    showSideInfo () {\r\n      this.showInfo = true\r\n    },\r\n\r\n    hideSideInfo () {\r\n      this.showInfo = false\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    detailLevelString () {\r\n      if (this.detailLevel !== this.detailLevelString) {\r\n        const route = {\r\n          name: `quota-${this.detailLevelString}`,\r\n          params: {\r\n            year: this.currentYear\r\n          },\r\n          query: {\r\n            countMode: this.countMode\r\n          }\r\n        }\r\n        if (this.detailLevelString === 'day') {\r\n          route.params.month = this.currentMonth\r\n        }\r\n        this.$router.push(episodifyRoute(route, this.currentEpisode.id))\r\n      }\r\n    },\r\n\r\n    yearString () {\r\n      const year = Number(this.yearString)\r\n      const currentMonth = moment().month() + 1\r\n      if (this.currentYear !== year) {\r\n        const route = {\r\n          name: `quota-${this.detailLevelString}`,\r\n          params: {\r\n            year: year\r\n          },\r\n          query: {\r\n            countMode: this.countMode\r\n          }\r\n        }\r\n        if (this.detailLevelString === 'day') {\r\n          route.params.month = `${Math.min(Number(this.monthString), currentMonth)}`\r\n        }\r\n        this.$router.push(episodifyRoute(route, this.currentEpisode.id))\r\n      }\r\n    },\r\n\r\n    monthString () {\r\n      if (this.currentMonth !== Number(this.monthString)) {\r\n        const route = {\r\n          name: 'quota-day',\r\n          params: {\r\n            year: this.currentYear,\r\n            month: Number(this.monthString)\r\n          },\r\n          query: {\r\n            countMode: this.countMode\r\n          }\r\n        }\r\n        this.$router.push(episodifyRoute(route, this.currentEpisode.id))\r\n      }\r\n    },\r\n\r\n    countMode () {\r\n      if (this.currentMode !== this.countMode) {\r\n        this.$router.push({\r\n          query: {\r\n            countMode: this.countMode\r\n          }\r\n        })\r\n        this.currentMode = this.countMode\r\n      }\r\n    },\r\n\r\n    taskTypeId () {\r\n      const key = `quota:${this.currentProduction.id}:task-type-id`\r\n      localStorage.setItem(key, this.taskTypeId)\r\n      this.$router.push({\r\n        query: {\r\n          taskTypeId: this.taskTypeId\r\n        }\r\n      })\r\n    },\r\n\r\n    currentProduction () {\r\n      this.isLoading = true\r\n      this.loadShots(() => {\r\n        this.loadRoute()\r\n        this.isLoading = false\r\n      })\r\n    },\r\n\r\n    currentEpisode () {\r\n      this.isLoading = true\r\n      this.loadShots(() => {\r\n        this.loadRoute()\r\n        this.isLoading = false\r\n      })\r\n    },\r\n\r\n    $route () {\r\n      this.loadRoute()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dark {\r\n  .filters {\r\n    color: $white-grey;\r\n  }\r\n}\r\n\r\n.filters {\r\n  padding-bottom: 4rem;\r\n\r\n  .field {\r\n    padding-bottom: 0;\r\n    margin-bottom: 0;\r\n  }\r\n\r\n  .overall-man-days {\r\n    width: 120px;\r\n    font-size: 0.9em;\r\n    margin-right: 1em;\r\n  }\r\n}\r\n\r\n.fixed-page {\r\n  padding: 1em;\r\n  padding-top: 90px;\r\n  padding-left: 2em;\r\n}\r\n\r\n.main-column {\r\n  display: flex;\r\n  border: 0;\r\n  overflow: hidden;\r\n  flex-direction: column;\r\n}\r\n\r\n.zoom-level {\r\n  margin-top: -10px;\r\n}\r\n\r\n.side-column {\r\n  margin: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductionQuota.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductionQuota.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductionQuota.vue?vue&type=template&id=4c053b1b&scoped=true&\"\nimport script from \"./ProductionQuota.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductionQuota.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProductionQuota.vue?vue&type=style&index=0&id=4c053b1b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c053b1b\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductionQuota.vue?vue&type=style&index=0&id=4c053b1b&lang=scss&scoped=true&\""],"sourceRoot":""}